---
title: 'Bond and validator configurations'
description: 'Learn how to configure your Arbitrum chain with a custom bond and validator configurations'
author: pete-vielhaber
sme:
content_type: how-to
tags: ['hide-from-search']
unlisted: true
---

<a data-quicklook-from="arbitrum">Arbitrum</a> Orbit chains are customizable Layer 3 (L3) chains that
settle to an Arbitrum Layer 2 (L2) chain, such as Arbitrum One. They support <a data-quicklook-from="validator">
  validator
</a> configurations to ensure chain security through bonding and <a data-quicklook-from="assertion">
  assertion
</a> challenges. Validators post assertions about the chain's state on the parent L2 chain and can <a data-quicklook-from="challenge">
  challenge
</a> incorrect assertions. Arbitrum chains can be permissioned, meaning validators must be allowlisted.
For chains that use that elect to use the BoLD protocol, permissionless validation is an option (BoLD
also supports permissioned validation).

Bonding is required for active validation, where validators place bond funds to participate. If a validator loses a challenge (e.g., due to a faulty assertion), their bond is escrowed or burned. Configurations such as the `stakeToken`, `baseStake`, and `loserStakeEscrow` are configurable during chain deployment or post-deployment via contract calls.

Arbitrum (Orbit) chains may utilize the <a data-quicklook-from="bold">BoLD</a> (Bounded Liquidity Delay) protocol for efficient dispute resolution, which affects bonding tokens (e.g., `WETH` for BoLD-enabled chains like Arbitrum One/Nova, or `ETH`/native for other chains).

## `stakeToken`

The bonded token is the asset that validators must bond to participate in asserting the chain's state on the parent L2 chain. It serves as collateral for challenges. The default is `ETH` (or parent chain's native token).

### Configuration details

- Can be `ETH` (native gas token) or any `ERC-20` token.
- **For BoLD-enabled chains** (e.g., settling to Arbitrum One or Nova), it defaults to `WETH`.
- **For non-BoLD chains**, it defaults to the <a data-quicklook-from="parent-chain">parent chain</a>'s native token (usually `ETH`).
- Currently, it's often hardcoded to `ETH` in basic deployments, but customizable to an `ERC-20` contract address in advanced setups. Future updates will expand `ERC-20` support.

### How to configure

1. **Prepare the Chain Configuration**:
   Generate the base chain config using `prepareChainConfig`. Set the `chainId` and initial owner.

   ```typescript
   import { prepareChainConfig } from '@arbitrum/orbit-sdk';

   const chainConfig = prepareChainConfig({
     chainId: 123456, // Replace with your desired chain ID
     arbitrum: {
       InitialChainOwner: '0xYourOwnerAddressHere', // Wallet address that will own the chain
       DataAvailabilityCommittee: false, // Set to true for AnyTrust chains (DAC)
     },
   });
   ```

2. **Set Up the Public Client for the Parent Chain**:
   Create a public client to interact with the parent chain.

   ```typescript
   import { createPublicClient, http } from 'viem';
   import { sepolia } from 'viem/chains'; // Example: Use 'mainnet' or 'arbitrumOne' as needed

   const parentChainPublicClient = createPublicClient({
     chain: sepolia, // Replace with your parent chain (e.g., arbitrumOne)
     transport: http('https://your-parent-chain-rpc-url'), // Replace with actual RPC URL
   });
   ```

3. **Prepare Deployment Parameters, Including `stakeToken`**:
   Use `createRollupPrepareDeploymentParamsConfig` to define the rollout config. This is where you configure the `stakeToken` (the `ERC-20` address on the parent chain) and `baseStake` (minimum stake amount in wei).

   ```typescript
   import { createRollupPrepareDeploymentParamsConfig } from '@arbitrum/orbit-sdk';

   const createRollupConfig = await createRollupPrepareDeploymentParamsConfig(
     parentChainPublicClient,
     {
       chainId: 123456, // Must match the chainId from Step 1
       owner: '0xYourOwnerAddressHere', // Must match InitialChainOwner from Step 1
       chainConfig,
       stakeToken: '0xYourStakeTokenERC20AddressHere', // ERC-20 token address on parent chain for validator staking
       baseStake: 1000000000000000000n, // Example: 1 token (adjust based on token decimals)
       // Optional: Other params like confirmPeriodBlocks, loserStakeEscrow, etc.
     },
   );
   ```

4. **Deploy the Chain**:
   Use `createRollup` to deploy. Provide validator and batch poster addresses. This step sends the transaction to the parent chain.

   ```typescript
   import { createWalletClient } from 'viem';
   import { privateKeyToAccount } from 'viem/accounts';
   import { createRollup } from '@arbitrum/orbit-sdk';

   const deployerAccount = privateKeyToAccount('0xYourDeployerPrivateKeyHere'); // Securely manage this

   const walletClient = createWalletClient({
     account: deployerAccount,
     chain: sepolia, // Match parent chain
     transport: http('https://your-parent-chain-rpc-url'),
   });

   const createRollupResults = await createRollup({
     params: {
       config: createRollupConfig,
       batchPosters: ['0xYourBatchPosterAddressHere'], // Address for posting batches
       validators: ['0xYourValidatorAddressHere'], // Validator addresses
       // Optional: nativeToken: '0xCustomGasTokenAddress' for custom fee tokens
     },
     account: deployerAccount,
     publicClient: parentChainPublicClient,
     walletClient,
   });

   console.log('Deployment Transaction Hash:', createRollupResults.transactionHash);
   console.log('Core Contracts:', createRollupResults.coreContracts);
   ```

5. **Post-Deployment (If Using AnyTrust)**:
   If `DataAvailabilityCommittee` is `true`, set the DAC keyset in the `SequencerInbox`.

   ```typescript
   import { setValidKeyset } from '@arbitrum/orbit-sdk';

   // Generate or provide your keyset (BLS public keys for the committee)
   const keyset = '0xYourGeneratedKeysetHere';

   const setKeysetResults = await setValidKeyset({
     coreContracts: createRollupResults.coreContracts,
     keyset,
     publicClient: parentChainPublicClient,
     walletClient,
   });
   ```

### Additional Notes

- Ensure the `stakeToken` is a compliant `ERC-20` on the parent chain; mismatches can cause deployment failures.
- Test on a testnet (e.g., Sepolia) first, as deployments are irreversible and cost gas.
- The owner address gains control over upgrades and settings—use a secure multisig in production.
- For production, consider a Rollup-as-a-Service (RaaS) provider for monitoring and scaling.
- **Verification**: This SDK-based method deploys directly via smart contract interactions and does not involve any UI or portal (the portal is for asset bridging, not chain deployment).

## `baseStake`

The `baseStake` is the minimum amount of the bond token that validators must deposit to bond and post assertions.

### Configuration details

- Specified as a float value (e.g., in `wei` for `ETH`).
- Must be greater than 0.
- **Balances security**: Low values ease entry but risk malicious challenges; high values deter attacks but exclude smaller validators.

### How to configure

1. **Prepare the Chain Configuration**:
   Generate the base chain config using `prepareChainConfig`. Set the `chainId` and initial owner.

   ```typescript
   import { prepareChainConfig } from '@arbitrum/orbit-sdk';

   const chainConfig = prepareChainConfig({
     chainId: 123456, // Replace with your desired chain ID
     arbitrum: {
       InitialChainOwner: '0xYourOwnerAddressHere', // Wallet address that will own the chain
       DataAvailabilityCommittee: false, // Set to true for AnyTrust chains (DAC)
     },
   });
   ```

2. **Set Up the Public Client for the Parent Chain**:
   Create a public client to interact with the parent chain.

   ```typescript
   import { createPublicClient, http } from 'viem';
   import { sepolia } from 'viem/chains'; // Example: Use 'mainnet' or 'arbitrumOne' as needed

   const parentChainPublicClient = createPublicClient({
     chain: sepolia, // Replace with your parent chain (e.g., arbitrumOne)
     transport: http('https://your-parent-chain-rpc-url'), // Replace with actual RPC URL
   });
   ```

3. **Prepare Deployment Parameters, Including `stakeToken`**:
   Use `createRollupPrepareDeploymentParamsConfig` to define the rollout config. This is where you configure the `stakeToken` (the `ERC-20` address on the parent chain) and `baseStake` (minimum stake amount in wei).

   ```typescript
   import { createRollupPrepareDeploymentParamsConfig } from '@arbitrum/orbit-sdk';

   const createRollupConfig = await createRollupPrepareDeploymentParamsConfig(
     parentChainPublicClient,
     {
       chainId: 123456, // Must match the chainId from Step 1
       owner: '0xYourOwnerAddressHere', // Must match InitialChainOwner from Step 1
       chainConfig,
       stakeToken: '0xYourStakeTokenERC20AddressHere', // ERC-20 token address on parent chain for validator staking
       baseStake: 1000000000000000000n, // Example: 1 token (adjust based on token decimals)
       // Optional: Other params like confirmPeriodBlocks, loserStakeEscrow, etc.
     },
   );
   ```

4. **Deploy the Chain**:
   Use `createRollup` to deploy. Provide validator and batch poster addresses. This step sends the transaction to the parent chain.

   ```typescript
   import { createWalletClient } from 'viem';
   import { privateKeyToAccount } from 'viem/accounts';
   import { createRollup } from '@arbitrum/orbit-sdk';

   const deployerAccount = privateKeyToAccount('0xYourDeployerPrivateKeyHere'); // Securely manage this

   const walletClient = createWalletClient({
     account: deployerAccount,
     chain: sepolia, // Match parent chain
     transport: http('https://your-parent-chain-rpc-url'),
   });

   const createRollupResults = await createRollup({
     params: {
       config: createRollupConfig,
       batchPosters: ['0xYourBatchPosterAddressHere'], // Address for posting batches
       validators: ['0xYourValidatorAddressHere'], // Validator addresses
       // Optional: nativeToken: '0xCustomGasTokenAddress' for custom fee tokens
     },
     account: deployerAccount,
     publicClient: parentChainPublicClient,
     walletClient,
   });

   console.log('Deployment Transaction Hash:', createRollupResults.transactionHash);
   console.log('Core Contracts:', createRollupResults.coreContracts);
   ```

5. **Post-Deployment (If Using AnyTrust)**:
   If `DataAvailabilityCommittee` is `true`, set the DAC keyset in the `SequencerInbox`.

   ```typescript
   import { setValidKeyset } from '@arbitrum/orbit-sdk';

   // Generate or provide your keyset (BLS public keys for the committee)
   const keyset = '0xYourGeneratedKeysetHere';

   const setKeysetResults = await setValidKeyset({
     coreContracts: createRollupResults.coreContracts,
     keyset,
     publicClient: parentChainPublicClient,
     walletClient,
   });
   ```

### Additional notes

- **Validators and Staking**: After deployment, validators bond by depositing at least `baseStake` of the `stakeToken` into the Rollup contract. This can be done via contract calls (e.g., using the `RollupUserLogic` interface).
- **Warnings**:
  - Ensure the `stakeToken` is a compliant `ERC-20` on the parent chain; mismatches can cause deployment failures.
  - Test on a testnet (e.g., Sepolia) first, as deployments are irreversible and cost gas.
  - The owner address gains control over upgrades and settings—use a secure multisig in production.
  - For production, consider a Rollup-as-a-Service (RaaS) provider for monitoring and scaling.
- **Verification**: This SDK-based method deploys directly via smart contract interactions and does not involve any UI or portal (the portal is for asset bridging, not chain deployment).

## `loserStakeEscrow`

The `loserStakeEscrow` is the address where a validator's bonded funds are sent if they lose a challenge (e.g., due to an incorrect assertion). This mechanism acts as a penalty. The default configuration has no default specified; must be configured.

### Configuration details

- Funds are escrowed rather than immediately burned, allowing potential recovery or governance decisions.
- Recommended: Set to an address controlled by the chain owner(s) for management, or a burn address (e.g., `0x000000000000000000000000000000000000dEaD`) if funds should be permanently removed.

### Configuring During Deployment

1. **Prepare Chain Config**:

   ```typescript
   import { prepareChainConfig } from '@arbitrum/orbit-sdk';

   const chainConfig = prepareChainConfig({
     chainId: 123456, // Your unique chain ID
     arbitrum: {
       InitialChainOwner: '0xYourOwnerAddressHere',
       DataAvailabilityCommittee: false, // True for AnyTrust chains
     },
   });
   ```

2. **Set Up Parent Chain Client**:

   ```typescript
   import { createPublicClient, http } from 'viem';
   import { sepolia } from 'viem/chains';

   const parentChainPublicClient = createPublicClient({
     chain: sepolia, // Replace with your parent chain
     transport: http('https://your-parent-rpc-url'),
   });
   ```

3. **Prepare Deployment Params, Including `loserStakeEscrow`**:
   Set `loserStakeEscrow` as an address (string). There is no explicit default documented, but if omitted, it may revert to a system default (e.g., zero address)—always specify for control.

   ```typescript
   import { createRollupPrepareDeploymentParamsConfig } from '@arbitrum/orbit-sdk';

   const createRollupConfig = await createRollupPrepareDeploymentParamsConfig(
     parentChainPublicClient,
     {
       chainId: 123456,
       owner: '0xYourOwnerAddressHere',
       chainConfig,
       loserStakeEscrow: '0xYourEscrowAddressHere', // e.g., owner-controlled or burn address
       // Optional: baseStake: 100000000000000000n, stakeToken: '0xERC20Address', etc.
     },
   );
   ```

4. **Deploy the Chain**:

   ```typescript
   import { createWalletClient } from 'viem';
   import { privateKeyToAccount } from 'viem/accounts';
   import { createRollup } from '@arbitrum/orbit-sdk';

   const deployerAccount = privateKeyToAccount('0xYourPrivateKey');

   const walletClient = createWalletClient({
     account: deployerAccount,
     chain: sepolia,
     transport: http('https://your-parent-rpc-url'),
   });

   const createRollupResults = await createRollup({
     params: {
       config: createRollupConfig,
       batchPosters: ['0xYourBatchPosterAddress'],
       validators: ['0xYourValidatorAddress'],
     },
     account: deployerAccount,
     publicClient: parentChainPublicClient,
     walletClient,
   });

   console.log('Rollup Address:', createRollupResults.coreContracts.rollup);
   ```

5. **For AnyTrust Chains**:
   If `DataAvailabilityCommittee` is `true`, configure the DAC keyset post-deployment using `setValidKeyset` from the SDK.

### Updating `loserStakeEscrow` Post-Deployment

The chain owner can update it by calling `setLoserStakeEscrow` on the deployed Rollup contract (address from `createRollupResults.coreContracts.rollup`):

```typescript
import { parseAbi } from 'viem';

const rollupAbi = parseAbi(['function setLoserStakeEscrow(address newLoserStakedEscrow) external']);

await walletClient.writeContract({
  address: '0xYourRollupAddress',
  abi: rollupAbi,
  functionName: 'setLoserStakeEscrow',
  args: ['0xNewEscrowAddressHere'],
});
```

### Additional Notes

- This process requires the caller to be the owner. Changes affect how challenge losses are handled, so test thoroughly.
- Setting `loserStakeEscrow` to a burn address increases the cost of failed challenges, enhancing security.
- Deploy on testnets first; mainnet deployments are costly and permanent.

## Validator configurations and how to setup them up

Validators are configured during chain deployment and can be run post-launch. Arbitrum (Orbit) chains support permissioned validators, that can be added to an allowlist.

### During deployment (initial setup)

1. In the Orbit deployment portal:
   - Specify the number of initial validators (e.g., `1` for devnets, more for production).
   - The first validator address is auto-generated with a private key (stored in downloaded JSON configs).
   - Add additional validator addresses (e.g., your wallet addresses); they get allowlisted in the Rollup contract.
2. Download `nodeConfig.json` and `orbitSetupScriptConfig.json` (these files contain validator private keys—back them up securely).
3. Clone the [orbit-setup-script repo](https://github.com/OffchainLabs/orbit-setup-script).
4. Move configs to the `config` directory.
5. Run the setup script (e.g., via Docker or locally) to fund and initialize validators:

- Example command to fund: `yarn run fund-bonder --privateKey 0xYourPrivateKey --l2rpc https://sepolia.arbitrum.io/rpc --l3rpc http://localhost:8449`.

6. Deploy the chain; validators can now bonded with the specified `baseStake` token.

### Adding validators post-deployment (permissioned chains)

1. As the upgrade executor (chain admin), call `setValidator(address[] calldata validators, bool[] calldata isValidator)` on the Rollup contract to update the allowlist.
2. Ensure the new validator has a wallet funded with the base stake amount in the stake token.

Refer to the [Run a full node](/run-arbitrum-node/02-run-full-node.mdx) article for instructions on how to get up and running.

### Assertion interval

Default to one hour for new assertions (via `--node.staker.make-assertion-interval`); must exceed the Rollup's `minimumAssertionPeriod` (~15 minutes).

For production, run multiple validators in a network. Test on devnets first. Always back up keys, as they're needed to withdraw bonds. If issues arise, refer to the official Arbitrum docs for updates, as configurations evolve.
