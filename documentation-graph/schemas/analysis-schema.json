{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://arbitrum.io/schemas/graph-analysis.json",
  "title": "Graph Analysis",
  "description": "Schema for comprehensive graph analysis results including metrics, centrality measures, and network statistics",
  "type": "object",
  "required": ["metadata", "basic", "centrality"],
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Analysis metadata and version information",
      "required": ["version", "generated"],
      "properties": {
        "version": {
          "type": "string",
          "description": "Semantic version of the analysis schema",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "generated": {
          "type": "string",
          "description": "ISO 8601 timestamp when analysis was performed",
          "format": "date-time"
        }
      }
    },
    "basic": {
      "type": "object",
      "description": "Basic graph statistics and structural properties",
      "required": [
        "totalNodes",
        "totalEdges",
        "density",
        "avgDegree",
        "isConnected",
        "nodesByType",
        "edgesByType"
      ],
      "properties": {
        "totalNodes": {
          "type": "integer",
          "description": "Total number of nodes in the graph",
          "minimum": 0
        },
        "totalEdges": {
          "type": "integer",
          "description": "Total number of edges in the graph",
          "minimum": 0
        },
        "density": {
          "type": "number",
          "description": "Graph density (ratio of actual to possible edges, 0-1)",
          "minimum": 0,
          "maximum": 1
        },
        "avgDegree": {
          "type": "number",
          "description": "Average degree (connections per node)",
          "minimum": 0
        },
        "isConnected": {
          "type": "boolean",
          "description": "Whether all nodes are reachable from any other node"
        },
        "nodesByType": {
          "type": "object",
          "description": "Count of nodes by type (document, concept, section, etc.)",
          "additionalProperties": {
            "type": "integer",
            "minimum": 0
          }
        },
        "edgesByType": {
          "type": "object",
          "description": "Count of edges by type (contains, mentions, links_to, etc.)",
          "additionalProperties": {
            "type": "integer",
            "minimum": 0
          }
        }
      }
    },
    "centrality": {
      "type": "object",
      "description": "Centrality measures identifying important nodes in the graph",
      "required": ["degree", "betweenness", "closeness"],
      "properties": {
        "degree": {
          "type": "object",
          "description": "Degree centrality: number of direct connections per node",
          "required": ["values"],
          "properties": {
            "values": {
              "type": "object",
              "description": "Degree centrality value for each node (nodeId: value)",
              "additionalProperties": {
                "type": "number",
                "minimum": 0
              }
            },
            "max": {
              "type": "number",
              "description": "Maximum degree centrality value"
            },
            "min": {
              "type": "number",
              "description": "Minimum degree centrality value"
            },
            "avg": {
              "type": "number",
              "description": "Average degree centrality value"
            }
          }
        },
        "betweenness": {
          "type": "object",
          "description": "Betweenness centrality: nodes that bridge different parts of the graph",
          "required": ["values"],
          "properties": {
            "values": {
              "type": "object",
              "description": "Betweenness centrality value for each node (nodeId: value)",
              "additionalProperties": {
                "type": "number",
                "minimum": 0
              }
            },
            "max": {
              "type": "number",
              "description": "Maximum betweenness centrality value"
            },
            "min": {
              "type": "number",
              "description": "Minimum betweenness centrality value"
            },
            "avg": {
              "type": "number",
              "description": "Average betweenness centrality value"
            }
          }
        },
        "closeness": {
          "type": "object",
          "description": "Closeness centrality: how close a node is to all other nodes",
          "required": ["values"],
          "properties": {
            "values": {
              "type": "object",
              "description": "Closeness centrality value for each node (nodeId: value)",
              "additionalProperties": {
                "type": "number",
                "minimum": 0
              }
            },
            "max": {
              "type": "number",
              "description": "Maximum closeness centrality value"
            },
            "min": {
              "type": "number",
              "description": "Minimum closeness centrality value"
            },
            "avg": {
              "type": "number",
              "description": "Average closeness centrality value"
            }
          }
        }
      }
    },
    "communities": {
      "type": "object",
      "description": "Community detection results showing clusters of related content"
    },
    "hubs": {
      "type": "array",
      "description": "Highly connected nodes serving as central hubs in the graph"
    },
    "orphans": {
      "type": "array",
      "description": "Isolated nodes with few or no connections"
    }
  }
}
