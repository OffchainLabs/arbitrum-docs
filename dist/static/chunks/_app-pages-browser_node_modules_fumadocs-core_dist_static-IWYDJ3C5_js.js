"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_fumadocs-core_dist_static-IWYDJ3C5_js"],{

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components.js":
/*!**************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   documentsStore: () => (/* reexport module object */ _components_documents_store_js__WEBPACK_IMPORTED_MODULE_1__),\n/* harmony export */   formatElapsedTime: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.formatElapsedTime),\n/* harmony export */   getDocumentIndexId: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.getDocumentIndexId),\n/* harmony export */   getDocumentProperties: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.getDocumentProperties),\n/* harmony export */   getInnerType: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.getInnerType),\n/* harmony export */   getVectorSize: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.getVectorSize),\n/* harmony export */   index: () => (/* reexport module object */ _components_index_js__WEBPACK_IMPORTED_MODULE_2__),\n/* harmony export */   internalDocumentIDStore: () => (/* reexport module object */ _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_5__),\n/* harmony export */   isArrayType: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.isArrayType),\n/* harmony export */   isGeoPointType: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.isGeoPointType),\n/* harmony export */   isVectorType: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.isVectorType),\n/* harmony export */   sorter: () => (/* reexport module object */ _components_sorter_js__WEBPACK_IMPORTED_MODULE_4__),\n/* harmony export */   tokenizer: () => (/* reexport module object */ _components_tokenizer_index_js__WEBPACK_IMPORTED_MODULE_3__),\n/* harmony export */   validateSchema: () => (/* reexport safe */ _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.validateSchema)\n/* harmony export */ });\n/* harmony import */ var _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/defaults.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/defaults.js\");\n/* harmony import */ var _components_documents_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/documents-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/documents-store.js\");\n/* harmony import */ var _components_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/index.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/index.js\");\n/* harmony import */ var _components_tokenizer_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/tokenizer/index.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/index.js\");\n/* harmony import */ var _components_sorter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/sorter.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/sorter.js\");\n/* harmony import */ var _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n\n\n\n\n\n\n//# sourceMappingURL=components.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFDeUI7QUFDbkI7QUFDYztBQUNaO0FBQ3FDO0FBQ3RGIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9jb21wb25lbnRzL2RlZmF1bHRzLmpzJztcbmV4cG9ydCAqIGFzIGRvY3VtZW50c1N0b3JlIGZyb20gJy4vY29tcG9uZW50cy9kb2N1bWVudHMtc3RvcmUuanMnO1xuZXhwb3J0ICogYXMgaW5kZXggZnJvbSAnLi9jb21wb25lbnRzL2luZGV4LmpzJztcbmV4cG9ydCAqIGFzIHRva2VuaXplciBmcm9tICcuL2NvbXBvbmVudHMvdG9rZW5pemVyL2luZGV4LmpzJztcbmV4cG9ydCAqIGFzIHNvcnRlciBmcm9tICcuL2NvbXBvbmVudHMvc29ydGVyLmpzJztcbmV4cG9ydCAqIGFzIGludGVybmFsRG9jdW1lbnRJRFN0b3JlIGZyb20gJy4vY29tcG9uZW50cy9pbnRlcm5hbC1kb2N1bWVudC1pZC1zdG9yZS5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wb25lbnRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/algorithms.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/algorithms.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BM25: () => (/* binding */ BM25),\n/* harmony export */   prioritizeTokenScores: () => (/* binding */ prioritizeTokenScores)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n\nfunction prioritizeTokenScores(arrays, boost, threshold = 0, keywordsCount) {\n    if (boost === 0) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_BOOST_VALUE');\n    }\n    const tokenScoresMap = new Map();\n    const mapsLength = arrays.length;\n    for (let i = 0; i < mapsLength; i++) {\n        const arr = arrays[i];\n        const entriesLength = arr.length;\n        for (let j = 0; j < entriesLength; j++) {\n            const [token, score] = arr[j];\n            const boostScore = score * boost;\n            const oldScore = tokenScoresMap.get(token)?.[0];\n            if (oldScore !== undefined) {\n                tokenScoresMap.set(token, [oldScore * 1.5 + boostScore, (tokenScoresMap?.get(token)?.[1] || 0) + 1]);\n            }\n            else {\n                tokenScoresMap.set(token, [boostScore, 1]);\n            }\n        }\n    }\n    const tokenScores = [];\n    for (const tokenScoreEntry of tokenScoresMap.entries()) {\n        tokenScores.push([tokenScoreEntry[0], tokenScoreEntry[1][0]]);\n    }\n    const results = tokenScores.sort((a, b) => b[1] - a[1]);\n    // If threshold is 1, it means we will return all the results with at least one search term,\n    // prioritizing the ones that contains more search terms (fuzzy match)\n    if (threshold === 1) {\n        return results;\n    }\n    // For threshold = 0 when keywordsCount is 1 (single term search),\n    // we return all matches since they automatically contain 100% of keywords\n    if (threshold === 0 && keywordsCount === 1) {\n        return results;\n    }\n    // Prepare keywords count tracking for threshold handling\n    const allResults = results.length;\n    const tokenScoreWithKeywordsCount = [];\n    for (const tokenScoreEntry of tokenScoresMap.entries()) {\n        tokenScoreWithKeywordsCount.push([tokenScoreEntry[0], tokenScoreEntry[1][0], tokenScoreEntry[1][1]]);\n    }\n    // Find the index of the last result with all keywords.\n    // Order the documents by the number of keywords they contain, and then by the score.\n    const keywordsPerToken = tokenScoreWithKeywordsCount.sort((a, b) => {\n        // Compare by the third element, higher numbers first\n        if (a[2] > b[2])\n            return -1;\n        if (a[2] < b[2])\n            return 1;\n        // If the third elements are equal, compare by the second element, higher numbers first\n        if (a[1] > b[1])\n            return -1;\n        if (a[1] < b[1])\n            return 1;\n        // If both the second and third elements are equal, consider the elements equal\n        return 0;\n    });\n    let lastTokenWithAllKeywords = undefined;\n    for (let i = 0; i < allResults; i++) {\n        if (keywordsPerToken[i][2] === keywordsCount) {\n            lastTokenWithAllKeywords = i;\n        }\n        else {\n            break;\n        }\n    }\n    // If no results had all the keywords, either bail out earlier or normalize\n    if (typeof lastTokenWithAllKeywords === 'undefined') {\n        if (threshold === 0) {\n            return [];\n        }\n        lastTokenWithAllKeywords = 0;\n    }\n    const keywordsPerTokenLength = keywordsPerToken.length;\n    const resultsWithIdAndScore = new Array(keywordsPerTokenLength);\n    for (let i = 0; i < keywordsPerTokenLength; i++) {\n        resultsWithIdAndScore[i] = [keywordsPerToken[i][0], keywordsPerToken[i][1]];\n    }\n    // If threshold is 0, it means we will only return all the results that contains ALL the search terms (exact match)\n    if (threshold === 0) {\n        return resultsWithIdAndScore.slice(0, lastTokenWithAllKeywords + 1);\n    }\n    // If the threshold is between 0 and 1, we will return all the results that contains at least the threshold of search terms\n    // For example, if threshold is 0.5, we will return all the results that contains at least 50% of the search terms\n    // (fuzzy match with a minimum threshold)\n    const thresholdLength = lastTokenWithAllKeywords + Math.ceil((threshold * 100 * (allResults - lastTokenWithAllKeywords)) / 100);\n    return resultsWithIdAndScore.slice(0, Math.min(allResults, thresholdLength));\n}\nfunction BM25(tf, matchingCount, docsCount, fieldLength, averageFieldLength, { k, b, d }) {\n    const idf = Math.log(1 + (docsCount - matchingCount + 0.5) / (matchingCount + 0.5));\n    return (idf * (d + tf * (k + 1))) / (tf + k * (1 - b + (b * fieldLength) / averageFieldLength));\n}\n//# sourceMappingURL=algorithms.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvYWxnb3JpdGhtcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDcEM7QUFDUDtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0QkFBNEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sK0VBQStFLFNBQVM7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvY29tcG9uZW50cy9hbGdvcml0aG1zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBwcmlvcml0aXplVG9rZW5TY29yZXMoYXJyYXlzLCBib29zdCwgdGhyZXNob2xkID0gMCwga2V5d29yZHNDb3VudCkge1xuICAgIGlmIChib29zdCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignSU5WQUxJRF9CT09TVF9WQUxVRScpO1xuICAgIH1cbiAgICBjb25zdCB0b2tlblNjb3Jlc01hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBtYXBzTGVuZ3RoID0gYXJyYXlzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcHNMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhcnIgPSBhcnJheXNbaV07XG4gICAgICAgIGNvbnN0IGVudHJpZXNMZW5ndGggPSBhcnIubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVudHJpZXNMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgW3Rva2VuLCBzY29yZV0gPSBhcnJbal07XG4gICAgICAgICAgICBjb25zdCBib29zdFNjb3JlID0gc2NvcmUgKiBib29zdDtcbiAgICAgICAgICAgIGNvbnN0IG9sZFNjb3JlID0gdG9rZW5TY29yZXNNYXAuZ2V0KHRva2VuKT8uWzBdO1xuICAgICAgICAgICAgaWYgKG9sZFNjb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0b2tlblNjb3Jlc01hcC5zZXQodG9rZW4sIFtvbGRTY29yZSAqIDEuNSArIGJvb3N0U2NvcmUsICh0b2tlblNjb3Jlc01hcD8uZ2V0KHRva2VuKT8uWzFdIHx8IDApICsgMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9rZW5TY29yZXNNYXAuc2V0KHRva2VuLCBbYm9vc3RTY29yZSwgMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRva2VuU2NvcmVzID0gW107XG4gICAgZm9yIChjb25zdCB0b2tlblNjb3JlRW50cnkgb2YgdG9rZW5TY29yZXNNYXAuZW50cmllcygpKSB7XG4gICAgICAgIHRva2VuU2NvcmVzLnB1c2goW3Rva2VuU2NvcmVFbnRyeVswXSwgdG9rZW5TY29yZUVudHJ5WzFdWzBdXSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdHMgPSB0b2tlblNjb3Jlcy5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSk7XG4gICAgLy8gSWYgdGhyZXNob2xkIGlzIDEsIGl0IG1lYW5zIHdlIHdpbGwgcmV0dXJuIGFsbCB0aGUgcmVzdWx0cyB3aXRoIGF0IGxlYXN0IG9uZSBzZWFyY2ggdGVybSxcbiAgICAvLyBwcmlvcml0aXppbmcgdGhlIG9uZXMgdGhhdCBjb250YWlucyBtb3JlIHNlYXJjaCB0ZXJtcyAoZnV6enkgbWF0Y2gpXG4gICAgaWYgKHRocmVzaG9sZCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgLy8gRm9yIHRocmVzaG9sZCA9IDAgd2hlbiBrZXl3b3Jkc0NvdW50IGlzIDEgKHNpbmdsZSB0ZXJtIHNlYXJjaCksXG4gICAgLy8gd2UgcmV0dXJuIGFsbCBtYXRjaGVzIHNpbmNlIHRoZXkgYXV0b21hdGljYWxseSBjb250YWluIDEwMCUgb2Yga2V5d29yZHNcbiAgICBpZiAodGhyZXNob2xkID09PSAwICYmIGtleXdvcmRzQ291bnQgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIC8vIFByZXBhcmUga2V5d29yZHMgY291bnQgdHJhY2tpbmcgZm9yIHRocmVzaG9sZCBoYW5kbGluZ1xuICAgIGNvbnN0IGFsbFJlc3VsdHMgPSByZXN1bHRzLmxlbmd0aDtcbiAgICBjb25zdCB0b2tlblNjb3JlV2l0aEtleXdvcmRzQ291bnQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRva2VuU2NvcmVFbnRyeSBvZiB0b2tlblNjb3Jlc01hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgdG9rZW5TY29yZVdpdGhLZXl3b3Jkc0NvdW50LnB1c2goW3Rva2VuU2NvcmVFbnRyeVswXSwgdG9rZW5TY29yZUVudHJ5WzFdWzBdLCB0b2tlblNjb3JlRW50cnlbMV1bMV1dKTtcbiAgICB9XG4gICAgLy8gRmluZCB0aGUgaW5kZXggb2YgdGhlIGxhc3QgcmVzdWx0IHdpdGggYWxsIGtleXdvcmRzLlxuICAgIC8vIE9yZGVyIHRoZSBkb2N1bWVudHMgYnkgdGhlIG51bWJlciBvZiBrZXl3b3JkcyB0aGV5IGNvbnRhaW4sIGFuZCB0aGVuIGJ5IHRoZSBzY29yZS5cbiAgICBjb25zdCBrZXl3b3Jkc1BlclRva2VuID0gdG9rZW5TY29yZVdpdGhLZXl3b3Jkc0NvdW50LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gQ29tcGFyZSBieSB0aGUgdGhpcmQgZWxlbWVudCwgaGlnaGVyIG51bWJlcnMgZmlyc3RcbiAgICAgICAgaWYgKGFbMl0gPiBiWzJdKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoYVsyXSA8IGJbMl0pXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgLy8gSWYgdGhlIHRoaXJkIGVsZW1lbnRzIGFyZSBlcXVhbCwgY29tcGFyZSBieSB0aGUgc2Vjb25kIGVsZW1lbnQsIGhpZ2hlciBudW1iZXJzIGZpcnN0XG4gICAgICAgIGlmIChhWzFdID4gYlsxXSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgaWYgKGFbMV0gPCBiWzFdKVxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIC8vIElmIGJvdGggdGhlIHNlY29uZCBhbmQgdGhpcmQgZWxlbWVudHMgYXJlIGVxdWFsLCBjb25zaWRlciB0aGUgZWxlbWVudHMgZXF1YWxcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSk7XG4gICAgbGV0IGxhc3RUb2tlbldpdGhBbGxLZXl3b3JkcyA9IHVuZGVmaW5lZDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFJlc3VsdHM7IGkrKykge1xuICAgICAgICBpZiAoa2V5d29yZHNQZXJUb2tlbltpXVsyXSA9PT0ga2V5d29yZHNDb3VudCkge1xuICAgICAgICAgICAgbGFzdFRva2VuV2l0aEFsbEtleXdvcmRzID0gaTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIElmIG5vIHJlc3VsdHMgaGFkIGFsbCB0aGUga2V5d29yZHMsIGVpdGhlciBiYWlsIG91dCBlYXJsaWVyIG9yIG5vcm1hbGl6ZVxuICAgIGlmICh0eXBlb2YgbGFzdFRva2VuV2l0aEFsbEtleXdvcmRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodGhyZXNob2xkID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgbGFzdFRva2VuV2l0aEFsbEtleXdvcmRzID0gMDtcbiAgICB9XG4gICAgY29uc3Qga2V5d29yZHNQZXJUb2tlbkxlbmd0aCA9IGtleXdvcmRzUGVyVG9rZW4ubGVuZ3RoO1xuICAgIGNvbnN0IHJlc3VsdHNXaXRoSWRBbmRTY29yZSA9IG5ldyBBcnJheShrZXl3b3Jkc1BlclRva2VuTGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXdvcmRzUGVyVG9rZW5MZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHRzV2l0aElkQW5kU2NvcmVbaV0gPSBba2V5d29yZHNQZXJUb2tlbltpXVswXSwga2V5d29yZHNQZXJUb2tlbltpXVsxXV07XG4gICAgfVxuICAgIC8vIElmIHRocmVzaG9sZCBpcyAwLCBpdCBtZWFucyB3ZSB3aWxsIG9ubHkgcmV0dXJuIGFsbCB0aGUgcmVzdWx0cyB0aGF0IGNvbnRhaW5zIEFMTCB0aGUgc2VhcmNoIHRlcm1zIChleGFjdCBtYXRjaClcbiAgICBpZiAodGhyZXNob2xkID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRzV2l0aElkQW5kU2NvcmUuc2xpY2UoMCwgbGFzdFRva2VuV2l0aEFsbEtleXdvcmRzICsgMSk7XG4gICAgfVxuICAgIC8vIElmIHRoZSB0aHJlc2hvbGQgaXMgYmV0d2VlbiAwIGFuZCAxLCB3ZSB3aWxsIHJldHVybiBhbGwgdGhlIHJlc3VsdHMgdGhhdCBjb250YWlucyBhdCBsZWFzdCB0aGUgdGhyZXNob2xkIG9mIHNlYXJjaCB0ZXJtc1xuICAgIC8vIEZvciBleGFtcGxlLCBpZiB0aHJlc2hvbGQgaXMgMC41LCB3ZSB3aWxsIHJldHVybiBhbGwgdGhlIHJlc3VsdHMgdGhhdCBjb250YWlucyBhdCBsZWFzdCA1MCUgb2YgdGhlIHNlYXJjaCB0ZXJtc1xuICAgIC8vIChmdXp6eSBtYXRjaCB3aXRoIGEgbWluaW11bSB0aHJlc2hvbGQpXG4gICAgY29uc3QgdGhyZXNob2xkTGVuZ3RoID0gbGFzdFRva2VuV2l0aEFsbEtleXdvcmRzICsgTWF0aC5jZWlsKCh0aHJlc2hvbGQgKiAxMDAgKiAoYWxsUmVzdWx0cyAtIGxhc3RUb2tlbldpdGhBbGxLZXl3b3JkcykpIC8gMTAwKTtcbiAgICByZXR1cm4gcmVzdWx0c1dpdGhJZEFuZFNjb3JlLnNsaWNlKDAsIE1hdGgubWluKGFsbFJlc3VsdHMsIHRocmVzaG9sZExlbmd0aCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIEJNMjUodGYsIG1hdGNoaW5nQ291bnQsIGRvY3NDb3VudCwgZmllbGRMZW5ndGgsIGF2ZXJhZ2VGaWVsZExlbmd0aCwgeyBrLCBiLCBkIH0pIHtcbiAgICBjb25zdCBpZGYgPSBNYXRoLmxvZygxICsgKGRvY3NDb3VudCAtIG1hdGNoaW5nQ291bnQgKyAwLjUpIC8gKG1hdGNoaW5nQ291bnQgKyAwLjUpKTtcbiAgICByZXR1cm4gKGlkZiAqIChkICsgdGYgKiAoayArIDEpKSkgLyAodGYgKyBrICogKDEgLSBiICsgKGIgKiBmaWVsZExlbmd0aCkgLyBhdmVyYWdlRmllbGRMZW5ndGgpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFsZ29yaXRobXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/algorithms.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/defaults.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/defaults.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatElapsedTime: () => (/* binding */ formatElapsedTime),\n/* harmony export */   getDocumentIndexId: () => (/* binding */ getDocumentIndexId),\n/* harmony export */   getDocumentProperties: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.getDocumentProperties),\n/* harmony export */   getInnerType: () => (/* binding */ getInnerType),\n/* harmony export */   getVectorSize: () => (/* binding */ getVectorSize),\n/* harmony export */   isArrayType: () => (/* binding */ isArrayType),\n/* harmony export */   isGeoPointType: () => (/* binding */ isGeoPointType),\n/* harmony export */   isVectorType: () => (/* binding */ isVectorType),\n/* harmony export */   validateSchema: () => (/* binding */ validateSchema)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\n\n\nfunction formatElapsedTime(n) {\n    return {\n        raw: Number(n),\n        formatted: (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.formatNanoseconds)(n)\n    };\n}\nfunction getDocumentIndexId(doc) {\n    if (doc.id) {\n        if (typeof doc.id !== 'string') {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('DOCUMENT_ID_MUST_BE_STRING', typeof doc.id);\n        }\n        return doc.id;\n    }\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.uniqueId)();\n}\nfunction validateSchema(doc, schema) {\n    for (const [prop, type] of Object.entries(schema)) {\n        const value = doc[prop];\n        if (typeof value === 'undefined') {\n            continue;\n        }\n        if (type === 'geopoint' &&\n            typeof value === 'object' &&\n            typeof value.lon === 'number' &&\n            typeof value.lat === 'number') {\n            continue;\n        }\n        if (type === 'enum' && (typeof value === 'string' || typeof value === 'number')) {\n            continue;\n        }\n        if (type === 'enum[]' && Array.isArray(value)) {\n            const valueLength = value.length;\n            for (let i = 0; i < valueLength; i++) {\n                if (typeof value[i] !== 'string' && typeof value[i] !== 'number') {\n                    return prop + '.' + i;\n                }\n            }\n            continue;\n        }\n        if (isVectorType(type)) {\n            const vectorSize = getVectorSize(type);\n            if (!Array.isArray(value) || value.length !== vectorSize) {\n                throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_INPUT_VECTOR', prop, vectorSize, value.length);\n            }\n            continue;\n        }\n        if (isArrayType(type)) {\n            if (!Array.isArray(value)) {\n                return prop;\n            }\n            const expectedType = getInnerType(type);\n            const valueLength = value.length;\n            for (let i = 0; i < valueLength; i++) {\n                if (typeof value[i] !== expectedType) {\n                    return prop + '.' + i;\n                }\n            }\n            continue;\n        }\n        if (typeof type === 'object') {\n            if (!value || typeof value !== 'object') {\n                return prop;\n            }\n            // using as ResultDocument is not exactly right but trying to be type-safe here is not useful\n            const subProp = validateSchema(value, type);\n            if (subProp) {\n                return prop + '.' + subProp;\n            }\n            continue;\n        }\n        if (typeof value !== type) {\n            return prop;\n        }\n    }\n    return undefined;\n}\nconst IS_ARRAY_TYPE = {\n    string: false,\n    number: false,\n    boolean: false,\n    enum: false,\n    geopoint: false,\n    'string[]': true,\n    'number[]': true,\n    'boolean[]': true,\n    'enum[]': true\n};\nconst INNER_TYPE = {\n    'string[]': 'string',\n    'number[]': 'number',\n    'boolean[]': 'boolean',\n    'enum[]': 'enum'\n};\nfunction isGeoPointType(type) {\n    return type === 'geopoint';\n}\nfunction isVectorType(type) {\n    return typeof type === 'string' && /^vector\\[\\d+\\]$/.test(type);\n}\nfunction isArrayType(type) {\n    return typeof type === 'string' && IS_ARRAY_TYPE[type];\n}\nfunction getInnerType(type) {\n    return INNER_TYPE[type];\n}\nfunction getVectorSize(type) {\n    const size = Number(type.slice(7, -1));\n    switch (true) {\n        case isNaN(size):\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_VECTOR_VALUE', type);\n        case size <= 0:\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_VECTOR_SIZE', type);\n        default:\n            return size;\n    }\n}\n//# sourceMappingURL=defaults.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvZGVmYXVsdHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDZTtBQUNOO0FBQzdDO0FBQ1A7QUFDQTtBQUNBLG1CQUFtQiw0REFBaUI7QUFDcEM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1EQUFRO0FBQ25CO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpQkFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpQkFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvZGVmYXVsdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMuanMnO1xuaW1wb3J0IHsgZm9ybWF0TmFub3NlY29uZHMsIHVuaXF1ZUlkIH0gZnJvbSAnLi4vdXRpbHMuanMnO1xuZXhwb3J0IHsgZ2V0RG9jdW1lbnRQcm9wZXJ0aWVzIH0gZnJvbSAnLi4vdXRpbHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVsYXBzZWRUaW1lKG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByYXc6IE51bWJlcihuKSxcbiAgICAgICAgZm9ybWF0dGVkOiBmb3JtYXROYW5vc2Vjb25kcyhuKVxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRJbmRleElkKGRvYykge1xuICAgIGlmIChkb2MuaWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkb2MuaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRE9DVU1FTlRfSURfTVVTVF9CRV9TVFJJTkcnLCB0eXBlb2YgZG9jLmlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jLmlkO1xuICAgIH1cbiAgICByZXR1cm4gdW5pcXVlSWQoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNjaGVtYShkb2MsIHNjaGVtYSkge1xuICAgIGZvciAoY29uc3QgW3Byb3AsIHR5cGVdIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYSkpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkb2NbcHJvcF07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ2dlb3BvaW50JyAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmxvbiA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5sYXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ2VudW0nICYmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ2VudW1bXScgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlTGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZVtpXSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlW2ldICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcCArICcuJyArIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVmVjdG9yVHlwZSh0eXBlKSkge1xuICAgICAgICAgICAgY29uc3QgdmVjdG9yU2l6ZSA9IGdldFZlY3RvclNpemUodHlwZSk7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCAhPT0gdmVjdG9yU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdJTlZBTElEX0lOUFVUX1ZFQ1RPUicsIHByb3AsIHZlY3RvclNpemUsIHZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheVR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGdldElubmVyVHlwZSh0eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlTGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZVtpXSAhPT0gZXhwZWN0ZWRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wICsgJy4nICsgaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHVzaW5nIGFzIFJlc3VsdERvY3VtZW50IGlzIG5vdCBleGFjdGx5IHJpZ2h0IGJ1dCB0cnlpbmcgdG8gYmUgdHlwZS1zYWZlIGhlcmUgaXMgbm90IHVzZWZ1bFxuICAgICAgICAgICAgY29uc3Qgc3ViUHJvcCA9IHZhbGlkYXRlU2NoZW1hKHZhbHVlLCB0eXBlKTtcbiAgICAgICAgICAgIGlmIChzdWJQcm9wKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3AgKyAnLicgKyBzdWJQcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gdHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3A7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmNvbnN0IElTX0FSUkFZX1RZUEUgPSB7XG4gICAgc3RyaW5nOiBmYWxzZSxcbiAgICBudW1iZXI6IGZhbHNlLFxuICAgIGJvb2xlYW46IGZhbHNlLFxuICAgIGVudW06IGZhbHNlLFxuICAgIGdlb3BvaW50OiBmYWxzZSxcbiAgICAnc3RyaW5nW10nOiB0cnVlLFxuICAgICdudW1iZXJbXSc6IHRydWUsXG4gICAgJ2Jvb2xlYW5bXSc6IHRydWUsXG4gICAgJ2VudW1bXSc6IHRydWVcbn07XG5jb25zdCBJTk5FUl9UWVBFID0ge1xuICAgICdzdHJpbmdbXSc6ICdzdHJpbmcnLFxuICAgICdudW1iZXJbXSc6ICdudW1iZXInLFxuICAgICdib29sZWFuW10nOiAnYm9vbGVhbicsXG4gICAgJ2VudW1bXSc6ICdlbnVtJ1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0dlb1BvaW50VHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdnZW9wb2ludCc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNWZWN0b3JUeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnICYmIC9edmVjdG9yXFxbXFxkK1xcXSQvLnRlc3QodHlwZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheVR5cGUodHlwZSkge1xuICAgIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycgJiYgSVNfQVJSQVlfVFlQRVt0eXBlXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbm5lclR5cGUodHlwZSkge1xuICAgIHJldHVybiBJTk5FUl9UWVBFW3R5cGVdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFZlY3RvclNpemUodHlwZSkge1xuICAgIGNvbnN0IHNpemUgPSBOdW1iZXIodHlwZS5zbGljZSg3LCAtMSkpO1xuICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgICBjYXNlIGlzTmFOKHNpemUpOlxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0lOVkFMSURfVkVDVE9SX1ZBTFVFJywgdHlwZSk7XG4gICAgICAgIGNhc2Ugc2l6ZSA8PSAwOlxuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0lOVkFMSURfVkVDVE9SX1NJWkUnLCB0eXBlKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/defaults.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/documents-store.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/documents-store.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   count: () => (/* binding */ count),\n/* harmony export */   create: () => (/* binding */ create),\n/* harmony export */   createDocumentsStore: () => (/* binding */ createDocumentsStore),\n/* harmony export */   get: () => (/* binding */ get),\n/* harmony export */   getAll: () => (/* binding */ getAll),\n/* harmony export */   getMultiple: () => (/* binding */ getMultiple),\n/* harmony export */   load: () => (/* binding */ load),\n/* harmony export */   remove: () => (/* binding */ remove),\n/* harmony export */   save: () => (/* binding */ save),\n/* harmony export */   store: () => (/* binding */ store)\n/* harmony export */ });\n/* harmony import */ var _internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n\nfunction create(_, sharedInternalDocumentStore) {\n    return {\n        sharedInternalDocumentStore,\n        docs: {},\n        count: 0\n    };\n}\nfunction get(store, id) {\n    const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_0__.getInternalDocumentId)(store.sharedInternalDocumentStore, id);\n    return store.docs[internalId];\n}\nfunction getMultiple(store, ids) {\n    const idsLength = ids.length;\n    const found = Array.from({ length: idsLength });\n    for (let i = 0; i < idsLength; i++) {\n        const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_0__.getInternalDocumentId)(store.sharedInternalDocumentStore, ids[i]);\n        found[i] = store.docs[internalId];\n    }\n    return found;\n}\nfunction getAll(store) {\n    return store.docs;\n}\nfunction store(store, id, internalId, doc) {\n    if (typeof store.docs[internalId] !== 'undefined') {\n        return false;\n    }\n    store.docs[internalId] = doc;\n    store.count++;\n    return true;\n}\nfunction remove(store, id) {\n    const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_0__.getInternalDocumentId)(store.sharedInternalDocumentStore, id);\n    if (typeof store.docs[internalId] === 'undefined') {\n        return false;\n    }\n    delete store.docs[internalId];\n    store.count--;\n    return true;\n}\nfunction count(store) {\n    return store.count;\n}\nfunction load(sharedInternalDocumentStore, raw) {\n    const rawDocument = raw;\n    return {\n        docs: rawDocument.docs,\n        count: rawDocument.count,\n        sharedInternalDocumentStore\n    };\n}\nfunction save(store) {\n    return {\n        docs: store.docs,\n        count: store.count\n    };\n}\nfunction createDocumentsStore() {\n    return {\n        create,\n        get,\n        getMultiple,\n        getAll,\n        store,\n        remove,\n        count,\n        load,\n        save\n    };\n}\n//# sourceMappingURL=documents-store.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvZG9jdW1lbnRzLXN0b3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQ2pFO0FBQ1A7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDTztBQUNQLHVCQUF1QixxRkFBcUI7QUFDNUM7QUFDQTtBQUNPO0FBQ1A7QUFDQSwrQkFBK0IsbUJBQW1CO0FBQ2xELG9CQUFvQixlQUFlO0FBQ25DLDJCQUEyQixxRkFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx1QkFBdUIscUZBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvY29tcG9uZW50cy9kb2N1bWVudHMtc3RvcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SW50ZXJuYWxEb2N1bWVudElkIH0gZnJvbSAnLi9pbnRlcm5hbC1kb2N1bWVudC1pZC1zdG9yZS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKF8sIHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSxcbiAgICAgICAgZG9jczoge30sXG4gICAgICAgIGNvdW50OiAwXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc3RvcmUsIGlkKSB7XG4gICAgY29uc3QgaW50ZXJuYWxJZCA9IGdldEludGVybmFsRG9jdW1lbnRJZChzdG9yZS5zaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIGlkKTtcbiAgICByZXR1cm4gc3RvcmUuZG9jc1tpbnRlcm5hbElkXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNdWx0aXBsZShzdG9yZSwgaWRzKSB7XG4gICAgY29uc3QgaWRzTGVuZ3RoID0gaWRzLmxlbmd0aDtcbiAgICBjb25zdCBmb3VuZCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IGlkc0xlbmd0aCB9KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGludGVybmFsSWQgPSBnZXRJbnRlcm5hbERvY3VtZW50SWQoc3RvcmUuc2hhcmVkSW50ZXJuYWxEb2N1bWVudFN0b3JlLCBpZHNbaV0pO1xuICAgICAgICBmb3VuZFtpXSA9IHN0b3JlLmRvY3NbaW50ZXJuYWxJZF07XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGwoc3RvcmUpIHtcbiAgICByZXR1cm4gc3RvcmUuZG9jcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZShzdG9yZSwgaWQsIGludGVybmFsSWQsIGRvYykge1xuICAgIGlmICh0eXBlb2Ygc3RvcmUuZG9jc1tpbnRlcm5hbElkXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzdG9yZS5kb2NzW2ludGVybmFsSWRdID0gZG9jO1xuICAgIHN0b3JlLmNvdW50Kys7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKHN0b3JlLCBpZCkge1xuICAgIGNvbnN0IGludGVybmFsSWQgPSBnZXRJbnRlcm5hbERvY3VtZW50SWQoc3RvcmUuc2hhcmVkSW50ZXJuYWxEb2N1bWVudFN0b3JlLCBpZCk7XG4gICAgaWYgKHR5cGVvZiBzdG9yZS5kb2NzW2ludGVybmFsSWRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGRlbGV0ZSBzdG9yZS5kb2NzW2ludGVybmFsSWRdO1xuICAgIHN0b3JlLmNvdW50LS07XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gY291bnQoc3RvcmUpIHtcbiAgICByZXR1cm4gc3RvcmUuY291bnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbG9hZChzaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIHJhdykge1xuICAgIGNvbnN0IHJhd0RvY3VtZW50ID0gcmF3O1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvY3M6IHJhd0RvY3VtZW50LmRvY3MsXG4gICAgICAgIGNvdW50OiByYXdEb2N1bWVudC5jb3VudCxcbiAgICAgICAgc2hhcmVkSW50ZXJuYWxEb2N1bWVudFN0b3JlXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYXZlKHN0b3JlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jczogc3RvcmUuZG9jcyxcbiAgICAgICAgY291bnQ6IHN0b3JlLmNvdW50XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEb2N1bWVudHNTdG9yZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGUsXG4gICAgICAgIGdldCxcbiAgICAgICAgZ2V0TXVsdGlwbGUsXG4gICAgICAgIGdldEFsbCxcbiAgICAgICAgc3RvcmUsXG4gICAgICAgIHJlbW92ZSxcbiAgICAgICAgY291bnQsXG4gICAgICAgIGxvYWQsXG4gICAgICAgIHNhdmVcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9jdW1lbnRzLXN0b3JlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/documents-store.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/facets.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/facets.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFacets: () => (/* binding */ getFacets)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\n\nfunction sortAsc(a, b) {\n    return a[1] - b[1];\n}\nfunction sortDesc(a, b) {\n    return b[1] - a[1];\n}\nfunction sortingPredicateBuilder(order = 'desc') {\n    return order.toLowerCase() === 'asc' ? sortAsc : sortDesc;\n}\nfunction getFacets(orama, results, facetsConfig) {\n    const facets = {};\n    const allIDs = results.map(([id]) => id);\n    const allDocs = orama.documentsStore.getMultiple(orama.data.docs, allIDs);\n    const facetKeys = Object.keys(facetsConfig);\n    const properties = orama.index.getSearchablePropertiesWithTypes(orama.data.index);\n    for (const facet of facetKeys) {\n        let values;\n        // Hack to guarantee the same order of ranges as specified by the user\n        // TODO: Revisit this once components land\n        if (properties[facet] === 'number') {\n            const { ranges } = facetsConfig[facet];\n            const rangesLength = ranges.length;\n            const tmp = Array.from({ length: rangesLength });\n            for (let i = 0; i < rangesLength; i++) {\n                const range = ranges[i];\n                tmp[i] = [`${range.from}-${range.to}`, 0];\n            }\n            values = Object.fromEntries(tmp);\n        }\n        facets[facet] = {\n            count: 0,\n            values: values ?? {}\n        };\n    }\n    const allDocsLength = allDocs.length;\n    for (let i = 0; i < allDocsLength; i++) {\n        const doc = allDocs[i];\n        for (const facet of facetKeys) {\n            const facetValue = facet.includes('.') ? (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getNested)(doc, facet) : doc[facet];\n            const propertyType = properties[facet];\n            const facetValues = facets[facet].values;\n            switch (propertyType) {\n                case 'number': {\n                    const ranges = facetsConfig[facet].ranges;\n                    calculateNumberFacetBuilder(ranges, facetValues)(facetValue);\n                    break;\n                }\n                case 'number[]': {\n                    const alreadyInsertedValues = new Set();\n                    const ranges = facetsConfig[facet].ranges;\n                    const calculateNumberFacet = calculateNumberFacetBuilder(ranges, facetValues, alreadyInsertedValues);\n                    for (const v of facetValue) {\n                        calculateNumberFacet(v);\n                    }\n                    break;\n                }\n                case 'boolean':\n                case 'enum':\n                case 'string': {\n                    calculateBooleanStringOrEnumFacetBuilder(facetValues, propertyType)(facetValue);\n                    break;\n                }\n                case 'boolean[]':\n                case 'enum[]':\n                case 'string[]': {\n                    const alreadyInsertedValues = new Set();\n                    const innerType = propertyType === 'boolean[]' ? 'boolean' : 'string';\n                    const calculateBooleanStringOrEnumFacet = calculateBooleanStringOrEnumFacetBuilder(facetValues, innerType, alreadyInsertedValues);\n                    for (const v of facetValue) {\n                        calculateBooleanStringOrEnumFacet(v);\n                    }\n                    break;\n                }\n                default:\n                    throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('FACET_NOT_SUPPORTED', propertyType);\n            }\n        }\n    }\n    // TODO: We are looping again with the same previous keys, should we creat a single loop instead?\n    for (const facet of facetKeys) {\n        const currentFacet = facets[facet];\n        // Count the number of values for each facet\n        currentFacet.count = Object.keys(currentFacet.values).length;\n        // Sort only string-based facets\n        if (properties[facet] === 'string') {\n            const stringFacetDefinition = facetsConfig[facet];\n            const sortingPredicate = sortingPredicateBuilder(stringFacetDefinition.sort);\n            currentFacet.values = Object.fromEntries(Object.entries(currentFacet.values)\n                .sort(sortingPredicate)\n                .slice(stringFacetDefinition.offset ?? 0, stringFacetDefinition.limit ?? 10));\n        }\n    }\n    return facets;\n}\nfunction calculateNumberFacetBuilder(ranges, values, alreadyInsertedValues) {\n    return (facetValue) => {\n        for (const range of ranges) {\n            const value = `${range.from}-${range.to}`;\n            if (alreadyInsertedValues?.has(value)) {\n                continue;\n            }\n            if (facetValue >= range.from && facetValue <= range.to) {\n                if (values[value] === undefined) {\n                    values[value] = 1;\n                }\n                else {\n                    values[value]++;\n                    alreadyInsertedValues?.add(value);\n                }\n            }\n        }\n    };\n}\nfunction calculateBooleanStringOrEnumFacetBuilder(values, propertyType, alreadyInsertedValues) {\n    const defaultValue = propertyType === 'boolean' ? 'false' : '';\n    return (facetValue) => {\n        // String or boolean based facets\n        const value = facetValue?.toString() ?? defaultValue;\n        if (alreadyInsertedValues?.has(value)) {\n            return;\n        }\n        values[value] = (values[value] ?? 0) + 1;\n        alreadyInsertedValues?.add(value);\n    };\n}\n//# sourceMappingURL=facets.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvZmFjZXRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNIO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBLHFDQUFxQyxzQkFBc0I7QUFDM0QsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBLDZCQUE2QixXQUFXLEdBQUcsU0FBUztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQSxxREFBcUQsb0RBQVM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix1REFBVztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixXQUFXLEdBQUcsU0FBUztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9jb21wb25lbnRzL2ZhY2V0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gJy4uL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBnZXROZXN0ZWQgfSBmcm9tICcuLi91dGlscy5qcyc7XG5mdW5jdGlvbiBzb3J0QXNjKGEsIGIpIHtcbiAgICByZXR1cm4gYVsxXSAtIGJbMV07XG59XG5mdW5jdGlvbiBzb3J0RGVzYyhhLCBiKSB7XG4gICAgcmV0dXJuIGJbMV0gLSBhWzFdO1xufVxuZnVuY3Rpb24gc29ydGluZ1ByZWRpY2F0ZUJ1aWxkZXIob3JkZXIgPSAnZGVzYycpIHtcbiAgICByZXR1cm4gb3JkZXIudG9Mb3dlckNhc2UoKSA9PT0gJ2FzYycgPyBzb3J0QXNjIDogc29ydERlc2M7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RmFjZXRzKG9yYW1hLCByZXN1bHRzLCBmYWNldHNDb25maWcpIHtcbiAgICBjb25zdCBmYWNldHMgPSB7fTtcbiAgICBjb25zdCBhbGxJRHMgPSByZXN1bHRzLm1hcCgoW2lkXSkgPT4gaWQpO1xuICAgIGNvbnN0IGFsbERvY3MgPSBvcmFtYS5kb2N1bWVudHNTdG9yZS5nZXRNdWx0aXBsZShvcmFtYS5kYXRhLmRvY3MsIGFsbElEcyk7XG4gICAgY29uc3QgZmFjZXRLZXlzID0gT2JqZWN0LmtleXMoZmFjZXRzQ29uZmlnKTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gb3JhbWEuaW5kZXguZ2V0U2VhcmNoYWJsZVByb3BlcnRpZXNXaXRoVHlwZXMob3JhbWEuZGF0YS5pbmRleCk7XG4gICAgZm9yIChjb25zdCBmYWNldCBvZiBmYWNldEtleXMpIHtcbiAgICAgICAgbGV0IHZhbHVlcztcbiAgICAgICAgLy8gSGFjayB0byBndWFyYW50ZWUgdGhlIHNhbWUgb3JkZXIgb2YgcmFuZ2VzIGFzIHNwZWNpZmllZCBieSB0aGUgdXNlclxuICAgICAgICAvLyBUT0RPOiBSZXZpc2l0IHRoaXMgb25jZSBjb21wb25lbnRzIGxhbmRcbiAgICAgICAgaWYgKHByb3BlcnRpZXNbZmFjZXRdID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgeyByYW5nZXMgfSA9IGZhY2V0c0NvbmZpZ1tmYWNldF07XG4gICAgICAgICAgICBjb25zdCByYW5nZXNMZW5ndGggPSByYW5nZXMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgdG1wID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcmFuZ2VzTGVuZ3RoIH0pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHRtcFtpXSA9IFtgJHtyYW5nZS5mcm9tfS0ke3JhbmdlLnRvfWAsIDBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWVzID0gT2JqZWN0LmZyb21FbnRyaWVzKHRtcCk7XG4gICAgICAgIH1cbiAgICAgICAgZmFjZXRzW2ZhY2V0XSA9IHtcbiAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgdmFsdWVzOiB2YWx1ZXMgPz8ge31cbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYWxsRG9jc0xlbmd0aCA9IGFsbERvY3MubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsRG9jc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGRvYyA9IGFsbERvY3NbaV07XG4gICAgICAgIGZvciAoY29uc3QgZmFjZXQgb2YgZmFjZXRLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBmYWNldFZhbHVlID0gZmFjZXQuaW5jbHVkZXMoJy4nKSA/IGdldE5lc3RlZChkb2MsIGZhY2V0KSA6IGRvY1tmYWNldF07XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVR5cGUgPSBwcm9wZXJ0aWVzW2ZhY2V0XTtcbiAgICAgICAgICAgIGNvbnN0IGZhY2V0VmFsdWVzID0gZmFjZXRzW2ZhY2V0XS52YWx1ZXM7XG4gICAgICAgICAgICBzd2l0Y2ggKHByb3BlcnR5VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2VzID0gZmFjZXRzQ29uZmlnW2ZhY2V0XS5yYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZU51bWJlckZhY2V0QnVpbGRlcihyYW5nZXMsIGZhY2V0VmFsdWVzKShmYWNldFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcltdJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5SW5zZXJ0ZWRWYWx1ZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlcyA9IGZhY2V0c0NvbmZpZ1tmYWNldF0ucmFuZ2VzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxjdWxhdGVOdW1iZXJGYWNldCA9IGNhbGN1bGF0ZU51bWJlckZhY2V0QnVpbGRlcihyYW5nZXMsIGZhY2V0VmFsdWVzLCBhbHJlYWR5SW5zZXJ0ZWRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgZmFjZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlTnVtYmVyRmFjZXQodik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2VudW0nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlQm9vbGVhblN0cmluZ09yRW51bUZhY2V0QnVpbGRlcihmYWNldFZhbHVlcywgcHJvcGVydHlUeXBlKShmYWNldFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW5bXSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW51bVtdJzpcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmdbXSc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxyZWFkeUluc2VydGVkVmFsdWVzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclR5cGUgPSBwcm9wZXJ0eVR5cGUgPT09ICdib29sZWFuW10nID8gJ2Jvb2xlYW4nIDogJ3N0cmluZyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbGN1bGF0ZUJvb2xlYW5TdHJpbmdPckVudW1GYWNldCA9IGNhbGN1bGF0ZUJvb2xlYW5TdHJpbmdPckVudW1GYWNldEJ1aWxkZXIoZmFjZXRWYWx1ZXMsIGlubmVyVHlwZSwgYWxyZWFkeUluc2VydGVkVmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIGZhY2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZUJvb2xlYW5TdHJpbmdPckVudW1GYWNldCh2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0ZBQ0VUX05PVF9TVVBQT1JURUQnLCBwcm9wZXJ0eVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE86IFdlIGFyZSBsb29waW5nIGFnYWluIHdpdGggdGhlIHNhbWUgcHJldmlvdXMga2V5cywgc2hvdWxkIHdlIGNyZWF0IGEgc2luZ2xlIGxvb3AgaW5zdGVhZD9cbiAgICBmb3IgKGNvbnN0IGZhY2V0IG9mIGZhY2V0S2V5cykge1xuICAgICAgICBjb25zdCBjdXJyZW50RmFjZXQgPSBmYWNldHNbZmFjZXRdO1xuICAgICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIHZhbHVlcyBmb3IgZWFjaCBmYWNldFxuICAgICAgICBjdXJyZW50RmFjZXQuY291bnQgPSBPYmplY3Qua2V5cyhjdXJyZW50RmFjZXQudmFsdWVzKS5sZW5ndGg7XG4gICAgICAgIC8vIFNvcnQgb25seSBzdHJpbmctYmFzZWQgZmFjZXRzXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzW2ZhY2V0XSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ0ZhY2V0RGVmaW5pdGlvbiA9IGZhY2V0c0NvbmZpZ1tmYWNldF07XG4gICAgICAgICAgICBjb25zdCBzb3J0aW5nUHJlZGljYXRlID0gc29ydGluZ1ByZWRpY2F0ZUJ1aWxkZXIoc3RyaW5nRmFjZXREZWZpbml0aW9uLnNvcnQpO1xuICAgICAgICAgICAgY3VycmVudEZhY2V0LnZhbHVlcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhjdXJyZW50RmFjZXQudmFsdWVzKVxuICAgICAgICAgICAgICAgIC5zb3J0KHNvcnRpbmdQcmVkaWNhdGUpXG4gICAgICAgICAgICAgICAgLnNsaWNlKHN0cmluZ0ZhY2V0RGVmaW5pdGlvbi5vZmZzZXQgPz8gMCwgc3RyaW5nRmFjZXREZWZpbml0aW9uLmxpbWl0ID8/IDEwKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhY2V0cztcbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZU51bWJlckZhY2V0QnVpbGRlcihyYW5nZXMsIHZhbHVlcywgYWxyZWFkeUluc2VydGVkVmFsdWVzKSB7XG4gICAgcmV0dXJuIChmYWNldFZhbHVlKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgcmFuZ2Ugb2YgcmFuZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGAke3JhbmdlLmZyb219LSR7cmFuZ2UudG99YDtcbiAgICAgICAgICAgIGlmIChhbHJlYWR5SW5zZXJ0ZWRWYWx1ZXM/Lmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmYWNldFZhbHVlID49IHJhbmdlLmZyb20gJiYgZmFjZXRWYWx1ZSA8PSByYW5nZS50bykge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNbdmFsdWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlXSA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVdKys7XG4gICAgICAgICAgICAgICAgICAgIGFscmVhZHlJbnNlcnRlZFZhbHVlcz8uYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY2FsY3VsYXRlQm9vbGVhblN0cmluZ09yRW51bUZhY2V0QnVpbGRlcih2YWx1ZXMsIHByb3BlcnR5VHlwZSwgYWxyZWFkeUluc2VydGVkVmFsdWVzKSB7XG4gICAgY29uc3QgZGVmYXVsdFZhbHVlID0gcHJvcGVydHlUeXBlID09PSAnYm9vbGVhbicgPyAnZmFsc2UnIDogJyc7XG4gICAgcmV0dXJuIChmYWNldFZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFN0cmluZyBvciBib29sZWFuIGJhc2VkIGZhY2V0c1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGZhY2V0VmFsdWU/LnRvU3RyaW5nKCkgPz8gZGVmYXVsdFZhbHVlO1xuICAgICAgICBpZiAoYWxyZWFkeUluc2VydGVkVmFsdWVzPy5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWVzW3ZhbHVlXSA9ICh2YWx1ZXNbdmFsdWVdID8/IDApICsgMTtcbiAgICAgICAgYWxyZWFkeUluc2VydGVkVmFsdWVzPy5hZGQodmFsdWUpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mYWNldHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/facets.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/groups.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/groups.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGroups: () => (/* binding */ getGroups)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n\n\n\nconst DEFAULT_REDUCE = {\n    reducer: (_, acc, res, index) => {\n        acc[index] = res;\n        return acc;\n    },\n    getInitialValue: (length) => Array.from({ length })\n};\nconst ALLOWED_TYPES = ['string', 'number', 'boolean'];\nfunction getGroups(orama, results, groupBy) {\n    const properties = groupBy.properties;\n    const propertiesLength = properties.length;\n    const schemaProperties = orama.index.getSearchablePropertiesWithTypes(orama.data.index);\n    for (let i = 0; i < propertiesLength; i++) {\n        const property = properties[i];\n        if (typeof schemaProperties[property] === 'undefined') {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('UNKNOWN_GROUP_BY_PROPERTY', property);\n        }\n        if (!ALLOWED_TYPES.includes(schemaProperties[property])) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_GROUP_BY_PROPERTY', property, ALLOWED_TYPES.join(', '), schemaProperties[property]);\n        }\n    }\n    const allIDs = results.map(([id]) => (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_2__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, id));\n    // allDocs is already sorted by the sortBy algorithm\n    // We leverage on that to limit the number of documents returned\n    const allDocs = orama.documentsStore.getMultiple(orama.data.docs, allIDs);\n    const allDocsLength = allDocs.length;\n    const returnedCount = groupBy.maxResult || Number.MAX_SAFE_INTEGER;\n    const listOfValues = [];\n    // We want to understand which documents have which values\n    // and group them by the property and values\n    const g = {};\n    for (let i = 0; i < propertiesLength; i++) {\n        const groupByKey = properties[i];\n        const group = {\n            property: groupByKey,\n            perValue: {}\n        };\n        const values = new Set();\n        for (let j = 0; j < allDocsLength; j++) {\n            const doc = allDocs[j];\n            const value = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getNested)(doc, groupByKey);\n            // we don't want to consider undefined values\n            if (typeof value === 'undefined') {\n                continue;\n            }\n            const keyValue = typeof value !== 'boolean' ? value : '' + value;\n            const perValue = group.perValue[keyValue] ?? {\n                indexes: [],\n                count: 0\n            };\n            if (perValue.count >= returnedCount) {\n                // We stop early because for this value we react the limit\n                continue;\n            }\n            // We use the index to keep track of the original order\n            perValue.indexes.push(j);\n            perValue.count++;\n            group.perValue[keyValue] = perValue;\n            values.add(value);\n        }\n        listOfValues.push(Array.from(values));\n        g[groupByKey] = group;\n    }\n    const combinations = calculateCombination(listOfValues);\n    const combinationsLength = combinations.length;\n    const groups = [];\n    for (let i = 0; i < combinationsLength; i++) {\n        const combination = combinations[i];\n        const combinationLength = combination.length;\n        const group = {\n            values: [],\n            indexes: []\n        };\n        const indexes = [];\n        for (let j = 0; j < combinationLength; j++) {\n            const value = combination[j];\n            const property = properties[j];\n            indexes.push(g[property].perValue[(typeof value !== 'boolean' ? value : '' + value)].indexes);\n            group.values.push(value);\n        }\n        // We leverage on the index to sort the results by the original order\n        group.indexes = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.intersect)(indexes).sort((a, b) => a - b);\n        // don't generate empty groups\n        if (group.indexes.length === 0) {\n            continue;\n        }\n        groups.push(group);\n    }\n    const groupsLength = groups.length;\n    const res = Array.from({ length: groupsLength });\n    for (let i = 0; i < groupsLength; i++) {\n        const group = groups[i];\n        const reduce = (groupBy.reduce || DEFAULT_REDUCE);\n        const docs = group.indexes.map((index) => {\n            return {\n                id: allIDs[index],\n                score: results[index][1],\n                document: allDocs[index]\n            };\n        });\n        const func = reduce.reducer.bind(null, group.values);\n        const initialValue = reduce.getInitialValue(group.indexes.length);\n        const aggregationValue = docs.reduce(func, initialValue);\n        res[i] = {\n            values: group.values,\n            result: aggregationValue\n        };\n    }\n    return res;\n}\nfunction calculateCombination(arrs, index = 0) {\n    if (index + 1 === arrs.length)\n        return arrs[index].map((item) => [item]);\n    const head = arrs[index];\n    const c = calculateCombination(arrs, index + 1);\n    const combinations = [];\n    for (const value of head) {\n        for (const combination of c) {\n            const result = [value];\n            (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.safeArrayPush)(result, combination);\n            combinations.push(result);\n        }\n    }\n    return combinations;\n}\n//# sourceMappingURL=groups.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvZ3JvdXBzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkM7QUFDdUI7QUFDWTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw4Q0FBOEMsUUFBUTtBQUN0RDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQSxrQkFBa0IsdURBQVc7QUFDN0I7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0EseUNBQXlDLDJGQUEyQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtQkFBbUI7QUFDM0M7QUFDQSwwQkFBMEIsb0RBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0RBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0JBQXNCO0FBQ25ELG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvZ3JvdXBzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IGdldE5lc3RlZCwgaW50ZXJzZWN0LCBzYWZlQXJyYXlQdXNoIH0gZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IHsgZ2V0RG9jdW1lbnRJZEZyb21JbnRlcm5hbElkIH0gZnJvbSAnLi9pbnRlcm5hbC1kb2N1bWVudC1pZC1zdG9yZS5qcyc7XG5jb25zdCBERUZBVUxUX1JFRFVDRSA9IHtcbiAgICByZWR1Y2VyOiAoXywgYWNjLCByZXMsIGluZGV4KSA9PiB7XG4gICAgICAgIGFjY1tpbmRleF0gPSByZXM7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICBnZXRJbml0aWFsVmFsdWU6IChsZW5ndGgpID0+IEFycmF5LmZyb20oeyBsZW5ndGggfSlcbn07XG5jb25zdCBBTExPV0VEX1RZUEVTID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHcm91cHMob3JhbWEsIHJlc3VsdHMsIGdyb3VwQnkpIHtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZ3JvdXBCeS5wcm9wZXJ0aWVzO1xuICAgIGNvbnN0IHByb3BlcnRpZXNMZW5ndGggPSBwcm9wZXJ0aWVzLmxlbmd0aDtcbiAgICBjb25zdCBzY2hlbWFQcm9wZXJ0aWVzID0gb3JhbWEuaW5kZXguZ2V0U2VhcmNoYWJsZVByb3BlcnRpZXNXaXRoVHlwZXMob3JhbWEuZGF0YS5pbmRleCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW2ldO1xuICAgICAgICBpZiAodHlwZW9mIHNjaGVtYVByb3BlcnRpZXNbcHJvcGVydHldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1VOS05PV05fR1JPVVBfQllfUFJPUEVSVFknLCBwcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFBTExPV0VEX1RZUEVTLmluY2x1ZGVzKHNjaGVtYVByb3BlcnRpZXNbcHJvcGVydHldKSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0lOVkFMSURfR1JPVVBfQllfUFJPUEVSVFknLCBwcm9wZXJ0eSwgQUxMT1dFRF9UWVBFUy5qb2luKCcsICcpLCBzY2hlbWFQcm9wZXJ0aWVzW3Byb3BlcnR5XSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWxsSURzID0gcmVzdWx0cy5tYXAoKFtpZF0pID0+IGdldERvY3VtZW50SWRGcm9tSW50ZXJuYWxJZChvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZSwgaWQpKTtcbiAgICAvLyBhbGxEb2NzIGlzIGFscmVhZHkgc29ydGVkIGJ5IHRoZSBzb3J0QnkgYWxnb3JpdGhtXG4gICAgLy8gV2UgbGV2ZXJhZ2Ugb24gdGhhdCB0byBsaW1pdCB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZFxuICAgIGNvbnN0IGFsbERvY3MgPSBvcmFtYS5kb2N1bWVudHNTdG9yZS5nZXRNdWx0aXBsZShvcmFtYS5kYXRhLmRvY3MsIGFsbElEcyk7XG4gICAgY29uc3QgYWxsRG9jc0xlbmd0aCA9IGFsbERvY3MubGVuZ3RoO1xuICAgIGNvbnN0IHJldHVybmVkQ291bnQgPSBncm91cEJ5Lm1heFJlc3VsdCB8fCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcbiAgICBjb25zdCBsaXN0T2ZWYWx1ZXMgPSBbXTtcbiAgICAvLyBXZSB3YW50IHRvIHVuZGVyc3RhbmQgd2hpY2ggZG9jdW1lbnRzIGhhdmUgd2hpY2ggdmFsdWVzXG4gICAgLy8gYW5kIGdyb3VwIHRoZW0gYnkgdGhlIHByb3BlcnR5IGFuZCB2YWx1ZXNcbiAgICBjb25zdCBnID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZ3JvdXBCeUtleSA9IHByb3BlcnRpZXNbaV07XG4gICAgICAgIGNvbnN0IGdyb3VwID0ge1xuICAgICAgICAgICAgcHJvcGVydHk6IGdyb3VwQnlLZXksXG4gICAgICAgICAgICBwZXJWYWx1ZToge31cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFsbERvY3NMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gYWxsRG9jc1tqXTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0TmVzdGVkKGRvYywgZ3JvdXBCeUtleSk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCB3YW50IHRvIGNvbnNpZGVyIHVuZGVmaW5lZCB2YWx1ZXNcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBrZXlWYWx1ZSA9IHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nID8gdmFsdWUgOiAnJyArIHZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcGVyVmFsdWUgPSBncm91cC5wZXJWYWx1ZVtrZXlWYWx1ZV0gPz8ge1xuICAgICAgICAgICAgICAgIGluZGV4ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvdW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHBlclZhbHVlLmNvdW50ID49IHJldHVybmVkQ291bnQpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBzdG9wIGVhcmx5IGJlY2F1c2UgZm9yIHRoaXMgdmFsdWUgd2UgcmVhY3QgdGhlIGxpbWl0XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGluZGV4IHRvIGtlZXAgdHJhY2sgb2YgdGhlIG9yaWdpbmFsIG9yZGVyXG4gICAgICAgICAgICBwZXJWYWx1ZS5pbmRleGVzLnB1c2goaik7XG4gICAgICAgICAgICBwZXJWYWx1ZS5jb3VudCsrO1xuICAgICAgICAgICAgZ3JvdXAucGVyVmFsdWVba2V5VmFsdWVdID0gcGVyVmFsdWU7XG4gICAgICAgICAgICB2YWx1ZXMuYWRkKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0T2ZWYWx1ZXMucHVzaChBcnJheS5mcm9tKHZhbHVlcykpO1xuICAgICAgICBnW2dyb3VwQnlLZXldID0gZ3JvdXA7XG4gICAgfVxuICAgIGNvbnN0IGNvbWJpbmF0aW9ucyA9IGNhbGN1bGF0ZUNvbWJpbmF0aW9uKGxpc3RPZlZhbHVlcyk7XG4gICAgY29uc3QgY29tYmluYXRpb25zTGVuZ3RoID0gY29tYmluYXRpb25zLmxlbmd0aDtcbiAgICBjb25zdCBncm91cHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbWJpbmF0aW9uc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNvbWJpbmF0aW9uID0gY29tYmluYXRpb25zW2ldO1xuICAgICAgICBjb25zdCBjb21iaW5hdGlvbkxlbmd0aCA9IGNvbWJpbmF0aW9uLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSB7XG4gICAgICAgICAgICB2YWx1ZXM6IFtdLFxuICAgICAgICAgICAgaW5kZXhlczogW11cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaW5kZXhlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbWJpbmF0aW9uTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29tYmluYXRpb25bal07XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbal07XG4gICAgICAgICAgICBpbmRleGVzLnB1c2goZ1twcm9wZXJ0eV0ucGVyVmFsdWVbKHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nID8gdmFsdWUgOiAnJyArIHZhbHVlKV0uaW5kZXhlcyk7XG4gICAgICAgICAgICBncm91cC52YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbGV2ZXJhZ2Ugb24gdGhlIGluZGV4IHRvIHNvcnQgdGhlIHJlc3VsdHMgYnkgdGhlIG9yaWdpbmFsIG9yZGVyXG4gICAgICAgIGdyb3VwLmluZGV4ZXMgPSBpbnRlcnNlY3QoaW5kZXhlcykuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgICAgICAvLyBkb24ndCBnZW5lcmF0ZSBlbXB0eSBncm91cHNcbiAgICAgICAgaWYgKGdyb3VwLmluZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBncm91cHMucHVzaChncm91cCk7XG4gICAgfVxuICAgIGNvbnN0IGdyb3Vwc0xlbmd0aCA9IGdyb3Vwcy5sZW5ndGg7XG4gICAgY29uc3QgcmVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogZ3JvdXBzTGVuZ3RoIH0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNbaV07XG4gICAgICAgIGNvbnN0IHJlZHVjZSA9IChncm91cEJ5LnJlZHVjZSB8fCBERUZBVUxUX1JFRFVDRSk7XG4gICAgICAgIGNvbnN0IGRvY3MgPSBncm91cC5pbmRleGVzLm1hcCgoaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGFsbElEc1tpbmRleF0sXG4gICAgICAgICAgICAgICAgc2NvcmU6IHJlc3VsdHNbaW5kZXhdWzFdLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBhbGxEb2NzW2luZGV4XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGZ1bmMgPSByZWR1Y2UucmVkdWNlci5iaW5kKG51bGwsIGdyb3VwLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHJlZHVjZS5nZXRJbml0aWFsVmFsdWUoZ3JvdXAuaW5kZXhlcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBhZ2dyZWdhdGlvblZhbHVlID0gZG9jcy5yZWR1Y2UoZnVuYywgaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICAgdmFsdWVzOiBncm91cC52YWx1ZXMsXG4gICAgICAgICAgICByZXN1bHQ6IGFnZ3JlZ2F0aW9uVmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNvbWJpbmF0aW9uKGFycnMsIGluZGV4ID0gMCkge1xuICAgIGlmIChpbmRleCArIDEgPT09IGFycnMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gYXJyc1tpbmRleF0ubWFwKChpdGVtKSA9PiBbaXRlbV0pO1xuICAgIGNvbnN0IGhlYWQgPSBhcnJzW2luZGV4XTtcbiAgICBjb25zdCBjID0gY2FsY3VsYXRlQ29tYmluYXRpb24oYXJycywgaW5kZXggKyAxKTtcbiAgICBjb25zdCBjb21iaW5hdGlvbnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGhlYWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb21iaW5hdGlvbiBvZiBjKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBbdmFsdWVdO1xuICAgICAgICAgICAgc2FmZUFycmF5UHVzaChyZXN1bHQsIGNvbWJpbmF0aW9uKTtcbiAgICAgICAgICAgIGNvbWJpbmF0aW9ucy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbWJpbmF0aW9ucztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyb3Vwcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/groups.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js":
/*!********************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/hooks.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FUNCTION_COMPONENTS: () => (/* binding */ FUNCTION_COMPONENTS),\n/* harmony export */   OBJECT_COMPONENTS: () => (/* binding */ OBJECT_COMPONENTS),\n/* harmony export */   SINGLE_OR_ARRAY_COMPONENTS: () => (/* binding */ SINGLE_OR_ARRAY_COMPONENTS),\n/* harmony export */   runAfterCreate: () => (/* binding */ runAfterCreate),\n/* harmony export */   runAfterSearch: () => (/* binding */ runAfterSearch),\n/* harmony export */   runBeforeSearch: () => (/* binding */ runBeforeSearch),\n/* harmony export */   runMultipleHook: () => (/* binding */ runMultipleHook),\n/* harmony export */   runSingleHook: () => (/* binding */ runSingleHook)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\nconst OBJECT_COMPONENTS = ['tokenizer', 'index', 'documentsStore', 'sorter'];\nconst FUNCTION_COMPONENTS = [\n    'validateSchema',\n    'getDocumentIndexId',\n    'getDocumentProperties',\n    'formatElapsedTime'\n];\nconst SINGLE_OR_ARRAY_COMPONENTS = [\n/* deprecated with v2.0.0-beta.5 */\n];\nfunction runSingleHook(hooks, orama, id, doc) {\n    const needAsync = hooks.some(_utils_js__WEBPACK_IMPORTED_MODULE_0__.isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(orama, id, doc);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(orama, id, doc);\n        }\n    }\n}\nfunction runMultipleHook(hooks, orama, docsOrIds) {\n    const needAsync = hooks.some(_utils_js__WEBPACK_IMPORTED_MODULE_0__.isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(orama, docsOrIds);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(orama, docsOrIds);\n        }\n    }\n}\nfunction runAfterSearch(hooks, db, params, language, results) {\n    const needAsync = hooks.some(_utils_js__WEBPACK_IMPORTED_MODULE_0__.isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(db, params, language, results);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(db, params, language, results);\n        }\n    }\n}\nfunction runBeforeSearch(hooks, db, params, language) {\n    const needAsync = hooks.some(_utils_js__WEBPACK_IMPORTED_MODULE_0__.isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(db, params, language);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(db, params, language);\n        }\n    }\n}\nfunction runAfterCreate(hooks, db) {\n    const needAsync = hooks.some(_utils_js__WEBPACK_IMPORTED_MODULE_0__.isAsyncFunction);\n    if (needAsync) {\n        return (async () => {\n            for (const hook of hooks) {\n                await hook(db);\n            }\n        })();\n    }\n    else {\n        for (const hook of hooks) {\n            hook(db);\n        }\n    }\n}\n//# sourceMappingURL=hooks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvaG9va3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQThDO0FBQ3ZDO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUCxpQ0FBaUMsc0RBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsaUNBQWlDLHNEQUFlO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGlDQUFpQyxzREFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxpQ0FBaUMsc0RBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsaUNBQWlDLHNEQUFlO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9jb21wb25lbnRzL2hvb2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzQXN5bmNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWxzLmpzJztcbmV4cG9ydCBjb25zdCBPQkpFQ1RfQ09NUE9ORU5UUyA9IFsndG9rZW5pemVyJywgJ2luZGV4JywgJ2RvY3VtZW50c1N0b3JlJywgJ3NvcnRlciddO1xuZXhwb3J0IGNvbnN0IEZVTkNUSU9OX0NPTVBPTkVOVFMgPSBbXG4gICAgJ3ZhbGlkYXRlU2NoZW1hJyxcbiAgICAnZ2V0RG9jdW1lbnRJbmRleElkJyxcbiAgICAnZ2V0RG9jdW1lbnRQcm9wZXJ0aWVzJyxcbiAgICAnZm9ybWF0RWxhcHNlZFRpbWUnXG5dO1xuZXhwb3J0IGNvbnN0IFNJTkdMRV9PUl9BUlJBWV9DT01QT05FTlRTID0gW1xuLyogZGVwcmVjYXRlZCB3aXRoIHYyLjAuMC1iZXRhLjUgKi9cbl07XG5leHBvcnQgZnVuY3Rpb24gcnVuU2luZ2xlSG9vayhob29rcywgb3JhbWEsIGlkLCBkb2MpIHtcbiAgICBjb25zdCBuZWVkQXN5bmMgPSBob29rcy5zb21lKGlzQXN5bmNGdW5jdGlvbik7XG4gICAgaWYgKG5lZWRBc3luYykge1xuICAgICAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaG9vayBvZiBob29rcykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGhvb2sob3JhbWEsIGlkLCBkb2MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG4gICAgICAgICAgICBob29rKG9yYW1hLCBpZCwgZG9jKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBydW5NdWx0aXBsZUhvb2soaG9va3MsIG9yYW1hLCBkb2NzT3JJZHMpIHtcbiAgICBjb25zdCBuZWVkQXN5bmMgPSBob29rcy5zb21lKGlzQXN5bmNGdW5jdGlvbik7XG4gICAgaWYgKG5lZWRBc3luYykge1xuICAgICAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaG9vayBvZiBob29rcykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGhvb2sob3JhbWEsIGRvY3NPcklkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIHtcbiAgICAgICAgICAgIGhvb2sob3JhbWEsIGRvY3NPcklkcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcnVuQWZ0ZXJTZWFyY2goaG9va3MsIGRiLCBwYXJhbXMsIGxhbmd1YWdlLCByZXN1bHRzKSB7XG4gICAgY29uc3QgbmVlZEFzeW5jID0gaG9va3Muc29tZShpc0FzeW5jRnVuY3Rpb24pO1xuICAgIGlmIChuZWVkQXN5bmMpIHtcbiAgICAgICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBob29rKGRiLCBwYXJhbXMsIGxhbmd1YWdlLCByZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3QgaG9vayBvZiBob29rcykge1xuICAgICAgICAgICAgaG9vayhkYiwgcGFyYW1zLCBsYW5ndWFnZSwgcmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcnVuQmVmb3JlU2VhcmNoKGhvb2tzLCBkYiwgcGFyYW1zLCBsYW5ndWFnZSkge1xuICAgIGNvbnN0IG5lZWRBc3luYyA9IGhvb2tzLnNvbWUoaXNBc3luY0Z1bmN0aW9uKTtcbiAgICBpZiAobmVlZEFzeW5jKSB7XG4gICAgICAgIHJldHVybiAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaG9vayhkYiwgcGFyYW1zLCBsYW5ndWFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIHtcbiAgICAgICAgICAgIGhvb2soZGIsIHBhcmFtcywgbGFuZ3VhZ2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJ1bkFmdGVyQ3JlYXRlKGhvb2tzLCBkYikge1xuICAgIGNvbnN0IG5lZWRBc3luYyA9IGhvb2tzLnNvbWUoaXNBc3luY0Z1bmN0aW9uKTtcbiAgICBpZiAobmVlZEFzeW5jKSB7XG4gICAgICAgIHJldHVybiAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaG9vayhkYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIHtcbiAgICAgICAgICAgIGhvb2soZGIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9va3MuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateResultScores: () => (/* binding */ calculateResultScores),\n/* harmony export */   create: () => (/* binding */ create),\n/* harmony export */   createIndex: () => (/* binding */ createIndex),\n/* harmony export */   getSearchableProperties: () => (/* binding */ getSearchableProperties),\n/* harmony export */   getSearchablePropertiesWithTypes: () => (/* binding */ getSearchablePropertiesWithTypes),\n/* harmony export */   insert: () => (/* binding */ insert),\n/* harmony export */   insertDocumentScoreParameters: () => (/* binding */ insertDocumentScoreParameters),\n/* harmony export */   insertTokenScoreParameters: () => (/* binding */ insertTokenScoreParameters),\n/* harmony export */   insertVector: () => (/* binding */ insertVector),\n/* harmony export */   load: () => (/* binding */ load),\n/* harmony export */   remove: () => (/* binding */ remove),\n/* harmony export */   removeDocumentScoreParameters: () => (/* binding */ removeDocumentScoreParameters),\n/* harmony export */   removeTokenScoreParameters: () => (/* binding */ removeTokenScoreParameters),\n/* harmony export */   save: () => (/* binding */ save),\n/* harmony export */   search: () => (/* binding */ search),\n/* harmony export */   searchByWhereClause: () => (/* binding */ searchByWhereClause)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _trees_avl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../trees/avl.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/avl.js\");\n/* harmony import */ var _trees_flat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../trees/flat.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/flat.js\");\n/* harmony import */ var _trees_radix_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../trees/radix.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/radix.js\");\n/* harmony import */ var _trees_bkd_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../trees/bkd.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/bkd.js\");\n/* harmony import */ var _trees_bool_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../trees/bool.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/bool.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _algorithms_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./algorithms.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/algorithms.js\");\n/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./defaults.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/defaults.js\");\n/* harmony import */ var _internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n/* harmony import */ var _trees_vector_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../trees/vector.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/vector.js\");\n\n\n\n\n\n\n\n\n\n\n\nfunction insertDocumentScoreParameters(index, prop, id, tokens, docsCount) {\n    const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_9__.getInternalDocumentId)(index.sharedInternalDocumentStore, id);\n    index.avgFieldLength[prop] = ((index.avgFieldLength[prop] ?? 0) * (docsCount - 1) + tokens.length) / docsCount;\n    index.fieldLengths[prop][internalId] = tokens.length;\n    index.frequencies[prop][internalId] = {};\n}\nfunction insertTokenScoreParameters(index, prop, id, tokens, token) {\n    let tokenFrequency = 0;\n    for (const t of tokens) {\n        if (t === token) {\n            tokenFrequency++;\n        }\n    }\n    const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_9__.getInternalDocumentId)(index.sharedInternalDocumentStore, id);\n    const tf = tokenFrequency / tokens.length;\n    index.frequencies[prop][internalId][token] = tf;\n    if (!(token in index.tokenOccurrences[prop])) {\n        index.tokenOccurrences[prop][token] = 0;\n    }\n    // increase a token counter that may not yet exist\n    index.tokenOccurrences[prop][token] = (index.tokenOccurrences[prop][token] ?? 0) + 1;\n}\nfunction removeDocumentScoreParameters(index, prop, id, docsCount) {\n    const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_9__.getInternalDocumentId)(index.sharedInternalDocumentStore, id);\n    if (docsCount > 1) {\n        index.avgFieldLength[prop] =\n            (index.avgFieldLength[prop] * docsCount - index.fieldLengths[prop][internalId]) / (docsCount - 1);\n    }\n    else {\n        index.avgFieldLength[prop] = undefined;\n    }\n    index.fieldLengths[prop][internalId] = undefined;\n    index.frequencies[prop][internalId] = undefined;\n}\nfunction removeTokenScoreParameters(index, prop, token) {\n    index.tokenOccurrences[prop][token]--;\n}\nfunction create(orama, sharedInternalDocumentStore, schema, index, prefix = '') {\n    if (!index) {\n        index = {\n            sharedInternalDocumentStore,\n            indexes: {},\n            vectorIndexes: {},\n            searchableProperties: [],\n            searchablePropertiesWithTypes: {},\n            frequencies: {},\n            tokenOccurrences: {},\n            avgFieldLength: {},\n            fieldLengths: {}\n        };\n    }\n    for (const [prop, type] of Object.entries(schema)) {\n        const path = `${prefix}${prefix ? '.' : ''}${prop}`;\n        if (typeof type === 'object' && !Array.isArray(type)) {\n            // Nested\n            create(orama, sharedInternalDocumentStore, type, index, path);\n            continue;\n        }\n        if ((0,_defaults_js__WEBPACK_IMPORTED_MODULE_8__.isVectorType)(type)) {\n            index.searchableProperties.push(path);\n            index.searchablePropertiesWithTypes[path] = type;\n            index.vectorIndexes[path] = {\n                type: 'Vector',\n                node: new _trees_vector_js__WEBPACK_IMPORTED_MODULE_10__.VectorIndex((0,_defaults_js__WEBPACK_IMPORTED_MODULE_8__.getVectorSize)(type)),\n                isArray: false\n            };\n        }\n        else {\n            const isArray = /\\[/.test(type);\n            switch (type) {\n                case 'boolean':\n                case 'boolean[]':\n                    index.indexes[path] = { type: 'Bool', node: new _trees_bool_js__WEBPACK_IMPORTED_MODULE_5__.BoolNode(), isArray };\n                    break;\n                case 'number':\n                case 'number[]':\n                    index.indexes[path] = { type: 'AVL', node: new _trees_avl_js__WEBPACK_IMPORTED_MODULE_1__.AVLTree(0, []), isArray };\n                    break;\n                case 'string':\n                case 'string[]':\n                    index.indexes[path] = { type: 'Radix', node: new _trees_radix_js__WEBPACK_IMPORTED_MODULE_3__.RadixTree(), isArray };\n                    index.avgFieldLength[path] = 0;\n                    index.frequencies[path] = {};\n                    index.tokenOccurrences[path] = {};\n                    index.fieldLengths[path] = {};\n                    break;\n                case 'enum':\n                case 'enum[]':\n                    index.indexes[path] = { type: 'Flat', node: new _trees_flat_js__WEBPACK_IMPORTED_MODULE_2__.FlatTree(), isArray };\n                    break;\n                case 'geopoint':\n                    index.indexes[path] = { type: 'BKD', node: new _trees_bkd_js__WEBPACK_IMPORTED_MODULE_4__.BKDTree(), isArray };\n                    break;\n                default:\n                    throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_SCHEMA_TYPE', Array.isArray(type) ? 'array' : type, path);\n            }\n            index.searchableProperties.push(path);\n            index.searchablePropertiesWithTypes[path] = type;\n        }\n    }\n    return index;\n}\nfunction insertScalarBuilder(implementation, index, prop, internalId, language, tokenizer, docsCount, options) {\n    return (value) => {\n        const { type, node } = index.indexes[prop];\n        switch (type) {\n            case 'Bool': {\n                node[value ? 'true' : 'false'].add(internalId);\n                break;\n            }\n            case 'AVL': {\n                const avlRebalanceThreshold = options?.avlRebalanceThreshold ?? 1;\n                node.insert(value, internalId, avlRebalanceThreshold);\n                break;\n            }\n            case 'Radix': {\n                const tokens = tokenizer.tokenize(value, language, prop, false);\n                implementation.insertDocumentScoreParameters(index, prop, internalId, tokens, docsCount);\n                for (const token of tokens) {\n                    implementation.insertTokenScoreParameters(index, prop, internalId, tokens, token);\n                    node.insert(token, internalId);\n                }\n                break;\n            }\n            case 'Flat': {\n                node.insert(value, internalId);\n                break;\n            }\n            case 'BKD': {\n                node.insert(value, [internalId]);\n                break;\n            }\n        }\n    };\n}\nfunction insert(implementation, index, prop, id, internalId, value, schemaType, language, tokenizer, docsCount, options) {\n    if ((0,_defaults_js__WEBPACK_IMPORTED_MODULE_8__.isVectorType)(schemaType)) {\n        return insertVector(index, prop, value, id, internalId);\n    }\n    const insertScalar = insertScalarBuilder(implementation, index, prop, internalId, language, tokenizer, docsCount, options);\n    if (!(0,_defaults_js__WEBPACK_IMPORTED_MODULE_8__.isArrayType)(schemaType)) {\n        return insertScalar(value);\n    }\n    const elements = value;\n    const elementsLength = elements.length;\n    for (let i = 0; i < elementsLength; i++) {\n        insertScalar(elements[i]);\n    }\n}\nfunction insertVector(index, prop, value, id, internalDocumentId) {\n    index.vectorIndexes[prop].node.add(internalDocumentId, value);\n}\nfunction removeScalar(implementation, index, prop, id, internalId, value, schemaType, language, tokenizer, docsCount) {\n    if ((0,_defaults_js__WEBPACK_IMPORTED_MODULE_8__.isVectorType)(schemaType)) {\n        index.vectorIndexes[prop].node.remove(internalId);\n        return true;\n    }\n    const { type, node } = index.indexes[prop];\n    switch (type) {\n        case 'AVL': {\n            node.removeDocument(value, internalId);\n            return true;\n        }\n        case 'Bool': {\n            node[value ? 'true' : 'false'].delete(internalId);\n            return true;\n        }\n        case 'Radix': {\n            const tokens = tokenizer.tokenize(value, language, prop);\n            implementation.removeDocumentScoreParameters(index, prop, id, docsCount);\n            for (const token of tokens) {\n                implementation.removeTokenScoreParameters(index, prop, token);\n                node.removeDocumentByWord(token, internalId);\n            }\n            return true;\n        }\n        case 'Flat': {\n            node.removeDocument(internalId, value);\n            return true;\n        }\n        case 'BKD': {\n            node.removeDocByID(value, internalId);\n            return false;\n        }\n    }\n}\nfunction remove(implementation, index, prop, id, internalId, value, schemaType, language, tokenizer, docsCount) {\n    if (!(0,_defaults_js__WEBPACK_IMPORTED_MODULE_8__.isArrayType)(schemaType)) {\n        return removeScalar(implementation, index, prop, id, internalId, value, schemaType, language, tokenizer, docsCount);\n    }\n    const innerSchemaType = (0,_defaults_js__WEBPACK_IMPORTED_MODULE_8__.getInnerType)(schemaType);\n    const elements = value;\n    const elementsLength = elements.length;\n    for (let i = 0; i < elementsLength; i++) {\n        removeScalar(implementation, index, prop, id, internalId, elements[i], innerSchemaType, language, tokenizer, docsCount);\n    }\n    return true;\n}\nfunction calculateResultScores(index, prop, term, ids, docsCount, bm25Relevance, resultsMap, boostPerProperty, whereFiltersIDs, keywordMatchesMap) {\n    const documentIDs = Array.from(ids);\n    const avgFieldLength = index.avgFieldLength[prop];\n    const fieldLengths = index.fieldLengths[prop];\n    const oramaOccurrences = index.tokenOccurrences[prop];\n    const oramaFrequencies = index.frequencies[prop];\n    // oramaOccurrences[term] can be undefined, 0, string, or { [k: string]: number }\n    const termOccurrences = typeof oramaOccurrences[term] === 'number' ? (oramaOccurrences[term] ?? 0) : 0;\n    // Calculate TF-IDF value for each term, in each document, for each index.\n    const documentIDsLength = documentIDs.length;\n    for (let k = 0; k < documentIDsLength; k++) {\n        const internalId = documentIDs[k];\n        if (whereFiltersIDs && !whereFiltersIDs.has(internalId)) {\n            continue;\n        }\n        // Track keyword matches per property\n        if (!keywordMatchesMap.has(internalId)) {\n            keywordMatchesMap.set(internalId, new Map());\n        }\n        const propertyMatches = keywordMatchesMap.get(internalId);\n        propertyMatches.set(prop, (propertyMatches.get(prop) || 0) + 1);\n        const tf = oramaFrequencies?.[internalId]?.[term] ?? 0;\n        const bm25 = (0,_algorithms_js__WEBPACK_IMPORTED_MODULE_7__.BM25)(tf, termOccurrences, docsCount, fieldLengths[internalId], avgFieldLength, bm25Relevance);\n        if (resultsMap.has(internalId)) {\n            resultsMap.set(internalId, resultsMap.get(internalId) + bm25 * boostPerProperty);\n        }\n        else {\n            resultsMap.set(internalId, bm25 * boostPerProperty);\n        }\n    }\n}\nfunction search(index, term, tokenizer, language, propertiesToSearch, exact, tolerance, boost, relevance, docsCount, whereFiltersIDs, threshold = 0) {\n    const tokens = tokenizer.tokenize(term, language);\n    const keywordsCount = tokens.length || 1;\n    // Track keyword matches per document and property\n    const keywordMatchesMap = new Map();\n    // Track which tokens were found in the search\n    const tokenFoundMap = new Map();\n    const resultsMap = new Map();\n    for (const prop of propertiesToSearch) {\n        if (!(prop in index.indexes)) {\n            continue;\n        }\n        const tree = index.indexes[prop];\n        const { type } = tree;\n        if (type !== 'Radix') {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('WRONG_SEARCH_PROPERTY_TYPE', prop);\n        }\n        const boostPerProperty = boost[prop] ?? 1;\n        if (boostPerProperty <= 0) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_BOOST_VALUE', boostPerProperty);\n        }\n        // if the tokenizer returns an empty array, we returns all the documents\n        if (tokens.length === 0 && !term) {\n            tokens.push('');\n        }\n        // Process each token in the search term\n        const tokenLength = tokens.length;\n        for (let i = 0; i < tokenLength; i++) {\n            const token = tokens[i];\n            const searchResult = tree.node.find({ term: token, exact, tolerance });\n            // See if this token was found (for threshold=0 filtering)\n            const termsFound = Object.keys(searchResult);\n            if (termsFound.length > 0) {\n                tokenFoundMap.set(token, true);\n            }\n            // Process each matching term\n            const termsFoundLength = termsFound.length;\n            for (let j = 0; j < termsFoundLength; j++) {\n                const word = termsFound[j];\n                const ids = searchResult[word];\n                calculateResultScores(index, prop, word, ids, docsCount, relevance, resultsMap, boostPerProperty, whereFiltersIDs, keywordMatchesMap);\n            }\n        }\n    }\n    // Convert to array and sort by score\n    const results = Array.from(resultsMap.entries())\n        .map(([id, score]) => [id, score])\n        .sort((a, b) => b[1] - a[1]);\n    if (results.length === 0) {\n        return [];\n    }\n    // If threshold is 1, return all results\n    if (threshold === 1) {\n        return results;\n    }\n    // For threshold=0, check if all tokens were found\n    if (threshold === 0) {\n        // Quick return for single tokens - already validated\n        if (keywordsCount === 1) {\n            return results;\n        }\n        // For multiple tokens, verify that ALL tokens were found\n        // If any token wasn't found, return an empty result\n        for (const token of tokens) {\n            if (!tokenFoundMap.get(token)) {\n                return [];\n            }\n        }\n        // Find documents that have all keywords in at least one property\n        const fullMatches = results.filter(([id]) => {\n            const propertyMatches = keywordMatchesMap.get(id);\n            if (!propertyMatches)\n                return false;\n            // Check if any property has all keywords\n            return Array.from(propertyMatches.values()).some((matches) => matches === keywordsCount);\n        });\n        return fullMatches;\n    }\n    // Find documents that have all keywords in at least one property\n    const fullMatches = results.filter(([id]) => {\n        const propertyMatches = keywordMatchesMap.get(id);\n        if (!propertyMatches)\n            return false;\n        // Check if any property has all keywords\n        return Array.from(propertyMatches.values()).some((matches) => matches === keywordsCount);\n    });\n    // If we have full matches and threshold < 1, return full matches plus a percentage of partial matches\n    if (fullMatches.length > 0) {\n        const remainingResults = results.filter(([id]) => !fullMatches.some(([fid]) => fid === id));\n        const additionalResults = Math.ceil(remainingResults.length * threshold);\n        return [...fullMatches, ...remainingResults.slice(0, additionalResults)];\n    }\n    // If no full matches, return all results\n    return results;\n}\nfunction searchByWhereClause(index, tokenizer, filters, language) {\n    // Handle logical operators\n    if ('and' in filters && filters.and && Array.isArray(filters.and)) {\n        const andFilters = filters.and;\n        if (andFilters.length === 0) {\n            return new Set();\n        }\n        const results = andFilters.map((filter) => searchByWhereClause(index, tokenizer, filter, language));\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.setIntersection)(...results);\n    }\n    if ('or' in filters && filters.or && Array.isArray(filters.or)) {\n        const orFilters = filters.or;\n        if (orFilters.length === 0) {\n            return new Set();\n        }\n        const results = orFilters.map((filter) => searchByWhereClause(index, tokenizer, filter, language));\n        // Use reduce to union all sets\n        return results.reduce((acc, set) => (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.setUnion)(acc, set), new Set());\n    }\n    if ('not' in filters && filters.not) {\n        const notFilter = filters.not;\n        // Get all document IDs from the internal document store\n        const allDocs = new Set();\n        // Get all document IDs from the internal document store\n        const docsStore = index.sharedInternalDocumentStore;\n        for (let i = 1; i <= docsStore.internalIdToId.length; i++) {\n            allDocs.add(i);\n        }\n        const notResult = searchByWhereClause(index, tokenizer, notFilter, language);\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.setDifference)(allDocs, notResult);\n    }\n    // Handle regular property filters (existing logic)\n    const filterKeys = Object.keys(filters);\n    const filtersMap = filterKeys.reduce((acc, key) => ({\n        [key]: new Set(),\n        ...acc\n    }), {});\n    for (const param of filterKeys) {\n        const operation = filters[param];\n        if (typeof index.indexes[param] === 'undefined') {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('UNKNOWN_FILTER_PROPERTY', param);\n        }\n        const { node, type, isArray } = index.indexes[param];\n        if (type === 'Bool') {\n            const idx = node;\n            const filteredIDs = operation ? idx.true : idx.false;\n            filtersMap[param] = (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.setUnion)(filtersMap[param], filteredIDs);\n            continue;\n        }\n        if (type === 'BKD') {\n            let reqOperation;\n            if ('radius' in operation) {\n                reqOperation = 'radius';\n            }\n            else if ('polygon' in operation) {\n                reqOperation = 'polygon';\n            }\n            else {\n                throw new Error(`Invalid operation ${operation}`);\n            }\n            if (reqOperation === 'radius') {\n                const { value, coordinates, unit = 'm', inside = true, highPrecision = false } = operation[reqOperation];\n                const distanceInMeters = (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.convertDistanceToMeters)(value, unit);\n                const ids = node.searchByRadius(coordinates, distanceInMeters, inside, undefined, highPrecision);\n                filtersMap[param] = addGeoResult(filtersMap[param], ids);\n            }\n            else {\n                const { coordinates, inside = true, highPrecision = false } = operation[reqOperation];\n                const ids = node.searchByPolygon(coordinates, inside, undefined, highPrecision);\n                filtersMap[param] = addGeoResult(filtersMap[param], ids);\n            }\n            continue;\n        }\n        if (type === 'Radix' && (typeof operation === 'string' || Array.isArray(operation))) {\n            for (const raw of [operation].flat()) {\n                const term = tokenizer.tokenize(raw, language, param);\n                for (const t of term) {\n                    const filteredIDsResults = node.find({ term: t, exact: true });\n                    filtersMap[param] = addFindResult(filtersMap[param], filteredIDsResults);\n                }\n            }\n            continue;\n        }\n        const operationKeys = Object.keys(operation);\n        if (operationKeys.length > 1) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_FILTER_OPERATION', operationKeys.length);\n        }\n        if (type === 'Flat') {\n            const results = new Set(isArray\n                ? node.filterArr(operation)\n                : node.filter(operation));\n            filtersMap[param] = (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.setUnion)(filtersMap[param], results);\n            continue;\n        }\n        if (type === 'AVL') {\n            const operationOpt = operationKeys[0];\n            const operationValue = operation[operationOpt];\n            let filteredIDs;\n            switch (operationOpt) {\n                case 'gt': {\n                    filteredIDs = node.greaterThan(operationValue, false);\n                    break;\n                }\n                case 'gte': {\n                    filteredIDs = node.greaterThan(operationValue, true);\n                    break;\n                }\n                case 'lt': {\n                    filteredIDs = node.lessThan(operationValue, false);\n                    break;\n                }\n                case 'lte': {\n                    filteredIDs = node.lessThan(operationValue, true);\n                    break;\n                }\n                case 'eq': {\n                    const ret = node.find(operationValue);\n                    filteredIDs = ret ?? new Set();\n                    break;\n                }\n                case 'between': {\n                    const [min, max] = operationValue;\n                    filteredIDs = node.rangeSearch(min, max);\n                    break;\n                }\n                default:\n                    throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_FILTER_OPERATION', operationOpt);\n            }\n            filtersMap[param] = (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.setUnion)(filtersMap[param], filteredIDs);\n        }\n    }\n    // AND operation: calculate the intersection between all the IDs in filterMap\n    return (0,_utils_js__WEBPACK_IMPORTED_MODULE_6__.setIntersection)(...Object.values(filtersMap));\n}\nfunction getSearchableProperties(index) {\n    return index.searchableProperties;\n}\nfunction getSearchablePropertiesWithTypes(index) {\n    return index.searchablePropertiesWithTypes;\n}\nfunction load(sharedInternalDocumentStore, raw) {\n    const { indexes: rawIndexes, vectorIndexes: rawVectorIndexes, searchableProperties, searchablePropertiesWithTypes, frequencies, tokenOccurrences, avgFieldLength, fieldLengths } = raw;\n    const indexes = {};\n    const vectorIndexes = {};\n    for (const prop of Object.keys(rawIndexes)) {\n        const { node, type, isArray } = rawIndexes[prop];\n        switch (type) {\n            case 'Radix':\n                indexes[prop] = {\n                    type: 'Radix',\n                    node: _trees_radix_js__WEBPACK_IMPORTED_MODULE_3__.RadixTree.fromJSON(node),\n                    isArray\n                };\n                break;\n            case 'Flat':\n                indexes[prop] = {\n                    type: 'Flat',\n                    node: _trees_flat_js__WEBPACK_IMPORTED_MODULE_2__.FlatTree.fromJSON(node),\n                    isArray\n                };\n                break;\n            case 'AVL':\n                indexes[prop] = {\n                    type: 'AVL',\n                    node: _trees_avl_js__WEBPACK_IMPORTED_MODULE_1__.AVLTree.fromJSON(node),\n                    isArray\n                };\n                break;\n            case 'BKD':\n                indexes[prop] = {\n                    type: 'BKD',\n                    node: _trees_bkd_js__WEBPACK_IMPORTED_MODULE_4__.BKDTree.fromJSON(node),\n                    isArray\n                };\n                break;\n            case 'Bool':\n                indexes[prop] = {\n                    type: 'Bool',\n                    node: _trees_bool_js__WEBPACK_IMPORTED_MODULE_5__.BoolNode.fromJSON(node),\n                    isArray\n                };\n                break;\n            default:\n                indexes[prop] = rawIndexes[prop];\n        }\n    }\n    for (const idx of Object.keys(rawVectorIndexes)) {\n        vectorIndexes[idx] = {\n            type: 'Vector',\n            isArray: false,\n            node: _trees_vector_js__WEBPACK_IMPORTED_MODULE_10__.VectorIndex.fromJSON(rawVectorIndexes[idx])\n        };\n    }\n    return {\n        sharedInternalDocumentStore,\n        indexes,\n        vectorIndexes,\n        searchableProperties,\n        searchablePropertiesWithTypes,\n        frequencies,\n        tokenOccurrences,\n        avgFieldLength,\n        fieldLengths\n    };\n}\nfunction save(index) {\n    const { indexes, vectorIndexes, searchableProperties, searchablePropertiesWithTypes, frequencies, tokenOccurrences, avgFieldLength, fieldLengths } = index;\n    const dumpVectorIndexes = {};\n    for (const idx of Object.keys(vectorIndexes)) {\n        dumpVectorIndexes[idx] = vectorIndexes[idx].node.toJSON();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const savedIndexes = {};\n    for (const name of Object.keys(indexes)) {\n        const { type, node, isArray } = indexes[name];\n        if (type === 'Flat' || type === 'Radix' || type === 'AVL' || type === 'BKD' || type === 'Bool') {\n            savedIndexes[name] = {\n                type,\n                node: node.toJSON(),\n                isArray\n            };\n        }\n        else {\n            savedIndexes[name] = indexes[name];\n            savedIndexes[name].node = savedIndexes[name].node.toJSON();\n        }\n    }\n    return {\n        indexes: savedIndexes,\n        vectorIndexes: dumpVectorIndexes,\n        searchableProperties,\n        searchablePropertiesWithTypes,\n        frequencies,\n        tokenOccurrences,\n        avgFieldLength,\n        fieldLengths\n    };\n}\nfunction createIndex() {\n    return {\n        create,\n        insert,\n        remove,\n        insertDocumentScoreParameters,\n        insertTokenScoreParameters,\n        removeDocumentScoreParameters,\n        removeTokenScoreParameters,\n        calculateResultScores,\n        search,\n        searchByWhereClause,\n        getSearchableProperties,\n        getSearchablePropertiesWithTypes,\n        load,\n        save\n    };\n}\nfunction addGeoResult(set, ids) {\n    if (!set) {\n        set = new Set();\n    }\n    const idsLength = ids.length;\n    for (let i = 0; i < idsLength; i++) {\n        const entry = ids[i].docIDs;\n        const idsLength = entry.length;\n        for (let j = 0; j < idsLength; j++) {\n            set.add(entry[j]);\n        }\n    }\n    return set;\n}\nfunction addFindResult(set, filteredIDsResults) {\n    if (!set) {\n        set = new Set();\n    }\n    const keys = Object.keys(filteredIDsResults);\n    const keysLength = keys.length;\n    for (let i = 0; i < keysLength; i++) {\n        const ids = filteredIDsResults[keys[i]];\n        const idsLength = ids.length;\n        for (let j = 0; j < idsLength; j++) {\n            set.add(ids[j]);\n        }\n    }\n    return set;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ0Q7QUFDRTtBQUNFO0FBQ0o7QUFDRTtBQUNvRDtBQUN6RDtBQUNnRDtBQUNmO0FBQ3ZCO0FBQzFDO0FBQ1AsdUJBQXVCLHFGQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFGQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx1QkFBdUIscUZBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsNkJBQTZCO0FBQzdCO0FBQ0EsNkNBQTZDO0FBQzdDLDJCQUEyQjtBQUMzQixnQ0FBZ0M7QUFDaEMsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxLQUFLO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBEQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBEQUFXLENBQUMsMkRBQWE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx3QkFBd0Isb0RBQVE7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHVCQUF1QixrREFBTztBQUMxRTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMseUJBQXlCLHNEQUFTO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHdCQUF3QixvREFBUTtBQUM1RTtBQUNBO0FBQ0EsNENBQTRDLHVCQUF1QixrREFBTztBQUMxRTtBQUNBO0FBQ0EsMEJBQTBCLHVEQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsUUFBUSwwREFBWTtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxTQUFTLHlEQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMERBQVk7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxTQUFTLHlEQUFXO0FBQ3BCO0FBQ0E7QUFDQSw0QkFBNEIsMERBQVk7QUFDeEM7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9EQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0Esa0JBQWtCLHVEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQSxrREFBa0QsK0JBQStCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxtREFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzQ0FBc0M7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLEtBQUs7QUFDVjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQVc7QUFDN0I7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxtREFBUTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELFVBQVU7QUFDL0Q7QUFDQTtBQUNBLHdCQUF3Qix1RUFBdUU7QUFDL0YseUNBQXlDLGtFQUF1QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvREFBb0Q7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELHNCQUFzQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1EQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHVEQUFXO0FBQ3JDO0FBQ0EsZ0NBQWdDLG1EQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMERBQWU7QUFDMUI7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQLFlBQVkseUtBQXlLO0FBQ3JMO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9EQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrREFBTztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0RBQU87QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9EQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMERBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSwySUFBMkk7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGVBQWU7QUFDbkM7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvY29tcG9uZW50cy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gJy4uL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBBVkxUcmVlIH0gZnJvbSAnLi4vdHJlZXMvYXZsLmpzJztcbmltcG9ydCB7IEZsYXRUcmVlIH0gZnJvbSAnLi4vdHJlZXMvZmxhdC5qcyc7XG5pbXBvcnQgeyBSYWRpeFRyZWUgfSBmcm9tICcuLi90cmVlcy9yYWRpeC5qcyc7XG5pbXBvcnQgeyBCS0RUcmVlIH0gZnJvbSAnLi4vdHJlZXMvYmtkLmpzJztcbmltcG9ydCB7IEJvb2xOb2RlIH0gZnJvbSAnLi4vdHJlZXMvYm9vbC5qcyc7XG5pbXBvcnQgeyBjb252ZXJ0RGlzdGFuY2VUb01ldGVycywgc2V0SW50ZXJzZWN0aW9uLCBzZXRVbmlvbiwgc2V0RGlmZmVyZW5jZSB9IGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCB7IEJNMjUgfSBmcm9tICcuL2FsZ29yaXRobXMuanMnO1xuaW1wb3J0IHsgZ2V0SW5uZXJUeXBlLCBnZXRWZWN0b3JTaXplLCBpc0FycmF5VHlwZSwgaXNWZWN0b3JUeXBlIH0gZnJvbSAnLi9kZWZhdWx0cy5qcyc7XG5pbXBvcnQgeyBnZXRJbnRlcm5hbERvY3VtZW50SWQgfSBmcm9tICcuL2ludGVybmFsLWRvY3VtZW50LWlkLXN0b3JlLmpzJztcbmltcG9ydCB7IFZlY3RvckluZGV4IH0gZnJvbSAnLi4vdHJlZXMvdmVjdG9yLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnREb2N1bWVudFNjb3JlUGFyYW1ldGVycyhpbmRleCwgcHJvcCwgaWQsIHRva2VucywgZG9jc0NvdW50KSB7XG4gICAgY29uc3QgaW50ZXJuYWxJZCA9IGdldEludGVybmFsRG9jdW1lbnRJZChpbmRleC5zaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIGlkKTtcbiAgICBpbmRleC5hdmdGaWVsZExlbmd0aFtwcm9wXSA9ICgoaW5kZXguYXZnRmllbGRMZW5ndGhbcHJvcF0gPz8gMCkgKiAoZG9jc0NvdW50IC0gMSkgKyB0b2tlbnMubGVuZ3RoKSAvIGRvY3NDb3VudDtcbiAgICBpbmRleC5maWVsZExlbmd0aHNbcHJvcF1baW50ZXJuYWxJZF0gPSB0b2tlbnMubGVuZ3RoO1xuICAgIGluZGV4LmZyZXF1ZW5jaWVzW3Byb3BdW2ludGVybmFsSWRdID0ge307XG59XG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0VG9rZW5TY29yZVBhcmFtZXRlcnMoaW5kZXgsIHByb3AsIGlkLCB0b2tlbnMsIHRva2VuKSB7XG4gICAgbGV0IHRva2VuRnJlcXVlbmN5ID0gMDtcbiAgICBmb3IgKGNvbnN0IHQgb2YgdG9rZW5zKSB7XG4gICAgICAgIGlmICh0ID09PSB0b2tlbikge1xuICAgICAgICAgICAgdG9rZW5GcmVxdWVuY3krKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBpbnRlcm5hbElkID0gZ2V0SW50ZXJuYWxEb2N1bWVudElkKGluZGV4LnNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSwgaWQpO1xuICAgIGNvbnN0IHRmID0gdG9rZW5GcmVxdWVuY3kgLyB0b2tlbnMubGVuZ3RoO1xuICAgIGluZGV4LmZyZXF1ZW5jaWVzW3Byb3BdW2ludGVybmFsSWRdW3Rva2VuXSA9IHRmO1xuICAgIGlmICghKHRva2VuIGluIGluZGV4LnRva2VuT2NjdXJyZW5jZXNbcHJvcF0pKSB7XG4gICAgICAgIGluZGV4LnRva2VuT2NjdXJyZW5jZXNbcHJvcF1bdG9rZW5dID0gMDtcbiAgICB9XG4gICAgLy8gaW5jcmVhc2UgYSB0b2tlbiBjb3VudGVyIHRoYXQgbWF5IG5vdCB5ZXQgZXhpc3RcbiAgICBpbmRleC50b2tlbk9jY3VycmVuY2VzW3Byb3BdW3Rva2VuXSA9IChpbmRleC50b2tlbk9jY3VycmVuY2VzW3Byb3BdW3Rva2VuXSA/PyAwKSArIDE7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRG9jdW1lbnRTY29yZVBhcmFtZXRlcnMoaW5kZXgsIHByb3AsIGlkLCBkb2NzQ291bnQpIHtcbiAgICBjb25zdCBpbnRlcm5hbElkID0gZ2V0SW50ZXJuYWxEb2N1bWVudElkKGluZGV4LnNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSwgaWQpO1xuICAgIGlmIChkb2NzQ291bnQgPiAxKSB7XG4gICAgICAgIGluZGV4LmF2Z0ZpZWxkTGVuZ3RoW3Byb3BdID1cbiAgICAgICAgICAgIChpbmRleC5hdmdGaWVsZExlbmd0aFtwcm9wXSAqIGRvY3NDb3VudCAtIGluZGV4LmZpZWxkTGVuZ3Roc1twcm9wXVtpbnRlcm5hbElkXSkgLyAoZG9jc0NvdW50IC0gMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpbmRleC5hdmdGaWVsZExlbmd0aFtwcm9wXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaW5kZXguZmllbGRMZW5ndGhzW3Byb3BdW2ludGVybmFsSWRdID0gdW5kZWZpbmVkO1xuICAgIGluZGV4LmZyZXF1ZW5jaWVzW3Byb3BdW2ludGVybmFsSWRdID0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRva2VuU2NvcmVQYXJhbWV0ZXJzKGluZGV4LCBwcm9wLCB0b2tlbikge1xuICAgIGluZGV4LnRva2VuT2NjdXJyZW5jZXNbcHJvcF1bdG9rZW5dLS07XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKG9yYW1hLCBzaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIHNjaGVtYSwgaW5kZXgsIHByZWZpeCA9ICcnKSB7XG4gICAgaWYgKCFpbmRleCkge1xuICAgICAgICBpbmRleCA9IHtcbiAgICAgICAgICAgIHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSxcbiAgICAgICAgICAgIGluZGV4ZXM6IHt9LFxuICAgICAgICAgICAgdmVjdG9ySW5kZXhlczoge30sXG4gICAgICAgICAgICBzZWFyY2hhYmxlUHJvcGVydGllczogW10sXG4gICAgICAgICAgICBzZWFyY2hhYmxlUHJvcGVydGllc1dpdGhUeXBlczoge30sXG4gICAgICAgICAgICBmcmVxdWVuY2llczoge30sXG4gICAgICAgICAgICB0b2tlbk9jY3VycmVuY2VzOiB7fSxcbiAgICAgICAgICAgIGF2Z0ZpZWxkTGVuZ3RoOiB7fSxcbiAgICAgICAgICAgIGZpZWxkTGVuZ3Roczoge31cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbcHJvcCwgdHlwZV0gb2YgT2JqZWN0LmVudHJpZXMoc2NoZW1hKSkge1xuICAgICAgICBjb25zdCBwYXRoID0gYCR7cHJlZml4fSR7cHJlZml4ID8gJy4nIDogJyd9JHtwcm9wfWA7XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIC8vIE5lc3RlZFxuICAgICAgICAgICAgY3JlYXRlKG9yYW1hLCBzaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIHR5cGUsIGluZGV4LCBwYXRoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1ZlY3RvclR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIGluZGV4LnNlYXJjaGFibGVQcm9wZXJ0aWVzLnB1c2gocGF0aCk7XG4gICAgICAgICAgICBpbmRleC5zZWFyY2hhYmxlUHJvcGVydGllc1dpdGhUeXBlc1twYXRoXSA9IHR5cGU7XG4gICAgICAgICAgICBpbmRleC52ZWN0b3JJbmRleGVzW3BhdGhdID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdWZWN0b3InLFxuICAgICAgICAgICAgICAgIG5vZGU6IG5ldyBWZWN0b3JJbmRleChnZXRWZWN0b3JTaXplKHR5cGUpKSxcbiAgICAgICAgICAgICAgICBpc0FycmF5OiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlzQXJyYXkgPSAvXFxbLy50ZXN0KHR5cGUpO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbltdJzpcbiAgICAgICAgICAgICAgICAgICAgaW5kZXguaW5kZXhlc1twYXRoXSA9IHsgdHlwZTogJ0Jvb2wnLCBub2RlOiBuZXcgQm9vbE5vZGUoKSwgaXNBcnJheSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcltdJzpcbiAgICAgICAgICAgICAgICAgICAgaW5kZXguaW5kZXhlc1twYXRoXSA9IHsgdHlwZTogJ0FWTCcsIG5vZGU6IG5ldyBBVkxUcmVlKDAsIFtdKSwgaXNBcnJheSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZ1tdJzpcbiAgICAgICAgICAgICAgICAgICAgaW5kZXguaW5kZXhlc1twYXRoXSA9IHsgdHlwZTogJ1JhZGl4Jywgbm9kZTogbmV3IFJhZGl4VHJlZSgpLCBpc0FycmF5IH07XG4gICAgICAgICAgICAgICAgICAgIGluZGV4LmF2Z0ZpZWxkTGVuZ3RoW3BhdGhdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXguZnJlcXVlbmNpZXNbcGF0aF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgudG9rZW5PY2N1cnJlbmNlc1twYXRoXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBpbmRleC5maWVsZExlbmd0aHNbcGF0aF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW51bSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW51bVtdJzpcbiAgICAgICAgICAgICAgICAgICAgaW5kZXguaW5kZXhlc1twYXRoXSA9IHsgdHlwZTogJ0ZsYXQnLCBub2RlOiBuZXcgRmxhdFRyZWUoKSwgaXNBcnJheSB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdnZW9wb2ludCc6XG4gICAgICAgICAgICAgICAgICAgIGluZGV4LmluZGV4ZXNbcGF0aF0gPSB7IHR5cGU6ICdCS0QnLCBub2RlOiBuZXcgQktEVHJlZSgpLCBpc0FycmF5IH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdJTlZBTElEX1NDSEVNQV9UWVBFJywgQXJyYXkuaXNBcnJheSh0eXBlKSA/ICdhcnJheScgOiB0eXBlLCBwYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4LnNlYXJjaGFibGVQcm9wZXJ0aWVzLnB1c2gocGF0aCk7XG4gICAgICAgICAgICBpbmRleC5zZWFyY2hhYmxlUHJvcGVydGllc1dpdGhUeXBlc1twYXRoXSA9IHR5cGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xufVxuZnVuY3Rpb24gaW5zZXJ0U2NhbGFyQnVpbGRlcihpbXBsZW1lbnRhdGlvbiwgaW5kZXgsIHByb3AsIGludGVybmFsSWQsIGxhbmd1YWdlLCB0b2tlbml6ZXIsIGRvY3NDb3VudCwgb3B0aW9ucykge1xuICAgIHJldHVybiAodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgeyB0eXBlLCBub2RlIH0gPSBpbmRleC5pbmRleGVzW3Byb3BdO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ0Jvb2wnOiB7XG4gICAgICAgICAgICAgICAgbm9kZVt2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZSddLmFkZChpbnRlcm5hbElkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ0FWTCc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdmxSZWJhbGFuY2VUaHJlc2hvbGQgPSBvcHRpb25zPy5hdmxSZWJhbGFuY2VUaHJlc2hvbGQgPz8gMTtcbiAgICAgICAgICAgICAgICBub2RlLmluc2VydCh2YWx1ZSwgaW50ZXJuYWxJZCwgYXZsUmViYWxhbmNlVGhyZXNob2xkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ1JhZGl4Jzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IHRva2VuaXplci50b2tlbml6ZSh2YWx1ZSwgbGFuZ3VhZ2UsIHByb3AsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpbXBsZW1lbnRhdGlvbi5pbnNlcnREb2N1bWVudFNjb3JlUGFyYW1ldGVycyhpbmRleCwgcHJvcCwgaW50ZXJuYWxJZCwgdG9rZW5zLCBkb2NzQ291bnQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uLmluc2VydFRva2VuU2NvcmVQYXJhbWV0ZXJzKGluZGV4LCBwcm9wLCBpbnRlcm5hbElkLCB0b2tlbnMsIHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pbnNlcnQodG9rZW4sIGludGVybmFsSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ0ZsYXQnOiB7XG4gICAgICAgICAgICAgICAgbm9kZS5pbnNlcnQodmFsdWUsIGludGVybmFsSWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnQktEJzoge1xuICAgICAgICAgICAgICAgIG5vZGUuaW5zZXJ0KHZhbHVlLCBbaW50ZXJuYWxJZF0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnQoaW1wbGVtZW50YXRpb24sIGluZGV4LCBwcm9wLCBpZCwgaW50ZXJuYWxJZCwgdmFsdWUsIHNjaGVtYVR5cGUsIGxhbmd1YWdlLCB0b2tlbml6ZXIsIGRvY3NDb3VudCwgb3B0aW9ucykge1xuICAgIGlmIChpc1ZlY3RvclR5cGUoc2NoZW1hVHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGluc2VydFZlY3RvcihpbmRleCwgcHJvcCwgdmFsdWUsIGlkLCBpbnRlcm5hbElkKTtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0U2NhbGFyID0gaW5zZXJ0U2NhbGFyQnVpbGRlcihpbXBsZW1lbnRhdGlvbiwgaW5kZXgsIHByb3AsIGludGVybmFsSWQsIGxhbmd1YWdlLCB0b2tlbml6ZXIsIGRvY3NDb3VudCwgb3B0aW9ucyk7XG4gICAgaWYgKCFpc0FycmF5VHlwZShzY2hlbWFUeXBlKSkge1xuICAgICAgICByZXR1cm4gaW5zZXJ0U2NhbGFyKHZhbHVlKTtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudHMgPSB2YWx1ZTtcbiAgICBjb25zdCBlbGVtZW50c0xlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW5zZXJ0U2NhbGFyKGVsZW1lbnRzW2ldKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0VmVjdG9yKGluZGV4LCBwcm9wLCB2YWx1ZSwgaWQsIGludGVybmFsRG9jdW1lbnRJZCkge1xuICAgIGluZGV4LnZlY3RvckluZGV4ZXNbcHJvcF0ubm9kZS5hZGQoaW50ZXJuYWxEb2N1bWVudElkLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiByZW1vdmVTY2FsYXIoaW1wbGVtZW50YXRpb24sIGluZGV4LCBwcm9wLCBpZCwgaW50ZXJuYWxJZCwgdmFsdWUsIHNjaGVtYVR5cGUsIGxhbmd1YWdlLCB0b2tlbml6ZXIsIGRvY3NDb3VudCkge1xuICAgIGlmIChpc1ZlY3RvclR5cGUoc2NoZW1hVHlwZSkpIHtcbiAgICAgICAgaW5kZXgudmVjdG9ySW5kZXhlc1twcm9wXS5ub2RlLnJlbW92ZShpbnRlcm5hbElkKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHsgdHlwZSwgbm9kZSB9ID0gaW5kZXguaW5kZXhlc1twcm9wXTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnQVZMJzoge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVEb2N1bWVudCh2YWx1ZSwgaW50ZXJuYWxJZCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdCb29sJzoge1xuICAgICAgICAgICAgbm9kZVt2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZSddLmRlbGV0ZShpbnRlcm5hbElkKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1JhZGl4Jzoge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5zID0gdG9rZW5pemVyLnRva2VuaXplKHZhbHVlLCBsYW5ndWFnZSwgcHJvcCk7XG4gICAgICAgICAgICBpbXBsZW1lbnRhdGlvbi5yZW1vdmVEb2N1bWVudFNjb3JlUGFyYW1ldGVycyhpbmRleCwgcHJvcCwgaWQsIGRvY3NDb3VudCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uLnJlbW92ZVRva2VuU2NvcmVQYXJhbWV0ZXJzKGluZGV4LCBwcm9wLCB0b2tlbik7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVEb2N1bWVudEJ5V29yZCh0b2tlbiwgaW50ZXJuYWxJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdGbGF0Jzoge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVEb2N1bWVudChpbnRlcm5hbElkLCB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdCS0QnOiB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZURvY0J5SUQodmFsdWUsIGludGVybmFsSWQpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShpbXBsZW1lbnRhdGlvbiwgaW5kZXgsIHByb3AsIGlkLCBpbnRlcm5hbElkLCB2YWx1ZSwgc2NoZW1hVHlwZSwgbGFuZ3VhZ2UsIHRva2VuaXplciwgZG9jc0NvdW50KSB7XG4gICAgaWYgKCFpc0FycmF5VHlwZShzY2hlbWFUeXBlKSkge1xuICAgICAgICByZXR1cm4gcmVtb3ZlU2NhbGFyKGltcGxlbWVudGF0aW9uLCBpbmRleCwgcHJvcCwgaWQsIGludGVybmFsSWQsIHZhbHVlLCBzY2hlbWFUeXBlLCBsYW5ndWFnZSwgdG9rZW5pemVyLCBkb2NzQ291bnQpO1xuICAgIH1cbiAgICBjb25zdCBpbm5lclNjaGVtYVR5cGUgPSBnZXRJbm5lclR5cGUoc2NoZW1hVHlwZSk7XG4gICAgY29uc3QgZWxlbWVudHMgPSB2YWx1ZTtcbiAgICBjb25zdCBlbGVtZW50c0xlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVtb3ZlU2NhbGFyKGltcGxlbWVudGF0aW9uLCBpbmRleCwgcHJvcCwgaWQsIGludGVybmFsSWQsIGVsZW1lbnRzW2ldLCBpbm5lclNjaGVtYVR5cGUsIGxhbmd1YWdlLCB0b2tlbml6ZXIsIGRvY3NDb3VudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVJlc3VsdFNjb3JlcyhpbmRleCwgcHJvcCwgdGVybSwgaWRzLCBkb2NzQ291bnQsIGJtMjVSZWxldmFuY2UsIHJlc3VsdHNNYXAsIGJvb3N0UGVyUHJvcGVydHksIHdoZXJlRmlsdGVyc0lEcywga2V5d29yZE1hdGNoZXNNYXApIHtcbiAgICBjb25zdCBkb2N1bWVudElEcyA9IEFycmF5LmZyb20oaWRzKTtcbiAgICBjb25zdCBhdmdGaWVsZExlbmd0aCA9IGluZGV4LmF2Z0ZpZWxkTGVuZ3RoW3Byb3BdO1xuICAgIGNvbnN0IGZpZWxkTGVuZ3RocyA9IGluZGV4LmZpZWxkTGVuZ3Roc1twcm9wXTtcbiAgICBjb25zdCBvcmFtYU9jY3VycmVuY2VzID0gaW5kZXgudG9rZW5PY2N1cnJlbmNlc1twcm9wXTtcbiAgICBjb25zdCBvcmFtYUZyZXF1ZW5jaWVzID0gaW5kZXguZnJlcXVlbmNpZXNbcHJvcF07XG4gICAgLy8gb3JhbWFPY2N1cnJlbmNlc1t0ZXJtXSBjYW4gYmUgdW5kZWZpbmVkLCAwLCBzdHJpbmcsIG9yIHsgW2s6IHN0cmluZ106IG51bWJlciB9XG4gICAgY29uc3QgdGVybU9jY3VycmVuY2VzID0gdHlwZW9mIG9yYW1hT2NjdXJyZW5jZXNbdGVybV0gPT09ICdudW1iZXInID8gKG9yYW1hT2NjdXJyZW5jZXNbdGVybV0gPz8gMCkgOiAwO1xuICAgIC8vIENhbGN1bGF0ZSBURi1JREYgdmFsdWUgZm9yIGVhY2ggdGVybSwgaW4gZWFjaCBkb2N1bWVudCwgZm9yIGVhY2ggaW5kZXguXG4gICAgY29uc3QgZG9jdW1lbnRJRHNMZW5ndGggPSBkb2N1bWVudElEcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCBkb2N1bWVudElEc0xlbmd0aDsgaysrKSB7XG4gICAgICAgIGNvbnN0IGludGVybmFsSWQgPSBkb2N1bWVudElEc1trXTtcbiAgICAgICAgaWYgKHdoZXJlRmlsdGVyc0lEcyAmJiAhd2hlcmVGaWx0ZXJzSURzLmhhcyhpbnRlcm5hbElkKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHJhY2sga2V5d29yZCBtYXRjaGVzIHBlciBwcm9wZXJ0eVxuICAgICAgICBpZiAoIWtleXdvcmRNYXRjaGVzTWFwLmhhcyhpbnRlcm5hbElkKSkge1xuICAgICAgICAgICAga2V5d29yZE1hdGNoZXNNYXAuc2V0KGludGVybmFsSWQsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvcGVydHlNYXRjaGVzID0ga2V5d29yZE1hdGNoZXNNYXAuZ2V0KGludGVybmFsSWQpO1xuICAgICAgICBwcm9wZXJ0eU1hdGNoZXMuc2V0KHByb3AsIChwcm9wZXJ0eU1hdGNoZXMuZ2V0KHByb3ApIHx8IDApICsgMSk7XG4gICAgICAgIGNvbnN0IHRmID0gb3JhbWFGcmVxdWVuY2llcz8uW2ludGVybmFsSWRdPy5bdGVybV0gPz8gMDtcbiAgICAgICAgY29uc3QgYm0yNSA9IEJNMjUodGYsIHRlcm1PY2N1cnJlbmNlcywgZG9jc0NvdW50LCBmaWVsZExlbmd0aHNbaW50ZXJuYWxJZF0sIGF2Z0ZpZWxkTGVuZ3RoLCBibTI1UmVsZXZhbmNlKTtcbiAgICAgICAgaWYgKHJlc3VsdHNNYXAuaGFzKGludGVybmFsSWQpKSB7XG4gICAgICAgICAgICByZXN1bHRzTWFwLnNldChpbnRlcm5hbElkLCByZXN1bHRzTWFwLmdldChpbnRlcm5hbElkKSArIGJtMjUgKiBib29zdFBlclByb3BlcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHNNYXAuc2V0KGludGVybmFsSWQsIGJtMjUgKiBib29zdFBlclByb3BlcnR5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2goaW5kZXgsIHRlcm0sIHRva2VuaXplciwgbGFuZ3VhZ2UsIHByb3BlcnRpZXNUb1NlYXJjaCwgZXhhY3QsIHRvbGVyYW5jZSwgYm9vc3QsIHJlbGV2YW5jZSwgZG9jc0NvdW50LCB3aGVyZUZpbHRlcnNJRHMsIHRocmVzaG9sZCA9IDApIHtcbiAgICBjb25zdCB0b2tlbnMgPSB0b2tlbml6ZXIudG9rZW5pemUodGVybSwgbGFuZ3VhZ2UpO1xuICAgIGNvbnN0IGtleXdvcmRzQ291bnQgPSB0b2tlbnMubGVuZ3RoIHx8IDE7XG4gICAgLy8gVHJhY2sga2V5d29yZCBtYXRjaGVzIHBlciBkb2N1bWVudCBhbmQgcHJvcGVydHlcbiAgICBjb25zdCBrZXl3b3JkTWF0Y2hlc01hcCA9IG5ldyBNYXAoKTtcbiAgICAvLyBUcmFjayB3aGljaCB0b2tlbnMgd2VyZSBmb3VuZCBpbiB0aGUgc2VhcmNoXG4gICAgY29uc3QgdG9rZW5Gb3VuZE1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCByZXN1bHRzTWFwID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBwcm9wZXJ0aWVzVG9TZWFyY2gpIHtcbiAgICAgICAgaWYgKCEocHJvcCBpbiBpbmRleC5pbmRleGVzKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJlZSA9IGluZGV4LmluZGV4ZXNbcHJvcF07XG4gICAgICAgIGNvbnN0IHsgdHlwZSB9ID0gdHJlZTtcbiAgICAgICAgaWYgKHR5cGUgIT09ICdSYWRpeCcpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdXUk9OR19TRUFSQ0hfUFJPUEVSVFlfVFlQRScsIHByb3ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvb3N0UGVyUHJvcGVydHkgPSBib29zdFtwcm9wXSA/PyAxO1xuICAgICAgICBpZiAoYm9vc3RQZXJQcm9wZXJ0eSA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignSU5WQUxJRF9CT09TVF9WQUxVRScsIGJvb3N0UGVyUHJvcGVydHkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSB0b2tlbml6ZXIgcmV0dXJucyBhbiBlbXB0eSBhcnJheSwgd2UgcmV0dXJucyBhbGwgdGhlIGRvY3VtZW50c1xuICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCAmJiAhdGVybSkge1xuICAgICAgICAgICAgdG9rZW5zLnB1c2goJycpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFByb2Nlc3MgZWFjaCB0b2tlbiBpbiB0aGUgc2VhcmNoIHRlcm1cbiAgICAgICAgY29uc3QgdG9rZW5MZW5ndGggPSB0b2tlbnMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0ID0gdHJlZS5ub2RlLmZpbmQoeyB0ZXJtOiB0b2tlbiwgZXhhY3QsIHRvbGVyYW5jZSB9KTtcbiAgICAgICAgICAgIC8vIFNlZSBpZiB0aGlzIHRva2VuIHdhcyBmb3VuZCAoZm9yIHRocmVzaG9sZD0wIGZpbHRlcmluZylcbiAgICAgICAgICAgIGNvbnN0IHRlcm1zRm91bmQgPSBPYmplY3Qua2V5cyhzZWFyY2hSZXN1bHQpO1xuICAgICAgICAgICAgaWYgKHRlcm1zRm91bmQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRva2VuRm91bmRNYXAuc2V0KHRva2VuLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgZWFjaCBtYXRjaGluZyB0ZXJtXG4gICAgICAgICAgICBjb25zdCB0ZXJtc0ZvdW5kTGVuZ3RoID0gdGVybXNGb3VuZC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRlcm1zRm91bmRMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmQgPSB0ZXJtc0ZvdW5kW2pdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkcyA9IHNlYXJjaFJlc3VsdFt3b3JkXTtcbiAgICAgICAgICAgICAgICBjYWxjdWxhdGVSZXN1bHRTY29yZXMoaW5kZXgsIHByb3AsIHdvcmQsIGlkcywgZG9jc0NvdW50LCByZWxldmFuY2UsIHJlc3VsdHNNYXAsIGJvb3N0UGVyUHJvcGVydHksIHdoZXJlRmlsdGVyc0lEcywga2V5d29yZE1hdGNoZXNNYXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdG8gYXJyYXkgYW5kIHNvcnQgYnkgc2NvcmVcbiAgICBjb25zdCByZXN1bHRzID0gQXJyYXkuZnJvbShyZXN1bHRzTWFwLmVudHJpZXMoKSlcbiAgICAgICAgLm1hcCgoW2lkLCBzY29yZV0pID0+IFtpZCwgc2NvcmVdKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pO1xuICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8vIElmIHRocmVzaG9sZCBpcyAxLCByZXR1cm4gYWxsIHJlc3VsdHNcbiAgICBpZiAodGhyZXNob2xkID09PSAxKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICAvLyBGb3IgdGhyZXNob2xkPTAsIGNoZWNrIGlmIGFsbCB0b2tlbnMgd2VyZSBmb3VuZFxuICAgIGlmICh0aHJlc2hvbGQgPT09IDApIHtcbiAgICAgICAgLy8gUXVpY2sgcmV0dXJuIGZvciBzaW5nbGUgdG9rZW5zIC0gYWxyZWFkeSB2YWxpZGF0ZWRcbiAgICAgICAgaWYgKGtleXdvcmRzQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBtdWx0aXBsZSB0b2tlbnMsIHZlcmlmeSB0aGF0IEFMTCB0b2tlbnMgd2VyZSBmb3VuZFxuICAgICAgICAvLyBJZiBhbnkgdG9rZW4gd2Fzbid0IGZvdW5kLCByZXR1cm4gYW4gZW1wdHkgcmVzdWx0XG4gICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICAgICAgICBpZiAoIXRva2VuRm91bmRNYXAuZ2V0KHRva2VuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBGaW5kIGRvY3VtZW50cyB0aGF0IGhhdmUgYWxsIGtleXdvcmRzIGluIGF0IGxlYXN0IG9uZSBwcm9wZXJ0eVxuICAgICAgICBjb25zdCBmdWxsTWF0Y2hlcyA9IHJlc3VsdHMuZmlsdGVyKChbaWRdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eU1hdGNoZXMgPSBrZXl3b3JkTWF0Y2hlc01hcC5nZXQoaWQpO1xuICAgICAgICAgICAgaWYgKCFwcm9wZXJ0eU1hdGNoZXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYW55IHByb3BlcnR5IGhhcyBhbGwga2V5d29yZHNcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHByb3BlcnR5TWF0Y2hlcy52YWx1ZXMoKSkuc29tZSgobWF0Y2hlcykgPT4gbWF0Y2hlcyA9PT0ga2V5d29yZHNDb3VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZnVsbE1hdGNoZXM7XG4gICAgfVxuICAgIC8vIEZpbmQgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbGwga2V5d29yZHMgaW4gYXQgbGVhc3Qgb25lIHByb3BlcnR5XG4gICAgY29uc3QgZnVsbE1hdGNoZXMgPSByZXN1bHRzLmZpbHRlcigoW2lkXSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eU1hdGNoZXMgPSBrZXl3b3JkTWF0Y2hlc01hcC5nZXQoaWQpO1xuICAgICAgICBpZiAoIXByb3BlcnR5TWF0Y2hlcylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgYW55IHByb3BlcnR5IGhhcyBhbGwga2V5d29yZHNcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ocHJvcGVydHlNYXRjaGVzLnZhbHVlcygpKS5zb21lKChtYXRjaGVzKSA9PiBtYXRjaGVzID09PSBrZXl3b3Jkc0NvdW50KTtcbiAgICB9KTtcbiAgICAvLyBJZiB3ZSBoYXZlIGZ1bGwgbWF0Y2hlcyBhbmQgdGhyZXNob2xkIDwgMSwgcmV0dXJuIGZ1bGwgbWF0Y2hlcyBwbHVzIGEgcGVyY2VudGFnZSBvZiBwYXJ0aWFsIG1hdGNoZXNcbiAgICBpZiAoZnVsbE1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZW1haW5pbmdSZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoKFtpZF0pID0+ICFmdWxsTWF0Y2hlcy5zb21lKChbZmlkXSkgPT4gZmlkID09PSBpZCkpO1xuICAgICAgICBjb25zdCBhZGRpdGlvbmFsUmVzdWx0cyA9IE1hdGguY2VpbChyZW1haW5pbmdSZXN1bHRzLmxlbmd0aCAqIHRocmVzaG9sZCk7XG4gICAgICAgIHJldHVybiBbLi4uZnVsbE1hdGNoZXMsIC4uLnJlbWFpbmluZ1Jlc3VsdHMuc2xpY2UoMCwgYWRkaXRpb25hbFJlc3VsdHMpXTtcbiAgICB9XG4gICAgLy8gSWYgbm8gZnVsbCBtYXRjaGVzLCByZXR1cm4gYWxsIHJlc3VsdHNcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2hCeVdoZXJlQ2xhdXNlKGluZGV4LCB0b2tlbml6ZXIsIGZpbHRlcnMsIGxhbmd1YWdlKSB7XG4gICAgLy8gSGFuZGxlIGxvZ2ljYWwgb3BlcmF0b3JzXG4gICAgaWYgKCdhbmQnIGluIGZpbHRlcnMgJiYgZmlsdGVycy5hbmQgJiYgQXJyYXkuaXNBcnJheShmaWx0ZXJzLmFuZCkpIHtcbiAgICAgICAgY29uc3QgYW5kRmlsdGVycyA9IGZpbHRlcnMuYW5kO1xuICAgICAgICBpZiAoYW5kRmlsdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGFuZEZpbHRlcnMubWFwKChmaWx0ZXIpID0+IHNlYXJjaEJ5V2hlcmVDbGF1c2UoaW5kZXgsIHRva2VuaXplciwgZmlsdGVyLCBsYW5ndWFnZSkpO1xuICAgICAgICByZXR1cm4gc2V0SW50ZXJzZWN0aW9uKC4uLnJlc3VsdHMpO1xuICAgIH1cbiAgICBpZiAoJ29yJyBpbiBmaWx0ZXJzICYmIGZpbHRlcnMub3IgJiYgQXJyYXkuaXNBcnJheShmaWx0ZXJzLm9yKSkge1xuICAgICAgICBjb25zdCBvckZpbHRlcnMgPSBmaWx0ZXJzLm9yO1xuICAgICAgICBpZiAob3JGaWx0ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHRzID0gb3JGaWx0ZXJzLm1hcCgoZmlsdGVyKSA9PiBzZWFyY2hCeVdoZXJlQ2xhdXNlKGluZGV4LCB0b2tlbml6ZXIsIGZpbHRlciwgbGFuZ3VhZ2UpKTtcbiAgICAgICAgLy8gVXNlIHJlZHVjZSB0byB1bmlvbiBhbGwgc2V0c1xuICAgICAgICByZXR1cm4gcmVzdWx0cy5yZWR1Y2UoKGFjYywgc2V0KSA9PiBzZXRVbmlvbihhY2MsIHNldCksIG5ldyBTZXQoKSk7XG4gICAgfVxuICAgIGlmICgnbm90JyBpbiBmaWx0ZXJzICYmIGZpbHRlcnMubm90KSB7XG4gICAgICAgIGNvbnN0IG5vdEZpbHRlciA9IGZpbHRlcnMubm90O1xuICAgICAgICAvLyBHZXQgYWxsIGRvY3VtZW50IElEcyBmcm9tIHRoZSBpbnRlcm5hbCBkb2N1bWVudCBzdG9yZVxuICAgICAgICBjb25zdCBhbGxEb2NzID0gbmV3IFNldCgpO1xuICAgICAgICAvLyBHZXQgYWxsIGRvY3VtZW50IElEcyBmcm9tIHRoZSBpbnRlcm5hbCBkb2N1bWVudCBzdG9yZVxuICAgICAgICBjb25zdCBkb2NzU3RvcmUgPSBpbmRleC5zaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmU7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGRvY3NTdG9yZS5pbnRlcm5hbElkVG9JZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYWxsRG9jcy5hZGQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm90UmVzdWx0ID0gc2VhcmNoQnlXaGVyZUNsYXVzZShpbmRleCwgdG9rZW5pemVyLCBub3RGaWx0ZXIsIGxhbmd1YWdlKTtcbiAgICAgICAgcmV0dXJuIHNldERpZmZlcmVuY2UoYWxsRG9jcywgbm90UmVzdWx0KTtcbiAgICB9XG4gICAgLy8gSGFuZGxlIHJlZ3VsYXIgcHJvcGVydHkgZmlsdGVycyAoZXhpc3RpbmcgbG9naWMpXG4gICAgY29uc3QgZmlsdGVyS2V5cyA9IE9iamVjdC5rZXlzKGZpbHRlcnMpO1xuICAgIGNvbnN0IGZpbHRlcnNNYXAgPSBmaWx0ZXJLZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgIFtrZXldOiBuZXcgU2V0KCksXG4gICAgICAgIC4uLmFjY1xuICAgIH0pLCB7fSk7XG4gICAgZm9yIChjb25zdCBwYXJhbSBvZiBmaWx0ZXJLZXlzKSB7XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGZpbHRlcnNbcGFyYW1dO1xuICAgICAgICBpZiAodHlwZW9mIGluZGV4LmluZGV4ZXNbcGFyYW1dID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1VOS05PV05fRklMVEVSX1BST1BFUlRZJywgcGFyYW0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgbm9kZSwgdHlwZSwgaXNBcnJheSB9ID0gaW5kZXguaW5kZXhlc1twYXJhbV07XG4gICAgICAgIGlmICh0eXBlID09PSAnQm9vbCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IG5vZGU7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZElEcyA9IG9wZXJhdGlvbiA/IGlkeC50cnVlIDogaWR4LmZhbHNlO1xuICAgICAgICAgICAgZmlsdGVyc01hcFtwYXJhbV0gPSBzZXRVbmlvbihmaWx0ZXJzTWFwW3BhcmFtXSwgZmlsdGVyZWRJRHMpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09ICdCS0QnKSB7XG4gICAgICAgICAgICBsZXQgcmVxT3BlcmF0aW9uO1xuICAgICAgICAgICAgaWYgKCdyYWRpdXMnIGluIG9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHJlcU9wZXJhdGlvbiA9ICdyYWRpdXMnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJ3BvbHlnb24nIGluIG9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHJlcU9wZXJhdGlvbiA9ICdwb2x5Z29uJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBvcGVyYXRpb24gJHtvcGVyYXRpb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxT3BlcmF0aW9uID09PSAncmFkaXVzJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGNvb3JkaW5hdGVzLCB1bml0ID0gJ20nLCBpbnNpZGUgPSB0cnVlLCBoaWdoUHJlY2lzaW9uID0gZmFsc2UgfSA9IG9wZXJhdGlvbltyZXFPcGVyYXRpb25dO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlSW5NZXRlcnMgPSBjb252ZXJ0RGlzdGFuY2VUb01ldGVycyh2YWx1ZSwgdW5pdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaWRzID0gbm9kZS5zZWFyY2hCeVJhZGl1cyhjb29yZGluYXRlcywgZGlzdGFuY2VJbk1ldGVycywgaW5zaWRlLCB1bmRlZmluZWQsIGhpZ2hQcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgIGZpbHRlcnNNYXBbcGFyYW1dID0gYWRkR2VvUmVzdWx0KGZpbHRlcnNNYXBbcGFyYW1dLCBpZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb29yZGluYXRlcywgaW5zaWRlID0gdHJ1ZSwgaGlnaFByZWNpc2lvbiA9IGZhbHNlIH0gPSBvcGVyYXRpb25bcmVxT3BlcmF0aW9uXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHMgPSBub2RlLnNlYXJjaEJ5UG9seWdvbihjb29yZGluYXRlcywgaW5zaWRlLCB1bmRlZmluZWQsIGhpZ2hQcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgIGZpbHRlcnNNYXBbcGFyYW1dID0gYWRkR2VvUmVzdWx0KGZpbHRlcnNNYXBbcGFyYW1dLCBpZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09ICdSYWRpeCcgJiYgKHR5cGVvZiBvcGVyYXRpb24gPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkob3BlcmF0aW9uKSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmF3IG9mIFtvcGVyYXRpb25dLmZsYXQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlcm0gPSB0b2tlbml6ZXIudG9rZW5pemUocmF3LCBsYW5ndWFnZSwgcGFyYW0pO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0ZXJtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkSURzUmVzdWx0cyA9IG5vZGUuZmluZCh7IHRlcm06IHQsIGV4YWN0OiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzTWFwW3BhcmFtXSA9IGFkZEZpbmRSZXN1bHQoZmlsdGVyc01hcFtwYXJhbV0sIGZpbHRlcmVkSURzUmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uS2V5cyA9IE9iamVjdC5rZXlzKG9wZXJhdGlvbik7XG4gICAgICAgIGlmIChvcGVyYXRpb25LZXlzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdJTlZBTElEX0ZJTFRFUl9PUEVSQVRJT04nLCBvcGVyYXRpb25LZXlzLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09ICdGbGF0Jykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IG5ldyBTZXQoaXNBcnJheVxuICAgICAgICAgICAgICAgID8gbm9kZS5maWx0ZXJBcnIob3BlcmF0aW9uKVxuICAgICAgICAgICAgICAgIDogbm9kZS5maWx0ZXIob3BlcmF0aW9uKSk7XG4gICAgICAgICAgICBmaWx0ZXJzTWFwW3BhcmFtXSA9IHNldFVuaW9uKGZpbHRlcnNNYXBbcGFyYW1dLCByZXN1bHRzKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnQVZMJykge1xuICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uT3B0ID0gb3BlcmF0aW9uS2V5c1swXTtcbiAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvblZhbHVlID0gb3BlcmF0aW9uW29wZXJhdGlvbk9wdF07XG4gICAgICAgICAgICBsZXQgZmlsdGVyZWRJRHM7XG4gICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbk9wdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2d0Jzoge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZElEcyA9IG5vZGUuZ3JlYXRlclRoYW4ob3BlcmF0aW9uVmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2d0ZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRJRHMgPSBub2RlLmdyZWF0ZXJUaGFuKG9wZXJhdGlvblZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2x0Jzoge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZElEcyA9IG5vZGUubGVzc1RoYW4ob3BlcmF0aW9uVmFsdWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2x0ZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRJRHMgPSBub2RlLmxlc3NUaGFuKG9wZXJhdGlvblZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2VxJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXQgPSBub2RlLmZpbmQob3BlcmF0aW9uVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZElEcyA9IHJldCA/PyBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdiZXR3ZWVuJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbbWluLCBtYXhdID0gb3BlcmF0aW9uVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkSURzID0gbm9kZS5yYW5nZVNlYXJjaChtaW4sIG1heCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignSU5WQUxJRF9GSUxURVJfT1BFUkFUSU9OJywgb3BlcmF0aW9uT3B0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbHRlcnNNYXBbcGFyYW1dID0gc2V0VW5pb24oZmlsdGVyc01hcFtwYXJhbV0sIGZpbHRlcmVkSURzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBBTkQgb3BlcmF0aW9uOiBjYWxjdWxhdGUgdGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIGFsbCB0aGUgSURzIGluIGZpbHRlck1hcFxuICAgIHJldHVybiBzZXRJbnRlcnNlY3Rpb24oLi4uT2JqZWN0LnZhbHVlcyhmaWx0ZXJzTWFwKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VhcmNoYWJsZVByb3BlcnRpZXMoaW5kZXgpIHtcbiAgICByZXR1cm4gaW5kZXguc2VhcmNoYWJsZVByb3BlcnRpZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VhcmNoYWJsZVByb3BlcnRpZXNXaXRoVHlwZXMoaW5kZXgpIHtcbiAgICByZXR1cm4gaW5kZXguc2VhcmNoYWJsZVByb3BlcnRpZXNXaXRoVHlwZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gbG9hZChzaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIHJhdykge1xuICAgIGNvbnN0IHsgaW5kZXhlczogcmF3SW5kZXhlcywgdmVjdG9ySW5kZXhlczogcmF3VmVjdG9ySW5kZXhlcywgc2VhcmNoYWJsZVByb3BlcnRpZXMsIHNlYXJjaGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzLCBmcmVxdWVuY2llcywgdG9rZW5PY2N1cnJlbmNlcywgYXZnRmllbGRMZW5ndGgsIGZpZWxkTGVuZ3RocyB9ID0gcmF3O1xuICAgIGNvbnN0IGluZGV4ZXMgPSB7fTtcbiAgICBjb25zdCB2ZWN0b3JJbmRleGVzID0ge307XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKHJhd0luZGV4ZXMpKSB7XG4gICAgICAgIGNvbnN0IHsgbm9kZSwgdHlwZSwgaXNBcnJheSB9ID0gcmF3SW5kZXhlc1twcm9wXTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdSYWRpeCc6XG4gICAgICAgICAgICAgICAgaW5kZXhlc1twcm9wXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1JhZGl4JyxcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogUmFkaXhUcmVlLmZyb21KU09OKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBpc0FycmF5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0ZsYXQnOlxuICAgICAgICAgICAgICAgIGluZGV4ZXNbcHJvcF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGbGF0JyxcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogRmxhdFRyZWUuZnJvbUpTT04obm9kZSksXG4gICAgICAgICAgICAgICAgICAgIGlzQXJyYXlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQVZMJzpcbiAgICAgICAgICAgICAgICBpbmRleGVzW3Byb3BdID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnQVZMJyxcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogQVZMVHJlZS5mcm9tSlNPTihub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgaXNBcnJheVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdCS0QnOlxuICAgICAgICAgICAgICAgIGluZGV4ZXNbcHJvcF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdCS0QnLFxuICAgICAgICAgICAgICAgICAgICBub2RlOiBCS0RUcmVlLmZyb21KU09OKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBpc0FycmF5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0Jvb2wnOlxuICAgICAgICAgICAgICAgIGluZGV4ZXNbcHJvcF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdCb29sJyxcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogQm9vbE5vZGUuZnJvbUpTT04obm9kZSksXG4gICAgICAgICAgICAgICAgICAgIGlzQXJyYXlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpbmRleGVzW3Byb3BdID0gcmF3SW5kZXhlc1twcm9wXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGlkeCBvZiBPYmplY3Qua2V5cyhyYXdWZWN0b3JJbmRleGVzKSkge1xuICAgICAgICB2ZWN0b3JJbmRleGVzW2lkeF0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnVmVjdG9yJyxcbiAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgbm9kZTogVmVjdG9ySW5kZXguZnJvbUpTT04ocmF3VmVjdG9ySW5kZXhlc1tpZHhdKVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsXG4gICAgICAgIGluZGV4ZXMsXG4gICAgICAgIHZlY3RvckluZGV4ZXMsXG4gICAgICAgIHNlYXJjaGFibGVQcm9wZXJ0aWVzLFxuICAgICAgICBzZWFyY2hhYmxlUHJvcGVydGllc1dpdGhUeXBlcyxcbiAgICAgICAgZnJlcXVlbmNpZXMsXG4gICAgICAgIHRva2VuT2NjdXJyZW5jZXMsXG4gICAgICAgIGF2Z0ZpZWxkTGVuZ3RoLFxuICAgICAgICBmaWVsZExlbmd0aHNcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNhdmUoaW5kZXgpIHtcbiAgICBjb25zdCB7IGluZGV4ZXMsIHZlY3RvckluZGV4ZXMsIHNlYXJjaGFibGVQcm9wZXJ0aWVzLCBzZWFyY2hhYmxlUHJvcGVydGllc1dpdGhUeXBlcywgZnJlcXVlbmNpZXMsIHRva2VuT2NjdXJyZW5jZXMsIGF2Z0ZpZWxkTGVuZ3RoLCBmaWVsZExlbmd0aHMgfSA9IGluZGV4O1xuICAgIGNvbnN0IGR1bXBWZWN0b3JJbmRleGVzID0ge307XG4gICAgZm9yIChjb25zdCBpZHggb2YgT2JqZWN0LmtleXModmVjdG9ySW5kZXhlcykpIHtcbiAgICAgICAgZHVtcFZlY3RvckluZGV4ZXNbaWR4XSA9IHZlY3RvckluZGV4ZXNbaWR4XS5ub2RlLnRvSlNPTigpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHNhdmVkSW5kZXhlcyA9IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhpbmRleGVzKSkge1xuICAgICAgICBjb25zdCB7IHR5cGUsIG5vZGUsIGlzQXJyYXkgfSA9IGluZGV4ZXNbbmFtZV07XG4gICAgICAgIGlmICh0eXBlID09PSAnRmxhdCcgfHwgdHlwZSA9PT0gJ1JhZGl4JyB8fCB0eXBlID09PSAnQVZMJyB8fCB0eXBlID09PSAnQktEJyB8fCB0eXBlID09PSAnQm9vbCcpIHtcbiAgICAgICAgICAgIHNhdmVkSW5kZXhlc1tuYW1lXSA9IHtcbiAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUudG9KU09OKCksXG4gICAgICAgICAgICAgICAgaXNBcnJheVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNhdmVkSW5kZXhlc1tuYW1lXSA9IGluZGV4ZXNbbmFtZV07XG4gICAgICAgICAgICBzYXZlZEluZGV4ZXNbbmFtZV0ubm9kZSA9IHNhdmVkSW5kZXhlc1tuYW1lXS5ub2RlLnRvSlNPTigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4ZXM6IHNhdmVkSW5kZXhlcyxcbiAgICAgICAgdmVjdG9ySW5kZXhlczogZHVtcFZlY3RvckluZGV4ZXMsXG4gICAgICAgIHNlYXJjaGFibGVQcm9wZXJ0aWVzLFxuICAgICAgICBzZWFyY2hhYmxlUHJvcGVydGllc1dpdGhUeXBlcyxcbiAgICAgICAgZnJlcXVlbmNpZXMsXG4gICAgICAgIHRva2VuT2NjdXJyZW5jZXMsXG4gICAgICAgIGF2Z0ZpZWxkTGVuZ3RoLFxuICAgICAgICBmaWVsZExlbmd0aHNcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUluZGV4KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNyZWF0ZSxcbiAgICAgICAgaW5zZXJ0LFxuICAgICAgICByZW1vdmUsXG4gICAgICAgIGluc2VydERvY3VtZW50U2NvcmVQYXJhbWV0ZXJzLFxuICAgICAgICBpbnNlcnRUb2tlblNjb3JlUGFyYW1ldGVycyxcbiAgICAgICAgcmVtb3ZlRG9jdW1lbnRTY29yZVBhcmFtZXRlcnMsXG4gICAgICAgIHJlbW92ZVRva2VuU2NvcmVQYXJhbWV0ZXJzLFxuICAgICAgICBjYWxjdWxhdGVSZXN1bHRTY29yZXMsXG4gICAgICAgIHNlYXJjaCxcbiAgICAgICAgc2VhcmNoQnlXaGVyZUNsYXVzZSxcbiAgICAgICAgZ2V0U2VhcmNoYWJsZVByb3BlcnRpZXMsXG4gICAgICAgIGdldFNlYXJjaGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzLFxuICAgICAgICBsb2FkLFxuICAgICAgICBzYXZlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGFkZEdlb1Jlc3VsdChzZXQsIGlkcykge1xuICAgIGlmICghc2V0KSB7XG4gICAgICAgIHNldCA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgY29uc3QgaWRzTGVuZ3RoID0gaWRzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gaWRzW2ldLmRvY0lEcztcbiAgICAgICAgY29uc3QgaWRzTGVuZ3RoID0gZW50cnkubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGlkc0xlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBzZXQuYWRkKGVudHJ5W2pdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2V0O1xufVxuZnVuY3Rpb24gYWRkRmluZFJlc3VsdChzZXQsIGZpbHRlcmVkSURzUmVzdWx0cykge1xuICAgIGlmICghc2V0KSB7XG4gICAgICAgIHNldCA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZpbHRlcmVkSURzUmVzdWx0cyk7XG4gICAgY29uc3Qga2V5c0xlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGlkcyA9IGZpbHRlcmVkSURzUmVzdWx0c1trZXlzW2ldXTtcbiAgICAgICAgY29uc3QgaWRzTGVuZ3RoID0gaWRzLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpZHNMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgc2V0LmFkZChpZHNbal0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInternalDocumentIDStore: () => (/* binding */ createInternalDocumentIDStore),\n/* harmony export */   getDocumentIdFromInternalId: () => (/* binding */ getDocumentIdFromInternalId),\n/* harmony export */   getInternalDocumentId: () => (/* binding */ getInternalDocumentId),\n/* harmony export */   load: () => (/* binding */ load),\n/* harmony export */   save: () => (/* binding */ save)\n/* harmony export */ });\nfunction createInternalDocumentIDStore() {\n    return {\n        idToInternalId: new Map(),\n        internalIdToId: [],\n        save,\n        load\n    };\n}\nfunction save(store) {\n    return {\n        internalIdToId: store.internalIdToId\n    };\n}\nfunction load(orama, raw) {\n    const { internalIdToId } = raw;\n    orama.internalDocumentIDStore.idToInternalId.clear();\n    orama.internalDocumentIDStore.internalIdToId = [];\n    const internalIdToIdLength = internalIdToId.length;\n    for (let i = 0; i < internalIdToIdLength; i++) {\n        const internalIdItem = internalIdToId[i];\n        orama.internalDocumentIDStore.idToInternalId.set(internalIdItem, i + 1);\n        orama.internalDocumentIDStore.internalIdToId.push(internalIdItem);\n    }\n}\nfunction getInternalDocumentId(store, id) {\n    if (typeof id === 'string') {\n        const internalId = store.idToInternalId.get(id);\n        if (internalId) {\n            return internalId;\n        }\n        const currentId = store.idToInternalId.size + 1;\n        store.idToInternalId.set(id, currentId);\n        store.internalIdToId.push(id);\n        return currentId;\n    }\n    if (id > store.internalIdToId.length) {\n        return getInternalDocumentId(store, id.toString());\n    }\n    return id;\n}\nfunction getDocumentIdFromInternalId(store, internalId) {\n    if (store.internalIdToId.length < internalId) {\n        throw new Error(`Invalid internalId ${internalId}`);\n    }\n    return store.internalIdToId[internalId - 1];\n}\n//# sourceMappingURL=internal-document-id-store.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvaW50ZXJuYWwtZG9jdW1lbnQtaWQtc3RvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsOENBQThDLFdBQVc7QUFDekQ7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvY29tcG9uZW50cy9pbnRlcm5hbC1kb2N1bWVudC1pZC1zdG9yZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gY3JlYXRlSW50ZXJuYWxEb2N1bWVudElEU3RvcmUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWRUb0ludGVybmFsSWQ6IG5ldyBNYXAoKSxcbiAgICAgICAgaW50ZXJuYWxJZFRvSWQ6IFtdLFxuICAgICAgICBzYXZlLFxuICAgICAgICBsb2FkXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYXZlKHN0b3JlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZXJuYWxJZFRvSWQ6IHN0b3JlLmludGVybmFsSWRUb0lkXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkKG9yYW1hLCByYXcpIHtcbiAgICBjb25zdCB7IGludGVybmFsSWRUb0lkIH0gPSByYXc7XG4gICAgb3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUuaWRUb0ludGVybmFsSWQuY2xlYXIoKTtcbiAgICBvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZS5pbnRlcm5hbElkVG9JZCA9IFtdO1xuICAgIGNvbnN0IGludGVybmFsSWRUb0lkTGVuZ3RoID0gaW50ZXJuYWxJZFRvSWQubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW50ZXJuYWxJZFRvSWRMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBpbnRlcm5hbElkSXRlbSA9IGludGVybmFsSWRUb0lkW2ldO1xuICAgICAgICBvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZS5pZFRvSW50ZXJuYWxJZC5zZXQoaW50ZXJuYWxJZEl0ZW0sIGkgKyAxKTtcbiAgICAgICAgb3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUuaW50ZXJuYWxJZFRvSWQucHVzaChpbnRlcm5hbElkSXRlbSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVybmFsRG9jdW1lbnRJZChzdG9yZSwgaWQpIHtcbiAgICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBpbnRlcm5hbElkID0gc3RvcmUuaWRUb0ludGVybmFsSWQuZ2V0KGlkKTtcbiAgICAgICAgaWYgKGludGVybmFsSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcm5hbElkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRJZCA9IHN0b3JlLmlkVG9JbnRlcm5hbElkLnNpemUgKyAxO1xuICAgICAgICBzdG9yZS5pZFRvSW50ZXJuYWxJZC5zZXQoaWQsIGN1cnJlbnRJZCk7XG4gICAgICAgIHN0b3JlLmludGVybmFsSWRUb0lkLnB1c2goaWQpO1xuICAgICAgICByZXR1cm4gY3VycmVudElkO1xuICAgIH1cbiAgICBpZiAoaWQgPiBzdG9yZS5pbnRlcm5hbElkVG9JZC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGdldEludGVybmFsRG9jdW1lbnRJZChzdG9yZSwgaWQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHJldHVybiBpZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXREb2N1bWVudElkRnJvbUludGVybmFsSWQoc3RvcmUsIGludGVybmFsSWQpIHtcbiAgICBpZiAoc3RvcmUuaW50ZXJuYWxJZFRvSWQubGVuZ3RoIDwgaW50ZXJuYWxJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaW50ZXJuYWxJZCAke2ludGVybmFsSWR9YCk7XG4gICAgfVxuICAgIHJldHVybiBzdG9yZS5pbnRlcm5hbElkVG9JZFtpbnRlcm5hbElkIC0gMV07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbC1kb2N1bWVudC1pZC1zdG9yZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/levenshtein.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/levenshtein.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   boundedLevenshtein: () => (/* binding */ boundedLevenshtein),\n/* harmony export */   levenshtein: () => (/* binding */ levenshtein),\n/* harmony export */   syncBoundedLevenshtein: () => (/* binding */ syncBoundedLevenshtein)\n/* harmony export */ });\n/**\n * Inspired by:\n * https://github.com/Yomguithereal/talisman/blob/86ae55cbd040ff021d05e282e0e6c71f2dde21f8/src/metrics/levenshtein.js#L218-L340\n */\nfunction _boundedLevenshtein(term, word, tolerance) {\n    // Handle base cases\n    if (tolerance < 0)\n        return -1;\n    if (term === word)\n        return 0;\n    const m = term.length;\n    const n = word.length;\n    // Special case for empty strings\n    if (m === 0)\n        return n <= tolerance ? n : -1;\n    if (n === 0)\n        return m <= tolerance ? m : -1;\n    // term = term.toLowerCase()\n    // word = word.toLowerCase()\n    const diff = Math.abs(m - n);\n    // Special case for prefixes\n    // If the searching word starts with the indexed word, return early.\n    if (term.startsWith(word)) {\n        // We just check if the remaining characters are within the tolerance\n        return diff <= tolerance ? diff : -1;\n    }\n    // If the indexed word starts with the searching word, return early.\n    if (word.startsWith(term)) {\n        // any prefixed word is within the tolerance\n        return 0;\n    }\n    // If the length difference is greater than the tolerance, return early\n    if (diff > tolerance)\n        return -1;\n    // Initialize the matrix\n    const matrix = [];\n    for (let i = 0; i <= m; i++) {\n        matrix[i] = [i];\n        for (let j = 1; j <= n; j++) {\n            matrix[i][j] = i === 0 ? j : 0;\n        }\n    }\n    // Fill the matrix\n    for (let i = 1; i <= m; i++) {\n        let rowMin = Infinity;\n        for (let j = 1; j <= n; j++) {\n            if (term[i - 1] === word[j - 1]) {\n                matrix[i][j] = matrix[i - 1][j - 1];\n            }\n            else {\n                matrix[i][j] = Math.min(matrix[i - 1][j] + 1, // deletion\n                matrix[i][j - 1] + 1, // insertion\n                matrix[i - 1][j - 1] + 1 // substitution\n                );\n            }\n            rowMin = Math.min(rowMin, matrix[i][j]);\n        }\n        // Early termination if all values in this row exceed tolerance\n        if (rowMin > tolerance) {\n            return -1;\n        }\n    }\n    return matrix[m][n] <= tolerance ? matrix[m][n] : -1;\n}\n/**\n * Computes the Levenshtein distance between two strings (a, b), returning early with -1 if the distance\n * is greater than the given tolerance.\n * It assumes that:\n * - tolerance >= ||a| - |b|| >= 0\n */\nfunction boundedLevenshtein(term, w, tolerance) {\n    const distance = _boundedLevenshtein(term, w, tolerance);\n    return {\n        distance,\n        isBounded: distance >= 0\n    };\n}\n// This is only used internally, keep in sync with the previous one\nfunction syncBoundedLevenshtein(term, w, tolerance) {\n    const distance = _boundedLevenshtein(term, w, tolerance);\n    return {\n        distance,\n        isBounded: distance >= 0\n    };\n}\nfunction levenshtein(a, b) {\n    /* c8 ignore next 3 */\n    if (!a.length) {\n        return b.length;\n    }\n    /* c8 ignore next 3 */\n    if (!b.length) {\n        return a.length;\n    }\n    const swap = a;\n    if (a.length > b.length) {\n        a = b;\n        b = swap;\n    }\n    const row = Array.from({ length: a.length + 1 }, (_, i) => i);\n    let val = 0;\n    for (let i = 1; i <= b.length; i++) {\n        let prev = i;\n        for (let j = 1; j <= a.length; j++) {\n            if (b[i - 1] === a[j - 1]) {\n                val = row[j - 1];\n            }\n            else {\n                val = Math.min(row[j - 1] + 1, Math.min(prev + 1, row[j] + 1));\n            }\n            row[j - 1] = prev;\n            prev = val;\n        }\n        row[a.length] = prev;\n    }\n    return row[a.length];\n}\n//# sourceMappingURL=levenshtein.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvbGV2ZW5zaHRlaW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixzQkFBc0I7QUFDbkQ7QUFDQSxvQkFBb0IsZUFBZTtBQUNuQztBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvY29tcG9uZW50cy9sZXZlbnNodGVpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEluc3BpcmVkIGJ5OlxuICogaHR0cHM6Ly9naXRodWIuY29tL1lvbWd1aXRoZXJlYWwvdGFsaXNtYW4vYmxvYi84NmFlNTVjYmQwNDBmZjAyMWQwNWUyODJlMGU2YzcxZjJkZGUyMWY4L3NyYy9tZXRyaWNzL2xldmVuc2h0ZWluLmpzI0wyMTgtTDM0MFxuICovXG5mdW5jdGlvbiBfYm91bmRlZExldmVuc2h0ZWluKHRlcm0sIHdvcmQsIHRvbGVyYW5jZSkge1xuICAgIC8vIEhhbmRsZSBiYXNlIGNhc2VzXG4gICAgaWYgKHRvbGVyYW5jZSA8IDApXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBpZiAodGVybSA9PT0gd29yZClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgY29uc3QgbSA9IHRlcm0ubGVuZ3RoO1xuICAgIGNvbnN0IG4gPSB3b3JkLmxlbmd0aDtcbiAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIGVtcHR5IHN0cmluZ3NcbiAgICBpZiAobSA9PT0gMClcbiAgICAgICAgcmV0dXJuIG4gPD0gdG9sZXJhbmNlID8gbiA6IC0xO1xuICAgIGlmIChuID09PSAwKVxuICAgICAgICByZXR1cm4gbSA8PSB0b2xlcmFuY2UgPyBtIDogLTE7XG4gICAgLy8gdGVybSA9IHRlcm0udG9Mb3dlckNhc2UoKVxuICAgIC8vIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKClcbiAgICBjb25zdCBkaWZmID0gTWF0aC5hYnMobSAtIG4pO1xuICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgcHJlZml4ZXNcbiAgICAvLyBJZiB0aGUgc2VhcmNoaW5nIHdvcmQgc3RhcnRzIHdpdGggdGhlIGluZGV4ZWQgd29yZCwgcmV0dXJuIGVhcmx5LlxuICAgIGlmICh0ZXJtLnN0YXJ0c1dpdGgod29yZCkpIHtcbiAgICAgICAgLy8gV2UganVzdCBjaGVjayBpZiB0aGUgcmVtYWluaW5nIGNoYXJhY3RlcnMgYXJlIHdpdGhpbiB0aGUgdG9sZXJhbmNlXG4gICAgICAgIHJldHVybiBkaWZmIDw9IHRvbGVyYW5jZSA/IGRpZmYgOiAtMTtcbiAgICB9XG4gICAgLy8gSWYgdGhlIGluZGV4ZWQgd29yZCBzdGFydHMgd2l0aCB0aGUgc2VhcmNoaW5nIHdvcmQsIHJldHVybiBlYXJseS5cbiAgICBpZiAod29yZC5zdGFydHNXaXRoKHRlcm0pKSB7XG4gICAgICAgIC8vIGFueSBwcmVmaXhlZCB3b3JkIGlzIHdpdGhpbiB0aGUgdG9sZXJhbmNlXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgbGVuZ3RoIGRpZmZlcmVuY2UgaXMgZ3JlYXRlciB0aGFuIHRoZSB0b2xlcmFuY2UsIHJldHVybiBlYXJseVxuICAgIGlmIChkaWZmID4gdG9sZXJhbmNlKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgbWF0cml4XG4gICAgY29uc3QgbWF0cml4ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbTsgaSsrKSB7XG4gICAgICAgIG1hdHJpeFtpXSA9IFtpXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gbjsgaisrKSB7XG4gICAgICAgICAgICBtYXRyaXhbaV1bal0gPSBpID09PSAwID8gaiA6IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmlsbCB0aGUgbWF0cml4XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbTsgaSsrKSB7XG4gICAgICAgIGxldCByb3dNaW4gPSBJbmZpbml0eTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gbjsgaisrKSB7XG4gICAgICAgICAgICBpZiAodGVybVtpIC0gMV0gPT09IHdvcmRbaiAtIDFdKSB7XG4gICAgICAgICAgICAgICAgbWF0cml4W2ldW2pdID0gbWF0cml4W2kgLSAxXVtqIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXRyaXhbaV1bal0gPSBNYXRoLm1pbihtYXRyaXhbaSAtIDFdW2pdICsgMSwgLy8gZGVsZXRpb25cbiAgICAgICAgICAgICAgICBtYXRyaXhbaV1baiAtIDFdICsgMSwgLy8gaW5zZXJ0aW9uXG4gICAgICAgICAgICAgICAgbWF0cml4W2kgLSAxXVtqIC0gMV0gKyAxIC8vIHN1YnN0aXR1dGlvblxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3dNaW4gPSBNYXRoLm1pbihyb3dNaW4sIG1hdHJpeFtpXVtqXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWFybHkgdGVybWluYXRpb24gaWYgYWxsIHZhbHVlcyBpbiB0aGlzIHJvdyBleGNlZWQgdG9sZXJhbmNlXG4gICAgICAgIGlmIChyb3dNaW4gPiB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF0cml4W21dW25dIDw9IHRvbGVyYW5jZSA/IG1hdHJpeFttXVtuXSA6IC0xO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgTGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gc3RyaW5ncyAoYSwgYiksIHJldHVybmluZyBlYXJseSB3aXRoIC0xIGlmIHRoZSBkaXN0YW5jZVxuICogaXMgZ3JlYXRlciB0aGFuIHRoZSBnaXZlbiB0b2xlcmFuY2UuXG4gKiBJdCBhc3N1bWVzIHRoYXQ6XG4gKiAtIHRvbGVyYW5jZSA+PSB8fGF8IC0gfGJ8fCA+PSAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBib3VuZGVkTGV2ZW5zaHRlaW4odGVybSwgdywgdG9sZXJhbmNlKSB7XG4gICAgY29uc3QgZGlzdGFuY2UgPSBfYm91bmRlZExldmVuc2h0ZWluKHRlcm0sIHcsIHRvbGVyYW5jZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGlzdGFuY2UsXG4gICAgICAgIGlzQm91bmRlZDogZGlzdGFuY2UgPj0gMFxuICAgIH07XG59XG4vLyBUaGlzIGlzIG9ubHkgdXNlZCBpbnRlcm5hbGx5LCBrZWVwIGluIHN5bmMgd2l0aCB0aGUgcHJldmlvdXMgb25lXG5leHBvcnQgZnVuY3Rpb24gc3luY0JvdW5kZWRMZXZlbnNodGVpbih0ZXJtLCB3LCB0b2xlcmFuY2UpIHtcbiAgICBjb25zdCBkaXN0YW5jZSA9IF9ib3VuZGVkTGV2ZW5zaHRlaW4odGVybSwgdywgdG9sZXJhbmNlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkaXN0YW5jZSxcbiAgICAgICAgaXNCb3VuZGVkOiBkaXN0YW5jZSA+PSAwXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsZXZlbnNodGVpbihhLCBiKSB7XG4gICAgLyogYzggaWdub3JlIG5leHQgMyAqL1xuICAgIGlmICghYS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGIubGVuZ3RoO1xuICAgIH1cbiAgICAvKiBjOCBpZ25vcmUgbmV4dCAzICovXG4gICAgaWYgKCFiLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gYS5sZW5ndGg7XG4gICAgfVxuICAgIGNvbnN0IHN3YXAgPSBhO1xuICAgIGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSB7XG4gICAgICAgIGEgPSBiO1xuICAgICAgICBiID0gc3dhcDtcbiAgICB9XG4gICAgY29uc3Qgcm93ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogYS5sZW5ndGggKyAxIH0sIChfLCBpKSA9PiBpKTtcbiAgICBsZXQgdmFsID0gMDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBiLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBwcmV2ID0gaTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gYS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGJbaSAtIDFdID09PSBhW2ogLSAxXSkge1xuICAgICAgICAgICAgICAgIHZhbCA9IHJvd1tqIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBNYXRoLm1pbihyb3dbaiAtIDFdICsgMSwgTWF0aC5taW4ocHJldiArIDEsIHJvd1tqXSArIDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd1tqIC0gMV0gPSBwcmV2O1xuICAgICAgICAgICAgcHJldiA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByb3dbYS5sZW5ndGhdID0gcHJldjtcbiAgICB9XG4gICAgcmV0dXJuIHJvd1thLmxlbmd0aF07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sZXZlbnNodGVpbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/levenshtein.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/plugins.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/plugins.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AVAILABLE_PLUGIN_HOOKS: () => (/* binding */ AVAILABLE_PLUGIN_HOOKS),\n/* harmony export */   getAllPluginsByHook: () => (/* binding */ getAllPluginsByHook)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n\nconst AVAILABLE_PLUGIN_HOOKS = [\n    'beforeInsert',\n    'afterInsert',\n    'beforeRemove',\n    'afterRemove',\n    'beforeUpdate',\n    'afterUpdate',\n    'beforeUpsert',\n    'afterUpsert',\n    'beforeSearch',\n    'afterSearch',\n    'beforeInsertMultiple',\n    'afterInsertMultiple',\n    'beforeRemoveMultiple',\n    'afterRemoveMultiple',\n    'beforeUpdateMultiple',\n    'afterUpdateMultiple',\n    'beforeUpsertMultiple',\n    'afterUpsertMultiple',\n    'beforeLoad',\n    'afterLoad',\n    'afterCreate'\n];\nfunction getAllPluginsByHook(orama, hook) {\n    const pluginsToRun = [];\n    const pluginsLength = orama.plugins?.length;\n    if (!pluginsLength) {\n        return pluginsToRun;\n    }\n    for (let i = 0; i < pluginsLength; i++) {\n        try {\n            const plugin = orama.plugins[i];\n            if (typeof plugin[hook] === 'function') {\n                pluginsToRun.push(plugin[hook]);\n            }\n        }\n        catch (error) {\n            console.error('Caught error in getAllPluginsByHook:', error);\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('PLUGIN_CRASHED');\n        }\n    }\n    return pluginsToRun;\n}\n//# sourceMappingURL=plugins.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvcGx1Z2lucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDcEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvcGx1Z2lucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gJy4uL2Vycm9ycy5qcyc7XG5leHBvcnQgY29uc3QgQVZBSUxBQkxFX1BMVUdJTl9IT09LUyA9IFtcbiAgICAnYmVmb3JlSW5zZXJ0JyxcbiAgICAnYWZ0ZXJJbnNlcnQnLFxuICAgICdiZWZvcmVSZW1vdmUnLFxuICAgICdhZnRlclJlbW92ZScsXG4gICAgJ2JlZm9yZVVwZGF0ZScsXG4gICAgJ2FmdGVyVXBkYXRlJyxcbiAgICAnYmVmb3JlVXBzZXJ0JyxcbiAgICAnYWZ0ZXJVcHNlcnQnLFxuICAgICdiZWZvcmVTZWFyY2gnLFxuICAgICdhZnRlclNlYXJjaCcsXG4gICAgJ2JlZm9yZUluc2VydE11bHRpcGxlJyxcbiAgICAnYWZ0ZXJJbnNlcnRNdWx0aXBsZScsXG4gICAgJ2JlZm9yZVJlbW92ZU11bHRpcGxlJyxcbiAgICAnYWZ0ZXJSZW1vdmVNdWx0aXBsZScsXG4gICAgJ2JlZm9yZVVwZGF0ZU11bHRpcGxlJyxcbiAgICAnYWZ0ZXJVcGRhdGVNdWx0aXBsZScsXG4gICAgJ2JlZm9yZVVwc2VydE11bHRpcGxlJyxcbiAgICAnYWZ0ZXJVcHNlcnRNdWx0aXBsZScsXG4gICAgJ2JlZm9yZUxvYWQnLFxuICAgICdhZnRlckxvYWQnLFxuICAgICdhZnRlckNyZWF0ZSdcbl07XG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsUGx1Z2luc0J5SG9vayhvcmFtYSwgaG9vaykge1xuICAgIGNvbnN0IHBsdWdpbnNUb1J1biA9IFtdO1xuICAgIGNvbnN0IHBsdWdpbnNMZW5ndGggPSBvcmFtYS5wbHVnaW5zPy5sZW5ndGg7XG4gICAgaWYgKCFwbHVnaW5zTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBwbHVnaW5zVG9SdW47XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGx1Z2luc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSBvcmFtYS5wbHVnaW5zW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5baG9va10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5zVG9SdW4ucHVzaChwbHVnaW5baG9va10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2F1Z2h0IGVycm9yIGluIGdldEFsbFBsdWdpbnNCeUhvb2s6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1BMVUdJTl9DUkFTSEVEJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBsdWdpbnNUb1J1bjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsdWdpbnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/plugins.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/sorter.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/sorter.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSorter: () => (/* binding */ createSorter),\n/* harmony export */   load: () => (/* binding */ load),\n/* harmony export */   save: () => (/* binding */ save)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaults.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/defaults.js\");\n/* harmony import */ var _internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _tokenizer_languages_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tokenizer/languages.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/languages.js\");\n\n\n\n\n\nfunction innerCreate(orama, sharedInternalDocumentStore, schema, sortableDeniedProperties, prefix) {\n    const sorter = {\n        language: orama.tokenizer.language,\n        sharedInternalDocumentStore,\n        enabled: true,\n        isSorted: true,\n        sortableProperties: [],\n        sortablePropertiesWithTypes: {},\n        sorts: {}\n    };\n    for (const [prop, type] of Object.entries(schema)) {\n        const path = `${prefix}${prefix ? '.' : ''}${prop}`;\n        if (sortableDeniedProperties.includes(path)) {\n            continue;\n        }\n        if (typeof type === 'object' && !Array.isArray(type)) {\n            // Nested\n            const ret = innerCreate(orama, sharedInternalDocumentStore, type, sortableDeniedProperties, path);\n            (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.safeArrayPush)(sorter.sortableProperties, ret.sortableProperties);\n            sorter.sorts = {\n                ...sorter.sorts,\n                ...ret.sorts\n            };\n            sorter.sortablePropertiesWithTypes = {\n                ...sorter.sortablePropertiesWithTypes,\n                ...ret.sortablePropertiesWithTypes\n            };\n            continue;\n        }\n        if (!(0,_defaults_js__WEBPACK_IMPORTED_MODULE_1__.isVectorType)(type)) {\n            switch (type) {\n                case 'boolean':\n                case 'number':\n                case 'string':\n                    sorter.sortableProperties.push(path);\n                    sorter.sortablePropertiesWithTypes[path] = type;\n                    sorter.sorts[path] = {\n                        docs: new Map(),\n                        orderedDocsToRemove: new Map(),\n                        orderedDocs: [],\n                        type: type\n                    };\n                    break;\n                case 'geopoint':\n                case 'enum':\n                    // We don't allow to sort by enums or geopoints\n                    continue;\n                case 'enum[]':\n                case 'boolean[]':\n                case 'number[]':\n                case 'string[]':\n                    // We don't allow to sort by arrays\n                    continue;\n                default:\n                    throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_SORT_SCHEMA_TYPE', Array.isArray(type) ? 'array' : type, path);\n            }\n        }\n    }\n    return sorter;\n}\nfunction create(orama, sharedInternalDocumentStore, schema, config) {\n    const isSortEnabled = config?.enabled !== false;\n    if (!isSortEnabled) {\n        return {\n            disabled: true\n        };\n    }\n    return innerCreate(orama, sharedInternalDocumentStore, schema, (config || {}).unsortableProperties || [], '');\n}\nfunction insert(sorter, prop, id, value) {\n    if (!sorter.enabled) {\n        return;\n    }\n    sorter.isSorted = false;\n    const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_2__.getInternalDocumentId)(sorter.sharedInternalDocumentStore, id);\n    const s = sorter.sorts[prop];\n    // This happen during a document updating\n    // Because we re-use the same internalId\n    // We need to clean-up the data structure before re-inserting\n    // to avoid duplicates in the orderedDocs array\n    // See: https://github.com/oramasearch/orama/issues/629\n    if (s.orderedDocsToRemove.has(internalId)) {\n        ensureOrderedDocsAreDeletedByProperty(sorter, prop);\n    }\n    s.docs.set(internalId, s.orderedDocs.length);\n    s.orderedDocs.push([internalId, value]);\n}\nfunction ensureIsSorted(sorter) {\n    if (sorter.isSorted || !sorter.enabled) {\n        return;\n    }\n    const properties = Object.keys(sorter.sorts);\n    for (const prop of properties) {\n        ensurePropertyIsSorted(sorter, prop);\n    }\n    sorter.isSorted = true;\n}\nfunction stringSort(language, value, d) {\n    return value[1].localeCompare(d[1], (0,_tokenizer_languages_js__WEBPACK_IMPORTED_MODULE_4__.getLocale)(language));\n}\nfunction numberSort(value, d) {\n    return value[1] - d[1];\n}\nfunction booleanSort(value, d) {\n    return d[1] ? -1 : 1;\n}\nfunction ensurePropertyIsSorted(sorter, prop) {\n    const s = sorter.sorts[prop];\n    let predicate;\n    switch (s.type) {\n        case 'string':\n            predicate = stringSort.bind(null, sorter.language);\n            break;\n        case 'number':\n            predicate = numberSort.bind(null);\n            break;\n        case 'boolean':\n            predicate = booleanSort.bind(null);\n            break;\n    }\n    s.orderedDocs.sort(predicate);\n    // Increment position for the greather documents\n    const orderedDocsLength = s.orderedDocs.length;\n    for (let i = 0; i < orderedDocsLength; i++) {\n        const docId = s.orderedDocs[i][0];\n        s.docs.set(docId, i);\n    }\n}\nfunction ensureOrderedDocsAreDeleted(sorter) {\n    const properties = Object.keys(sorter.sorts);\n    for (const prop of properties) {\n        ensureOrderedDocsAreDeletedByProperty(sorter, prop);\n    }\n}\nfunction ensureOrderedDocsAreDeletedByProperty(sorter, prop) {\n    const s = sorter.sorts[prop];\n    if (!s.orderedDocsToRemove.size)\n        return;\n    s.orderedDocs = s.orderedDocs.filter((doc) => !s.orderedDocsToRemove.has(doc[0]));\n    s.orderedDocsToRemove.clear();\n}\nfunction remove(sorter, prop, id) {\n    if (!sorter.enabled) {\n        return;\n    }\n    const s = sorter.sorts[prop];\n    const internalId = (0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_2__.getInternalDocumentId)(sorter.sharedInternalDocumentStore, id);\n    const index = s.docs.get(internalId);\n    if (!index)\n        return;\n    s.docs.delete(internalId);\n    s.orderedDocsToRemove.set(internalId, true);\n}\nfunction sortBy(sorter, docIds, by) {\n    if (!sorter.enabled) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('SORT_DISABLED');\n    }\n    const property = by.property;\n    const isDesc = by.order === 'DESC';\n    const s = sorter.sorts[property];\n    if (!s) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('UNABLE_TO_SORT_ON_UNKNOWN_FIELD', property, sorter.sortableProperties.join(', '));\n    }\n    ensureOrderedDocsAreDeletedByProperty(sorter, property);\n    ensureIsSorted(sorter);\n    docIds.sort((a, b) => {\n        // This sort algorithm works leveraging on\n        // that s.docs is a map of docId -> position\n        // If a document is not indexed, it will be not present in the map\n        const indexOfA = s.docs.get((0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_2__.getInternalDocumentId)(sorter.sharedInternalDocumentStore, a[0]));\n        const indexOfB = s.docs.get((0,_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_2__.getInternalDocumentId)(sorter.sharedInternalDocumentStore, b[0]));\n        const isAIndexed = typeof indexOfA !== 'undefined';\n        const isBIndexed = typeof indexOfB !== 'undefined';\n        if (!isAIndexed && !isBIndexed) {\n            return 0;\n        }\n        // unindexed documents are always at the end\n        if (!isAIndexed) {\n            return 1;\n        }\n        if (!isBIndexed) {\n            return -1;\n        }\n        return isDesc ? indexOfB - indexOfA : indexOfA - indexOfB;\n    });\n    return docIds;\n}\nfunction getSortableProperties(sorter) {\n    if (!sorter.enabled) {\n        return [];\n    }\n    return sorter.sortableProperties;\n}\nfunction getSortablePropertiesWithTypes(sorter) {\n    if (!sorter.enabled) {\n        return {};\n    }\n    return sorter.sortablePropertiesWithTypes;\n}\nfunction load(sharedInternalDocumentStore, raw) {\n    const rawDocument = raw;\n    if (!rawDocument.enabled) {\n        return {\n            enabled: false\n        };\n    }\n    const sorts = Object.keys(rawDocument.sorts).reduce((acc, prop) => {\n        const { docs, orderedDocs, type } = rawDocument.sorts[prop];\n        acc[prop] = {\n            docs: new Map(Object.entries(docs).map(([k, v]) => [+k, v])),\n            orderedDocsToRemove: new Map(),\n            orderedDocs,\n            type\n        };\n        return acc;\n    }, {});\n    return {\n        sharedInternalDocumentStore,\n        language: rawDocument.language,\n        sortableProperties: rawDocument.sortableProperties,\n        sortablePropertiesWithTypes: rawDocument.sortablePropertiesWithTypes,\n        sorts,\n        enabled: true,\n        isSorted: rawDocument.isSorted\n    };\n}\nfunction save(sorter) {\n    if (!sorter.enabled) {\n        return {\n            enabled: false\n        };\n    }\n    ensureOrderedDocsAreDeleted(sorter);\n    ensureIsSorted(sorter);\n    const sorts = Object.keys(sorter.sorts).reduce((acc, prop) => {\n        const { docs, orderedDocs, type } = sorter.sorts[prop];\n        acc[prop] = {\n            docs: Object.fromEntries(docs.entries()),\n            orderedDocs,\n            type\n        };\n        return acc;\n    }, {});\n    return {\n        language: sorter.language,\n        sortableProperties: sorter.sortableProperties,\n        sortablePropertiesWithTypes: sorter.sortablePropertiesWithTypes,\n        sorts,\n        enabled: sorter.enabled,\n        isSorted: sorter.isSorted\n    };\n}\nfunction createSorter() {\n    return {\n        create,\n        insert,\n        remove,\n        save,\n        load,\n        sortBy,\n        getSortableProperties,\n        getSortablePropertiesWithTypes\n    };\n}\n//# sourceMappingURL=sorter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvc29ydGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ0U7QUFDMkI7QUFDNUI7QUFDUztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTyxFQUFFLGtCQUFrQixFQUFFLEtBQUs7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMERBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHVEQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUZBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msa0VBQVM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixxRkFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MscUZBQXFCO0FBQ3pELG9DQUFvQyxxRkFBcUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMEJBQTBCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMEJBQTBCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvc29ydGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IGlzVmVjdG9yVHlwZSB9IGZyb20gJy4vZGVmYXVsdHMuanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJuYWxEb2N1bWVudElkIH0gZnJvbSAnLi9pbnRlcm5hbC1kb2N1bWVudC1pZC1zdG9yZS5qcyc7XG5pbXBvcnQgeyBzYWZlQXJyYXlQdXNoIH0gZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IHsgZ2V0TG9jYWxlIH0gZnJvbSAnLi90b2tlbml6ZXIvbGFuZ3VhZ2VzLmpzJztcbmZ1bmN0aW9uIGlubmVyQ3JlYXRlKG9yYW1hLCBzaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIHNjaGVtYSwgc29ydGFibGVEZW5pZWRQcm9wZXJ0aWVzLCBwcmVmaXgpIHtcbiAgICBjb25zdCBzb3J0ZXIgPSB7XG4gICAgICAgIGxhbmd1YWdlOiBvcmFtYS50b2tlbml6ZXIubGFuZ3VhZ2UsXG4gICAgICAgIHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgaXNTb3J0ZWQ6IHRydWUsXG4gICAgICAgIHNvcnRhYmxlUHJvcGVydGllczogW10sXG4gICAgICAgIHNvcnRhYmxlUHJvcGVydGllc1dpdGhUeXBlczoge30sXG4gICAgICAgIHNvcnRzOiB7fVxuICAgIH07XG4gICAgZm9yIChjb25zdCBbcHJvcCwgdHlwZV0gb2YgT2JqZWN0LmVudHJpZXMoc2NoZW1hKSkge1xuICAgICAgICBjb25zdCBwYXRoID0gYCR7cHJlZml4fSR7cHJlZml4ID8gJy4nIDogJyd9JHtwcm9wfWA7XG4gICAgICAgIGlmIChzb3J0YWJsZURlbmllZFByb3BlcnRpZXMuaW5jbHVkZXMocGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIC8vIE5lc3RlZFxuICAgICAgICAgICAgY29uc3QgcmV0ID0gaW5uZXJDcmVhdGUob3JhbWEsIHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSwgdHlwZSwgc29ydGFibGVEZW5pZWRQcm9wZXJ0aWVzLCBwYXRoKTtcbiAgICAgICAgICAgIHNhZmVBcnJheVB1c2goc29ydGVyLnNvcnRhYmxlUHJvcGVydGllcywgcmV0LnNvcnRhYmxlUHJvcGVydGllcyk7XG4gICAgICAgICAgICBzb3J0ZXIuc29ydHMgPSB7XG4gICAgICAgICAgICAgICAgLi4uc29ydGVyLnNvcnRzLFxuICAgICAgICAgICAgICAgIC4uLnJldC5zb3J0c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNvcnRlci5zb3J0YWJsZVByb3BlcnRpZXNXaXRoVHlwZXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uc29ydGVyLnNvcnRhYmxlUHJvcGVydGllc1dpdGhUeXBlcyxcbiAgICAgICAgICAgICAgICAuLi5yZXQuc29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1ZlY3RvclR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgc29ydGVyLnNvcnRhYmxlUHJvcGVydGllcy5wdXNoKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBzb3J0ZXIuc29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzW3BhdGhdID0gdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgc29ydGVyLnNvcnRzW3BhdGhdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jczogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJlZERvY3NUb1JlbW92ZTogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJlZERvY3M6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdnZW9wb2ludCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZW51bSc6XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGFsbG93IHRvIHNvcnQgYnkgZW51bXMgb3IgZ2VvcG9pbnRzXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VudW1bXSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbltdJzpcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXJbXSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nW10nOlxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBhbGxvdyB0byBzb3J0IGJ5IGFycmF5c1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignSU5WQUxJRF9TT1JUX1NDSEVNQV9UWVBFJywgQXJyYXkuaXNBcnJheSh0eXBlKSA/ICdhcnJheScgOiB0eXBlLCBwYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc29ydGVyO1xufVxuZnVuY3Rpb24gY3JlYXRlKG9yYW1hLCBzaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIHNjaGVtYSwgY29uZmlnKSB7XG4gICAgY29uc3QgaXNTb3J0RW5hYmxlZCA9IGNvbmZpZz8uZW5hYmxlZCAhPT0gZmFsc2U7XG4gICAgaWYgKCFpc1NvcnRFbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gaW5uZXJDcmVhdGUob3JhbWEsIHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSwgc2NoZW1hLCAoY29uZmlnIHx8IHt9KS51bnNvcnRhYmxlUHJvcGVydGllcyB8fCBbXSwgJycpO1xufVxuZnVuY3Rpb24gaW5zZXJ0KHNvcnRlciwgcHJvcCwgaWQsIHZhbHVlKSB7XG4gICAgaWYgKCFzb3J0ZXIuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNvcnRlci5pc1NvcnRlZCA9IGZhbHNlO1xuICAgIGNvbnN0IGludGVybmFsSWQgPSBnZXRJbnRlcm5hbERvY3VtZW50SWQoc29ydGVyLnNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSwgaWQpO1xuICAgIGNvbnN0IHMgPSBzb3J0ZXIuc29ydHNbcHJvcF07XG4gICAgLy8gVGhpcyBoYXBwZW4gZHVyaW5nIGEgZG9jdW1lbnQgdXBkYXRpbmdcbiAgICAvLyBCZWNhdXNlIHdlIHJlLXVzZSB0aGUgc2FtZSBpbnRlcm5hbElkXG4gICAgLy8gV2UgbmVlZCB0byBjbGVhbi11cCB0aGUgZGF0YSBzdHJ1Y3R1cmUgYmVmb3JlIHJlLWluc2VydGluZ1xuICAgIC8vIHRvIGF2b2lkIGR1cGxpY2F0ZXMgaW4gdGhlIG9yZGVyZWREb2NzIGFycmF5XG4gICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vb3JhbWFzZWFyY2gvb3JhbWEvaXNzdWVzLzYyOVxuICAgIGlmIChzLm9yZGVyZWREb2NzVG9SZW1vdmUuaGFzKGludGVybmFsSWQpKSB7XG4gICAgICAgIGVuc3VyZU9yZGVyZWREb2NzQXJlRGVsZXRlZEJ5UHJvcGVydHkoc29ydGVyLCBwcm9wKTtcbiAgICB9XG4gICAgcy5kb2NzLnNldChpbnRlcm5hbElkLCBzLm9yZGVyZWREb2NzLmxlbmd0aCk7XG4gICAgcy5vcmRlcmVkRG9jcy5wdXNoKFtpbnRlcm5hbElkLCB2YWx1ZV0pO1xufVxuZnVuY3Rpb24gZW5zdXJlSXNTb3J0ZWQoc29ydGVyKSB7XG4gICAgaWYgKHNvcnRlci5pc1NvcnRlZCB8fCAhc29ydGVyLmVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gT2JqZWN0LmtleXMoc29ydGVyLnNvcnRzKTtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydGllcykge1xuICAgICAgICBlbnN1cmVQcm9wZXJ0eUlzU29ydGVkKHNvcnRlciwgcHJvcCk7XG4gICAgfVxuICAgIHNvcnRlci5pc1NvcnRlZCA9IHRydWU7XG59XG5mdW5jdGlvbiBzdHJpbmdTb3J0KGxhbmd1YWdlLCB2YWx1ZSwgZCkge1xuICAgIHJldHVybiB2YWx1ZVsxXS5sb2NhbGVDb21wYXJlKGRbMV0sIGdldExvY2FsZShsYW5ndWFnZSkpO1xufVxuZnVuY3Rpb24gbnVtYmVyU29ydCh2YWx1ZSwgZCkge1xuICAgIHJldHVybiB2YWx1ZVsxXSAtIGRbMV07XG59XG5mdW5jdGlvbiBib29sZWFuU29ydCh2YWx1ZSwgZCkge1xuICAgIHJldHVybiBkWzFdID8gLTEgOiAxO1xufVxuZnVuY3Rpb24gZW5zdXJlUHJvcGVydHlJc1NvcnRlZChzb3J0ZXIsIHByb3ApIHtcbiAgICBjb25zdCBzID0gc29ydGVyLnNvcnRzW3Byb3BdO1xuICAgIGxldCBwcmVkaWNhdGU7XG4gICAgc3dpdGNoIChzLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIHByZWRpY2F0ZSA9IHN0cmluZ1NvcnQuYmluZChudWxsLCBzb3J0ZXIubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICBwcmVkaWNhdGUgPSBudW1iZXJTb3J0LmJpbmQobnVsbCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICBwcmVkaWNhdGUgPSBib29sZWFuU29ydC5iaW5kKG51bGwpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHMub3JkZXJlZERvY3Muc29ydChwcmVkaWNhdGUpO1xuICAgIC8vIEluY3JlbWVudCBwb3NpdGlvbiBmb3IgdGhlIGdyZWF0aGVyIGRvY3VtZW50c1xuICAgIGNvbnN0IG9yZGVyZWREb2NzTGVuZ3RoID0gcy5vcmRlcmVkRG9jcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlcmVkRG9jc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGRvY0lkID0gcy5vcmRlcmVkRG9jc1tpXVswXTtcbiAgICAgICAgcy5kb2NzLnNldChkb2NJZCwgaSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZW5zdXJlT3JkZXJlZERvY3NBcmVEZWxldGVkKHNvcnRlcikge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBPYmplY3Qua2V5cyhzb3J0ZXIuc29ydHMpO1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGVuc3VyZU9yZGVyZWREb2NzQXJlRGVsZXRlZEJ5UHJvcGVydHkoc29ydGVyLCBwcm9wKTtcbiAgICB9XG59XG5mdW5jdGlvbiBlbnN1cmVPcmRlcmVkRG9jc0FyZURlbGV0ZWRCeVByb3BlcnR5KHNvcnRlciwgcHJvcCkge1xuICAgIGNvbnN0IHMgPSBzb3J0ZXIuc29ydHNbcHJvcF07XG4gICAgaWYgKCFzLm9yZGVyZWREb2NzVG9SZW1vdmUuc2l6ZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHMub3JkZXJlZERvY3MgPSBzLm9yZGVyZWREb2NzLmZpbHRlcigoZG9jKSA9PiAhcy5vcmRlcmVkRG9jc1RvUmVtb3ZlLmhhcyhkb2NbMF0pKTtcbiAgICBzLm9yZGVyZWREb2NzVG9SZW1vdmUuY2xlYXIoKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZShzb3J0ZXIsIHByb3AsIGlkKSB7XG4gICAgaWYgKCFzb3J0ZXIuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHMgPSBzb3J0ZXIuc29ydHNbcHJvcF07XG4gICAgY29uc3QgaW50ZXJuYWxJZCA9IGdldEludGVybmFsRG9jdW1lbnRJZChzb3J0ZXIuc2hhcmVkSW50ZXJuYWxEb2N1bWVudFN0b3JlLCBpZCk7XG4gICAgY29uc3QgaW5kZXggPSBzLmRvY3MuZ2V0KGludGVybmFsSWQpO1xuICAgIGlmICghaW5kZXgpXG4gICAgICAgIHJldHVybjtcbiAgICBzLmRvY3MuZGVsZXRlKGludGVybmFsSWQpO1xuICAgIHMub3JkZXJlZERvY3NUb1JlbW92ZS5zZXQoaW50ZXJuYWxJZCwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBzb3J0Qnkoc29ydGVyLCBkb2NJZHMsIGJ5KSB7XG4gICAgaWYgKCFzb3J0ZXIuZW5hYmxlZCkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignU09SVF9ESVNBQkxFRCcpO1xuICAgIH1cbiAgICBjb25zdCBwcm9wZXJ0eSA9IGJ5LnByb3BlcnR5O1xuICAgIGNvbnN0IGlzRGVzYyA9IGJ5Lm9yZGVyID09PSAnREVTQyc7XG4gICAgY29uc3QgcyA9IHNvcnRlci5zb3J0c1twcm9wZXJ0eV07XG4gICAgaWYgKCFzKSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdVTkFCTEVfVE9fU09SVF9PTl9VTktOT1dOX0ZJRUxEJywgcHJvcGVydHksIHNvcnRlci5zb3J0YWJsZVByb3BlcnRpZXMuam9pbignLCAnKSk7XG4gICAgfVxuICAgIGVuc3VyZU9yZGVyZWREb2NzQXJlRGVsZXRlZEJ5UHJvcGVydHkoc29ydGVyLCBwcm9wZXJ0eSk7XG4gICAgZW5zdXJlSXNTb3J0ZWQoc29ydGVyKTtcbiAgICBkb2NJZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAvLyBUaGlzIHNvcnQgYWxnb3JpdGhtIHdvcmtzIGxldmVyYWdpbmcgb25cbiAgICAgICAgLy8gdGhhdCBzLmRvY3MgaXMgYSBtYXAgb2YgZG9jSWQgLT4gcG9zaXRpb25cbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCBpcyBub3QgaW5kZXhlZCwgaXQgd2lsbCBiZSBub3QgcHJlc2VudCBpbiB0aGUgbWFwXG4gICAgICAgIGNvbnN0IGluZGV4T2ZBID0gcy5kb2NzLmdldChnZXRJbnRlcm5hbERvY3VtZW50SWQoc29ydGVyLnNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSwgYVswXSkpO1xuICAgICAgICBjb25zdCBpbmRleE9mQiA9IHMuZG9jcy5nZXQoZ2V0SW50ZXJuYWxEb2N1bWVudElkKHNvcnRlci5zaGFyZWRJbnRlcm5hbERvY3VtZW50U3RvcmUsIGJbMF0pKTtcbiAgICAgICAgY29uc3QgaXNBSW5kZXhlZCA9IHR5cGVvZiBpbmRleE9mQSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIGNvbnN0IGlzQkluZGV4ZWQgPSB0eXBlb2YgaW5kZXhPZkIgIT09ICd1bmRlZmluZWQnO1xuICAgICAgICBpZiAoIWlzQUluZGV4ZWQgJiYgIWlzQkluZGV4ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVuaW5kZXhlZCBkb2N1bWVudHMgYXJlIGFsd2F5cyBhdCB0aGUgZW5kXG4gICAgICAgIGlmICghaXNBSW5kZXhlZCkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0JJbmRleGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzRGVzYyA/IGluZGV4T2ZCIC0gaW5kZXhPZkEgOiBpbmRleE9mQSAtIGluZGV4T2ZCO1xuICAgIH0pO1xuICAgIHJldHVybiBkb2NJZHM7XG59XG5mdW5jdGlvbiBnZXRTb3J0YWJsZVByb3BlcnRpZXMoc29ydGVyKSB7XG4gICAgaWYgKCFzb3J0ZXIuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBzb3J0ZXIuc29ydGFibGVQcm9wZXJ0aWVzO1xufVxuZnVuY3Rpb24gZ2V0U29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzKHNvcnRlcikge1xuICAgIGlmICghc29ydGVyLmVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4gc29ydGVyLnNvcnRhYmxlUHJvcGVydGllc1dpdGhUeXBlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkKHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSwgcmF3KSB7XG4gICAgY29uc3QgcmF3RG9jdW1lbnQgPSByYXc7XG4gICAgaWYgKCFyYXdEb2N1bWVudC5lbmFibGVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzb3J0cyA9IE9iamVjdC5rZXlzKHJhd0RvY3VtZW50LnNvcnRzKS5yZWR1Y2UoKGFjYywgcHJvcCkgPT4ge1xuICAgICAgICBjb25zdCB7IGRvY3MsIG9yZGVyZWREb2NzLCB0eXBlIH0gPSByYXdEb2N1bWVudC5zb3J0c1twcm9wXTtcbiAgICAgICAgYWNjW3Byb3BdID0ge1xuICAgICAgICAgICAgZG9jczogbmV3IE1hcChPYmplY3QuZW50cmllcyhkb2NzKS5tYXAoKFtrLCB2XSkgPT4gWytrLCB2XSkpLFxuICAgICAgICAgICAgb3JkZXJlZERvY3NUb1JlbW92ZTogbmV3IE1hcCgpLFxuICAgICAgICAgICAgb3JkZXJlZERvY3MsXG4gICAgICAgICAgICB0eXBlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNoYXJlZEludGVybmFsRG9jdW1lbnRTdG9yZSxcbiAgICAgICAgbGFuZ3VhZ2U6IHJhd0RvY3VtZW50Lmxhbmd1YWdlLFxuICAgICAgICBzb3J0YWJsZVByb3BlcnRpZXM6IHJhd0RvY3VtZW50LnNvcnRhYmxlUHJvcGVydGllcyxcbiAgICAgICAgc29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzOiByYXdEb2N1bWVudC5zb3J0YWJsZVByb3BlcnRpZXNXaXRoVHlwZXMsXG4gICAgICAgIHNvcnRzLFxuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBpc1NvcnRlZDogcmF3RG9jdW1lbnQuaXNTb3J0ZWRcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNhdmUoc29ydGVyKSB7XG4gICAgaWYgKCFzb3J0ZXIuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZW5zdXJlT3JkZXJlZERvY3NBcmVEZWxldGVkKHNvcnRlcik7XG4gICAgZW5zdXJlSXNTb3J0ZWQoc29ydGVyKTtcbiAgICBjb25zdCBzb3J0cyA9IE9iamVjdC5rZXlzKHNvcnRlci5zb3J0cykucmVkdWNlKChhY2MsIHByb3ApID0+IHtcbiAgICAgICAgY29uc3QgeyBkb2NzLCBvcmRlcmVkRG9jcywgdHlwZSB9ID0gc29ydGVyLnNvcnRzW3Byb3BdO1xuICAgICAgICBhY2NbcHJvcF0gPSB7XG4gICAgICAgICAgICBkb2NzOiBPYmplY3QuZnJvbUVudHJpZXMoZG9jcy5lbnRyaWVzKCkpLFxuICAgICAgICAgICAgb3JkZXJlZERvY3MsXG4gICAgICAgICAgICB0eXBlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGxhbmd1YWdlOiBzb3J0ZXIubGFuZ3VhZ2UsXG4gICAgICAgIHNvcnRhYmxlUHJvcGVydGllczogc29ydGVyLnNvcnRhYmxlUHJvcGVydGllcyxcbiAgICAgICAgc29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzOiBzb3J0ZXIuc29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzLFxuICAgICAgICBzb3J0cyxcbiAgICAgICAgZW5hYmxlZDogc29ydGVyLmVuYWJsZWQsXG4gICAgICAgIGlzU29ydGVkOiBzb3J0ZXIuaXNTb3J0ZWRcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNvcnRlcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGUsXG4gICAgICAgIGluc2VydCxcbiAgICAgICAgcmVtb3ZlLFxuICAgICAgICBzYXZlLFxuICAgICAgICBsb2FkLFxuICAgICAgICBzb3J0QnksXG4gICAgICAgIGdldFNvcnRhYmxlUHJvcGVydGllcyxcbiAgICAgICAgZ2V0U29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNvcnRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/sorter.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/diacritics.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/tokenizer/diacritics.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   replaceDiacritics: () => (/* binding */ replaceDiacritics)\n/* harmony export */ });\nconst DIACRITICS_CHARCODE_START = 192;\nconst DIACRITICS_CHARCODE_END = 383;\nconst CHARCODE_REPLACE_MAPPING = [\n    65,\n    65,\n    65,\n    65,\n    65,\n    65,\n    65,\n    67,\n    69,\n    69,\n    69,\n    69,\n    73,\n    73,\n    73,\n    73,\n    69,\n    78,\n    79,\n    79,\n    79,\n    79,\n    79,\n    null,\n    79,\n    85,\n    85,\n    85,\n    85,\n    89,\n    80,\n    115,\n    97,\n    97,\n    97,\n    97,\n    97,\n    97,\n    97,\n    99,\n    101,\n    101,\n    101,\n    101,\n    105,\n    105,\n    105,\n    105,\n    101,\n    110,\n    111,\n    111,\n    111,\n    111,\n    111,\n    null,\n    111,\n    117,\n    117,\n    117,\n    117,\n    121,\n    112,\n    121,\n    65,\n    97,\n    65,\n    97,\n    65,\n    97,\n    67,\n    99,\n    67,\n    99,\n    67,\n    99,\n    67,\n    99,\n    68,\n    100,\n    68,\n    100,\n    69,\n    101,\n    69,\n    101,\n    69,\n    101,\n    69,\n    101,\n    69,\n    101,\n    71,\n    103,\n    71,\n    103,\n    71,\n    103,\n    71,\n    103,\n    72,\n    104,\n    72,\n    104,\n    73,\n    105,\n    73,\n    105,\n    73,\n    105,\n    73,\n    105,\n    73,\n    105,\n    73,\n    105,\n    74,\n    106,\n    75,\n    107,\n    107,\n    76,\n    108,\n    76,\n    108,\n    76,\n    108,\n    76,\n    108,\n    76,\n    108,\n    78,\n    110,\n    78,\n    110,\n    78,\n    110,\n    110,\n    78,\n    110,\n    79,\n    111,\n    79,\n    111,\n    79,\n    111,\n    79,\n    111,\n    82,\n    114,\n    82,\n    114,\n    82,\n    114,\n    83,\n    115,\n    83,\n    115,\n    83,\n    115,\n    83,\n    115,\n    84,\n    116,\n    84,\n    116,\n    84,\n    116,\n    85,\n    117,\n    85,\n    117,\n    85,\n    117,\n    85,\n    117,\n    85,\n    117,\n    85,\n    117,\n    87,\n    119,\n    89,\n    121,\n    89,\n    90,\n    122,\n    90,\n    122,\n    90,\n    122,\n    115\n];\nfunction replaceChar(charCode) {\n    if (charCode < DIACRITICS_CHARCODE_START || charCode > DIACRITICS_CHARCODE_END)\n        return charCode;\n    /* c8 ignore next  */\n    return CHARCODE_REPLACE_MAPPING[charCode - DIACRITICS_CHARCODE_START] || charCode;\n}\nfunction replaceDiacritics(str) {\n    const stringCharCode = [];\n    for (let idx = 0; idx < str.length; idx++) {\n        stringCharCode[idx] = replaceChar(str.charCodeAt(idx));\n    }\n    return String.fromCharCode(...stringCharCode);\n}\n//# sourceMappingURL=diacritics.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvdG9rZW5pemVyL2RpYWNyaXRpY3MuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHNCQUFzQixrQkFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9jb21wb25lbnRzL3Rva2VuaXplci9kaWFjcml0aWNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IERJQUNSSVRJQ1NfQ0hBUkNPREVfU1RBUlQgPSAxOTI7XG5jb25zdCBESUFDUklUSUNTX0NIQVJDT0RFX0VORCA9IDM4MztcbmNvbnN0IENIQVJDT0RFX1JFUExBQ0VfTUFQUElORyA9IFtcbiAgICA2NSxcbiAgICA2NSxcbiAgICA2NSxcbiAgICA2NSxcbiAgICA2NSxcbiAgICA2NSxcbiAgICA2NSxcbiAgICA2NyxcbiAgICA2OSxcbiAgICA2OSxcbiAgICA2OSxcbiAgICA2OSxcbiAgICA3MyxcbiAgICA3MyxcbiAgICA3MyxcbiAgICA3MyxcbiAgICA2OSxcbiAgICA3OCxcbiAgICA3OSxcbiAgICA3OSxcbiAgICA3OSxcbiAgICA3OSxcbiAgICA3OSxcbiAgICBudWxsLFxuICAgIDc5LFxuICAgIDg1LFxuICAgIDg1LFxuICAgIDg1LFxuICAgIDg1LFxuICAgIDg5LFxuICAgIDgwLFxuICAgIDExNSxcbiAgICA5NyxcbiAgICA5NyxcbiAgICA5NyxcbiAgICA5NyxcbiAgICA5NyxcbiAgICA5NyxcbiAgICA5NyxcbiAgICA5OSxcbiAgICAxMDEsXG4gICAgMTAxLFxuICAgIDEwMSxcbiAgICAxMDEsXG4gICAgMTA1LFxuICAgIDEwNSxcbiAgICAxMDUsXG4gICAgMTA1LFxuICAgIDEwMSxcbiAgICAxMTAsXG4gICAgMTExLFxuICAgIDExMSxcbiAgICAxMTEsXG4gICAgMTExLFxuICAgIDExMSxcbiAgICBudWxsLFxuICAgIDExMSxcbiAgICAxMTcsXG4gICAgMTE3LFxuICAgIDExNyxcbiAgICAxMTcsXG4gICAgMTIxLFxuICAgIDExMixcbiAgICAxMjEsXG4gICAgNjUsXG4gICAgOTcsXG4gICAgNjUsXG4gICAgOTcsXG4gICAgNjUsXG4gICAgOTcsXG4gICAgNjcsXG4gICAgOTksXG4gICAgNjcsXG4gICAgOTksXG4gICAgNjcsXG4gICAgOTksXG4gICAgNjcsXG4gICAgOTksXG4gICAgNjgsXG4gICAgMTAwLFxuICAgIDY4LFxuICAgIDEwMCxcbiAgICA2OSxcbiAgICAxMDEsXG4gICAgNjksXG4gICAgMTAxLFxuICAgIDY5LFxuICAgIDEwMSxcbiAgICA2OSxcbiAgICAxMDEsXG4gICAgNjksXG4gICAgMTAxLFxuICAgIDcxLFxuICAgIDEwMyxcbiAgICA3MSxcbiAgICAxMDMsXG4gICAgNzEsXG4gICAgMTAzLFxuICAgIDcxLFxuICAgIDEwMyxcbiAgICA3MixcbiAgICAxMDQsXG4gICAgNzIsXG4gICAgMTA0LFxuICAgIDczLFxuICAgIDEwNSxcbiAgICA3MyxcbiAgICAxMDUsXG4gICAgNzMsXG4gICAgMTA1LFxuICAgIDczLFxuICAgIDEwNSxcbiAgICA3MyxcbiAgICAxMDUsXG4gICAgNzMsXG4gICAgMTA1LFxuICAgIDc0LFxuICAgIDEwNixcbiAgICA3NSxcbiAgICAxMDcsXG4gICAgMTA3LFxuICAgIDc2LFxuICAgIDEwOCxcbiAgICA3NixcbiAgICAxMDgsXG4gICAgNzYsXG4gICAgMTA4LFxuICAgIDc2LFxuICAgIDEwOCxcbiAgICA3NixcbiAgICAxMDgsXG4gICAgNzgsXG4gICAgMTEwLFxuICAgIDc4LFxuICAgIDExMCxcbiAgICA3OCxcbiAgICAxMTAsXG4gICAgMTEwLFxuICAgIDc4LFxuICAgIDExMCxcbiAgICA3OSxcbiAgICAxMTEsXG4gICAgNzksXG4gICAgMTExLFxuICAgIDc5LFxuICAgIDExMSxcbiAgICA3OSxcbiAgICAxMTEsXG4gICAgODIsXG4gICAgMTE0LFxuICAgIDgyLFxuICAgIDExNCxcbiAgICA4MixcbiAgICAxMTQsXG4gICAgODMsXG4gICAgMTE1LFxuICAgIDgzLFxuICAgIDExNSxcbiAgICA4MyxcbiAgICAxMTUsXG4gICAgODMsXG4gICAgMTE1LFxuICAgIDg0LFxuICAgIDExNixcbiAgICA4NCxcbiAgICAxMTYsXG4gICAgODQsXG4gICAgMTE2LFxuICAgIDg1LFxuICAgIDExNyxcbiAgICA4NSxcbiAgICAxMTcsXG4gICAgODUsXG4gICAgMTE3LFxuICAgIDg1LFxuICAgIDExNyxcbiAgICA4NSxcbiAgICAxMTcsXG4gICAgODUsXG4gICAgMTE3LFxuICAgIDg3LFxuICAgIDExOSxcbiAgICA4OSxcbiAgICAxMjEsXG4gICAgODksXG4gICAgOTAsXG4gICAgMTIyLFxuICAgIDkwLFxuICAgIDEyMixcbiAgICA5MCxcbiAgICAxMjIsXG4gICAgMTE1XG5dO1xuZnVuY3Rpb24gcmVwbGFjZUNoYXIoY2hhckNvZGUpIHtcbiAgICBpZiAoY2hhckNvZGUgPCBESUFDUklUSUNTX0NIQVJDT0RFX1NUQVJUIHx8IGNoYXJDb2RlID4gRElBQ1JJVElDU19DSEFSQ09ERV9FTkQpXG4gICAgICAgIHJldHVybiBjaGFyQ29kZTtcbiAgICAvKiBjOCBpZ25vcmUgbmV4dCAgKi9cbiAgICByZXR1cm4gQ0hBUkNPREVfUkVQTEFDRV9NQVBQSU5HW2NoYXJDb2RlIC0gRElBQ1JJVElDU19DSEFSQ09ERV9TVEFSVF0gfHwgY2hhckNvZGU7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZURpYWNyaXRpY3Moc3RyKSB7XG4gICAgY29uc3Qgc3RyaW5nQ2hhckNvZGUgPSBbXTtcbiAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBzdHIubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICBzdHJpbmdDaGFyQ29kZVtpZHhdID0gcmVwbGFjZUNoYXIoc3RyLmNoYXJDb2RlQXQoaWR4KSk7XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnN0cmluZ0NoYXJDb2RlKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpYWNyaXRpY3MuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/diacritics.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/english-stemmer.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/tokenizer/english-stemmer.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stemmer: () => (/* binding */ stemmer)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nconst step2List = {\n    ational: 'ate',\n    tional: 'tion',\n    enci: 'ence',\n    anci: 'ance',\n    izer: 'ize',\n    bli: 'ble',\n    alli: 'al',\n    entli: 'ent',\n    eli: 'e',\n    ousli: 'ous',\n    ization: 'ize',\n    ation: 'ate',\n    ator: 'ate',\n    alism: 'al',\n    iveness: 'ive',\n    fulness: 'ful',\n    ousness: 'ous',\n    aliti: 'al',\n    iviti: 'ive',\n    biliti: 'ble',\n    logi: 'log'\n};\nconst step3List = {\n    icate: 'ic',\n    ative: '',\n    alize: 'al',\n    iciti: 'ic',\n    ical: 'ic',\n    ful: '',\n    ness: ''\n};\n// Consonant\nconst c = '[^aeiou]';\n// Vowel\nconst v = '[aeiouy]';\n// Consonant sequence\nconst C = c + '[^aeiouy]*';\n// Vowel sequence\nconst V = v + '[aeiou]*';\n// [C]VC... is m>0\nconst mgr0 = '^(' + C + ')?' + V + C;\n// [C]VC[V] is m=1\nconst meq1 = '^(' + C + ')?' + V + C + '(' + V + ')?$';\n// [C]VCVC... is m>1\nconst mgr1 = '^(' + C + ')?' + V + C + V + C;\n// vowel in stem\nconst s_v = '^(' + C + ')?' + v;\nfunction stemmer(w) {\n    let stem;\n    let suffix;\n    let re;\n    let re2;\n    let re3;\n    let re4;\n    if (w.length < 3) {\n        return w;\n    }\n    const firstch = w.substring(0, 1);\n    if (firstch == 'y') {\n        w = firstch.toUpperCase() + w.substring(1);\n    }\n    re = /^(.+?)(ss|i)es$/;\n    re2 = /^(.+?)([^s])s$/;\n    if (re.test(w)) {\n        w = w.replace(re, '$1$2');\n    }\n    else if (re2.test(w)) {\n        w = w.replace(re2, '$1$2');\n    }\n    re = /^(.+?)eed$/;\n    re2 = /^(.+?)(ed|ing)$/;\n    if (re.test(w)) {\n        const fp = re.exec(w);\n        re = new RegExp(mgr0);\n        if (re.test(fp[1])) {\n            re = /.$/;\n            w = w.replace(re, '');\n        }\n    }\n    else if (re2.test(w)) {\n        const fp = re2.exec(w);\n        stem = fp[1];\n        re2 = new RegExp(s_v);\n        if (re2.test(stem)) {\n            w = stem;\n            re2 = /(at|bl|iz)$/;\n            re3 = new RegExp('([^aeiouylsz])\\\\1$');\n            re4 = new RegExp('^' + C + v + '[^aeiouwxy]$');\n            if (re2.test(w)) {\n                w = w + 'e';\n            }\n            else if (re3.test(w)) {\n                re = /.$/;\n                w = w.replace(re, '');\n            }\n            else if (re4.test(w)) {\n                w = w + 'e';\n            }\n        }\n    }\n    re = /^(.+?)y$/;\n    if (re.test(w)) {\n        const fp = re.exec(w);\n        stem = fp?.[1];\n        re = new RegExp(s_v);\n        if (stem && re.test(stem)) {\n            w = stem + 'i';\n        }\n    }\n    re =\n        /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;\n    if (re.test(w)) {\n        const fp = re.exec(w);\n        stem = fp?.[1];\n        suffix = fp?.[2];\n        re = new RegExp(mgr0);\n        if (stem && re.test(stem)) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            w = stem + step2List[suffix];\n        }\n    }\n    re = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;\n    if (re.test(w)) {\n        const fp = re.exec(w);\n        stem = fp?.[1];\n        suffix = fp?.[2];\n        re = new RegExp(mgr0);\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        if (stem && re.test(stem)) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            w = stem + step3List[suffix];\n        }\n    }\n    re = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;\n    re2 = /^(.+?)(s|t)(ion)$/;\n    if (re.test(w)) {\n        const fp = re.exec(w);\n        stem = fp?.[1];\n        re = new RegExp(mgr1);\n        if (stem && re.test(stem)) {\n            w = stem;\n        }\n    }\n    else if (re2.test(w)) {\n        const fp = re2.exec(w);\n        stem = fp?.[1] ?? '' + fp?.[2] ?? '';\n        re2 = new RegExp(mgr1);\n        if (re2.test(stem)) {\n            w = stem;\n        }\n    }\n    re = /^(.+?)e$/;\n    if (re.test(w)) {\n        const fp = re.exec(w);\n        stem = fp?.[1];\n        re = new RegExp(mgr1);\n        re2 = new RegExp(meq1);\n        re3 = new RegExp('^' + C + v + '[^aeiouwxy]$');\n        if (stem && (re.test(stem) || (re2.test(stem) && !re3.test(stem)))) {\n            w = stem;\n        }\n    }\n    re = /ll$/;\n    re2 = new RegExp(mgr1);\n    if (re.test(w) && re2.test(w)) {\n        re = /.$/;\n        w = w.replace(re, '');\n    }\n    if (firstch == 'y') {\n        w = firstch.toLowerCase() + w.substring(1);\n    }\n    return w;\n}\n//# sourceMappingURL=english-stemmer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvdG9rZW5pemVyL2VuZ2xpc2gtc3RlbW1lci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvdG9rZW5pemVyL2VuZ2xpc2gtc3RlbW1lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4vLyBAdHMtbm9jaGVja1xuY29uc3Qgc3RlcDJMaXN0ID0ge1xuICAgIGF0aW9uYWw6ICdhdGUnLFxuICAgIHRpb25hbDogJ3Rpb24nLFxuICAgIGVuY2k6ICdlbmNlJyxcbiAgICBhbmNpOiAnYW5jZScsXG4gICAgaXplcjogJ2l6ZScsXG4gICAgYmxpOiAnYmxlJyxcbiAgICBhbGxpOiAnYWwnLFxuICAgIGVudGxpOiAnZW50JyxcbiAgICBlbGk6ICdlJyxcbiAgICBvdXNsaTogJ291cycsXG4gICAgaXphdGlvbjogJ2l6ZScsXG4gICAgYXRpb246ICdhdGUnLFxuICAgIGF0b3I6ICdhdGUnLFxuICAgIGFsaXNtOiAnYWwnLFxuICAgIGl2ZW5lc3M6ICdpdmUnLFxuICAgIGZ1bG5lc3M6ICdmdWwnLFxuICAgIG91c25lc3M6ICdvdXMnLFxuICAgIGFsaXRpOiAnYWwnLFxuICAgIGl2aXRpOiAnaXZlJyxcbiAgICBiaWxpdGk6ICdibGUnLFxuICAgIGxvZ2k6ICdsb2cnXG59O1xuY29uc3Qgc3RlcDNMaXN0ID0ge1xuICAgIGljYXRlOiAnaWMnLFxuICAgIGF0aXZlOiAnJyxcbiAgICBhbGl6ZTogJ2FsJyxcbiAgICBpY2l0aTogJ2ljJyxcbiAgICBpY2FsOiAnaWMnLFxuICAgIGZ1bDogJycsXG4gICAgbmVzczogJydcbn07XG4vLyBDb25zb25hbnRcbmNvbnN0IGMgPSAnW15hZWlvdV0nO1xuLy8gVm93ZWxcbmNvbnN0IHYgPSAnW2FlaW91eV0nO1xuLy8gQ29uc29uYW50IHNlcXVlbmNlXG5jb25zdCBDID0gYyArICdbXmFlaW91eV0qJztcbi8vIFZvd2VsIHNlcXVlbmNlXG5jb25zdCBWID0gdiArICdbYWVpb3VdKic7XG4vLyBbQ11WQy4uLiBpcyBtPjBcbmNvbnN0IG1ncjAgPSAnXignICsgQyArICcpPycgKyBWICsgQztcbi8vIFtDXVZDW1ZdIGlzIG09MVxuY29uc3QgbWVxMSA9ICdeKCcgKyBDICsgJyk/JyArIFYgKyBDICsgJygnICsgViArICcpPyQnO1xuLy8gW0NdVkNWQy4uLiBpcyBtPjFcbmNvbnN0IG1ncjEgPSAnXignICsgQyArICcpPycgKyBWICsgQyArIFYgKyBDO1xuLy8gdm93ZWwgaW4gc3RlbVxuY29uc3Qgc192ID0gJ14oJyArIEMgKyAnKT8nICsgdjtcbmV4cG9ydCBmdW5jdGlvbiBzdGVtbWVyKHcpIHtcbiAgICBsZXQgc3RlbTtcbiAgICBsZXQgc3VmZml4O1xuICAgIGxldCByZTtcbiAgICBsZXQgcmUyO1xuICAgIGxldCByZTM7XG4gICAgbGV0IHJlNDtcbiAgICBpZiAody5sZW5ndGggPCAzKSB7XG4gICAgICAgIHJldHVybiB3O1xuICAgIH1cbiAgICBjb25zdCBmaXJzdGNoID0gdy5zdWJzdHJpbmcoMCwgMSk7XG4gICAgaWYgKGZpcnN0Y2ggPT0gJ3knKSB7XG4gICAgICAgIHcgPSBmaXJzdGNoLnRvVXBwZXJDYXNlKCkgKyB3LnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgcmUgPSAvXiguKz8pKHNzfGkpZXMkLztcbiAgICByZTIgPSAvXiguKz8pKFtec10pcyQvO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICAgIHcgPSB3LnJlcGxhY2UocmUsICckMSQyJyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7XG4gICAgICAgIHcgPSB3LnJlcGxhY2UocmUyLCAnJDEkMicpO1xuICAgIH1cbiAgICByZSA9IC9eKC4rPyllZWQkLztcbiAgICByZTIgPSAvXiguKz8pKGVkfGluZykkLztcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgICBjb25zdCBmcCA9IHJlLmV4ZWModyk7XG4gICAgICAgIHJlID0gbmV3IFJlZ0V4cChtZ3IwKTtcbiAgICAgICAgaWYgKHJlLnRlc3QoZnBbMV0pKSB7XG4gICAgICAgICAgICByZSA9IC8uJC87XG4gICAgICAgICAgICB3ID0gdy5yZXBsYWNlKHJlLCAnJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgICAgY29uc3QgZnAgPSByZTIuZXhlYyh3KTtcbiAgICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgICByZTIgPSBuZXcgUmVnRXhwKHNfdik7XG4gICAgICAgIGlmIChyZTIudGVzdChzdGVtKSkge1xuICAgICAgICAgICAgdyA9IHN0ZW07XG4gICAgICAgICAgICByZTIgPSAvKGF0fGJsfGl6KSQvO1xuICAgICAgICAgICAgcmUzID0gbmV3IFJlZ0V4cCgnKFteYWVpb3V5bHN6XSlcXFxcMSQnKTtcbiAgICAgICAgICAgIHJlNCA9IG5ldyBSZWdFeHAoJ14nICsgQyArIHYgKyAnW15hZWlvdXd4eV0kJyk7XG4gICAgICAgICAgICBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgICAgICAgICAgICB3ID0gdyArICdlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlMy50ZXN0KHcpKSB7XG4gICAgICAgICAgICAgICAgcmUgPSAvLiQvO1xuICAgICAgICAgICAgICAgIHcgPSB3LnJlcGxhY2UocmUsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlNC50ZXN0KHcpKSB7XG4gICAgICAgICAgICAgICAgdyA9IHcgKyAnZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmUgPSAvXiguKz8peSQvO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICAgIGNvbnN0IGZwID0gcmUuZXhlYyh3KTtcbiAgICAgICAgc3RlbSA9IGZwPy5bMV07XG4gICAgICAgIHJlID0gbmV3IFJlZ0V4cChzX3YpO1xuICAgICAgICBpZiAoc3RlbSAmJiByZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgICAgICB3ID0gc3RlbSArICdpJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZSA9XG4gICAgICAgIC9eKC4rPykoYXRpb25hbHx0aW9uYWx8ZW5jaXxhbmNpfGl6ZXJ8YmxpfGFsbGl8ZW50bGl8ZWxpfG91c2xpfGl6YXRpb258YXRpb258YXRvcnxhbGlzbXxpdmVuZXNzfGZ1bG5lc3N8b3VzbmVzc3xhbGl0aXxpdml0aXxiaWxpdGl8bG9naSkkLztcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgICBjb25zdCBmcCA9IHJlLmV4ZWModyk7XG4gICAgICAgIHN0ZW0gPSBmcD8uWzFdO1xuICAgICAgICBzdWZmaXggPSBmcD8uWzJdO1xuICAgICAgICByZSA9IG5ldyBSZWdFeHAobWdyMCk7XG4gICAgICAgIGlmIChzdGVtICYmIHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHcgPSBzdGVtICsgc3RlcDJMaXN0W3N1ZmZpeF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmUgPSAvXiguKz8pKGljYXRlfGF0aXZlfGFsaXplfGljaXRpfGljYWx8ZnVsfG5lc3MpJC87XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgICAgY29uc3QgZnAgPSByZS5leGVjKHcpO1xuICAgICAgICBzdGVtID0gZnA/LlsxXTtcbiAgICAgICAgc3VmZml4ID0gZnA/LlsyXTtcbiAgICAgICAgcmUgPSBuZXcgUmVnRXhwKG1ncjApO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKHN0ZW0gJiYgcmUudGVzdChzdGVtKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdyA9IHN0ZW0gKyBzdGVwM0xpc3Rbc3VmZml4XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZSA9IC9eKC4rPykoYWx8YW5jZXxlbmNlfGVyfGljfGFibGV8aWJsZXxhbnR8ZW1lbnR8bWVudHxlbnR8b3V8aXNtfGF0ZXxpdGl8b3VzfGl2ZXxpemUpJC87XG4gICAgcmUyID0gL14oLis/KShzfHQpKGlvbikkLztcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgICBjb25zdCBmcCA9IHJlLmV4ZWModyk7XG4gICAgICAgIHN0ZW0gPSBmcD8uWzFdO1xuICAgICAgICByZSA9IG5ldyBSZWdFeHAobWdyMSk7XG4gICAgICAgIGlmIChzdGVtICYmIHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgICAgIHcgPSBzdGVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7XG4gICAgICAgIGNvbnN0IGZwID0gcmUyLmV4ZWModyk7XG4gICAgICAgIHN0ZW0gPSBmcD8uWzFdID8/ICcnICsgZnA/LlsyXSA/PyAnJztcbiAgICAgICAgcmUyID0gbmV3IFJlZ0V4cChtZ3IxKTtcbiAgICAgICAgaWYgKHJlMi50ZXN0KHN0ZW0pKSB7XG4gICAgICAgICAgICB3ID0gc3RlbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZSA9IC9eKC4rPyllJC87XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgICAgY29uc3QgZnAgPSByZS5leGVjKHcpO1xuICAgICAgICBzdGVtID0gZnA/LlsxXTtcbiAgICAgICAgcmUgPSBuZXcgUmVnRXhwKG1ncjEpO1xuICAgICAgICByZTIgPSBuZXcgUmVnRXhwKG1lcTEpO1xuICAgICAgICByZTMgPSBuZXcgUmVnRXhwKCdeJyArIEMgKyB2ICsgJ1teYWVpb3V3eHldJCcpO1xuICAgICAgICBpZiAoc3RlbSAmJiAocmUudGVzdChzdGVtKSB8fCAocmUyLnRlc3Qoc3RlbSkgJiYgIXJlMy50ZXN0KHN0ZW0pKSkpIHtcbiAgICAgICAgICAgIHcgPSBzdGVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlID0gL2xsJC87XG4gICAgcmUyID0gbmV3IFJlZ0V4cChtZ3IxKTtcbiAgICBpZiAocmUudGVzdCh3KSAmJiByZTIudGVzdCh3KSkge1xuICAgICAgICByZSA9IC8uJC87XG4gICAgICAgIHcgPSB3LnJlcGxhY2UocmUsICcnKTtcbiAgICB9XG4gICAgaWYgKGZpcnN0Y2ggPT0gJ3knKSB7XG4gICAgICAgIHcgPSBmaXJzdGNoLnRvTG93ZXJDYXNlKCkgKyB3LnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgcmV0dXJuIHc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbmdsaXNoLXN0ZW1tZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/english-stemmer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/tokenizer/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTokenizer: () => (/* binding */ createTokenizer),\n/* harmony export */   normalizeToken: () => (/* binding */ normalizeToken)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _diacritics_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./diacritics.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/diacritics.js\");\n/* harmony import */ var _languages_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./languages.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/languages.js\");\n/* harmony import */ var _english_stemmer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./english-stemmer.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/english-stemmer.js\");\n\n\n\n\nfunction normalizeToken(prop, token, withCache = true) {\n    const key = `${this.language}:${prop}:${token}`;\n    if (withCache && this.normalizationCache.has(key)) {\n        return this.normalizationCache.get(key);\n    }\n    // Remove stopwords if enabled\n    if (this.stopWords?.includes(token)) {\n        if (withCache) {\n            this.normalizationCache.set(key, '');\n        }\n        return '';\n    }\n    // Apply stemming if enabled\n    if (this.stemmer && !this.stemmerSkipProperties.has(prop)) {\n        token = this.stemmer(token);\n    }\n    token = (0,_diacritics_js__WEBPACK_IMPORTED_MODULE_1__.replaceDiacritics)(token);\n    if (withCache) {\n        this.normalizationCache.set(key, token);\n    }\n    return token;\n}\n/* c8 ignore next 10 */\nfunction trim(text) {\n    while (text[text.length - 1] === '') {\n        text.pop();\n    }\n    while (text[0] === '') {\n        text.shift();\n    }\n    return text;\n}\nfunction tokenize(input, language, prop, withCache = true) {\n    if (language && language !== this.language) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('LANGUAGE_NOT_SUPPORTED', language);\n    }\n    /* c8 ignore next 3 */\n    if (typeof input !== 'string') {\n        return [input];\n    }\n    const normalizeToken = this.normalizeToken.bind(this, prop ?? '');\n    let tokens;\n    if (prop && this.tokenizeSkipProperties.has(prop)) {\n        tokens = [normalizeToken(input, withCache)];\n    }\n    else {\n        const splitRule = _languages_js__WEBPACK_IMPORTED_MODULE_2__.SPLITTERS[this.language];\n        tokens = input\n            .toLowerCase()\n            .split(splitRule)\n            .map(t => normalizeToken(t, withCache))\n            .filter(Boolean);\n    }\n    const trimTokens = trim(tokens);\n    if (!this.allowDuplicates) {\n        return Array.from(new Set(trimTokens));\n    }\n    return trimTokens;\n}\nfunction createTokenizer(config = {}) {\n    if (!config.language) {\n        config.language = 'english';\n    }\n    else if (!_languages_js__WEBPACK_IMPORTED_MODULE_2__.SUPPORTED_LANGUAGES.includes(config.language)) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('LANGUAGE_NOT_SUPPORTED', config.language);\n    }\n    // Handle stemming - It is disabled by default\n    let stemmer;\n    if (config.stemming || (config.stemmer && !('stemming' in config))) {\n        if (config.stemmer) {\n            if (typeof config.stemmer !== 'function') {\n                throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_STEMMER_FUNCTION_TYPE');\n            }\n            stemmer = config.stemmer;\n        }\n        else {\n            if (config.language === 'english') {\n                stemmer = _english_stemmer_js__WEBPACK_IMPORTED_MODULE_3__.stemmer;\n            }\n            else {\n                throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('MISSING_STEMMER', config.language);\n            }\n        }\n    }\n    // Handle stopwords\n    let stopWords;\n    if (config.stopWords !== false) {\n        stopWords = [];\n        if (Array.isArray(config.stopWords)) {\n            stopWords = config.stopWords;\n        }\n        else if (typeof config.stopWords === 'function') {\n            stopWords = config.stopWords(stopWords);\n        }\n        else if (config.stopWords) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY');\n        }\n        // Make sure stopWords is just an array of strings\n        if (!Array.isArray(stopWords)) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY');\n        }\n        for (const s of stopWords) {\n            if (typeof s !== 'string') {\n                throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY');\n            }\n        }\n    }\n    // Create the tokenizer\n    const tokenizer = {\n        tokenize,\n        language: config.language,\n        stemmer,\n        stemmerSkipProperties: new Set(config.stemmerSkipProperties ? [config.stemmerSkipProperties].flat() : []),\n        tokenizeSkipProperties: new Set(config.tokenizeSkipProperties ? [config.tokenizeSkipProperties].flat() : []),\n        stopWords,\n        allowDuplicates: Boolean(config.allowDuplicates),\n        normalizeToken,\n        normalizationCache: new Map()\n    };\n    tokenizer.tokenize = tokenize.bind(tokenizer);\n    tokenizer.normalizeToken = normalizeToken;\n    return tokenizer;\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvdG9rZW5pemVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4QztBQUNNO0FBQ1k7QUFDTjtBQUNuRDtBQUNQLG1CQUFtQixjQUFjLEdBQUcsS0FBSyxHQUFHLE1BQU07QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUVBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVEQUFXO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sb0NBQW9DO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsOERBQW1CO0FBQ2pDLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0RBQU87QUFDakM7QUFDQTtBQUNBLHNCQUFzQix1REFBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdURBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9jb21wb25lbnRzL3Rva2VuaXplci9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gJy4uLy4uL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyByZXBsYWNlRGlhY3JpdGljcyB9IGZyb20gJy4vZGlhY3JpdGljcy5qcyc7XG5pbXBvcnQgeyBTUExJVFRFUlMsIFNVUFBPUlRFRF9MQU5HVUFHRVMgfSBmcm9tICcuL2xhbmd1YWdlcy5qcyc7XG5pbXBvcnQgeyBzdGVtbWVyIGFzIGVuZ2xpc2ggfSBmcm9tICcuL2VuZ2xpc2gtc3RlbW1lci5qcyc7XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVG9rZW4ocHJvcCwgdG9rZW4sIHdpdGhDYWNoZSA9IHRydWUpIHtcbiAgICBjb25zdCBrZXkgPSBgJHt0aGlzLmxhbmd1YWdlfToke3Byb3B9OiR7dG9rZW59YDtcbiAgICBpZiAod2l0aENhY2hlICYmIHRoaXMubm9ybWFsaXphdGlvbkNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6YXRpb25DYWNoZS5nZXQoa2V5KTtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHN0b3B3b3JkcyBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuc3RvcFdvcmRzPy5pbmNsdWRlcyh0b2tlbikpIHtcbiAgICAgICAgaWYgKHdpdGhDYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5ub3JtYWxpemF0aW9uQ2FjaGUuc2V0KGtleSwgJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgLy8gQXBwbHkgc3RlbW1pbmcgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLnN0ZW1tZXIgJiYgIXRoaXMuc3RlbW1lclNraXBQcm9wZXJ0aWVzLmhhcyhwcm9wKSkge1xuICAgICAgICB0b2tlbiA9IHRoaXMuc3RlbW1lcih0b2tlbik7XG4gICAgfVxuICAgIHRva2VuID0gcmVwbGFjZURpYWNyaXRpY3ModG9rZW4pO1xuICAgIGlmICh3aXRoQ2FjaGUpIHtcbiAgICAgICAgdGhpcy5ub3JtYWxpemF0aW9uQ2FjaGUuc2V0KGtleSwgdG9rZW4pO1xuICAgIH1cbiAgICByZXR1cm4gdG9rZW47XG59XG4vKiBjOCBpZ25vcmUgbmV4dCAxMCAqL1xuZnVuY3Rpb24gdHJpbSh0ZXh0KSB7XG4gICAgd2hpbGUgKHRleHRbdGV4dC5sZW5ndGggLSAxXSA9PT0gJycpIHtcbiAgICAgICAgdGV4dC5wb3AoKTtcbiAgICB9XG4gICAgd2hpbGUgKHRleHRbMF0gPT09ICcnKSB7XG4gICAgICAgIHRleHQuc2hpZnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHQ7XG59XG5mdW5jdGlvbiB0b2tlbml6ZShpbnB1dCwgbGFuZ3VhZ2UsIHByb3AsIHdpdGhDYWNoZSA9IHRydWUpIHtcbiAgICBpZiAobGFuZ3VhZ2UgJiYgbGFuZ3VhZ2UgIT09IHRoaXMubGFuZ3VhZ2UpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0xBTkdVQUdFX05PVF9TVVBQT1JURUQnLCBsYW5ndWFnZSk7XG4gICAgfVxuICAgIC8qIGM4IGlnbm9yZSBuZXh0IDMgKi9cbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gW2lucHV0XTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplVG9rZW4gPSB0aGlzLm5vcm1hbGl6ZVRva2VuLmJpbmQodGhpcywgcHJvcCA/PyAnJyk7XG4gICAgbGV0IHRva2VucztcbiAgICBpZiAocHJvcCAmJiB0aGlzLnRva2VuaXplU2tpcFByb3BlcnRpZXMuaGFzKHByb3ApKSB7XG4gICAgICAgIHRva2VucyA9IFtub3JtYWxpemVUb2tlbihpbnB1dCwgd2l0aENhY2hlKV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBzcGxpdFJ1bGUgPSBTUExJVFRFUlNbdGhpcy5sYW5ndWFnZV07XG4gICAgICAgIHRva2VucyA9IGlucHV0XG4gICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgLnNwbGl0KHNwbGl0UnVsZSlcbiAgICAgICAgICAgIC5tYXAodCA9PiBub3JtYWxpemVUb2tlbih0LCB3aXRoQ2FjaGUpKVxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICB9XG4gICAgY29uc3QgdHJpbVRva2VucyA9IHRyaW0odG9rZW5zKTtcbiAgICBpZiAoIXRoaXMuYWxsb3dEdXBsaWNhdGVzKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodHJpbVRva2VucykpO1xuICAgIH1cbiAgICByZXR1cm4gdHJpbVRva2Vucztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUb2tlbml6ZXIoY29uZmlnID0ge30pIHtcbiAgICBpZiAoIWNvbmZpZy5sYW5ndWFnZSkge1xuICAgICAgICBjb25maWcubGFuZ3VhZ2UgPSAnZW5nbGlzaCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFTVVBQT1JURURfTEFOR1VBR0VTLmluY2x1ZGVzKGNvbmZpZy5sYW5ndWFnZSkpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0xBTkdVQUdFX05PVF9TVVBQT1JURUQnLCBjb25maWcubGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgc3RlbW1pbmcgLSBJdCBpcyBkaXNhYmxlZCBieSBkZWZhdWx0XG4gICAgbGV0IHN0ZW1tZXI7XG4gICAgaWYgKGNvbmZpZy5zdGVtbWluZyB8fCAoY29uZmlnLnN0ZW1tZXIgJiYgISgnc3RlbW1pbmcnIGluIGNvbmZpZykpKSB7XG4gICAgICAgIGlmIChjb25maWcuc3RlbW1lcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcuc3RlbW1lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdJTlZBTElEX1NURU1NRVJfRlVOQ1RJT05fVFlQRScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RlbW1lciA9IGNvbmZpZy5zdGVtbWVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5sYW5ndWFnZSA9PT0gJ2VuZ2xpc2gnKSB7XG4gICAgICAgICAgICAgICAgc3RlbW1lciA9IGVuZ2xpc2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignTUlTU0lOR19TVEVNTUVSJywgY29uZmlnLmxhbmd1YWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIYW5kbGUgc3RvcHdvcmRzXG4gICAgbGV0IHN0b3BXb3JkcztcbiAgICBpZiAoY29uZmlnLnN0b3BXb3JkcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgc3RvcFdvcmRzID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbmZpZy5zdG9wV29yZHMpKSB7XG4gICAgICAgICAgICBzdG9wV29yZHMgPSBjb25maWcuc3RvcFdvcmRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWcuc3RvcFdvcmRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdG9wV29yZHMgPSBjb25maWcuc3RvcFdvcmRzKHN0b3BXb3Jkcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnLnN0b3BXb3Jkcykge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0NVU1RPTV9TVE9QX1dPUkRTX01VU1RfQkVfRlVOQ1RJT05fT1JfQVJSQVknKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBNYWtlIHN1cmUgc3RvcFdvcmRzIGlzIGp1c3QgYW4gYXJyYXkgb2Ygc3RyaW5nc1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3RvcFdvcmRzKSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0NVU1RPTV9TVE9QX1dPUkRTX01VU1RfQkVfRlVOQ1RJT05fT1JfQVJSQVknKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc3RvcFdvcmRzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHMgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0NVU1RPTV9TVE9QX1dPUkRTX01VU1RfQkVfRlVOQ1RJT05fT1JfQVJSQVknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDcmVhdGUgdGhlIHRva2VuaXplclxuICAgIGNvbnN0IHRva2VuaXplciA9IHtcbiAgICAgICAgdG9rZW5pemUsXG4gICAgICAgIGxhbmd1YWdlOiBjb25maWcubGFuZ3VhZ2UsXG4gICAgICAgIHN0ZW1tZXIsXG4gICAgICAgIHN0ZW1tZXJTa2lwUHJvcGVydGllczogbmV3IFNldChjb25maWcuc3RlbW1lclNraXBQcm9wZXJ0aWVzID8gW2NvbmZpZy5zdGVtbWVyU2tpcFByb3BlcnRpZXNdLmZsYXQoKSA6IFtdKSxcbiAgICAgICAgdG9rZW5pemVTa2lwUHJvcGVydGllczogbmV3IFNldChjb25maWcudG9rZW5pemVTa2lwUHJvcGVydGllcyA/IFtjb25maWcudG9rZW5pemVTa2lwUHJvcGVydGllc10uZmxhdCgpIDogW10pLFxuICAgICAgICBzdG9wV29yZHMsXG4gICAgICAgIGFsbG93RHVwbGljYXRlczogQm9vbGVhbihjb25maWcuYWxsb3dEdXBsaWNhdGVzKSxcbiAgICAgICAgbm9ybWFsaXplVG9rZW4sXG4gICAgICAgIG5vcm1hbGl6YXRpb25DYWNoZTogbmV3IE1hcCgpXG4gICAgfTtcbiAgICB0b2tlbml6ZXIudG9rZW5pemUgPSB0b2tlbml6ZS5iaW5kKHRva2VuaXplcik7XG4gICAgdG9rZW5pemVyLm5vcm1hbGl6ZVRva2VuID0gbm9ybWFsaXplVG9rZW47XG4gICAgcmV0dXJuIHRva2VuaXplcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/languages.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/components/tokenizer/languages.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SPLITTERS: () => (/* binding */ SPLITTERS),\n/* harmony export */   STEMMERS: () => (/* binding */ STEMMERS),\n/* harmony export */   SUPPORTED_LANGUAGES: () => (/* binding */ SUPPORTED_LANGUAGES),\n/* harmony export */   getLocale: () => (/* binding */ getLocale)\n/* harmony export */ });\nconst STEMMERS = {\n    arabic: 'ar',\n    armenian: 'am',\n    bulgarian: 'bg',\n    czech: 'cz',\n    danish: 'dk',\n    dutch: 'nl',\n    english: 'en',\n    finnish: 'fi',\n    french: 'fr',\n    german: 'de',\n    greek: 'gr',\n    hungarian: 'hu',\n    indian: 'in',\n    indonesian: 'id',\n    irish: 'ie',\n    italian: 'it',\n    lithuanian: 'lt',\n    nepali: 'np',\n    norwegian: 'no',\n    portuguese: 'pt',\n    romanian: 'ro',\n    russian: 'ru',\n    serbian: 'rs',\n    slovenian: 'ru',\n    spanish: 'es',\n    swedish: 'se',\n    tamil: 'ta',\n    turkish: 'tr',\n    ukrainian: 'uk',\n    sanskrit: 'sk'\n};\nconst SPLITTERS = {\n    dutch: /[^A-Za-z0-9_'-]+/gim,\n    english: /[^A-Za-z0-9_'-]+/gim,\n    french: /[^a-z0-9-]+/gim,\n    italian: /[^A-Za-z0-9_'-]+/gim,\n    norwegian: /[^a-z0-9_]+/gim,\n    portuguese: /[^a-z0-9--]/gim,\n    russian: /[^a-z0-9--]+/gim,\n    spanish: /[^a-z0-9A-Z--]+/gim,\n    swedish: /[^a-z0-9_-]+/gim,\n    german: /[^a-z0-9A-Z]+/gim,\n    finnish: /[^a-z0-9]+/gim,\n    danish: /[^a-z0-9]+/gim,\n    hungarian: /[^a-z0-9]+/gim,\n    romanian: /[^a-z0-9]+/gim,\n    serbian: /[^a-z0-9]+/gim,\n    turkish: /[^a-z0-9]+/gim,\n    lithuanian: /[^a-z0-9]+/gim,\n    arabic: /[^a-z0-9-]+/gim,\n    nepali: /[^a-z0-9-]+/gim,\n    irish: /[^a-z0-9]+/gim,\n    indian: /[^a-z0-9-]+/gim,\n    armenian: /[^a-z0-9-]+/gim,\n    greek: /[^a-z0-9--]+/gim,\n    indonesian: /[^a-z0-9]+/gim,\n    ukrainian: /[^a-z0-9--]+/gim,\n    slovenian: /[^a-z0-9]+/gim,\n    bulgarian: /[^a-z0-9--]+/gim,\n    tamil: /[^a-z0-9-]+/gim,\n    sanskrit: /[^a-z0-9A-Z]+/gim,\n    czech: /[^A-Z0-9a-z-]+/gim\n};\nconst SUPPORTED_LANGUAGES = Object.keys(STEMMERS);\nfunction getLocale(language) {\n    return language !== undefined && SUPPORTED_LANGUAGES.includes(language) ? STEMMERS[language] : undefined;\n}\n//# sourceMappingURL=languages.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvdG9rZW5pemVyL2xhbmd1YWdlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbXBvbmVudHMvdG9rZW5pemVyL2xhbmd1YWdlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgU1RFTU1FUlMgPSB7XG4gICAgYXJhYmljOiAnYXInLFxuICAgIGFybWVuaWFuOiAnYW0nLFxuICAgIGJ1bGdhcmlhbjogJ2JnJyxcbiAgICBjemVjaDogJ2N6JyxcbiAgICBkYW5pc2g6ICdkaycsXG4gICAgZHV0Y2g6ICdubCcsXG4gICAgZW5nbGlzaDogJ2VuJyxcbiAgICBmaW5uaXNoOiAnZmknLFxuICAgIGZyZW5jaDogJ2ZyJyxcbiAgICBnZXJtYW46ICdkZScsXG4gICAgZ3JlZWs6ICdncicsXG4gICAgaHVuZ2FyaWFuOiAnaHUnLFxuICAgIGluZGlhbjogJ2luJyxcbiAgICBpbmRvbmVzaWFuOiAnaWQnLFxuICAgIGlyaXNoOiAnaWUnLFxuICAgIGl0YWxpYW46ICdpdCcsXG4gICAgbGl0aHVhbmlhbjogJ2x0JyxcbiAgICBuZXBhbGk6ICducCcsXG4gICAgbm9yd2VnaWFuOiAnbm8nLFxuICAgIHBvcnR1Z3Vlc2U6ICdwdCcsXG4gICAgcm9tYW5pYW46ICdybycsXG4gICAgcnVzc2lhbjogJ3J1JyxcbiAgICBzZXJiaWFuOiAncnMnLFxuICAgIHNsb3ZlbmlhbjogJ3J1JyxcbiAgICBzcGFuaXNoOiAnZXMnLFxuICAgIHN3ZWRpc2g6ICdzZScsXG4gICAgdGFtaWw6ICd0YScsXG4gICAgdHVya2lzaDogJ3RyJyxcbiAgICB1a3JhaW5pYW46ICd1aycsXG4gICAgc2Fuc2tyaXQ6ICdzaydcbn07XG5leHBvcnQgY29uc3QgU1BMSVRURVJTID0ge1xuICAgIGR1dGNoOiAvW15BLVphLXrDoMOow6nDrMOyw7PDuTAtOV8nLV0rL2dpbSxcbiAgICBlbmdsaXNoOiAvW15BLVphLXrDoMOow6nDrMOyw7PDuTAtOV8nLV0rL2dpbSxcbiAgICBmcmVuY2g6IC9bXmEtejAtOcOkw6LDoMOpw6jDq8Oqw6/DrsO2w7TDucO8w7vFk8OnLV0rL2dpbSxcbiAgICBpdGFsaWFuOiAvW15BLVphLXrDoMOow6nDrMOyw7PDuTAtOV8nLV0rL2dpbSxcbiAgICBub3J3ZWdpYW46IC9bXmEtejAtOV/DpsO4w6XDhsOYw4XDpMOEw7bDlsO8w5xdKy9naW0sXG4gICAgcG9ydHVndWVzZTogL1teYS16MC05w6Atw7rDgC3Dml0vZ2ltLFxuICAgIHJ1c3NpYW46IC9bXmEtejAtOdCwLdGP0JAt0K/RkdCBXSsvZ2ltLFxuICAgIHNwYW5pc2g6IC9bXmEtejAtOUEtWsOhLcO6w4Etw5rDscORw7zDnF0rL2dpbSxcbiAgICBzd2VkaXNoOiAvW15hLXowLTlfw6XDhcOkw4TDtsOWw7zDnC1dKy9naW0sXG4gICAgZ2VybWFuOiAvW15hLXowLTlBLVrDpMO2w7zDhMOWw5zDn10rL2dpbSxcbiAgICBmaW5uaXNoOiAvW15hLXowLTnDpMO2w4TDll0rL2dpbSxcbiAgICBkYW5pc2g6IC9bXmEtejAtOcOmw7jDpcOGw5jDhV0rL2dpbSxcbiAgICBodW5nYXJpYW46IC9bXmEtejAtOcOhw6nDrcOzw7bFkcO6w7zFscOBw4nDjcOTw5bFkMOaw5zFsF0rL2dpbSxcbiAgICByb21hbmlhbjogL1teYS16MC05xIPDosOuyJnIm8SCw4LDjsiYyJpdKy9naW0sXG4gICAgc2VyYmlhbjogL1teYS16MC05xI3Eh8W+xaHEkcSMxIbFvcWgxJBdKy9naW0sXG4gICAgdHVya2lzaDogL1teYS16MC05w6fDh8SfxJ7EscSww7bDlsWfxZ7DvMOcXSsvZ2ltLFxuICAgIGxpdGh1YW5pYW46IC9bXmEtejAtOcSFxI3EmcSXxK/FocWzxavFvsSExIzEmMSWxK7FoMWyxarFvV0rL2dpbSxcbiAgICBhcmFiaWM6IC9bXmEtejAtOdijLdmKXSsvZ2ltLFxuICAgIG5lcGFsaTogL1teYS16MC054KSFLeCkuV0rL2dpbSxcbiAgICBpcmlzaDogL1teYS16MC05w6HDqcOtw7PDusOBw4nDjcOTw5pdKy9naW0sXG4gICAgaW5kaWFuOiAvW15hLXowLTngpIUt4KS5XSsvZ2ltLFxuICAgIGFybWVuaWFuOiAvW15hLXowLTnVoS3Whl0rL2dpbSxcbiAgICBncmVlazogL1teYS16MC05zrEtz4nOrC3Pjl0rL2dpbSxcbiAgICBpbmRvbmVzaWFuOiAvW15hLXowLTldKy9naW0sXG4gICAgdWtyYWluaWFuOiAvW15hLXowLTnQsC3Rj9CQLdCv0ZbRl9GU0IbQh9CEXSsvZ2ltLFxuICAgIHNsb3ZlbmlhbjogL1teYS16MC05xI3FvsWhxIzFvcWgXSsvZ2ltLFxuICAgIGJ1bGdhcmlhbjogL1teYS16MC050LAt0Y/QkC3Qr10rL2dpbSxcbiAgICB0YW1pbDogL1teYS16MC054K6FLeCuuV0rL2dpbSxcbiAgICBzYW5za3JpdDogL1teYS16MC05QS1axIHEq8Wr4bmb4bi34bmD4bmB4bilxZvhuaPhua3huI3huYfhuYXDseG4u+G4ueG5nV0rL2dpbSxcbiAgICBjemVjaDogL1teQS1aMC05YS16xJvFocSNxZnFvsO9w6HDrcOpw7rFr8OzxaXEj8SaxaDEjMWYxb3DncOBw43DicOTw5rFrsWkxI4tXSsvZ2ltXG59O1xuZXhwb3J0IGNvbnN0IFNVUFBPUlRFRF9MQU5HVUFHRVMgPSBPYmplY3Qua2V5cyhTVEVNTUVSUyk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9jYWxlKGxhbmd1YWdlKSB7XG4gICAgcmV0dXJuIGxhbmd1YWdlICE9PSB1bmRlZmluZWQgJiYgU1VQUE9SVEVEX0xBTkdVQUdFUy5pbmNsdWRlcyhsYW5ndWFnZSkgPyBTVEVNTUVSU1tsYW5ndWFnZV0gOiB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sYW5ndWFnZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/languages.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/constants.js":
/*!*************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/constants.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MODE_FULLTEXT_SEARCH: () => (/* binding */ MODE_FULLTEXT_SEARCH),\n/* harmony export */   MODE_HYBRID_SEARCH: () => (/* binding */ MODE_HYBRID_SEARCH),\n/* harmony export */   MODE_VECTOR_SEARCH: () => (/* binding */ MODE_VECTOR_SEARCH)\n/* harmony export */ });\nconst MODE_FULLTEXT_SEARCH = 'fulltext';\nconst MODE_HYBRID_SEARCH = 'hybrid';\nconst MODE_VECTOR_SEARCH = 'vector';\n//# sourceMappingURL=constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTztBQUNBO0FBQ0E7QUFDUCIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9jb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IE1PREVfRlVMTFRFWFRfU0VBUkNIID0gJ2Z1bGx0ZXh0JztcbmV4cG9ydCBjb25zdCBNT0RFX0hZQlJJRF9TRUFSQ0ggPSAnaHlicmlkJztcbmV4cG9ydCBjb25zdCBNT0RFX1ZFQ1RPUl9TRUFSQ0ggPSAndmVjdG9yJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/constants.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js":
/*!**********************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/errors.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createError: () => (/* binding */ createError)\n/* harmony export */ });\n/* harmony import */ var _components_tokenizer_languages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/tokenizer/languages.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/languages.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\n\nconst allLanguages = _components_tokenizer_languages_js__WEBPACK_IMPORTED_MODULE_0__.SUPPORTED_LANGUAGES.join('\\n - ');\nconst errors = {\n    NO_LANGUAGE_WITH_CUSTOM_TOKENIZER: 'Do not pass the language option to create when using a custom tokenizer.',\n    LANGUAGE_NOT_SUPPORTED: `Language \"%s\" is not supported.\\nSupported languages are:\\n - ${allLanguages}`,\n    INVALID_STEMMER_FUNCTION_TYPE: `config.stemmer property must be a function.`,\n    MISSING_STEMMER: `As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the \"%s\" stemmer from the package @orama/stemmers. See https://docs.orama.com/open-source/text-analysis/stemming for more information.`,\n    CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY: 'Custom stop words array must only contain strings.',\n    UNSUPPORTED_COMPONENT: `Unsupported component \"%s\".`,\n    COMPONENT_MUST_BE_FUNCTION: `The component \"%s\" must be a function.`,\n    COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS: `The component \"%s\" must be a function or an array of functions.`,\n    INVALID_SCHEMA_TYPE: `Unsupported schema type \"%s\" at \"%s\". Expected \"string\", \"boolean\" or \"number\" or array of them.`,\n    DOCUMENT_ID_MUST_BE_STRING: `Document id must be of type \"string\". Got \"%s\" instead.`,\n    DOCUMENT_ALREADY_EXISTS: `A document with id \"%s\" already exists.`,\n    DOCUMENT_DOES_NOT_EXIST: `A document with id \"%s\" does not exists.`,\n    MISSING_DOCUMENT_PROPERTY: `Missing searchable property \"%s\".`,\n    INVALID_DOCUMENT_PROPERTY: `Invalid document property \"%s\": expected \"%s\", got \"%s\"`,\n    UNKNOWN_INDEX: `Invalid property name \"%s\". Expected a wildcard string (\"*\") or array containing one of the following properties: %s`,\n    INVALID_BOOST_VALUE: `Boost value must be a number greater than, or less than 0.`,\n    INVALID_FILTER_OPERATION: `You can only use one operation per filter, you requested %d.`,\n    SCHEMA_VALIDATION_FAILURE: `Cannot insert document due schema validation failure on \"%s\" property.`,\n    INVALID_SORT_SCHEMA_TYPE: `Unsupported sort schema type \"%s\" at \"%s\". Expected \"string\" or \"number\".`,\n    CANNOT_SORT_BY_ARRAY: `Cannot configure sort for \"%s\" because it is an array (%s).`,\n    UNABLE_TO_SORT_ON_UNKNOWN_FIELD: `Unable to sort on unknown field \"%s\". Allowed fields: %s`,\n    SORT_DISABLED: `Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.`,\n    UNKNOWN_GROUP_BY_PROPERTY: `Unknown groupBy property \"%s\".`,\n    INVALID_GROUP_BY_PROPERTY: `Invalid groupBy property \"%s\". Allowed types: \"%s\", but given \"%s\".`,\n    UNKNOWN_FILTER_PROPERTY: `Unknown filter property \"%s\".`,\n    INVALID_VECTOR_SIZE: `Vector size must be a number greater than 0. Got \"%s\" instead.`,\n    INVALID_VECTOR_VALUE: `Vector value must be a number greater than 0. Got \"%s\" instead.`,\n    INVALID_INPUT_VECTOR: `Property \"%s\" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.\\nInput vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,\n    WRONG_SEARCH_PROPERTY_TYPE: `Property \"%s\" is not searchable. Only \"string\" properties are searchable.`,\n    FACET_NOT_SUPPORTED: `Facet doens't support the type \"%s\".`,\n    INVALID_DISTANCE_SUFFIX: `Invalid distance suffix \"%s\". Valid suffixes are: cm, m, km, mi, yd, ft.`,\n    INVALID_SEARCH_MODE: `Invalid search mode \"%s\". Valid modes are: \"fulltext\", \"vector\", \"hybrid\".`,\n    MISSING_VECTOR_AND_SECURE_PROXY: `No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.`,\n    MISSING_TERM: `\"term\" is a required parameter when performing hybrid search. Please provide a search term.`,\n    INVALID_VECTOR_INPUT: `Invalid \"vector\" property. Expected an object with \"value\" and \"property\" properties, but got \"%s\" instead.`,\n    PLUGIN_CRASHED: `A plugin crashed during initialization. Please check the error message for more information:`,\n    PLUGIN_SECURE_PROXY_NOT_FOUND: `Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.\\nPlease install it before proceeding with creating an answer session.\\nRead more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy#plugin-secure-proxy\\n`,\n    PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL: `Could not find a chat model defined in the secure proxy plugin configuration.\\nPlease provide a chat model before proceeding with creating an answer session.\\nRead more at https://docs.orama.com/open-source/plugins/plugin-secure-proxy#plugin-secure-proxy\\n`,\n    ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT: `The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.`,\n    PLUGIN_COMPONENT_CONFLICT: `The component \"%s\" is already defined. The plugin \"%s\" is trying to redefine it.`,\n};\nfunction createError(code, ...args) {\n    const error = new Error((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.sprintf)(errors[code] ?? `Unsupported Orama Error code: ${code}`, ...args));\n    error.code = code;\n    if ('captureStackTrace' in Error.prototype) {\n        Error.captureStackTrace(error);\n    }\n    return error;\n}\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEU7QUFDckM7QUFDckMscUJBQXFCLG1GQUFtQjtBQUN4QztBQUNBO0FBQ0EsNkZBQTZGLGFBQWE7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCw0QkFBNEIsa0RBQU8sa0RBQWtELEtBQUs7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNVUFBPUlRFRF9MQU5HVUFHRVMgfSBmcm9tICcuL2NvbXBvbmVudHMvdG9rZW5pemVyL2xhbmd1YWdlcy5qcyc7XG5pbXBvcnQgeyBzcHJpbnRmIH0gZnJvbSAnLi91dGlscy5qcyc7XG5jb25zdCBhbGxMYW5ndWFnZXMgPSBTVVBQT1JURURfTEFOR1VBR0VTLmpvaW4oJ1xcbiAtICcpO1xuY29uc3QgZXJyb3JzID0ge1xuICAgIE5PX0xBTkdVQUdFX1dJVEhfQ1VTVE9NX1RPS0VOSVpFUjogJ0RvIG5vdCBwYXNzIHRoZSBsYW5ndWFnZSBvcHRpb24gdG8gY3JlYXRlIHdoZW4gdXNpbmcgYSBjdXN0b20gdG9rZW5pemVyLicsXG4gICAgTEFOR1VBR0VfTk9UX1NVUFBPUlRFRDogYExhbmd1YWdlIFwiJXNcIiBpcyBub3Qgc3VwcG9ydGVkLlxcblN1cHBvcnRlZCBsYW5ndWFnZXMgYXJlOlxcbiAtICR7YWxsTGFuZ3VhZ2VzfWAsXG4gICAgSU5WQUxJRF9TVEVNTUVSX0ZVTkNUSU9OX1RZUEU6IGBjb25maWcuc3RlbW1lciBwcm9wZXJ0eSBtdXN0IGJlIGEgZnVuY3Rpb24uYCxcbiAgICBNSVNTSU5HX1NURU1NRVI6IGBBcyBvZiB2ZXJzaW9uIDEuMC4wIEBvcmFtYS9vcmFtYSBkb2VzIG5vdCBzaGlwIG5vbiBFbmdsaXNoIHN0ZW1tZXJzIGJ5IGRlZmF1bHQuIFRvIHNvbHZlIHRoaXMsIHBsZWFzZSBleHBsaWNpdGx5IGltcG9ydCBhbmQgc3BlY2lmeSB0aGUgXCIlc1wiIHN0ZW1tZXIgZnJvbSB0aGUgcGFja2FnZSBAb3JhbWEvc3RlbW1lcnMuIFNlZSBodHRwczovL2RvY3Mub3JhbWEuY29tL29wZW4tc291cmNlL3RleHQtYW5hbHlzaXMvc3RlbW1pbmcgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCxcbiAgICBDVVNUT01fU1RPUF9XT1JEU19NVVNUX0JFX0ZVTkNUSU9OX09SX0FSUkFZOiAnQ3VzdG9tIHN0b3Agd29yZHMgYXJyYXkgbXVzdCBvbmx5IGNvbnRhaW4gc3RyaW5ncy4nLFxuICAgIFVOU1VQUE9SVEVEX0NPTVBPTkVOVDogYFVuc3VwcG9ydGVkIGNvbXBvbmVudCBcIiVzXCIuYCxcbiAgICBDT01QT05FTlRfTVVTVF9CRV9GVU5DVElPTjogYFRoZSBjb21wb25lbnQgXCIlc1wiIG11c3QgYmUgYSBmdW5jdGlvbi5gLFxuICAgIENPTVBPTkVOVF9NVVNUX0JFX0ZVTkNUSU9OX09SX0FSUkFZX0ZVTkNUSU9OUzogYFRoZSBjb21wb25lbnQgXCIlc1wiIG11c3QgYmUgYSBmdW5jdGlvbiBvciBhbiBhcnJheSBvZiBmdW5jdGlvbnMuYCxcbiAgICBJTlZBTElEX1NDSEVNQV9UWVBFOiBgVW5zdXBwb3J0ZWQgc2NoZW1hIHR5cGUgXCIlc1wiIGF0IFwiJXNcIi4gRXhwZWN0ZWQgXCJzdHJpbmdcIiwgXCJib29sZWFuXCIgb3IgXCJudW1iZXJcIiBvciBhcnJheSBvZiB0aGVtLmAsXG4gICAgRE9DVU1FTlRfSURfTVVTVF9CRV9TVFJJTkc6IGBEb2N1bWVudCBpZCBtdXN0IGJlIG9mIHR5cGUgXCJzdHJpbmdcIi4gR290IFwiJXNcIiBpbnN0ZWFkLmAsXG4gICAgRE9DVU1FTlRfQUxSRUFEWV9FWElTVFM6IGBBIGRvY3VtZW50IHdpdGggaWQgXCIlc1wiIGFscmVhZHkgZXhpc3RzLmAsXG4gICAgRE9DVU1FTlRfRE9FU19OT1RfRVhJU1Q6IGBBIGRvY3VtZW50IHdpdGggaWQgXCIlc1wiIGRvZXMgbm90IGV4aXN0cy5gLFxuICAgIE1JU1NJTkdfRE9DVU1FTlRfUFJPUEVSVFk6IGBNaXNzaW5nIHNlYXJjaGFibGUgcHJvcGVydHkgXCIlc1wiLmAsXG4gICAgSU5WQUxJRF9ET0NVTUVOVF9QUk9QRVJUWTogYEludmFsaWQgZG9jdW1lbnQgcHJvcGVydHkgXCIlc1wiOiBleHBlY3RlZCBcIiVzXCIsIGdvdCBcIiVzXCJgLFxuICAgIFVOS05PV05fSU5ERVg6IGBJbnZhbGlkIHByb3BlcnR5IG5hbWUgXCIlc1wiLiBFeHBlY3RlZCBhIHdpbGRjYXJkIHN0cmluZyAoXCIqXCIpIG9yIGFycmF5IGNvbnRhaW5pbmcgb25lIG9mIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczogJXNgLFxuICAgIElOVkFMSURfQk9PU1RfVkFMVUU6IGBCb29zdCB2YWx1ZSBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiwgb3IgbGVzcyB0aGFuIDAuYCxcbiAgICBJTlZBTElEX0ZJTFRFUl9PUEVSQVRJT046IGBZb3UgY2FuIG9ubHkgdXNlIG9uZSBvcGVyYXRpb24gcGVyIGZpbHRlciwgeW91IHJlcXVlc3RlZCAlZC5gLFxuICAgIFNDSEVNQV9WQUxJREFUSU9OX0ZBSUxVUkU6IGBDYW5ub3QgaW5zZXJ0IGRvY3VtZW50IGR1ZSBzY2hlbWEgdmFsaWRhdGlvbiBmYWlsdXJlIG9uIFwiJXNcIiBwcm9wZXJ0eS5gLFxuICAgIElOVkFMSURfU09SVF9TQ0hFTUFfVFlQRTogYFVuc3VwcG9ydGVkIHNvcnQgc2NoZW1hIHR5cGUgXCIlc1wiIGF0IFwiJXNcIi4gRXhwZWN0ZWQgXCJzdHJpbmdcIiBvciBcIm51bWJlclwiLmAsXG4gICAgQ0FOTk9UX1NPUlRfQllfQVJSQVk6IGBDYW5ub3QgY29uZmlndXJlIHNvcnQgZm9yIFwiJXNcIiBiZWNhdXNlIGl0IGlzIGFuIGFycmF5ICglcykuYCxcbiAgICBVTkFCTEVfVE9fU09SVF9PTl9VTktOT1dOX0ZJRUxEOiBgVW5hYmxlIHRvIHNvcnQgb24gdW5rbm93biBmaWVsZCBcIiVzXCIuIEFsbG93ZWQgZmllbGRzOiAlc2AsXG4gICAgU09SVF9ESVNBQkxFRDogYFNvcnQgaXMgZGlzYWJsZWQuIFBsZWFzZSByZWFkIHRoZSBkb2N1bWVudGF0aW9uIGF0IGh0dHBzOi8vZG9jcy5vcmFtYXNlYXJjaCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gLFxuICAgIFVOS05PV05fR1JPVVBfQllfUFJPUEVSVFk6IGBVbmtub3duIGdyb3VwQnkgcHJvcGVydHkgXCIlc1wiLmAsXG4gICAgSU5WQUxJRF9HUk9VUF9CWV9QUk9QRVJUWTogYEludmFsaWQgZ3JvdXBCeSBwcm9wZXJ0eSBcIiVzXCIuIEFsbG93ZWQgdHlwZXM6IFwiJXNcIiwgYnV0IGdpdmVuIFwiJXNcIi5gLFxuICAgIFVOS05PV05fRklMVEVSX1BST1BFUlRZOiBgVW5rbm93biBmaWx0ZXIgcHJvcGVydHkgXCIlc1wiLmAsXG4gICAgSU5WQUxJRF9WRUNUT1JfU0laRTogYFZlY3RvciBzaXplIG11c3QgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDAuIEdvdCBcIiVzXCIgaW5zdGVhZC5gLFxuICAgIElOVkFMSURfVkVDVE9SX1ZBTFVFOiBgVmVjdG9yIHZhbHVlIG11c3QgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDAuIEdvdCBcIiVzXCIgaW5zdGVhZC5gLFxuICAgIElOVkFMSURfSU5QVVRfVkVDVE9SOiBgUHJvcGVydHkgXCIlc1wiIHdhcyBkZWNsYXJlZCBhcyBhICVzLWRpbWVuc2lvbmFsIHZlY3RvciwgYnV0IGdvdCBhICVzLWRpbWVuc2lvbmFsIHZlY3RvciBpbnN0ZWFkLlxcbklucHV0IHZlY3RvcnMgbXVzdCBiZSBvZiB0aGUgc2l6ZSBkZWNsYXJlZCBpbiB0aGUgc2NoZW1hLCBhcyBjYWxjdWxhdGluZyBzaW1pbGFyaXR5IGJldHdlZW4gdmVjdG9ycyBvZiBkaWZmZXJlbnQgc2l6ZXMgY2FuIGxlYWQgdG8gdW5leHBlY3RlZCByZXN1bHRzLmAsXG4gICAgV1JPTkdfU0VBUkNIX1BST1BFUlRZX1RZUEU6IGBQcm9wZXJ0eSBcIiVzXCIgaXMgbm90IHNlYXJjaGFibGUuIE9ubHkgXCJzdHJpbmdcIiBwcm9wZXJ0aWVzIGFyZSBzZWFyY2hhYmxlLmAsXG4gICAgRkFDRVRfTk9UX1NVUFBPUlRFRDogYEZhY2V0IGRvZW5zJ3Qgc3VwcG9ydCB0aGUgdHlwZSBcIiVzXCIuYCxcbiAgICBJTlZBTElEX0RJU1RBTkNFX1NVRkZJWDogYEludmFsaWQgZGlzdGFuY2Ugc3VmZml4IFwiJXNcIi4gVmFsaWQgc3VmZml4ZXMgYXJlOiBjbSwgbSwga20sIG1pLCB5ZCwgZnQuYCxcbiAgICBJTlZBTElEX1NFQVJDSF9NT0RFOiBgSW52YWxpZCBzZWFyY2ggbW9kZSBcIiVzXCIuIFZhbGlkIG1vZGVzIGFyZTogXCJmdWxsdGV4dFwiLCBcInZlY3RvclwiLCBcImh5YnJpZFwiLmAsXG4gICAgTUlTU0lOR19WRUNUT1JfQU5EX1NFQ1VSRV9QUk9YWTogYE5vIHZlY3RvciB3YXMgcHJvdmlkZWQgYW5kIG5vIHNlY3VyZSBwcm94eSB3YXMgY29uZmlndXJlZC4gUGxlYXNlIHByb3ZpZGUgYSB2ZWN0b3Igb3IgY29uZmlndXJlIGFuIE9yYW1hIFNlY3VyZSBQcm94eSB0byBwZXJmb3JtIGh5YnJpZCBzZWFyY2guYCxcbiAgICBNSVNTSU5HX1RFUk06IGBcInRlcm1cIiBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlciB3aGVuIHBlcmZvcm1pbmcgaHlicmlkIHNlYXJjaC4gUGxlYXNlIHByb3ZpZGUgYSBzZWFyY2ggdGVybS5gLFxuICAgIElOVkFMSURfVkVDVE9SX0lOUFVUOiBgSW52YWxpZCBcInZlY3RvclwiIHByb3BlcnR5LiBFeHBlY3RlZCBhbiBvYmplY3Qgd2l0aCBcInZhbHVlXCIgYW5kIFwicHJvcGVydHlcIiBwcm9wZXJ0aWVzLCBidXQgZ290IFwiJXNcIiBpbnN0ZWFkLmAsXG4gICAgUExVR0lOX0NSQVNIRUQ6IGBBIHBsdWdpbiBjcmFzaGVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4gUGxlYXNlIGNoZWNrIHRoZSBlcnJvciBtZXNzYWdlIGZvciBtb3JlIGluZm9ybWF0aW9uOmAsXG4gICAgUExVR0lOX1NFQ1VSRV9QUk9YWV9OT1RfRk9VTkQ6IGBDb3VsZCBub3QgZmluZCAnQG9yYW1hL3NlY3VyZS1wcm94eS1wbHVnaW4nIGluc3RhbGxlZCBpbiB5b3VyIE9yYW1hIGluc3RhbmNlLlxcblBsZWFzZSBpbnN0YWxsIGl0IGJlZm9yZSBwcm9jZWVkaW5nIHdpdGggY3JlYXRpbmcgYW4gYW5zd2VyIHNlc3Npb24uXFxuUmVhZCBtb3JlIGF0IGh0dHBzOi8vZG9jcy5vcmFtYS5jb20vb3Blbi1zb3VyY2UvcGx1Z2lucy9wbHVnaW4tc2VjdXJlLXByb3h5I3BsdWdpbi1zZWN1cmUtcHJveHlcXG5gLFxuICAgIFBMVUdJTl9TRUNVUkVfUFJPWFlfTUlTU0lOR19DSEFUX01PREVMOiBgQ291bGQgbm90IGZpbmQgYSBjaGF0IG1vZGVsIGRlZmluZWQgaW4gdGhlIHNlY3VyZSBwcm94eSBwbHVnaW4gY29uZmlndXJhdGlvbi5cXG5QbGVhc2UgcHJvdmlkZSBhIGNoYXQgbW9kZWwgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBjcmVhdGluZyBhbiBhbnN3ZXIgc2Vzc2lvbi5cXG5SZWFkIG1vcmUgYXQgaHR0cHM6Ly9kb2NzLm9yYW1hLmNvbS9vcGVuLXNvdXJjZS9wbHVnaW5zL3BsdWdpbi1zZWN1cmUtcHJveHkjcGx1Z2luLXNlY3VyZS1wcm94eVxcbmAsXG4gICAgQU5TV0VSX1NFU1NJT05fTEFTVF9NRVNTQUdFX0lTX05PVF9BU1NJU1RBTlQ6IGBUaGUgbGFzdCBtZXNzYWdlIGluIHRoZSBzZXNzaW9uIGlzIG5vdCBhbiBhc3Npc3RhbnQgbWVzc2FnZS4gQ2Fubm90IHJlZ2VuZXJhdGUgbm9uLWFzc2lzdGFudCBtZXNzYWdlcy5gLFxuICAgIFBMVUdJTl9DT01QT05FTlRfQ09ORkxJQ1Q6IGBUaGUgY29tcG9uZW50IFwiJXNcIiBpcyBhbHJlYWR5IGRlZmluZWQuIFRoZSBwbHVnaW4gXCIlc1wiIGlzIHRyeWluZyB0byByZWRlZmluZSBpdC5gLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFcnJvcihjb2RlLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3Ioc3ByaW50ZihlcnJvcnNbY29kZV0gPz8gYFVuc3VwcG9ydGVkIE9yYW1hIEVycm9yIGNvZGU6ICR7Y29kZX1gLCAuLi5hcmdzKSk7XG4gICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gICAgaWYgKCdjYXB0dXJlU3RhY2tUcmFjZScgaW4gRXJyb3IucHJvdG90eXBlKSB7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnswerSession: () => (/* reexport safe */ _methods_answer_session_js__WEBPACK_IMPORTED_MODULE_9__.AnswerSession),\n/* harmony export */   MODE_FULLTEXT_SEARCH: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_10__.MODE_FULLTEXT_SEARCH),\n/* harmony export */   MODE_HYBRID_SEARCH: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_10__.MODE_HYBRID_SEARCH),\n/* harmony export */   MODE_VECTOR_SEARCH: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_10__.MODE_VECTOR_SEARCH),\n/* harmony export */   components: () => (/* reexport module object */ _components_js__WEBPACK_IMPORTED_MODULE_11__),\n/* harmony export */   count: () => (/* reexport safe */ _methods_docs_js__WEBPACK_IMPORTED_MODULE_1__.count),\n/* harmony export */   create: () => (/* reexport safe */ _methods_create_js__WEBPACK_IMPORTED_MODULE_0__.create),\n/* harmony export */   getByID: () => (/* reexport safe */ _methods_docs_js__WEBPACK_IMPORTED_MODULE_1__.getByID),\n/* harmony export */   insert: () => (/* reexport safe */ _methods_insert_js__WEBPACK_IMPORTED_MODULE_2__.insert),\n/* harmony export */   insertMultiple: () => (/* reexport safe */ _methods_insert_js__WEBPACK_IMPORTED_MODULE_2__.insertMultiple),\n/* harmony export */   internals: () => (/* reexport module object */ _internals_js__WEBPACK_IMPORTED_MODULE_12__),\n/* harmony export */   kInsertions: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_10__.kInsertions),\n/* harmony export */   kRemovals: () => (/* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_10__.kRemovals),\n/* harmony export */   load: () => (/* reexport safe */ _methods_serialization_js__WEBPACK_IMPORTED_MODULE_6__.load),\n/* harmony export */   remove: () => (/* reexport safe */ _methods_remove_js__WEBPACK_IMPORTED_MODULE_3__.remove),\n/* harmony export */   removeMultiple: () => (/* reexport safe */ _methods_remove_js__WEBPACK_IMPORTED_MODULE_3__.removeMultiple),\n/* harmony export */   save: () => (/* reexport safe */ _methods_serialization_js__WEBPACK_IMPORTED_MODULE_6__.save),\n/* harmony export */   search: () => (/* reexport safe */ _methods_search_js__WEBPACK_IMPORTED_MODULE_4__.search),\n/* harmony export */   searchVector: () => (/* reexport safe */ _methods_search_vector_js__WEBPACK_IMPORTED_MODULE_5__.searchVector),\n/* harmony export */   update: () => (/* reexport safe */ _methods_update_js__WEBPACK_IMPORTED_MODULE_7__.update),\n/* harmony export */   updateMultiple: () => (/* reexport safe */ _methods_update_js__WEBPACK_IMPORTED_MODULE_7__.updateMultiple),\n/* harmony export */   upsert: () => (/* reexport safe */ _methods_upsert_js__WEBPACK_IMPORTED_MODULE_8__.upsert),\n/* harmony export */   upsertMultiple: () => (/* reexport safe */ _methods_upsert_js__WEBPACK_IMPORTED_MODULE_8__.upsertMultiple)\n/* harmony export */ });\n/* harmony import */ var _methods_create_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./methods/create.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/create.js\");\n/* harmony import */ var _methods_docs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./methods/docs.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/docs.js\");\n/* harmony import */ var _methods_insert_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./methods/insert.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/insert.js\");\n/* harmony import */ var _methods_remove_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./methods/remove.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/remove.js\");\n/* harmony import */ var _methods_search_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./methods/search.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search.js\");\n/* harmony import */ var _methods_search_vector_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./methods/search-vector.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-vector.js\");\n/* harmony import */ var _methods_serialization_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./methods/serialization.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/serialization.js\");\n/* harmony import */ var _methods_update_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./methods/update.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/update.js\");\n/* harmony import */ var _methods_upsert_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./methods/upsert.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/upsert.js\");\n/* harmony import */ var _methods_answer_session_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./methods/answer-session.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/answer-session.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./types.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/types.js\");\n/* harmony import */ var _components_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components.js\");\n/* harmony import */ var _internals_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./internals.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/internals.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUNNO0FBQ1U7QUFDQTtBQUNoQjtBQUNhO0FBQ0Y7QUFDSztBQUNBO0FBQ0Q7QUFDakM7QUFDbUI7QUFDRjtBQUM1QyIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBjcmVhdGUgfSBmcm9tICcuL21ldGhvZHMvY3JlYXRlLmpzJztcbmV4cG9ydCB7IGNvdW50LCBnZXRCeUlEIH0gZnJvbSAnLi9tZXRob2RzL2RvY3MuanMnO1xuZXhwb3J0IHsgaW5zZXJ0LCBpbnNlcnRNdWx0aXBsZSB9IGZyb20gJy4vbWV0aG9kcy9pbnNlcnQuanMnO1xuZXhwb3J0IHsgcmVtb3ZlLCByZW1vdmVNdWx0aXBsZSB9IGZyb20gJy4vbWV0aG9kcy9yZW1vdmUuanMnO1xuZXhwb3J0IHsgc2VhcmNoIH0gZnJvbSAnLi9tZXRob2RzL3NlYXJjaC5qcyc7XG5leHBvcnQgeyBzZWFyY2hWZWN0b3IgfSBmcm9tICcuL21ldGhvZHMvc2VhcmNoLXZlY3Rvci5qcyc7XG5leHBvcnQgeyBsb2FkLCBzYXZlIH0gZnJvbSAnLi9tZXRob2RzL3NlcmlhbGl6YXRpb24uanMnO1xuZXhwb3J0IHsgdXBkYXRlLCB1cGRhdGVNdWx0aXBsZSB9IGZyb20gJy4vbWV0aG9kcy91cGRhdGUuanMnO1xuZXhwb3J0IHsgdXBzZXJ0LCB1cHNlcnRNdWx0aXBsZSB9IGZyb20gJy4vbWV0aG9kcy91cHNlcnQuanMnO1xuZXhwb3J0IHsgQW5zd2VyU2Vzc2lvbiB9IGZyb20gJy4vbWV0aG9kcy9hbnN3ZXItc2Vzc2lvbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3R5cGVzLmpzJztcbmV4cG9ydCAqIGFzIGNvbXBvbmVudHMgZnJvbSAnLi9jb21wb25lbnRzLmpzJztcbmV4cG9ydCAqIGFzIGludGVybmFscyBmcm9tICcuL2ludGVybmFscy5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/internals.js":
/*!*************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/internals.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   boundedLevenshtein: () => (/* reexport safe */ _components_levenshtein_js__WEBPACK_IMPORTED_MODULE_0__.boundedLevenshtein),\n/* harmony export */   convertDistanceToMeters: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.convertDistanceToMeters),\n/* harmony export */   formatBytes: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.formatBytes),\n/* harmony export */   formatNanoseconds: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.formatNanoseconds),\n/* harmony export */   getNanosecondsTime: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.getNanosecondsTime),\n/* harmony export */   normalizeToken: () => (/* reexport safe */ _components_tokenizer_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeToken),\n/* harmony export */   safeArrayPush: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.safeArrayPush),\n/* harmony export */   setDifference: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.setDifference),\n/* harmony export */   setIntersection: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.setIntersection),\n/* harmony export */   setUnion: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.setUnion),\n/* harmony export */   uniqueId: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_1__.uniqueId)\n/* harmony export */ });\n/* harmony import */ var _components_levenshtein_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/levenshtein.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/levenshtein.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _components_tokenizer_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/tokenizer/index.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/index.js\");\n\n\n\n//# sourceMappingURL=internals.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL2ludGVybmFscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRTtBQUMyRztBQUMzRztBQUNqRSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9pbnRlcm5hbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgYm91bmRlZExldmVuc2h0ZWluIH0gZnJvbSAnLi9jb21wb25lbnRzL2xldmVuc2h0ZWluLmpzJztcbmV4cG9ydCB7IGZvcm1hdEJ5dGVzLCBmb3JtYXROYW5vc2Vjb25kcywgZ2V0TmFub3NlY29uZHNUaW1lLCB1bmlxdWVJZCwgY29udmVydERpc3RhbmNlVG9NZXRlcnMsIHNhZmVBcnJheVB1c2gsIHNldEludGVyc2VjdGlvbiwgc2V0VW5pb24sIHNldERpZmZlcmVuY2UgfSBmcm9tICcuL3V0aWxzLmpzJztcbmV4cG9ydCB7IG5vcm1hbGl6ZVRva2VuIH0gZnJvbSAnLi9jb21wb25lbnRzL3Rva2VuaXplci9pbmRleC5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/internals.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/answer-session.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/answer-session.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnswerSession: () => (/* binding */ AnswerSession)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _search_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./search.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search.js\");\n\n\nconst ORAMA_SECURE_PROXY_PLUGIN_NAME = 'orama-secure-proxy';\nclass AnswerSession {\n    db;\n    proxy = null;\n    config;\n    abortController = null;\n    lastInteractionParams = null;\n    chatModel = null;\n    conversationID;\n    messages = [];\n    events;\n    initPromise;\n    state = [];\n    constructor(db, config) {\n        this.db = db;\n        this.config = config;\n        this.init();\n        this.messages = config.initialMessages || [];\n        this.events = config.events || {};\n        this.conversationID = config.conversationID || this.generateRandomID();\n    }\n    async ask(query) {\n        await this.initPromise;\n        let output = '';\n        for await (const msg of await this.askStream(query)) {\n            output += msg;\n        }\n        return output;\n    }\n    async askStream(query) {\n        await this.initPromise;\n        return this.fetchAnswer(query);\n    }\n    abortAnswer() {\n        this.abortController?.abort();\n        this.state[this.state.length - 1].aborted = true;\n        this.triggerStateChange();\n    }\n    getMessages() {\n        return this.messages;\n    }\n    clearSession() {\n        this.messages = [];\n        this.state = [];\n    }\n    regenerateLast({ stream = true }) {\n        if (this.state.length === 0 || this.messages.length === 0) {\n            throw new Error('No messages to regenerate');\n        }\n        const isLastMessageAssistant = this.messages.at(-1)?.role === 'assistant';\n        if (!isLastMessageAssistant) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT');\n        }\n        this.messages.pop();\n        this.state.pop();\n        if (stream) {\n            return this.askStream(this.lastInteractionParams);\n        }\n        return this.ask(this.lastInteractionParams);\n    }\n    async *fetchAnswer(params) {\n        if (!this.chatModel) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL');\n        }\n        this.abortController = new AbortController();\n        this.lastInteractionParams = params;\n        const interactionId = this.generateRandomID();\n        this.messages.push({ role: 'user', content: params.term ?? '' });\n        this.state.push({\n            interactionId,\n            aborted: false,\n            loading: true,\n            query: params.term ?? '',\n            response: '',\n            sources: null,\n            translatedQuery: null,\n            error: false,\n            errorMessage: null\n        });\n        const stateIdx = this.state.length - 1;\n        this.addEmptyAssistantMessage();\n        this.triggerStateChange();\n        try {\n            const sources = await (0,_search_js__WEBPACK_IMPORTED_MODULE_1__.search)(this.db, params);\n            this.state[stateIdx].sources = sources;\n            this.triggerStateChange();\n            for await (const msg of this.proxy.chatStream({ model: this.chatModel, messages: this.messages })) {\n                yield msg;\n                this.state[stateIdx].response += msg;\n                this.messages.findLast((msg) => msg.role === 'assistant').content += msg;\n                this.triggerStateChange();\n            }\n        }\n        catch (err) {\n            if (err.name === 'AbortError') {\n                this.state[stateIdx].aborted = true;\n            }\n            else {\n                this.state[stateIdx].error = true;\n                this.state[stateIdx].errorMessage = err.toString();\n            }\n            this.triggerStateChange();\n        }\n        this.state[stateIdx].loading = false;\n        this.triggerStateChange();\n        return this.state[stateIdx].response;\n    }\n    generateRandomID(length = 24) {\n        return Array.from({ length }, () => Math.floor(Math.random() * 36).toString(36)).join('');\n    }\n    triggerStateChange() {\n        if (this.events.onStateChange) {\n            this.events.onStateChange(this.state);\n        }\n    }\n    async init() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        async function getPlugin() {\n            return await self.db.plugins.find((plugin) => plugin.name === ORAMA_SECURE_PROXY_PLUGIN_NAME);\n        }\n        const plugin = await getPlugin();\n        if (!plugin) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('PLUGIN_SECURE_PROXY_NOT_FOUND');\n        }\n        const pluginExtras = plugin.extra;\n        this.proxy = pluginExtras.proxy;\n        if (this.config.systemPrompt) {\n            this.messages.push({ role: 'system', content: this.config.systemPrompt });\n        }\n        if (pluginExtras?.pluginParams?.chat?.model) {\n            this.chatModel = pluginExtras.pluginParams.chat.model;\n        }\n        else {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL');\n        }\n    }\n    addEmptyAssistantMessage() {\n        this.messages.push({ role: 'assistant', content: '' });\n    }\n}\n//# sourceMappingURL=answer-session.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvYW5zd2VyLXNlc3Npb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQ047QUFDckM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGVBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQ0FBMEM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0RBQU07QUFDeEM7QUFDQTtBQUNBLDREQUE0RCxnREFBZ0Q7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFFBQVE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtREFBbUQ7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZ0NBQWdDO0FBQzdEO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9tZXRob2RzL2Fuc3dlci1zZXNzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IHNlYXJjaCB9IGZyb20gJy4vc2VhcmNoLmpzJztcbmNvbnN0IE9SQU1BX1NFQ1VSRV9QUk9YWV9QTFVHSU5fTkFNRSA9ICdvcmFtYS1zZWN1cmUtcHJveHknO1xuZXhwb3J0IGNsYXNzIEFuc3dlclNlc3Npb24ge1xuICAgIGRiO1xuICAgIHByb3h5ID0gbnVsbDtcbiAgICBjb25maWc7XG4gICAgYWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICBsYXN0SW50ZXJhY3Rpb25QYXJhbXMgPSBudWxsO1xuICAgIGNoYXRNb2RlbCA9IG51bGw7XG4gICAgY29udmVyc2F0aW9uSUQ7XG4gICAgbWVzc2FnZXMgPSBbXTtcbiAgICBldmVudHM7XG4gICAgaW5pdFByb21pc2U7XG4gICAgc3RhdGUgPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihkYiwgY29uZmlnKSB7XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gY29uZmlnLmluaXRpYWxNZXNzYWdlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBjb25maWcuZXZlbnRzIHx8IHt9O1xuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbklEID0gY29uZmlnLmNvbnZlcnNhdGlvbklEIHx8IHRoaXMuZ2VuZXJhdGVSYW5kb21JRCgpO1xuICAgIH1cbiAgICBhc3luYyBhc2socXVlcnkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0UHJvbWlzZTtcbiAgICAgICAgbGV0IG91dHB1dCA9ICcnO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IG1zZyBvZiBhd2FpdCB0aGlzLmFza1N0cmVhbShxdWVyeSkpIHtcbiAgICAgICAgICAgIG91dHB1dCArPSBtc2c7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgYXN5bmMgYXNrU3RyZWFtKHF1ZXJ5KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdFByb21pc2U7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoQW5zd2VyKHF1ZXJ5KTtcbiAgICB9XG4gICAgYWJvcnRBbnN3ZXIoKSB7XG4gICAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICB0aGlzLnN0YXRlW3RoaXMuc3RhdGUubGVuZ3RoIC0gMV0uYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0YXRlQ2hhbmdlKCk7XG4gICAgfVxuICAgIGdldE1lc3NhZ2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlcztcbiAgICB9XG4gICAgY2xlYXJTZXNzaW9uKCkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgICAgIHRoaXMuc3RhdGUgPSBbXTtcbiAgICB9XG4gICAgcmVnZW5lcmF0ZUxhc3QoeyBzdHJlYW0gPSB0cnVlIH0pIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubGVuZ3RoID09PSAwIHx8IHRoaXMubWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1lc3NhZ2VzIHRvIHJlZ2VuZXJhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0xhc3RNZXNzYWdlQXNzaXN0YW50ID0gdGhpcy5tZXNzYWdlcy5hdCgtMSk/LnJvbGUgPT09ICdhc3Npc3RhbnQnO1xuICAgICAgICBpZiAoIWlzTGFzdE1lc3NhZ2VBc3Npc3RhbnQpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdBTlNXRVJfU0VTU0lPTl9MQVNUX01FU1NBR0VfSVNfTk9UX0FTU0lTVEFOVCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWVzc2FnZXMucG9wKCk7XG4gICAgICAgIHRoaXMuc3RhdGUucG9wKCk7XG4gICAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFza1N0cmVhbSh0aGlzLmxhc3RJbnRlcmFjdGlvblBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYXNrKHRoaXMubGFzdEludGVyYWN0aW9uUGFyYW1zKTtcbiAgICB9XG4gICAgYXN5bmMgKmZldGNoQW5zd2VyKHBhcmFtcykge1xuICAgICAgICBpZiAoIXRoaXMuY2hhdE1vZGVsKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignUExVR0lOX1NFQ1VSRV9QUk9YWV9NSVNTSU5HX0NIQVRfTU9ERUwnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy5sYXN0SW50ZXJhY3Rpb25QYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IGludGVyYWN0aW9uSWQgPSB0aGlzLmdlbmVyYXRlUmFuZG9tSUQoKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwYXJhbXMudGVybSA/PyAnJyB9KTtcbiAgICAgICAgdGhpcy5zdGF0ZS5wdXNoKHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uSWQsXG4gICAgICAgICAgICBhYm9ydGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICBxdWVyeTogcGFyYW1zLnRlcm0gPz8gJycsXG4gICAgICAgICAgICByZXNwb25zZTogJycsXG4gICAgICAgICAgICBzb3VyY2VzOiBudWxsLFxuICAgICAgICAgICAgdHJhbnNsYXRlZFF1ZXJ5OiBudWxsLFxuICAgICAgICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdGF0ZUlkeCA9IHRoaXMuc3RhdGUubGVuZ3RoIC0gMTtcbiAgICAgICAgdGhpcy5hZGRFbXB0eUFzc2lzdGFudE1lc3NhZ2UoKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RhdGVDaGFuZ2UoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZXMgPSBhd2FpdCBzZWFyY2godGhpcy5kYiwgcGFyYW1zKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVbc3RhdGVJZHhdLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3RhdGVDaGFuZ2UoKTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgbXNnIG9mIHRoaXMucHJveHkuY2hhdFN0cmVhbSh7IG1vZGVsOiB0aGlzLmNoYXRNb2RlbCwgbWVzc2FnZXM6IHRoaXMubWVzc2FnZXMgfSkpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBtc2c7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZUlkeF0ucmVzcG9uc2UgKz0gbXNnO1xuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXMuZmluZExhc3QoKG1zZykgPT4gbXNnLnJvbGUgPT09ICdhc3Npc3RhbnQnKS5jb250ZW50ICs9IG1zZztcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdGF0ZUNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZUlkeF0uYWJvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW3N0YXRlSWR4XS5lcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZUlkeF0uZXJyb3JNZXNzYWdlID0gZXJyLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTdGF0ZUNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGVbc3RhdGVJZHhdLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RhdGVDaGFuZ2UoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbc3RhdGVJZHhdLnJlc3BvbnNlO1xuICAgIH1cbiAgICBnZW5lcmF0ZVJhbmRvbUlEKGxlbmd0aCA9IDI0KSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2KS50b1N0cmluZygzNikpLmpvaW4oJycpO1xuICAgIH1cbiAgICB0cmlnZ2VyU3RhdGVDaGFuZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmV2ZW50cy5vblN0YXRlQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vblN0YXRlQ2hhbmdlKHRoaXMuc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGluaXQoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0UGx1Z2luKCkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuZGIucGx1Z2lucy5maW5kKChwbHVnaW4pID0+IHBsdWdpbi5uYW1lID09PSBPUkFNQV9TRUNVUkVfUFJPWFlfUExVR0lOX05BTUUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IGF3YWl0IGdldFBsdWdpbigpO1xuICAgICAgICBpZiAoIXBsdWdpbikge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1BMVUdJTl9TRUNVUkVfUFJPWFlfTk9UX0ZPVU5EJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGx1Z2luRXh0cmFzID0gcGx1Z2luLmV4dHJhO1xuICAgICAgICB0aGlzLnByb3h5ID0gcGx1Z2luRXh0cmFzLnByb3h5O1xuICAgICAgICBpZiAodGhpcy5jb25maWcuc3lzdGVtUHJvbXB0KSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogdGhpcy5jb25maWcuc3lzdGVtUHJvbXB0IH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwbHVnaW5FeHRyYXM/LnBsdWdpblBhcmFtcz8uY2hhdD8ubW9kZWwpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhdE1vZGVsID0gcGx1Z2luRXh0cmFzLnBsdWdpblBhcmFtcy5jaGF0Lm1vZGVsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1BMVUdJTl9TRUNVUkVfUFJPWFlfTUlTU0lOR19DSEFUX01PREVMJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkRW1wdHlBc3Npc3RhbnRNZXNzYWdlKCkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJycgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5zd2VyLXNlc3Npb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/answer-session.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/create.js":
/*!******************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/create.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/defaults.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/defaults.js\");\n/* harmony import */ var _components_documents_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/documents-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/documents-store.js\");\n/* harmony import */ var _components_plugins_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/plugins.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/plugins.js\");\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n/* harmony import */ var _components_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/index.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/index.js\");\n/* harmony import */ var _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n/* harmony import */ var _components_sorter_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/sorter.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/sorter.js\");\n/* harmony import */ var _components_tokenizer_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/tokenizer/index.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/tokenizer/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\n\n\n\n\n\n\n\n\n\nfunction validateComponents(components) {\n    const defaultComponents = {\n        formatElapsedTime: _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.formatElapsedTime,\n        getDocumentIndexId: _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.getDocumentIndexId,\n        getDocumentProperties: _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.getDocumentProperties,\n        validateSchema: _components_defaults_js__WEBPACK_IMPORTED_MODULE_0__.validateSchema\n    };\n    for (const rawKey of _components_hooks_js__WEBPACK_IMPORTED_MODULE_3__.FUNCTION_COMPONENTS) {\n        const key = rawKey;\n        if (components[key]) {\n            if (typeof components[key] !== 'function') {\n                throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_8__.createError)('COMPONENT_MUST_BE_FUNCTION', key);\n            }\n        }\n        else {\n            // @ts-expect-error TSC is unable to resolve this\n            components[key] = defaultComponents[key];\n        }\n    }\n    for (const rawKey of Object.keys(components)) {\n        if (!_components_hooks_js__WEBPACK_IMPORTED_MODULE_3__.OBJECT_COMPONENTS.includes(rawKey) && !_components_hooks_js__WEBPACK_IMPORTED_MODULE_3__.FUNCTION_COMPONENTS.includes(rawKey)) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_8__.createError)('UNSUPPORTED_COMPONENT', rawKey);\n        }\n    }\n}\nfunction create({ schema, sort, language, components, id, plugins }) {\n    if (!components) {\n        components = {};\n    }\n    for (const plugin of plugins ?? []) {\n        if (!('getComponents' in plugin)) {\n            continue;\n        }\n        if (typeof plugin.getComponents !== 'function') {\n            continue;\n        }\n        const pluginComponents = plugin.getComponents(schema);\n        const keys = Object.keys(pluginComponents);\n        for (const key of keys) {\n            if (components[key]) {\n                throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_8__.createError)('PLUGIN_COMPONENT_CONFLICT', key, plugin.name);\n            }\n        }\n        components = {\n            ...components,\n            ...pluginComponents\n        };\n    }\n    if (!id) {\n        id = (0,_utils_js__WEBPACK_IMPORTED_MODULE_9__.uniqueId)();\n    }\n    let tokenizer = components.tokenizer;\n    let index = components.index;\n    let documentsStore = components.documentsStore;\n    let sorter = components.sorter;\n    if (!tokenizer) {\n        // Use the default tokenizer\n        tokenizer = (0,_components_tokenizer_index_js__WEBPACK_IMPORTED_MODULE_7__.createTokenizer)({ language: language ?? 'english' });\n    }\n    else if (!tokenizer.tokenize) {\n        // If there is no tokenizer function, we assume this is a TokenizerConfig\n        tokenizer = (0,_components_tokenizer_index_js__WEBPACK_IMPORTED_MODULE_7__.createTokenizer)(tokenizer);\n    }\n    else {\n        const customTokenizer = tokenizer;\n        tokenizer = customTokenizer;\n    }\n    if (components.tokenizer && language) {\n        // Accept language only if a tokenizer is not provided\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_8__.createError)('NO_LANGUAGE_WITH_CUSTOM_TOKENIZER');\n    }\n    const internalDocumentStore = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_5__.createInternalDocumentIDStore)();\n    index ||= (0,_components_index_js__WEBPACK_IMPORTED_MODULE_4__.createIndex)();\n    sorter ||= (0,_components_sorter_js__WEBPACK_IMPORTED_MODULE_6__.createSorter)();\n    documentsStore ||= (0,_components_documents_store_js__WEBPACK_IMPORTED_MODULE_1__.createDocumentsStore)();\n    // Validate all other components\n    validateComponents(components);\n    // Assign only recognized components and hooks\n    const { getDocumentProperties, getDocumentIndexId, validateSchema, formatElapsedTime } = components;\n    const orama = {\n        data: {},\n        caches: {},\n        schema,\n        tokenizer,\n        index,\n        sorter,\n        documentsStore,\n        internalDocumentIDStore: internalDocumentStore,\n        getDocumentProperties,\n        getDocumentIndexId,\n        validateSchema,\n        beforeInsert: [],\n        afterInsert: [],\n        beforeRemove: [],\n        afterRemove: [],\n        beforeUpdate: [],\n        afterUpdate: [],\n        beforeUpsert: [],\n        afterUpsert: [],\n        beforeSearch: [],\n        afterSearch: [],\n        beforeInsertMultiple: [],\n        afterInsertMultiple: [],\n        beforeRemoveMultiple: [],\n        afterRemoveMultiple: [],\n        beforeUpdateMultiple: [],\n        afterUpdateMultiple: [],\n        beforeUpsertMultiple: [],\n        afterUpsertMultiple: [],\n        afterCreate: [],\n        formatElapsedTime,\n        id,\n        plugins,\n        version: getVersion()\n    };\n    orama.data = {\n        index: orama.index.create(orama, internalDocumentStore, schema),\n        docs: orama.documentsStore.create(orama, internalDocumentStore),\n        sorting: orama.sorter.create(orama, internalDocumentStore, schema, sort)\n    };\n    for (const hook of _components_plugins_js__WEBPACK_IMPORTED_MODULE_2__.AVAILABLE_PLUGIN_HOOKS) {\n        orama[hook] = (orama[hook] ?? []).concat((0,_components_plugins_js__WEBPACK_IMPORTED_MODULE_2__.getAllPluginsByHook)(orama, hook));\n    }\n    const afterCreate = orama['afterCreate'];\n    if (afterCreate) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_3__.runAfterCreate)(afterCreate, orama);\n    }\n    return orama;\n}\nfunction getVersion() {\n    return '{{VERSION}}';\n}\n//# sourceMappingURL=create.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvY3JlYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXlIO0FBQ2pEO0FBQ2U7QUFDUztBQUMzQztBQUN1QztBQUNyQztBQUNZO0FBQ3hCO0FBQ0o7QUFDdkM7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QiwwQkFBMEI7QUFDMUIsNkJBQTZCO0FBQzdCLHNCQUFzQjtBQUN0QjtBQUNBLHlCQUF5QixxRUFBbUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVEQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1FQUFpQixzQkFBc0IscUVBQW1CO0FBQ3ZFLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDTyxrQkFBa0IsaURBQWlEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdURBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbURBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0VBQWUsR0FBRyxpQ0FBaUM7QUFDdkU7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtFQUFlO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1REFBVztBQUN6QjtBQUNBLGtDQUFrQyx3R0FBNkI7QUFDL0QsY0FBYyxpRUFBVztBQUN6QixlQUFlLG1FQUFZO0FBQzNCLHVCQUF1QixvRkFBb0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrRUFBK0U7QUFDM0Y7QUFDQSxnQkFBZ0I7QUFDaEIsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMEVBQXNCO0FBQzdDLGlEQUFpRCwyRUFBbUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvRUFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsU0FBUztBQUN2QjtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvY3JlYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZvcm1hdEVsYXBzZWRUaW1lLCBnZXREb2N1bWVudEluZGV4SWQsIGdldERvY3VtZW50UHJvcGVydGllcywgdmFsaWRhdGVTY2hlbWEgfSBmcm9tICcuLi9jb21wb25lbnRzL2RlZmF1bHRzLmpzJztcbmltcG9ydCB7IGNyZWF0ZURvY3VtZW50c1N0b3JlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9kb2N1bWVudHMtc3RvcmUuanMnO1xuaW1wb3J0IHsgQVZBSUxBQkxFX1BMVUdJTl9IT09LUywgZ2V0QWxsUGx1Z2luc0J5SG9vayB9IGZyb20gJy4uL2NvbXBvbmVudHMvcGx1Z2lucy5qcyc7XG5pbXBvcnQgeyBGVU5DVElPTl9DT01QT05FTlRTLCBPQkpFQ1RfQ09NUE9ORU5UUywgcnVuQWZ0ZXJDcmVhdGUgfSBmcm9tICcuLi9jb21wb25lbnRzL2hvb2tzLmpzJztcbmltcG9ydCB7IGNyZWF0ZUluZGV4IH0gZnJvbSAnLi4vY29tcG9uZW50cy9pbmRleC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVJbnRlcm5hbERvY3VtZW50SURTdG9yZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvaW50ZXJuYWwtZG9jdW1lbnQtaWQtc3RvcmUuanMnO1xuaW1wb3J0IHsgY3JlYXRlU29ydGVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9zb3J0ZXIuanMnO1xuaW1wb3J0IHsgY3JlYXRlVG9rZW5pemVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy90b2tlbml6ZXIvaW5kZXguanMnO1xuaW1wb3J0IHsgY3JlYXRlRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMuanMnO1xuaW1wb3J0IHsgdW5pcXVlSWQgfSBmcm9tICcuLi91dGlscy5qcyc7XG5mdW5jdGlvbiB2YWxpZGF0ZUNvbXBvbmVudHMoY29tcG9uZW50cykge1xuICAgIGNvbnN0IGRlZmF1bHRDb21wb25lbnRzID0ge1xuICAgICAgICBmb3JtYXRFbGFwc2VkVGltZSxcbiAgICAgICAgZ2V0RG9jdW1lbnRJbmRleElkLFxuICAgICAgICBnZXREb2N1bWVudFByb3BlcnRpZXMsXG4gICAgICAgIHZhbGlkYXRlU2NoZW1hXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHJhd0tleSBvZiBGVU5DVElPTl9DT01QT05FTlRTKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHJhd0tleTtcbiAgICAgICAgaWYgKGNvbXBvbmVudHNba2V5XSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnRzW2tleV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignQ09NUE9ORU5UX01VU1RfQkVfRlVOQ1RJT04nLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUU0MgaXMgdW5hYmxlIHRvIHJlc29sdmUgdGhpc1xuICAgICAgICAgICAgY29tcG9uZW50c1trZXldID0gZGVmYXVsdENvbXBvbmVudHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJhd0tleSBvZiBPYmplY3Qua2V5cyhjb21wb25lbnRzKSkge1xuICAgICAgICBpZiAoIU9CSkVDVF9DT01QT05FTlRTLmluY2x1ZGVzKHJhd0tleSkgJiYgIUZVTkNUSU9OX0NPTVBPTkVOVFMuaW5jbHVkZXMocmF3S2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1VOU1VQUE9SVEVEX0NPTVBPTkVOVCcsIHJhd0tleSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKHsgc2NoZW1hLCBzb3J0LCBsYW5ndWFnZSwgY29tcG9uZW50cywgaWQsIHBsdWdpbnMgfSkge1xuICAgIGlmICghY29tcG9uZW50cykge1xuICAgICAgICBjb21wb25lbnRzID0ge307XG4gICAgfVxuICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMgPz8gW10pIHtcbiAgICAgICAgaWYgKCEoJ2dldENvbXBvbmVudHMnIGluIHBsdWdpbikpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcGx1Z2luLmdldENvbXBvbmVudHMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBsdWdpbkNvbXBvbmVudHMgPSBwbHVnaW4uZ2V0Q29tcG9uZW50cyhzY2hlbWEpO1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocGx1Z2luQ29tcG9uZW50cyk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRzW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignUExVR0lOX0NPTVBPTkVOVF9DT05GTElDVCcsIGtleSwgcGx1Z2luLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudHMgPSB7XG4gICAgICAgICAgICAuLi5jb21wb25lbnRzLFxuICAgICAgICAgICAgLi4ucGx1Z2luQ29tcG9uZW50c1xuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWlkKSB7XG4gICAgICAgIGlkID0gdW5pcXVlSWQoKTtcbiAgICB9XG4gICAgbGV0IHRva2VuaXplciA9IGNvbXBvbmVudHMudG9rZW5pemVyO1xuICAgIGxldCBpbmRleCA9IGNvbXBvbmVudHMuaW5kZXg7XG4gICAgbGV0IGRvY3VtZW50c1N0b3JlID0gY29tcG9uZW50cy5kb2N1bWVudHNTdG9yZTtcbiAgICBsZXQgc29ydGVyID0gY29tcG9uZW50cy5zb3J0ZXI7XG4gICAgaWYgKCF0b2tlbml6ZXIpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBkZWZhdWx0IHRva2VuaXplclxuICAgICAgICB0b2tlbml6ZXIgPSBjcmVhdGVUb2tlbml6ZXIoeyBsYW5ndWFnZTogbGFuZ3VhZ2UgPz8gJ2VuZ2xpc2gnIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICghdG9rZW5pemVyLnRva2VuaXplKSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHRva2VuaXplciBmdW5jdGlvbiwgd2UgYXNzdW1lIHRoaXMgaXMgYSBUb2tlbml6ZXJDb25maWdcbiAgICAgICAgdG9rZW5pemVyID0gY3JlYXRlVG9rZW5pemVyKHRva2VuaXplcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjdXN0b21Ub2tlbml6ZXIgPSB0b2tlbml6ZXI7XG4gICAgICAgIHRva2VuaXplciA9IGN1c3RvbVRva2VuaXplcjtcbiAgICB9XG4gICAgaWYgKGNvbXBvbmVudHMudG9rZW5pemVyICYmIGxhbmd1YWdlKSB7XG4gICAgICAgIC8vIEFjY2VwdCBsYW5ndWFnZSBvbmx5IGlmIGEgdG9rZW5pemVyIGlzIG5vdCBwcm92aWRlZFxuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignTk9fTEFOR1VBR0VfV0lUSF9DVVNUT01fVE9LRU5JWkVSJyk7XG4gICAgfVxuICAgIGNvbnN0IGludGVybmFsRG9jdW1lbnRTdG9yZSA9IGNyZWF0ZUludGVybmFsRG9jdW1lbnRJRFN0b3JlKCk7XG4gICAgaW5kZXggfHw9IGNyZWF0ZUluZGV4KCk7XG4gICAgc29ydGVyIHx8PSBjcmVhdGVTb3J0ZXIoKTtcbiAgICBkb2N1bWVudHNTdG9yZSB8fD0gY3JlYXRlRG9jdW1lbnRzU3RvcmUoKTtcbiAgICAvLyBWYWxpZGF0ZSBhbGwgb3RoZXIgY29tcG9uZW50c1xuICAgIHZhbGlkYXRlQ29tcG9uZW50cyhjb21wb25lbnRzKTtcbiAgICAvLyBBc3NpZ24gb25seSByZWNvZ25pemVkIGNvbXBvbmVudHMgYW5kIGhvb2tzXG4gICAgY29uc3QgeyBnZXREb2N1bWVudFByb3BlcnRpZXMsIGdldERvY3VtZW50SW5kZXhJZCwgdmFsaWRhdGVTY2hlbWEsIGZvcm1hdEVsYXBzZWRUaW1lIH0gPSBjb21wb25lbnRzO1xuICAgIGNvbnN0IG9yYW1hID0ge1xuICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgY2FjaGVzOiB7fSxcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICB0b2tlbml6ZXIsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBzb3J0ZXIsXG4gICAgICAgIGRvY3VtZW50c1N0b3JlLFxuICAgICAgICBpbnRlcm5hbERvY3VtZW50SURTdG9yZTogaW50ZXJuYWxEb2N1bWVudFN0b3JlLFxuICAgICAgICBnZXREb2N1bWVudFByb3BlcnRpZXMsXG4gICAgICAgIGdldERvY3VtZW50SW5kZXhJZCxcbiAgICAgICAgdmFsaWRhdGVTY2hlbWEsXG4gICAgICAgIGJlZm9yZUluc2VydDogW10sXG4gICAgICAgIGFmdGVySW5zZXJ0OiBbXSxcbiAgICAgICAgYmVmb3JlUmVtb3ZlOiBbXSxcbiAgICAgICAgYWZ0ZXJSZW1vdmU6IFtdLFxuICAgICAgICBiZWZvcmVVcGRhdGU6IFtdLFxuICAgICAgICBhZnRlclVwZGF0ZTogW10sXG4gICAgICAgIGJlZm9yZVVwc2VydDogW10sXG4gICAgICAgIGFmdGVyVXBzZXJ0OiBbXSxcbiAgICAgICAgYmVmb3JlU2VhcmNoOiBbXSxcbiAgICAgICAgYWZ0ZXJTZWFyY2g6IFtdLFxuICAgICAgICBiZWZvcmVJbnNlcnRNdWx0aXBsZTogW10sXG4gICAgICAgIGFmdGVySW5zZXJ0TXVsdGlwbGU6IFtdLFxuICAgICAgICBiZWZvcmVSZW1vdmVNdWx0aXBsZTogW10sXG4gICAgICAgIGFmdGVyUmVtb3ZlTXVsdGlwbGU6IFtdLFxuICAgICAgICBiZWZvcmVVcGRhdGVNdWx0aXBsZTogW10sXG4gICAgICAgIGFmdGVyVXBkYXRlTXVsdGlwbGU6IFtdLFxuICAgICAgICBiZWZvcmVVcHNlcnRNdWx0aXBsZTogW10sXG4gICAgICAgIGFmdGVyVXBzZXJ0TXVsdGlwbGU6IFtdLFxuICAgICAgICBhZnRlckNyZWF0ZTogW10sXG4gICAgICAgIGZvcm1hdEVsYXBzZWRUaW1lLFxuICAgICAgICBpZCxcbiAgICAgICAgcGx1Z2lucyxcbiAgICAgICAgdmVyc2lvbjogZ2V0VmVyc2lvbigpXG4gICAgfTtcbiAgICBvcmFtYS5kYXRhID0ge1xuICAgICAgICBpbmRleDogb3JhbWEuaW5kZXguY3JlYXRlKG9yYW1hLCBpbnRlcm5hbERvY3VtZW50U3RvcmUsIHNjaGVtYSksXG4gICAgICAgIGRvY3M6IG9yYW1hLmRvY3VtZW50c1N0b3JlLmNyZWF0ZShvcmFtYSwgaW50ZXJuYWxEb2N1bWVudFN0b3JlKSxcbiAgICAgICAgc29ydGluZzogb3JhbWEuc29ydGVyLmNyZWF0ZShvcmFtYSwgaW50ZXJuYWxEb2N1bWVudFN0b3JlLCBzY2hlbWEsIHNvcnQpXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IGhvb2sgb2YgQVZBSUxBQkxFX1BMVUdJTl9IT09LUykge1xuICAgICAgICBvcmFtYVtob29rXSA9IChvcmFtYVtob29rXSA/PyBbXSkuY29uY2F0KGdldEFsbFBsdWdpbnNCeUhvb2sob3JhbWEsIGhvb2spKTtcbiAgICB9XG4gICAgY29uc3QgYWZ0ZXJDcmVhdGUgPSBvcmFtYVsnYWZ0ZXJDcmVhdGUnXTtcbiAgICBpZiAoYWZ0ZXJDcmVhdGUpIHtcbiAgICAgICAgcnVuQWZ0ZXJDcmVhdGUoYWZ0ZXJDcmVhdGUsIG9yYW1hKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yYW1hO1xufVxuZnVuY3Rpb24gZ2V0VmVyc2lvbigpIHtcbiAgICByZXR1cm4gJ3t7VkVSU0lPTn19Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/create.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/docs.js":
/*!****************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/docs.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   count: () => (/* binding */ count),\n/* harmony export */   getByID: () => (/* binding */ getByID)\n/* harmony export */ });\nfunction getByID(db, id) {\n    return db.documentsStore.get(db.data.docs, id);\n}\nfunction count(db) {\n    return db.documentsStore.count(db.data.docs);\n}\n//# sourceMappingURL=docs.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvZG9jcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvZG9jcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0QnlJRChkYiwgaWQpIHtcbiAgICByZXR1cm4gZGIuZG9jdW1lbnRzU3RvcmUuZ2V0KGRiLmRhdGEuZG9jcywgaWQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvdW50KGRiKSB7XG4gICAgcmV0dXJuIGRiLmRvY3VtZW50c1N0b3JlLmNvdW50KGRiLmRhdGEuZG9jcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb2NzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/docs.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/insert.js":
/*!******************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/insert.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   innerInsertMultiple: () => (/* binding */ innerInsertMultiple),\n/* harmony export */   insert: () => (/* binding */ insert),\n/* harmony export */   insertMultiple: () => (/* binding */ insertMultiple)\n/* harmony export */ });\n/* harmony import */ var _components_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n\n\n\n\n\nfunction insert(orama, doc, language, skipHooks, options) {\n    const errorProperty = orama.validateSchema(doc, orama.schema);\n    if (errorProperty) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_3__.createError)('SCHEMA_VALIDATION_FAILURE', errorProperty);\n    }\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.afterInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.insert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.afterInsert);\n    if (asyncNeeded) {\n        return innerInsertAsync(orama, doc, language, skipHooks, options);\n    }\n    return innerInsertSync(orama, doc, language, skipHooks, options);\n}\nconst ENUM_TYPE = new Set(['enum', 'enum[]']);\nconst STRING_NUMBER_TYPE = new Set(['string', 'number']);\nasync function innerInsertAsync(orama, doc, language, skipHooks, options) {\n    const { index, docs } = orama.data;\n    const id = orama.getDocumentIndexId(doc);\n    if (typeof id !== 'string') {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_3__.createError)('DOCUMENT_ID_MUST_BE_STRING', typeof id);\n    }\n    const internalId = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_4__.getInternalDocumentId)(orama.internalDocumentIDStore, id);\n    if (!orama.documentsStore.store(docs, id, internalId, doc)) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_3__.createError)('DOCUMENT_ALREADY_EXISTS', id);\n    }\n    const docsCount = orama.documentsStore.count(docs);\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runSingleHook)(orama.beforeInsert, orama, id, doc);\n    }\n    const indexableProperties = orama.index.getSearchableProperties(index);\n    const indexablePropertiesWithTypes = orama.index.getSearchablePropertiesWithTypes(index);\n    const indexableValues = orama.getDocumentProperties(doc, indexableProperties);\n    for (const [key, value] of Object.entries(indexableValues)) {\n        if (typeof value === 'undefined')\n            continue;\n        const actualType = typeof value;\n        const expectedType = indexablePropertiesWithTypes[key];\n        validateDocumentProperty(actualType, expectedType, key, value);\n    }\n    await indexAndSortDocument(orama, id, indexableProperties, indexableValues, docsCount, language, doc, options);\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runSingleHook)(orama.afterInsert, orama, id, doc);\n    }\n    return id;\n}\nfunction innerInsertSync(orama, doc, language, skipHooks, options) {\n    const { index, docs } = orama.data;\n    const id = orama.getDocumentIndexId(doc);\n    if (typeof id !== 'string') {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_3__.createError)('DOCUMENT_ID_MUST_BE_STRING', typeof id);\n    }\n    const internalId = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_4__.getInternalDocumentId)(orama.internalDocumentIDStore, id);\n    if (!orama.documentsStore.store(docs, id, internalId, doc)) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_3__.createError)('DOCUMENT_ALREADY_EXISTS', id);\n    }\n    const docsCount = orama.documentsStore.count(docs);\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runSingleHook)(orama.beforeInsert, orama, id, doc);\n    }\n    const indexableProperties = orama.index.getSearchableProperties(index);\n    const indexablePropertiesWithTypes = orama.index.getSearchablePropertiesWithTypes(index);\n    const indexableValues = orama.getDocumentProperties(doc, indexableProperties);\n    for (const [key, value] of Object.entries(indexableValues)) {\n        if (typeof value === 'undefined')\n            continue;\n        const actualType = typeof value;\n        const expectedType = indexablePropertiesWithTypes[key];\n        validateDocumentProperty(actualType, expectedType, key, value);\n    }\n    indexAndSortDocumentSync(orama, id, indexableProperties, indexableValues, docsCount, language, doc, options);\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runSingleHook)(orama.afterInsert, orama, id, doc);\n    }\n    return id;\n}\nfunction validateDocumentProperty(actualType, expectedType, key, value) {\n    if ((0,_components_js__WEBPACK_IMPORTED_MODULE_0__.isGeoPointType)(expectedType) &&\n        typeof value === 'object' &&\n        typeof value.lon === 'number' &&\n        typeof value.lat === 'number') {\n        return;\n    }\n    if ((0,_components_js__WEBPACK_IMPORTED_MODULE_0__.isVectorType)(expectedType) && Array.isArray(value))\n        return;\n    if ((0,_components_js__WEBPACK_IMPORTED_MODULE_0__.isArrayType)(expectedType) && Array.isArray(value))\n        return;\n    if (ENUM_TYPE.has(expectedType) && STRING_NUMBER_TYPE.has(actualType))\n        return;\n    if (actualType !== expectedType) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_3__.createError)('INVALID_DOCUMENT_PROPERTY', key, expectedType, actualType);\n    }\n}\nasync function indexAndSortDocument(orama, id, indexableProperties, indexableValues, docsCount, language, doc, options) {\n    for (const prop of indexableProperties) {\n        const value = indexableValues[prop];\n        if (typeof value === 'undefined')\n            continue;\n        const expectedType = orama.index.getSearchablePropertiesWithTypes(orama.data.index)[prop];\n        await orama.index.beforeInsert?.(orama.data.index, prop, id, value, expectedType, language, orama.tokenizer, docsCount);\n        const internalId = orama.internalDocumentIDStore.idToInternalId.get(id);\n        await orama.index.insert(orama.index, orama.data.index, prop, id, internalId, value, expectedType, language, orama.tokenizer, docsCount, options);\n        await orama.index.afterInsert?.(orama.data.index, prop, id, value, expectedType, language, orama.tokenizer, docsCount);\n    }\n    const sortableProperties = orama.sorter.getSortableProperties(orama.data.sorting);\n    const sortableValues = orama.getDocumentProperties(doc, sortableProperties);\n    for (const prop of sortableProperties) {\n        const value = sortableValues[prop];\n        if (typeof value === 'undefined')\n            continue;\n        const expectedType = orama.sorter.getSortablePropertiesWithTypes(orama.data.sorting)[prop];\n        orama.sorter.insert(orama.data.sorting, prop, id, value, expectedType, language);\n    }\n}\nfunction indexAndSortDocumentSync(orama, id, indexableProperties, indexableValues, docsCount, language, doc, options) {\n    for (const prop of indexableProperties) {\n        const value = indexableValues[prop];\n        if (typeof value === 'undefined')\n            continue;\n        const expectedType = orama.index.getSearchablePropertiesWithTypes(orama.data.index)[prop];\n        const internalDocumentId = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_4__.getInternalDocumentId)(orama.internalDocumentIDStore, id);\n        orama.index.beforeInsert?.(orama.data.index, prop, id, value, expectedType, language, orama.tokenizer, docsCount);\n        orama.index.insert(orama.index, orama.data.index, prop, id, internalDocumentId, value, expectedType, language, orama.tokenizer, docsCount, options);\n        orama.index.afterInsert?.(orama.data.index, prop, id, value, expectedType, language, orama.tokenizer, docsCount);\n    }\n    const sortableProperties = orama.sorter.getSortableProperties(orama.data.sorting);\n    const sortableValues = orama.getDocumentProperties(doc, sortableProperties);\n    for (const prop of sortableProperties) {\n        const value = sortableValues[prop];\n        if (typeof value === 'undefined')\n            continue;\n        const expectedType = orama.sorter.getSortablePropertiesWithTypes(orama.data.sorting)[prop];\n        orama.sorter.insert(orama.data.sorting, prop, id, value, expectedType, language);\n    }\n}\nfunction insertMultiple(orama, docs, batchSize, language, skipHooks, timeout) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.afterInsertMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.beforeInsertMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.insert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.afterInsert);\n    if (asyncNeeded) {\n        return innerInsertMultipleAsync(orama, docs, batchSize, language, skipHooks, timeout);\n    }\n    return innerInsertMultipleSync(orama, docs, batchSize, language, skipHooks, timeout);\n}\nasync function innerInsertMultipleAsync(orama, docs, batchSize = 1000, language, skipHooks, timeout = 0) {\n    const ids = [];\n    const processNextBatch = async (startIndex) => {\n        const endIndex = Math.min(startIndex + batchSize, docs.length);\n        const batch = docs.slice(startIndex, endIndex);\n        for (const doc of batch) {\n            const options = { avlRebalanceThreshold: batch.length };\n            const id = await insert(orama, doc, language, skipHooks, options);\n            ids.push(id);\n        }\n        return endIndex;\n    };\n    const processAllBatches = async () => {\n        let currentIndex = 0;\n        while (currentIndex < docs.length) {\n            const startTime = Date.now();\n            currentIndex = await processNextBatch(currentIndex);\n            if (timeout > 0) {\n                const elapsedTime = Date.now() - startTime;\n                const waitTime = timeout - elapsedTime;\n                if (waitTime > 0) {\n                    (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.sleep)(waitTime);\n                }\n            }\n        }\n    };\n    await processAllBatches();\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runMultipleHook)(orama.afterInsertMultiple, orama, docs);\n    }\n    return ids;\n}\nfunction innerInsertMultipleSync(orama, docs, batchSize = 1000, language, skipHooks, timeout = 0) {\n    const ids = [];\n    let i = 0;\n    function processNextBatch() {\n        const batch = docs.slice(i * batchSize, (i + 1) * batchSize);\n        if (batch.length === 0)\n            return false;\n        for (const doc of batch) {\n            const options = { avlRebalanceThreshold: batch.length };\n            const id = insert(orama, doc, language, skipHooks, options);\n            ids.push(id);\n        }\n        i++;\n        return true;\n    }\n    function processAllBatches() {\n        const startTime = Date.now();\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const hasMoreBatches = processNextBatch();\n            if (!hasMoreBatches)\n                break;\n            if (timeout > 0) {\n                const elapsedTime = Date.now() - startTime;\n                if (elapsedTime >= timeout) {\n                    const remainingTime = timeout - (elapsedTime % timeout);\n                    if (remainingTime > 0) {\n                        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.sleep)(remainingTime);\n                    }\n                }\n            }\n        }\n    }\n    processAllBatches();\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runMultipleHook)(orama.afterInsertMultiple, orama, docs);\n    }\n    return ids;\n}\nfunction innerInsertMultiple(orama, docs, batchSize, language, skipHooks, timeout) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.afterInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.insert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isAsyncFunction)(orama.index.afterInsert);\n    if (asyncNeeded) {\n        return innerInsertMultipleAsync(orama, docs, batchSize, language, skipHooks, timeout);\n    }\n    return innerInsertMultipleSync(orama, docs, batchSize, language, skipHooks, timeout);\n}\n//# sourceMappingURL=insert.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvaW5zZXJ0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTZFO0FBQ3hCO0FBQ21CO0FBQzdCO0FBQ3lDO0FBQzdFO0FBQ1A7QUFDQTtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQSx3QkFBd0IsMERBQWU7QUFDdkMsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQSxjQUFjLHVEQUFXO0FBQ3pCO0FBQ0EsdUJBQXVCLGdHQUFxQjtBQUM1QztBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0EsY0FBYyxtRUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUVBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQSx1QkFBdUIsZ0dBQXFCO0FBQzVDO0FBQ0EsY0FBYyx1REFBVztBQUN6QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1FQUFhO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNERBQVk7QUFDcEI7QUFDQSxRQUFRLDJEQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1REFBVztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGdHQUFxQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx3QkFBd0IsMERBQWU7QUFDdkMsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0RBQUs7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxRUFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnREFBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ087QUFDUCx3QkFBd0IsMERBQWU7QUFDdkMsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvbWV0aG9kcy9pbnNlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNBcnJheVR5cGUsIGlzR2VvUG9pbnRUeXBlLCBpc1ZlY3RvclR5cGUgfSBmcm9tICcuLi9jb21wb25lbnRzLmpzJztcbmltcG9ydCB7IGlzQXN5bmNGdW5jdGlvbiwgc2xlZXAgfSBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgeyBydW5NdWx0aXBsZUhvb2ssIHJ1blNpbmdsZUhvb2sgfSBmcm9tICcuLi9jb21wb25lbnRzL2hvb2tzLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IGdldEludGVybmFsRG9jdW1lbnRJZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvaW50ZXJuYWwtZG9jdW1lbnQtaWQtc3RvcmUuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGluc2VydChvcmFtYSwgZG9jLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgZXJyb3JQcm9wZXJ0eSA9IG9yYW1hLnZhbGlkYXRlU2NoZW1hKGRvYywgb3JhbWEuc2NoZW1hKTtcbiAgICBpZiAoZXJyb3JQcm9wZXJ0eSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignU0NIRU1BX1ZBTElEQVRJT05fRkFJTFVSRScsIGVycm9yUHJvcGVydHkpO1xuICAgIH1cbiAgICBjb25zdCBhc3luY05lZWRlZCA9IGlzQXN5bmNGdW5jdGlvbihvcmFtYS5iZWZvcmVJbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlckluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4LmJlZm9yZUluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4Lmluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4LmFmdGVySW5zZXJ0KTtcbiAgICBpZiAoYXN5bmNOZWVkZWQpIHtcbiAgICAgICAgcmV0dXJuIGlubmVySW5zZXJ0QXN5bmMob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcywgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBpbm5lckluc2VydFN5bmMob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcywgb3B0aW9ucyk7XG59XG5jb25zdCBFTlVNX1RZUEUgPSBuZXcgU2V0KFsnZW51bScsICdlbnVtW10nXSk7XG5jb25zdCBTVFJJTkdfTlVNQkVSX1RZUEUgPSBuZXcgU2V0KFsnc3RyaW5nJywgJ251bWJlciddKTtcbmFzeW5jIGZ1bmN0aW9uIGlubmVySW5zZXJ0QXN5bmMob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcywgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgaW5kZXgsIGRvY3MgfSA9IG9yYW1hLmRhdGE7XG4gICAgY29uc3QgaWQgPSBvcmFtYS5nZXREb2N1bWVudEluZGV4SWQoZG9jKTtcbiAgICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRE9DVU1FTlRfSURfTVVTVF9CRV9TVFJJTkcnLCB0eXBlb2YgaWQpO1xuICAgIH1cbiAgICBjb25zdCBpbnRlcm5hbElkID0gZ2V0SW50ZXJuYWxEb2N1bWVudElkKG9yYW1hLmludGVybmFsRG9jdW1lbnRJRFN0b3JlLCBpZCk7XG4gICAgaWYgKCFvcmFtYS5kb2N1bWVudHNTdG9yZS5zdG9yZShkb2NzLCBpZCwgaW50ZXJuYWxJZCwgZG9jKSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRE9DVU1FTlRfQUxSRUFEWV9FWElTVFMnLCBpZCk7XG4gICAgfVxuICAgIGNvbnN0IGRvY3NDb3VudCA9IG9yYW1hLmRvY3VtZW50c1N0b3JlLmNvdW50KGRvY3MpO1xuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIGF3YWl0IHJ1blNpbmdsZUhvb2sob3JhbWEuYmVmb3JlSW5zZXJ0LCBvcmFtYSwgaWQsIGRvYyk7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4YWJsZVByb3BlcnRpZXMgPSBvcmFtYS5pbmRleC5nZXRTZWFyY2hhYmxlUHJvcGVydGllcyhpbmRleCk7XG4gICAgY29uc3QgaW5kZXhhYmxlUHJvcGVydGllc1dpdGhUeXBlcyA9IG9yYW1hLmluZGV4LmdldFNlYXJjaGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzKGluZGV4KTtcbiAgICBjb25zdCBpbmRleGFibGVWYWx1ZXMgPSBvcmFtYS5nZXREb2N1bWVudFByb3BlcnRpZXMoZG9jLCBpbmRleGFibGVQcm9wZXJ0aWVzKTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhpbmRleGFibGVWYWx1ZXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IGFjdHVhbFR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGluZGV4YWJsZVByb3BlcnRpZXNXaXRoVHlwZXNba2V5XTtcbiAgICAgICAgdmFsaWRhdGVEb2N1bWVudFByb3BlcnR5KGFjdHVhbFR5cGUsIGV4cGVjdGVkVHlwZSwga2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGF3YWl0IGluZGV4QW5kU29ydERvY3VtZW50KG9yYW1hLCBpZCwgaW5kZXhhYmxlUHJvcGVydGllcywgaW5kZXhhYmxlVmFsdWVzLCBkb2NzQ291bnQsIGxhbmd1YWdlLCBkb2MsIG9wdGlvbnMpO1xuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIGF3YWl0IHJ1blNpbmdsZUhvb2sob3JhbWEuYWZ0ZXJJbnNlcnQsIG9yYW1hLCBpZCwgZG9jKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xufVxuZnVuY3Rpb24gaW5uZXJJbnNlcnRTeW5jKG9yYW1hLCBkb2MsIGxhbmd1YWdlLCBza2lwSG9va3MsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGluZGV4LCBkb2NzIH0gPSBvcmFtYS5kYXRhO1xuICAgIGNvbnN0IGlkID0gb3JhbWEuZ2V0RG9jdW1lbnRJbmRleElkKGRvYyk7XG4gICAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0RPQ1VNRU5UX0lEX01VU1RfQkVfU1RSSU5HJywgdHlwZW9mIGlkKTtcbiAgICB9XG4gICAgY29uc3QgaW50ZXJuYWxJZCA9IGdldEludGVybmFsRG9jdW1lbnRJZChvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZSwgaWQpO1xuICAgIGlmICghb3JhbWEuZG9jdW1lbnRzU3RvcmUuc3RvcmUoZG9jcywgaWQsIGludGVybmFsSWQsIGRvYykpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0RPQ1VNRU5UX0FMUkVBRFlfRVhJU1RTJywgaWQpO1xuICAgIH1cbiAgICBjb25zdCBkb2NzQ291bnQgPSBvcmFtYS5kb2N1bWVudHNTdG9yZS5jb3VudChkb2NzKTtcbiAgICBpZiAoIXNraXBIb29rcykge1xuICAgICAgICBydW5TaW5nbGVIb29rKG9yYW1hLmJlZm9yZUluc2VydCwgb3JhbWEsIGlkLCBkb2MpO1xuICAgIH1cbiAgICBjb25zdCBpbmRleGFibGVQcm9wZXJ0aWVzID0gb3JhbWEuaW5kZXguZ2V0U2VhcmNoYWJsZVByb3BlcnRpZXMoaW5kZXgpO1xuICAgIGNvbnN0IGluZGV4YWJsZVByb3BlcnRpZXNXaXRoVHlwZXMgPSBvcmFtYS5pbmRleC5nZXRTZWFyY2hhYmxlUHJvcGVydGllc1dpdGhUeXBlcyhpbmRleCk7XG4gICAgY29uc3QgaW5kZXhhYmxlVmFsdWVzID0gb3JhbWEuZ2V0RG9jdW1lbnRQcm9wZXJ0aWVzKGRvYywgaW5kZXhhYmxlUHJvcGVydGllcyk7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaW5kZXhhYmxlVmFsdWVzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBhY3R1YWxUeXBlID0gdHlwZW9mIHZhbHVlO1xuICAgICAgICBjb25zdCBleHBlY3RlZFR5cGUgPSBpbmRleGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzW2tleV07XG4gICAgICAgIHZhbGlkYXRlRG9jdW1lbnRQcm9wZXJ0eShhY3R1YWxUeXBlLCBleHBlY3RlZFR5cGUsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICBpbmRleEFuZFNvcnREb2N1bWVudFN5bmMob3JhbWEsIGlkLCBpbmRleGFibGVQcm9wZXJ0aWVzLCBpbmRleGFibGVWYWx1ZXMsIGRvY3NDb3VudCwgbGFuZ3VhZ2UsIGRvYywgb3B0aW9ucyk7XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgcnVuU2luZ2xlSG9vayhvcmFtYS5hZnRlckluc2VydCwgb3JhbWEsIGlkLCBkb2MpO1xuICAgIH1cbiAgICByZXR1cm4gaWQ7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZURvY3VtZW50UHJvcGVydHkoYWN0dWFsVHlwZSwgZXhwZWN0ZWRUeXBlLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKGlzR2VvUG9pbnRUeXBlKGV4cGVjdGVkVHlwZSkgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUubG9uID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUubGF0ID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc1ZlY3RvclR5cGUoZXhwZWN0ZWRUeXBlKSAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChpc0FycmF5VHlwZShleHBlY3RlZFR5cGUpICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKEVOVU1fVFlQRS5oYXMoZXhwZWN0ZWRUeXBlKSAmJiBTVFJJTkdfTlVNQkVSX1RZUEUuaGFzKGFjdHVhbFR5cGUpKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKGFjdHVhbFR5cGUgIT09IGV4cGVjdGVkVHlwZSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignSU5WQUxJRF9ET0NVTUVOVF9QUk9QRVJUWScsIGtleSwgZXhwZWN0ZWRUeXBlLCBhY3R1YWxUeXBlKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBpbmRleEFuZFNvcnREb2N1bWVudChvcmFtYSwgaWQsIGluZGV4YWJsZVByb3BlcnRpZXMsIGluZGV4YWJsZVZhbHVlcywgZG9jc0NvdW50LCBsYW5ndWFnZSwgZG9jLCBvcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIGluZGV4YWJsZVByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbmRleGFibGVWYWx1ZXNbcHJvcF07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IG9yYW1hLmluZGV4LmdldFNlYXJjaGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzKG9yYW1hLmRhdGEuaW5kZXgpW3Byb3BdO1xuICAgICAgICBhd2FpdCBvcmFtYS5pbmRleC5iZWZvcmVJbnNlcnQ/LihvcmFtYS5kYXRhLmluZGV4LCBwcm9wLCBpZCwgdmFsdWUsIGV4cGVjdGVkVHlwZSwgbGFuZ3VhZ2UsIG9yYW1hLnRva2VuaXplciwgZG9jc0NvdW50KTtcbiAgICAgICAgY29uc3QgaW50ZXJuYWxJZCA9IG9yYW1hLmludGVybmFsRG9jdW1lbnRJRFN0b3JlLmlkVG9JbnRlcm5hbElkLmdldChpZCk7XG4gICAgICAgIGF3YWl0IG9yYW1hLmluZGV4Lmluc2VydChvcmFtYS5pbmRleCwgb3JhbWEuZGF0YS5pbmRleCwgcHJvcCwgaWQsIGludGVybmFsSWQsIHZhbHVlLCBleHBlY3RlZFR5cGUsIGxhbmd1YWdlLCBvcmFtYS50b2tlbml6ZXIsIGRvY3NDb3VudCwgb3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IG9yYW1hLmluZGV4LmFmdGVySW5zZXJ0Py4ob3JhbWEuZGF0YS5pbmRleCwgcHJvcCwgaWQsIHZhbHVlLCBleHBlY3RlZFR5cGUsIGxhbmd1YWdlLCBvcmFtYS50b2tlbml6ZXIsIGRvY3NDb3VudCk7XG4gICAgfVxuICAgIGNvbnN0IHNvcnRhYmxlUHJvcGVydGllcyA9IG9yYW1hLnNvcnRlci5nZXRTb3J0YWJsZVByb3BlcnRpZXMob3JhbWEuZGF0YS5zb3J0aW5nKTtcbiAgICBjb25zdCBzb3J0YWJsZVZhbHVlcyA9IG9yYW1hLmdldERvY3VtZW50UHJvcGVydGllcyhkb2MsIHNvcnRhYmxlUHJvcGVydGllcyk7XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIHNvcnRhYmxlUHJvcGVydGllcykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHNvcnRhYmxlVmFsdWVzW3Byb3BdO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBleHBlY3RlZFR5cGUgPSBvcmFtYS5zb3J0ZXIuZ2V0U29ydGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzKG9yYW1hLmRhdGEuc29ydGluZylbcHJvcF07XG4gICAgICAgIG9yYW1hLnNvcnRlci5pbnNlcnQob3JhbWEuZGF0YS5zb3J0aW5nLCBwcm9wLCBpZCwgdmFsdWUsIGV4cGVjdGVkVHlwZSwgbGFuZ3VhZ2UpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluZGV4QW5kU29ydERvY3VtZW50U3luYyhvcmFtYSwgaWQsIGluZGV4YWJsZVByb3BlcnRpZXMsIGluZGV4YWJsZVZhbHVlcywgZG9jc0NvdW50LCBsYW5ndWFnZSwgZG9jLCBvcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIGluZGV4YWJsZVByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbmRleGFibGVWYWx1ZXNbcHJvcF07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IG9yYW1hLmluZGV4LmdldFNlYXJjaGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzKG9yYW1hLmRhdGEuaW5kZXgpW3Byb3BdO1xuICAgICAgICBjb25zdCBpbnRlcm5hbERvY3VtZW50SWQgPSBnZXRJbnRlcm5hbERvY3VtZW50SWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIGlkKTtcbiAgICAgICAgb3JhbWEuaW5kZXguYmVmb3JlSW5zZXJ0Py4ob3JhbWEuZGF0YS5pbmRleCwgcHJvcCwgaWQsIHZhbHVlLCBleHBlY3RlZFR5cGUsIGxhbmd1YWdlLCBvcmFtYS50b2tlbml6ZXIsIGRvY3NDb3VudCk7XG4gICAgICAgIG9yYW1hLmluZGV4Lmluc2VydChvcmFtYS5pbmRleCwgb3JhbWEuZGF0YS5pbmRleCwgcHJvcCwgaWQsIGludGVybmFsRG9jdW1lbnRJZCwgdmFsdWUsIGV4cGVjdGVkVHlwZSwgbGFuZ3VhZ2UsIG9yYW1hLnRva2VuaXplciwgZG9jc0NvdW50LCBvcHRpb25zKTtcbiAgICAgICAgb3JhbWEuaW5kZXguYWZ0ZXJJbnNlcnQ/LihvcmFtYS5kYXRhLmluZGV4LCBwcm9wLCBpZCwgdmFsdWUsIGV4cGVjdGVkVHlwZSwgbGFuZ3VhZ2UsIG9yYW1hLnRva2VuaXplciwgZG9jc0NvdW50KTtcbiAgICB9XG4gICAgY29uc3Qgc29ydGFibGVQcm9wZXJ0aWVzID0gb3JhbWEuc29ydGVyLmdldFNvcnRhYmxlUHJvcGVydGllcyhvcmFtYS5kYXRhLnNvcnRpbmcpO1xuICAgIGNvbnN0IHNvcnRhYmxlVmFsdWVzID0gb3JhbWEuZ2V0RG9jdW1lbnRQcm9wZXJ0aWVzKGRvYywgc29ydGFibGVQcm9wZXJ0aWVzKTtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2Ygc29ydGFibGVQcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gc29ydGFibGVWYWx1ZXNbcHJvcF07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IG9yYW1hLnNvcnRlci5nZXRTb3J0YWJsZVByb3BlcnRpZXNXaXRoVHlwZXMob3JhbWEuZGF0YS5zb3J0aW5nKVtwcm9wXTtcbiAgICAgICAgb3JhbWEuc29ydGVyLmluc2VydChvcmFtYS5kYXRhLnNvcnRpbmcsIHByb3AsIGlkLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlLCBsYW5ndWFnZSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydE11bHRpcGxlKG9yYW1hLCBkb2NzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MsIHRpbWVvdXQpIHtcbiAgICBjb25zdCBhc3luY05lZWRlZCA9IGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlckluc2VydE11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlSW5zZXJ0TXVsdGlwbGUpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5iZWZvcmVJbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5pbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5hZnRlckluc2VydCk7XG4gICAgaWYgKGFzeW5jTmVlZGVkKSB7XG4gICAgICAgIHJldHVybiBpbm5lckluc2VydE11bHRpcGxlQXN5bmMob3JhbWEsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcywgdGltZW91dCk7XG4gICAgfVxuICAgIHJldHVybiBpbm5lckluc2VydE11bHRpcGxlU3luYyhvcmFtYSwgZG9jcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCB0aW1lb3V0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGlubmVySW5zZXJ0TXVsdGlwbGVBc3luYyhvcmFtYSwgZG9jcywgYmF0Y2hTaXplID0gMTAwMCwgbGFuZ3VhZ2UsIHNraXBIb29rcywgdGltZW91dCA9IDApIHtcbiAgICBjb25zdCBpZHMgPSBbXTtcbiAgICBjb25zdCBwcm9jZXNzTmV4dEJhdGNoID0gYXN5bmMgKHN0YXJ0SW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgZW5kSW5kZXggPSBNYXRoLm1pbihzdGFydEluZGV4ICsgYmF0Y2hTaXplLCBkb2NzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gZG9jcy5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCk7XG4gICAgICAgIGZvciAoY29uc3QgZG9jIG9mIGJhdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0geyBhdmxSZWJhbGFuY2VUaHJlc2hvbGQ6IGJhdGNoLmxlbmd0aCB9O1xuICAgICAgICAgICAgY29uc3QgaWQgPSBhd2FpdCBpbnNlcnQob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZHMucHVzaChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuZEluZGV4O1xuICAgIH07XG4gICAgY29uc3QgcHJvY2Vzc0FsbEJhdGNoZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBjdXJyZW50SW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAoY3VycmVudEluZGV4IDwgZG9jcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjdXJyZW50SW5kZXggPSBhd2FpdCBwcm9jZXNzTmV4dEJhdGNoKGN1cnJlbnRJbmRleCk7XG4gICAgICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2FpdFRpbWUgPSB0aW1lb3V0IC0gZWxhcHNlZFRpbWU7XG4gICAgICAgICAgICAgICAgaWYgKHdhaXRUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzbGVlcCh3YWl0VGltZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBhd2FpdCBwcm9jZXNzQWxsQmF0Y2hlcygpO1xuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIGF3YWl0IHJ1bk11bHRpcGxlSG9vayhvcmFtYS5hZnRlckluc2VydE11bHRpcGxlLCBvcmFtYSwgZG9jcyk7XG4gICAgfVxuICAgIHJldHVybiBpZHM7XG59XG5mdW5jdGlvbiBpbm5lckluc2VydE11bHRpcGxlU3luYyhvcmFtYSwgZG9jcywgYmF0Y2hTaXplID0gMTAwMCwgbGFuZ3VhZ2UsIHNraXBIb29rcywgdGltZW91dCA9IDApIHtcbiAgICBjb25zdCBpZHMgPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgZnVuY3Rpb24gcHJvY2Vzc05leHRCYXRjaCgpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBkb2NzLnNsaWNlKGkgKiBiYXRjaFNpemUsIChpICsgMSkgKiBiYXRjaFNpemUpO1xuICAgICAgICBpZiAoYmF0Y2gubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiBiYXRjaCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgYXZsUmViYWxhbmNlVGhyZXNob2xkOiBiYXRjaC5sZW5ndGggfTtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaW5zZXJ0KG9yYW1hLCBkb2MsIGxhbmd1YWdlLCBza2lwSG9va3MsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWRzLnB1c2goaWQpO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb2Nlc3NBbGxCYXRjaGVzKCkge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBoYXNNb3JlQmF0Y2hlcyA9IHByb2Nlc3NOZXh0QmF0Y2goKTtcbiAgICAgICAgICAgIGlmICghaGFzTW9yZUJhdGNoZXMpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgICAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IHRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVGltZSA9IHRpbWVvdXQgLSAoZWxhcHNlZFRpbWUgJSB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1RpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGVlcChyZW1haW5pbmdUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzQWxsQmF0Y2hlcygpO1xuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIHJ1bk11bHRpcGxlSG9vayhvcmFtYS5hZnRlckluc2VydE11bHRpcGxlLCBvcmFtYSwgZG9jcyk7XG4gICAgfVxuICAgIHJldHVybiBpZHM7XG59XG5leHBvcnQgZnVuY3Rpb24gaW5uZXJJbnNlcnRNdWx0aXBsZShvcmFtYSwgZG9jcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCB0aW1lb3V0KSB7XG4gICAgY29uc3QgYXN5bmNOZWVkZWQgPSBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlSW5zZXJ0KSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJJbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5iZWZvcmVJbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5pbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5hZnRlckluc2VydCk7XG4gICAgaWYgKGFzeW5jTmVlZGVkKSB7XG4gICAgICAgIHJldHVybiBpbm5lckluc2VydE11bHRpcGxlQXN5bmMob3JhbWEsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcywgdGltZW91dCk7XG4gICAgfVxuICAgIHJldHVybiBpbm5lckluc2VydE11bHRpcGxlU3luYyhvcmFtYSwgZG9jcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCB0aW1lb3V0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluc2VydC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/insert.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/remove.js":
/*!******************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/remove.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remove: () => (/* binding */ remove),\n/* harmony export */   removeMultiple: () => (/* binding */ removeMultiple)\n/* harmony export */ });\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n/* harmony import */ var _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\n\n\nfunction remove(orama, id, language, skipHooks) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.index.beforeRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.index.remove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.index.afterRemove);\n    if (asyncNeeded) {\n        return removeAsync(orama, id, language, skipHooks);\n    }\n    return removeSync(orama, id, language, skipHooks);\n}\nasync function removeAsync(orama, id, language, skipHooks) {\n    let result = true;\n    const { index, docs } = orama.data;\n    const doc = orama.documentsStore.get(docs, id);\n    if (!doc) {\n        return false;\n    }\n    const internalId = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getInternalDocumentId)(orama.internalDocumentIDStore, id);\n    const docId = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, internalId);\n    const docsCount = orama.documentsStore.count(docs);\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.beforeRemove, orama, docId);\n    }\n    const indexableProperties = orama.index.getSearchableProperties(index);\n    const indexablePropertiesWithTypes = orama.index.getSearchablePropertiesWithTypes(index);\n    const values = orama.getDocumentProperties(doc, indexableProperties);\n    for (const prop of indexableProperties) {\n        const value = values[prop];\n        if (typeof value === 'undefined') {\n            continue;\n        }\n        const schemaType = indexablePropertiesWithTypes[prop];\n        await orama.index.beforeRemove?.(orama.data.index, prop, docId, value, schemaType, language, orama.tokenizer, docsCount);\n        if (!(await orama.index.remove(orama.index, orama.data.index, prop, id, internalId, value, schemaType, language, orama.tokenizer, docsCount))) {\n            result = false;\n        }\n        await orama.index.afterRemove?.(orama.data.index, prop, docId, value, schemaType, language, orama.tokenizer, docsCount);\n    }\n    const sortableProperties = await orama.sorter.getSortableProperties(orama.data.sorting);\n    const sortableValues = await orama.getDocumentProperties(doc, sortableProperties);\n    for (const prop of sortableProperties) {\n        if (typeof sortableValues[prop] === 'undefined') {\n            continue;\n        }\n        orama.sorter.remove(orama.data.sorting, prop, id);\n    }\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.afterRemove, orama, docId);\n    }\n    orama.documentsStore.remove(orama.data.docs, id, internalId);\n    return result;\n}\nfunction removeSync(orama, id, language, skipHooks) {\n    let result = true;\n    const { index, docs } = orama.data;\n    const doc = orama.documentsStore.get(docs, id);\n    if (!doc) {\n        return false;\n    }\n    const internalId = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getInternalDocumentId)(orama.internalDocumentIDStore, id);\n    const docId = (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, internalId);\n    const docsCount = orama.documentsStore.count(docs);\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.beforeRemove, orama, docId);\n    }\n    const indexableProperties = orama.index.getSearchableProperties(index);\n    const indexablePropertiesWithTypes = orama.index.getSearchablePropertiesWithTypes(index);\n    const values = orama.getDocumentProperties(doc, indexableProperties);\n    for (const prop of indexableProperties) {\n        const value = values[prop];\n        if (typeof value === 'undefined') {\n            continue;\n        }\n        const schemaType = indexablePropertiesWithTypes[prop];\n        orama.index.beforeRemove?.(orama.data.index, prop, docId, value, schemaType, language, orama.tokenizer, docsCount);\n        if (!orama.index.remove(orama.index, orama.data.index, prop, id, internalId, value, schemaType, language, orama.tokenizer, docsCount)) {\n            result = false;\n        }\n        orama.index.afterRemove?.(orama.data.index, prop, docId, value, schemaType, language, orama.tokenizer, docsCount);\n    }\n    const sortableProperties = orama.sorter.getSortableProperties(orama.data.sorting);\n    const sortableValues = orama.getDocumentProperties(doc, sortableProperties);\n    for (const prop of sortableProperties) {\n        if (typeof sortableValues[prop] === 'undefined') {\n            continue;\n        }\n        orama.sorter.remove(orama.data.sorting, prop, id);\n    }\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.afterRemove, orama, docId);\n    }\n    orama.documentsStore.remove(orama.data.docs, id, internalId);\n    return result;\n}\nfunction removeMultiple(orama, ids, batchSize, language, skipHooks) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.index.beforeRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.index.remove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.index.afterRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.beforeRemoveMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.isAsyncFunction)(orama.afterRemoveMultiple);\n    if (asyncNeeded) {\n        return removeMultipleAsync(orama, ids, batchSize, language, skipHooks);\n    }\n    return removeMultipleSync(orama, ids, batchSize, language, skipHooks);\n}\nasync function removeMultipleAsync(orama, ids, batchSize, language, skipHooks) {\n    let result = 0;\n    if (!batchSize) {\n        batchSize = 1000;\n    }\n    const docIdsForHooks = skipHooks\n        ? []\n        : ids.map((id) => (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getInternalDocumentId)(orama.internalDocumentIDStore, id)));\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.beforeRemoveMultiple, orama, docIdsForHooks);\n    }\n    await new Promise((resolve, reject) => {\n        let i = 0;\n        async function _removeMultiple() {\n            const batch = ids.slice(i * batchSize, ++i * batchSize);\n            if (!batch.length) {\n                return resolve();\n            }\n            for (const doc of batch) {\n                try {\n                    if (await remove(orama, doc, language, skipHooks)) {\n                        result++;\n                    }\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }\n            setTimeout(_removeMultiple, 0);\n        }\n        setTimeout(_removeMultiple, 0);\n    });\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.afterRemoveMultiple, orama, docIdsForHooks);\n    }\n    return result;\n}\nfunction removeMultipleSync(orama, ids, batchSize, language, skipHooks) {\n    let result = 0;\n    if (!batchSize) {\n        batchSize = 1000;\n    }\n    const docIdsForHooks = skipHooks\n        ? []\n        : ids.map((id) => (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_1__.getInternalDocumentId)(orama.internalDocumentIDStore, id)));\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.beforeRemoveMultiple, orama, docIdsForHooks);\n    }\n    let i = 0;\n    function _removeMultipleSync() {\n        const batch = ids.slice(i * batchSize, ++i * batchSize);\n        if (!batch.length)\n            return;\n        for (const doc of batch) {\n            if (remove(orama, doc, language, skipHooks)) {\n                result++;\n            }\n        }\n        setTimeout(_removeMultipleSync, 0);\n    }\n    _removeMultipleSync();\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.afterRemoveMultiple, orama, docIdsForHooks);\n    }\n    return result;\n}\n//# sourceMappingURL=remove.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvcmVtb3ZlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdFO0FBQ3lDO0FBQ25FO0FBQ3ZDO0FBQ1Asd0JBQXdCLDBEQUFlO0FBQ3ZDLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnR0FBcUI7QUFDNUMsa0JBQWtCLHNHQUEyQjtBQUM3QztBQUNBO0FBQ0EsY0FBYyxtRUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUVBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdHQUFxQjtBQUM1QyxrQkFBa0Isc0dBQTJCO0FBQzdDO0FBQ0E7QUFDQSxRQUFRLG1FQUFhO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1Asd0JBQXdCLDBEQUFlO0FBQ3ZDLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNHQUEyQixnQ0FBZ0MsZ0dBQXFCO0FBQzFHO0FBQ0EsY0FBYyxxRUFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxjQUFjLHFFQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNHQUEyQixnQ0FBZ0MsZ0dBQXFCO0FBQzFHO0FBQ0EsUUFBUSxxRUFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvcmVtb3ZlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJ1bk11bHRpcGxlSG9vaywgcnVuU2luZ2xlSG9vayB9IGZyb20gJy4uL2NvbXBvbmVudHMvaG9va3MuanMnO1xuaW1wb3J0IHsgZ2V0RG9jdW1lbnRJZEZyb21JbnRlcm5hbElkLCBnZXRJbnRlcm5hbERvY3VtZW50SWQgfSBmcm9tICcuLi9jb21wb25lbnRzL2ludGVybmFsLWRvY3VtZW50LWlkLXN0b3JlLmpzJztcbmltcG9ydCB7IGlzQXN5bmNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWxzLmpzJztcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUob3JhbWEsIGlkLCBsYW5ndWFnZSwgc2tpcEhvb2tzKSB7XG4gICAgY29uc3QgYXN5bmNOZWVkZWQgPSBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuaW5kZXguYmVmb3JlUmVtb3ZlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuaW5kZXgucmVtb3ZlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuaW5kZXguYWZ0ZXJSZW1vdmUpO1xuICAgIGlmIChhc3luY05lZWRlZCkge1xuICAgICAgICByZXR1cm4gcmVtb3ZlQXN5bmMob3JhbWEsIGlkLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZVN5bmMob3JhbWEsIGlkLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZUFzeW5jKG9yYW1hLCBpZCwgbGFuZ3VhZ2UsIHNraXBIb29rcykge1xuICAgIGxldCByZXN1bHQgPSB0cnVlO1xuICAgIGNvbnN0IHsgaW5kZXgsIGRvY3MgfSA9IG9yYW1hLmRhdGE7XG4gICAgY29uc3QgZG9jID0gb3JhbWEuZG9jdW1lbnRzU3RvcmUuZ2V0KGRvY3MsIGlkKTtcbiAgICBpZiAoIWRvYykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGludGVybmFsSWQgPSBnZXRJbnRlcm5hbERvY3VtZW50SWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIGlkKTtcbiAgICBjb25zdCBkb2NJZCA9IGdldERvY3VtZW50SWRGcm9tSW50ZXJuYWxJZChvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZSwgaW50ZXJuYWxJZCk7XG4gICAgY29uc3QgZG9jc0NvdW50ID0gb3JhbWEuZG9jdW1lbnRzU3RvcmUuY291bnQoZG9jcyk7XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgYXdhaXQgcnVuU2luZ2xlSG9vayhvcmFtYS5iZWZvcmVSZW1vdmUsIG9yYW1hLCBkb2NJZCk7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4YWJsZVByb3BlcnRpZXMgPSBvcmFtYS5pbmRleC5nZXRTZWFyY2hhYmxlUHJvcGVydGllcyhpbmRleCk7XG4gICAgY29uc3QgaW5kZXhhYmxlUHJvcGVydGllc1dpdGhUeXBlcyA9IG9yYW1hLmluZGV4LmdldFNlYXJjaGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzKGluZGV4KTtcbiAgICBjb25zdCB2YWx1ZXMgPSBvcmFtYS5nZXREb2N1bWVudFByb3BlcnRpZXMoZG9jLCBpbmRleGFibGVQcm9wZXJ0aWVzKTtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgaW5kZXhhYmxlUHJvcGVydGllcykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1twcm9wXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjaGVtYVR5cGUgPSBpbmRleGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzW3Byb3BdO1xuICAgICAgICBhd2FpdCBvcmFtYS5pbmRleC5iZWZvcmVSZW1vdmU/LihvcmFtYS5kYXRhLmluZGV4LCBwcm9wLCBkb2NJZCwgdmFsdWUsIHNjaGVtYVR5cGUsIGxhbmd1YWdlLCBvcmFtYS50b2tlbml6ZXIsIGRvY3NDb3VudCk7XG4gICAgICAgIGlmICghKGF3YWl0IG9yYW1hLmluZGV4LnJlbW92ZShvcmFtYS5pbmRleCwgb3JhbWEuZGF0YS5pbmRleCwgcHJvcCwgaWQsIGludGVybmFsSWQsIHZhbHVlLCBzY2hlbWFUeXBlLCBsYW5ndWFnZSwgb3JhbWEudG9rZW5pemVyLCBkb2NzQ291bnQpKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgb3JhbWEuaW5kZXguYWZ0ZXJSZW1vdmU/LihvcmFtYS5kYXRhLmluZGV4LCBwcm9wLCBkb2NJZCwgdmFsdWUsIHNjaGVtYVR5cGUsIGxhbmd1YWdlLCBvcmFtYS50b2tlbml6ZXIsIGRvY3NDb3VudCk7XG4gICAgfVxuICAgIGNvbnN0IHNvcnRhYmxlUHJvcGVydGllcyA9IGF3YWl0IG9yYW1hLnNvcnRlci5nZXRTb3J0YWJsZVByb3BlcnRpZXMob3JhbWEuZGF0YS5zb3J0aW5nKTtcbiAgICBjb25zdCBzb3J0YWJsZVZhbHVlcyA9IGF3YWl0IG9yYW1hLmdldERvY3VtZW50UHJvcGVydGllcyhkb2MsIHNvcnRhYmxlUHJvcGVydGllcyk7XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIHNvcnRhYmxlUHJvcGVydGllcykge1xuICAgICAgICBpZiAodHlwZW9mIHNvcnRhYmxlVmFsdWVzW3Byb3BdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgb3JhbWEuc29ydGVyLnJlbW92ZShvcmFtYS5kYXRhLnNvcnRpbmcsIHByb3AsIGlkKTtcbiAgICB9XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgYXdhaXQgcnVuU2luZ2xlSG9vayhvcmFtYS5hZnRlclJlbW92ZSwgb3JhbWEsIGRvY0lkKTtcbiAgICB9XG4gICAgb3JhbWEuZG9jdW1lbnRzU3RvcmUucmVtb3ZlKG9yYW1hLmRhdGEuZG9jcywgaWQsIGludGVybmFsSWQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiByZW1vdmVTeW5jKG9yYW1hLCBpZCwgbGFuZ3VhZ2UsIHNraXBIb29rcykge1xuICAgIGxldCByZXN1bHQgPSB0cnVlO1xuICAgIGNvbnN0IHsgaW5kZXgsIGRvY3MgfSA9IG9yYW1hLmRhdGE7XG4gICAgY29uc3QgZG9jID0gb3JhbWEuZG9jdW1lbnRzU3RvcmUuZ2V0KGRvY3MsIGlkKTtcbiAgICBpZiAoIWRvYykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGludGVybmFsSWQgPSBnZXRJbnRlcm5hbERvY3VtZW50SWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIGlkKTtcbiAgICBjb25zdCBkb2NJZCA9IGdldERvY3VtZW50SWRGcm9tSW50ZXJuYWxJZChvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZSwgaW50ZXJuYWxJZCk7XG4gICAgY29uc3QgZG9jc0NvdW50ID0gb3JhbWEuZG9jdW1lbnRzU3RvcmUuY291bnQoZG9jcyk7XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgcnVuU2luZ2xlSG9vayhvcmFtYS5iZWZvcmVSZW1vdmUsIG9yYW1hLCBkb2NJZCk7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4YWJsZVByb3BlcnRpZXMgPSBvcmFtYS5pbmRleC5nZXRTZWFyY2hhYmxlUHJvcGVydGllcyhpbmRleCk7XG4gICAgY29uc3QgaW5kZXhhYmxlUHJvcGVydGllc1dpdGhUeXBlcyA9IG9yYW1hLmluZGV4LmdldFNlYXJjaGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzKGluZGV4KTtcbiAgICBjb25zdCB2YWx1ZXMgPSBvcmFtYS5nZXREb2N1bWVudFByb3BlcnRpZXMoZG9jLCBpbmRleGFibGVQcm9wZXJ0aWVzKTtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgaW5kZXhhYmxlUHJvcGVydGllcykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1twcm9wXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjaGVtYVR5cGUgPSBpbmRleGFibGVQcm9wZXJ0aWVzV2l0aFR5cGVzW3Byb3BdO1xuICAgICAgICBvcmFtYS5pbmRleC5iZWZvcmVSZW1vdmU/LihvcmFtYS5kYXRhLmluZGV4LCBwcm9wLCBkb2NJZCwgdmFsdWUsIHNjaGVtYVR5cGUsIGxhbmd1YWdlLCBvcmFtYS50b2tlbml6ZXIsIGRvY3NDb3VudCk7XG4gICAgICAgIGlmICghb3JhbWEuaW5kZXgucmVtb3ZlKG9yYW1hLmluZGV4LCBvcmFtYS5kYXRhLmluZGV4LCBwcm9wLCBpZCwgaW50ZXJuYWxJZCwgdmFsdWUsIHNjaGVtYVR5cGUsIGxhbmd1YWdlLCBvcmFtYS50b2tlbml6ZXIsIGRvY3NDb3VudCkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIG9yYW1hLmluZGV4LmFmdGVyUmVtb3ZlPy4ob3JhbWEuZGF0YS5pbmRleCwgcHJvcCwgZG9jSWQsIHZhbHVlLCBzY2hlbWFUeXBlLCBsYW5ndWFnZSwgb3JhbWEudG9rZW5pemVyLCBkb2NzQ291bnQpO1xuICAgIH1cbiAgICBjb25zdCBzb3J0YWJsZVByb3BlcnRpZXMgPSBvcmFtYS5zb3J0ZXIuZ2V0U29ydGFibGVQcm9wZXJ0aWVzKG9yYW1hLmRhdGEuc29ydGluZyk7XG4gICAgY29uc3Qgc29ydGFibGVWYWx1ZXMgPSBvcmFtYS5nZXREb2N1bWVudFByb3BlcnRpZXMoZG9jLCBzb3J0YWJsZVByb3BlcnRpZXMpO1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBzb3J0YWJsZVByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3J0YWJsZVZhbHVlc1twcm9wXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG9yYW1hLnNvcnRlci5yZW1vdmUob3JhbWEuZGF0YS5zb3J0aW5nLCBwcm9wLCBpZCk7XG4gICAgfVxuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIHJ1blNpbmdsZUhvb2sob3JhbWEuYWZ0ZXJSZW1vdmUsIG9yYW1hLCBkb2NJZCk7XG4gICAgfVxuICAgIG9yYW1hLmRvY3VtZW50c1N0b3JlLnJlbW92ZShvcmFtYS5kYXRhLmRvY3MsIGlkLCBpbnRlcm5hbElkKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU11bHRpcGxlKG9yYW1hLCBpZHMsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcykge1xuICAgIGNvbnN0IGFzeW5jTmVlZGVkID0gaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4LmJlZm9yZVJlbW92ZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4LnJlbW92ZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4LmFmdGVyUmVtb3ZlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlUmVtb3ZlTXVsdGlwbGUpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlclJlbW92ZU11bHRpcGxlKTtcbiAgICBpZiAoYXN5bmNOZWVkZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZU11bHRpcGxlQXN5bmMob3JhbWEsIGlkcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZU11bHRpcGxlU3luYyhvcmFtYSwgaWRzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MpO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlTXVsdGlwbGVBc3luYyhvcmFtYSwgaWRzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MpIHtcbiAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICBpZiAoIWJhdGNoU2l6ZSkge1xuICAgICAgICBiYXRjaFNpemUgPSAxMDAwO1xuICAgIH1cbiAgICBjb25zdCBkb2NJZHNGb3JIb29rcyA9IHNraXBIb29rc1xuICAgICAgICA/IFtdXG4gICAgICAgIDogaWRzLm1hcCgoaWQpID0+IGdldERvY3VtZW50SWRGcm9tSW50ZXJuYWxJZChvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZSwgZ2V0SW50ZXJuYWxEb2N1bWVudElkKG9yYW1hLmludGVybmFsRG9jdW1lbnRJRFN0b3JlLCBpZCkpKTtcbiAgICBpZiAoIXNraXBIb29rcykge1xuICAgICAgICBhd2FpdCBydW5NdWx0aXBsZUhvb2sob3JhbWEuYmVmb3JlUmVtb3ZlTXVsdGlwbGUsIG9yYW1hLCBkb2NJZHNGb3JIb29rcyk7XG4gICAgfVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBhc3luYyBmdW5jdGlvbiBfcmVtb3ZlTXVsdGlwbGUoKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IGlkcy5zbGljZShpICogYmF0Y2hTaXplLCArK2kgKiBiYXRjaFNpemUpO1xuICAgICAgICAgICAgaWYgKCFiYXRjaC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBkb2Mgb2YgYmF0Y2gpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXdhaXQgcmVtb3ZlKG9yYW1hLCBkb2MsIGxhbmd1YWdlLCBza2lwSG9va3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoX3JlbW92ZU11bHRpcGxlLCAwKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KF9yZW1vdmVNdWx0aXBsZSwgMCk7XG4gICAgfSk7XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgYXdhaXQgcnVuTXVsdGlwbGVIb29rKG9yYW1hLmFmdGVyUmVtb3ZlTXVsdGlwbGUsIG9yYW1hLCBkb2NJZHNGb3JIb29rcyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiByZW1vdmVNdWx0aXBsZVN5bmMob3JhbWEsIGlkcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKSB7XG4gICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgaWYgKCFiYXRjaFNpemUpIHtcbiAgICAgICAgYmF0Y2hTaXplID0gMTAwMDtcbiAgICB9XG4gICAgY29uc3QgZG9jSWRzRm9ySG9va3MgPSBza2lwSG9va3NcbiAgICAgICAgPyBbXVxuICAgICAgICA6IGlkcy5tYXAoKGlkKSA9PiBnZXREb2N1bWVudElkRnJvbUludGVybmFsSWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIGdldEludGVybmFsRG9jdW1lbnRJZChvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZSwgaWQpKSk7XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgcnVuTXVsdGlwbGVIb29rKG9yYW1hLmJlZm9yZVJlbW92ZU11bHRpcGxlLCBvcmFtYSwgZG9jSWRzRm9ySG9va3MpO1xuICAgIH1cbiAgICBsZXQgaSA9IDA7XG4gICAgZnVuY3Rpb24gX3JlbW92ZU11bHRpcGxlU3luYygpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBpZHMuc2xpY2UoaSAqIGJhdGNoU2l6ZSwgKytpICogYmF0Y2hTaXplKTtcbiAgICAgICAgaWYgKCFiYXRjaC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAoY29uc3QgZG9jIG9mIGJhdGNoKSB7XG4gICAgICAgICAgICBpZiAocmVtb3ZlKG9yYW1hLCBkb2MsIGxhbmd1YWdlLCBza2lwSG9va3MpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChfcmVtb3ZlTXVsdGlwbGVTeW5jLCAwKTtcbiAgICB9XG4gICAgX3JlbW92ZU11bHRpcGxlU3luYygpO1xuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIHJ1bk11bHRpcGxlSG9vayhvcmFtYS5hZnRlclJlbW92ZU11bHRpcGxlLCBvcmFtYSwgZG9jSWRzRm9ySG9va3MpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVtb3ZlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/remove.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-fulltext.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/search-fulltext.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultBM25Params: () => (/* binding */ defaultBM25Params),\n/* harmony export */   fullTextSearch: () => (/* binding */ fullTextSearch),\n/* harmony export */   innerFullTextSearch: () => (/* binding */ innerFullTextSearch)\n/* harmony export */ });\n/* harmony import */ var _components_facets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/facets.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/facets.js\");\n/* harmony import */ var _components_groups_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/groups.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/groups.js\");\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n/* harmony import */ var _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _docs_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./docs.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/docs.js\");\n/* harmony import */ var _search_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./search.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search.js\");\n\n\n\n\n\n\n\n\nfunction innerFullTextSearch(orama, params, language) {\n    const { term, properties } = params;\n    const index = orama.data.index;\n    // Get searchable string properties\n    let propertiesToSearch = orama.caches['propertiesToSearch'];\n    if (!propertiesToSearch) {\n        const propertiesToSearchWithTypes = orama.index.getSearchablePropertiesWithTypes(index);\n        propertiesToSearch = orama.index.getSearchableProperties(index);\n        propertiesToSearch = propertiesToSearch.filter((prop) => propertiesToSearchWithTypes[prop].startsWith('string'));\n        orama.caches['propertiesToSearch'] = propertiesToSearch;\n    }\n    if (properties && properties !== '*') {\n        for (const prop of properties) {\n            if (!propertiesToSearch.includes(prop)) {\n                throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_4__.createError)('UNKNOWN_INDEX', prop, propertiesToSearch.join(', '));\n            }\n        }\n        propertiesToSearch = propertiesToSearch.filter((prop) => properties.includes(prop));\n    }\n    // If filters are enabled, we need to get the IDs of the documents that match the filters.\n    const hasFilters = Object.keys(params.where ?? {}).length > 0;\n    let whereFiltersIDs;\n    if (hasFilters) {\n        whereFiltersIDs = orama.index.searchByWhereClause(index, orama.tokenizer, params.where, language);\n    }\n    let uniqueDocsIDs;\n    // We need to perform the search if:\n    // - we have a search term\n    // - or we have properties to search\n    //   in this case, we need to return all the documents that contains at least one of the given properties\n    const threshold = params.threshold !== undefined && params.threshold !== null ? params.threshold : 1;\n    if (term || properties) {\n        const docsCount = (0,_docs_js__WEBPACK_IMPORTED_MODULE_6__.count)(orama);\n        uniqueDocsIDs = orama.index.search(index, term || '', orama.tokenizer, language, propertiesToSearch, params.exact || false, params.tolerance || 0, params.boost || {}, applyDefault(params.relevance), docsCount, whereFiltersIDs, threshold);\n    }\n    else {\n        // Tokenizer returns empty array and the search term is empty as well.\n        // We return all the documents.\n        const docIds = whereFiltersIDs\n            ? Array.from(whereFiltersIDs)\n            : Object.keys(orama.documentsStore.getAll(orama.data.docs));\n        uniqueDocsIDs = docIds.map((k) => [+k, 0]);\n    }\n    return uniqueDocsIDs;\n}\nfunction fullTextSearch(orama, params, language) {\n    const timeStart = (0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.getNanosecondsTime)();\n    function performSearchLogic() {\n        const vectorProperties = Object.keys(orama.data.index.vectorIndexes);\n        const shouldCalculateFacets = params.facets && Object.keys(params.facets).length > 0;\n        const { limit = 10, offset = 0, distinctOn, includeVectors = false } = params;\n        const isPreflight = params.preflight === true;\n        let uniqueDocsArray = innerFullTextSearch(orama, params, language);\n        if (params.sortBy) {\n            if (typeof params.sortBy === 'function') {\n                const ids = uniqueDocsArray.map(([id]) => id);\n                const docs = orama.documentsStore.getMultiple(orama.data.docs, ids);\n                const docsWithIdAndScore = docs.map((d, i) => [\n                    uniqueDocsArray[i][0],\n                    uniqueDocsArray[i][1],\n                    d\n                ]);\n                docsWithIdAndScore.sort(params.sortBy);\n                uniqueDocsArray = docsWithIdAndScore.map(([id, score]) => [id, score]);\n            }\n            else {\n                uniqueDocsArray = orama.sorter\n                    .sortBy(orama.data.sorting, uniqueDocsArray, params.sortBy)\n                    .map(([id, score]) => [(0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_3__.getInternalDocumentId)(orama.internalDocumentIDStore, id), score]);\n            }\n        }\n        else {\n            uniqueDocsArray = uniqueDocsArray.sort(_utils_js__WEBPACK_IMPORTED_MODULE_5__.sortTokenScorePredicate);\n        }\n        let results;\n        if (!isPreflight) {\n            results = distinctOn\n                ? (0,_search_js__WEBPACK_IMPORTED_MODULE_7__.fetchDocumentsWithDistinct)(orama, uniqueDocsArray, offset, limit, distinctOn)\n                : (0,_search_js__WEBPACK_IMPORTED_MODULE_7__.fetchDocuments)(orama, uniqueDocsArray, offset, limit);\n        }\n        const searchResult = {\n            elapsed: {\n                formatted: '',\n                raw: 0\n            },\n            hits: [],\n            count: uniqueDocsArray.length\n        };\n        if (typeof results !== 'undefined') {\n            searchResult.hits = results.filter(Boolean);\n            if (!includeVectors) {\n                (0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.removeVectorsFromHits)(searchResult, vectorProperties);\n            }\n        }\n        if (shouldCalculateFacets) {\n            const facets = (0,_components_facets_js__WEBPACK_IMPORTED_MODULE_0__.getFacets)(orama, uniqueDocsArray, params.facets);\n            searchResult.facets = facets;\n        }\n        if (params.groupBy) {\n            searchResult.groups = (0,_components_groups_js__WEBPACK_IMPORTED_MODULE_1__.getGroups)(orama, uniqueDocsArray, params.groupBy);\n        }\n        searchResult.elapsed = orama.formatElapsedTime((0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.getNanosecondsTime)() - timeStart);\n        return searchResult;\n    }\n    async function executeSearchAsync() {\n        if (orama.beforeSearch) {\n            await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runBeforeSearch)(orama.beforeSearch, orama, params, language);\n        }\n        const searchResult = performSearchLogic();\n        if (orama.afterSearch) {\n            await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_2__.runAfterSearch)(orama.afterSearch, orama, params, language, searchResult);\n        }\n        return searchResult;\n    }\n    const asyncNeeded = orama.beforeSearch?.length || orama.afterSearch?.length;\n    if (asyncNeeded) {\n        return executeSearchAsync();\n    }\n    return performSearchLogic();\n}\nconst defaultBM25Params = {\n    k: 1.2,\n    b: 0.75,\n    d: 0.5\n};\nfunction applyDefault(bm25Relevance) {\n    const r = bm25Relevance ?? {};\n    r.k = r.k ?? defaultBM25Params.k;\n    r.b = r.b ?? defaultBM25Params.b;\n    r.d = r.d ?? defaultBM25Params.d;\n    return r;\n}\n//# sourceMappingURL=search-fulltext.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvc2VhcmNoLWZ1bGx0ZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ0E7QUFDcUI7QUFDVztBQUN6QztBQUNzRDtBQUMvRDtBQUN1QztBQUNsRTtBQUNQLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1REFBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsK0NBQUs7QUFDL0IsNktBQTZLO0FBQzdLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHNCQUFzQiw2REFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDZEQUE2RDtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGdHQUFxQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsOERBQXVCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNFQUEwQjtBQUM1QyxrQkFBa0IsMERBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0VBQXFCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnRUFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0VBQVM7QUFDM0M7QUFDQSx1REFBdUQsNkRBQWtCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFFQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvRUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9tZXRob2RzL3NlYXJjaC1mdWxsdGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRGYWNldHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2ZhY2V0cy5qcyc7XG5pbXBvcnQgeyBnZXRHcm91cHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2dyb3Vwcy5qcyc7XG5pbXBvcnQgeyBydW5BZnRlclNlYXJjaCwgcnVuQmVmb3JlU2VhcmNoIH0gZnJvbSAnLi4vY29tcG9uZW50cy9ob29rcy5qcyc7XG5pbXBvcnQgeyBnZXRJbnRlcm5hbERvY3VtZW50SWQgfSBmcm9tICcuLi9jb21wb25lbnRzL2ludGVybmFsLWRvY3VtZW50LWlkLXN0b3JlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IGdldE5hbm9zZWNvbmRzVGltZSwgcmVtb3ZlVmVjdG9yc0Zyb21IaXRzLCBzb3J0VG9rZW5TY29yZVByZWRpY2F0ZSB9IGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCB7IGNvdW50IH0gZnJvbSAnLi9kb2NzLmpzJztcbmltcG9ydCB7IGZldGNoRG9jdW1lbnRzLCBmZXRjaERvY3VtZW50c1dpdGhEaXN0aW5jdCB9IGZyb20gJy4vc2VhcmNoLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBpbm5lckZ1bGxUZXh0U2VhcmNoKG9yYW1hLCBwYXJhbXMsIGxhbmd1YWdlKSB7XG4gICAgY29uc3QgeyB0ZXJtLCBwcm9wZXJ0aWVzIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgaW5kZXggPSBvcmFtYS5kYXRhLmluZGV4O1xuICAgIC8vIEdldCBzZWFyY2hhYmxlIHN0cmluZyBwcm9wZXJ0aWVzXG4gICAgbGV0IHByb3BlcnRpZXNUb1NlYXJjaCA9IG9yYW1hLmNhY2hlc1sncHJvcGVydGllc1RvU2VhcmNoJ107XG4gICAgaWYgKCFwcm9wZXJ0aWVzVG9TZWFyY2gpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllc1RvU2VhcmNoV2l0aFR5cGVzID0gb3JhbWEuaW5kZXguZ2V0U2VhcmNoYWJsZVByb3BlcnRpZXNXaXRoVHlwZXMoaW5kZXgpO1xuICAgICAgICBwcm9wZXJ0aWVzVG9TZWFyY2ggPSBvcmFtYS5pbmRleC5nZXRTZWFyY2hhYmxlUHJvcGVydGllcyhpbmRleCk7XG4gICAgICAgIHByb3BlcnRpZXNUb1NlYXJjaCA9IHByb3BlcnRpZXNUb1NlYXJjaC5maWx0ZXIoKHByb3ApID0+IHByb3BlcnRpZXNUb1NlYXJjaFdpdGhUeXBlc1twcm9wXS5zdGFydHNXaXRoKCdzdHJpbmcnKSk7XG4gICAgICAgIG9yYW1hLmNhY2hlc1sncHJvcGVydGllc1RvU2VhcmNoJ10gPSBwcm9wZXJ0aWVzVG9TZWFyY2g7XG4gICAgfVxuICAgIGlmIChwcm9wZXJ0aWVzICYmIHByb3BlcnRpZXMgIT09ICcqJykge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKCFwcm9wZXJ0aWVzVG9TZWFyY2guaW5jbHVkZXMocHJvcCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignVU5LTk9XTl9JTkRFWCcsIHByb3AsIHByb3BlcnRpZXNUb1NlYXJjaC5qb2luKCcsICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzVG9TZWFyY2ggPSBwcm9wZXJ0aWVzVG9TZWFyY2guZmlsdGVyKChwcm9wKSA9PiBwcm9wZXJ0aWVzLmluY2x1ZGVzKHByb3ApKTtcbiAgICB9XG4gICAgLy8gSWYgZmlsdGVycyBhcmUgZW5hYmxlZCwgd2UgbmVlZCB0byBnZXQgdGhlIElEcyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIGZpbHRlcnMuXG4gICAgY29uc3QgaGFzRmlsdGVycyA9IE9iamVjdC5rZXlzKHBhcmFtcy53aGVyZSA/PyB7fSkubGVuZ3RoID4gMDtcbiAgICBsZXQgd2hlcmVGaWx0ZXJzSURzO1xuICAgIGlmIChoYXNGaWx0ZXJzKSB7XG4gICAgICAgIHdoZXJlRmlsdGVyc0lEcyA9IG9yYW1hLmluZGV4LnNlYXJjaEJ5V2hlcmVDbGF1c2UoaW5kZXgsIG9yYW1hLnRva2VuaXplciwgcGFyYW1zLndoZXJlLCBsYW5ndWFnZSk7XG4gICAgfVxuICAgIGxldCB1bmlxdWVEb2NzSURzO1xuICAgIC8vIFdlIG5lZWQgdG8gcGVyZm9ybSB0aGUgc2VhcmNoIGlmOlxuICAgIC8vIC0gd2UgaGF2ZSBhIHNlYXJjaCB0ZXJtXG4gICAgLy8gLSBvciB3ZSBoYXZlIHByb3BlcnRpZXMgdG8gc2VhcmNoXG4gICAgLy8gICBpbiB0aGlzIGNhc2UsIHdlIG5lZWQgdG8gcmV0dXJuIGFsbCB0aGUgZG9jdW1lbnRzIHRoYXQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBnaXZlbiBwcm9wZXJ0aWVzXG4gICAgY29uc3QgdGhyZXNob2xkID0gcGFyYW1zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkICYmIHBhcmFtcy50aHJlc2hvbGQgIT09IG51bGwgPyBwYXJhbXMudGhyZXNob2xkIDogMTtcbiAgICBpZiAodGVybSB8fCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IGRvY3NDb3VudCA9IGNvdW50KG9yYW1hKTtcbiAgICAgICAgdW5pcXVlRG9jc0lEcyA9IG9yYW1hLmluZGV4LnNlYXJjaChpbmRleCwgdGVybSB8fCAnJywgb3JhbWEudG9rZW5pemVyLCBsYW5ndWFnZSwgcHJvcGVydGllc1RvU2VhcmNoLCBwYXJhbXMuZXhhY3QgfHwgZmFsc2UsIHBhcmFtcy50b2xlcmFuY2UgfHwgMCwgcGFyYW1zLmJvb3N0IHx8IHt9LCBhcHBseURlZmF1bHQocGFyYW1zLnJlbGV2YW5jZSksIGRvY3NDb3VudCwgd2hlcmVGaWx0ZXJzSURzLCB0aHJlc2hvbGQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVG9rZW5pemVyIHJldHVybnMgZW1wdHkgYXJyYXkgYW5kIHRoZSBzZWFyY2ggdGVybSBpcyBlbXB0eSBhcyB3ZWxsLlxuICAgICAgICAvLyBXZSByZXR1cm4gYWxsIHRoZSBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IGRvY0lkcyA9IHdoZXJlRmlsdGVyc0lEc1xuICAgICAgICAgICAgPyBBcnJheS5mcm9tKHdoZXJlRmlsdGVyc0lEcylcbiAgICAgICAgICAgIDogT2JqZWN0LmtleXMob3JhbWEuZG9jdW1lbnRzU3RvcmUuZ2V0QWxsKG9yYW1hLmRhdGEuZG9jcykpO1xuICAgICAgICB1bmlxdWVEb2NzSURzID0gZG9jSWRzLm1hcCgoaykgPT4gWytrLCAwXSk7XG4gICAgfVxuICAgIHJldHVybiB1bmlxdWVEb2NzSURzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZ1bGxUZXh0U2VhcmNoKG9yYW1hLCBwYXJhbXMsIGxhbmd1YWdlKSB7XG4gICAgY29uc3QgdGltZVN0YXJ0ID0gZ2V0TmFub3NlY29uZHNUaW1lKCk7XG4gICAgZnVuY3Rpb24gcGVyZm9ybVNlYXJjaExvZ2ljKCkge1xuICAgICAgICBjb25zdCB2ZWN0b3JQcm9wZXJ0aWVzID0gT2JqZWN0LmtleXMob3JhbWEuZGF0YS5pbmRleC52ZWN0b3JJbmRleGVzKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkQ2FsY3VsYXRlRmFjZXRzID0gcGFyYW1zLmZhY2V0cyAmJiBPYmplY3Qua2V5cyhwYXJhbXMuZmFjZXRzKS5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCB7IGxpbWl0ID0gMTAsIG9mZnNldCA9IDAsIGRpc3RpbmN0T24sIGluY2x1ZGVWZWN0b3JzID0gZmFsc2UgfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgaXNQcmVmbGlnaHQgPSBwYXJhbXMucHJlZmxpZ2h0ID09PSB0cnVlO1xuICAgICAgICBsZXQgdW5pcXVlRG9jc0FycmF5ID0gaW5uZXJGdWxsVGV4dFNlYXJjaChvcmFtYSwgcGFyYW1zLCBsYW5ndWFnZSk7XG4gICAgICAgIGlmIChwYXJhbXMuc29ydEJ5KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy5zb3J0QnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHMgPSB1bmlxdWVEb2NzQXJyYXkubWFwKChbaWRdKSA9PiBpZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9jcyA9IG9yYW1hLmRvY3VtZW50c1N0b3JlLmdldE11bHRpcGxlKG9yYW1hLmRhdGEuZG9jcywgaWRzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkb2NzV2l0aElkQW5kU2NvcmUgPSBkb2NzLm1hcCgoZCwgaSkgPT4gW1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWVEb2NzQXJyYXlbaV1bMF0sXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZURvY3NBcnJheVtpXVsxXSxcbiAgICAgICAgICAgICAgICAgICAgZFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIGRvY3NXaXRoSWRBbmRTY29yZS5zb3J0KHBhcmFtcy5zb3J0QnkpO1xuICAgICAgICAgICAgICAgIHVuaXF1ZURvY3NBcnJheSA9IGRvY3NXaXRoSWRBbmRTY29yZS5tYXAoKFtpZCwgc2NvcmVdKSA9PiBbaWQsIHNjb3JlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bmlxdWVEb2NzQXJyYXkgPSBvcmFtYS5zb3J0ZXJcbiAgICAgICAgICAgICAgICAgICAgLnNvcnRCeShvcmFtYS5kYXRhLnNvcnRpbmcsIHVuaXF1ZURvY3NBcnJheSwgcGFyYW1zLnNvcnRCeSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoW2lkLCBzY29yZV0pID0+IFtnZXRJbnRlcm5hbERvY3VtZW50SWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIGlkKSwgc2NvcmVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVuaXF1ZURvY3NBcnJheSA9IHVuaXF1ZURvY3NBcnJheS5zb3J0KHNvcnRUb2tlblNjb3JlUHJlZGljYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0cztcbiAgICAgICAgaWYgKCFpc1ByZWZsaWdodCkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IGRpc3RpbmN0T25cbiAgICAgICAgICAgICAgICA/IGZldGNoRG9jdW1lbnRzV2l0aERpc3RpbmN0KG9yYW1hLCB1bmlxdWVEb2NzQXJyYXksIG9mZnNldCwgbGltaXQsIGRpc3RpbmN0T24pXG4gICAgICAgICAgICAgICAgOiBmZXRjaERvY3VtZW50cyhvcmFtYSwgdW5pcXVlRG9jc0FycmF5LCBvZmZzZXQsIGxpbWl0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHQgPSB7XG4gICAgICAgICAgICBlbGFwc2VkOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkOiAnJyxcbiAgICAgICAgICAgICAgICByYXc6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaXRzOiBbXSxcbiAgICAgICAgICAgIGNvdW50OiB1bmlxdWVEb2NzQXJyYXkubGVuZ3RoXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgcmVzdWx0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdC5oaXRzID0gcmVzdWx0cy5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgICBpZiAoIWluY2x1ZGVWZWN0b3JzKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlVmVjdG9yc0Zyb21IaXRzKHNlYXJjaFJlc3VsdCwgdmVjdG9yUHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZENhbGN1bGF0ZUZhY2V0cykge1xuICAgICAgICAgICAgY29uc3QgZmFjZXRzID0gZ2V0RmFjZXRzKG9yYW1hLCB1bmlxdWVEb2NzQXJyYXksIHBhcmFtcy5mYWNldHMpO1xuICAgICAgICAgICAgc2VhcmNoUmVzdWx0LmZhY2V0cyA9IGZhY2V0cztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLmdyb3VwQnkpIHtcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdC5ncm91cHMgPSBnZXRHcm91cHMob3JhbWEsIHVuaXF1ZURvY3NBcnJheSwgcGFyYW1zLmdyb3VwQnkpO1xuICAgICAgICB9XG4gICAgICAgIHNlYXJjaFJlc3VsdC5lbGFwc2VkID0gb3JhbWEuZm9ybWF0RWxhcHNlZFRpbWUoZ2V0TmFub3NlY29uZHNUaW1lKCkgLSB0aW1lU3RhcnQpO1xuICAgICAgICByZXR1cm4gc2VhcmNoUmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBleGVjdXRlU2VhcmNoQXN5bmMoKSB7XG4gICAgICAgIGlmIChvcmFtYS5iZWZvcmVTZWFyY2gpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bkJlZm9yZVNlYXJjaChvcmFtYS5iZWZvcmVTZWFyY2gsIG9yYW1hLCBwYXJhbXMsIGxhbmd1YWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHQgPSBwZXJmb3JtU2VhcmNoTG9naWMoKTtcbiAgICAgICAgaWYgKG9yYW1hLmFmdGVyU2VhcmNoKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5BZnRlclNlYXJjaChvcmFtYS5hZnRlclNlYXJjaCwgb3JhbWEsIHBhcmFtcywgbGFuZ3VhZ2UsIHNlYXJjaFJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlYXJjaFJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgYXN5bmNOZWVkZWQgPSBvcmFtYS5iZWZvcmVTZWFyY2g/Lmxlbmd0aCB8fCBvcmFtYS5hZnRlclNlYXJjaD8ubGVuZ3RoO1xuICAgIGlmIChhc3luY05lZWRlZCkge1xuICAgICAgICByZXR1cm4gZXhlY3V0ZVNlYXJjaEFzeW5jKCk7XG4gICAgfVxuICAgIHJldHVybiBwZXJmb3JtU2VhcmNoTG9naWMoKTtcbn1cbmV4cG9ydCBjb25zdCBkZWZhdWx0Qk0yNVBhcmFtcyA9IHtcbiAgICBrOiAxLjIsXG4gICAgYjogMC43NSxcbiAgICBkOiAwLjVcbn07XG5mdW5jdGlvbiBhcHBseURlZmF1bHQoYm0yNVJlbGV2YW5jZSkge1xuICAgIGNvbnN0IHIgPSBibTI1UmVsZXZhbmNlID8/IHt9O1xuICAgIHIuayA9IHIuayA/PyBkZWZhdWx0Qk0yNVBhcmFtcy5rO1xuICAgIHIuYiA9IHIuYiA/PyBkZWZhdWx0Qk0yNVBhcmFtcy5iO1xuICAgIHIuZCA9IHIuZCA/PyBkZWZhdWx0Qk0yNVBhcmFtcy5kO1xuICAgIHJldHVybiByO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VhcmNoLWZ1bGx0ZXh0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-fulltext.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-hybrid.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/search-hybrid.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hybridSearch: () => (/* binding */ hybridSearch),\n/* harmony export */   innerHybridSearch: () => (/* binding */ innerHybridSearch)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _components_facets_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/facets.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/facets.js\");\n/* harmony import */ var _components_groups_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/groups.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/groups.js\");\n/* harmony import */ var _search_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search.js\");\n/* harmony import */ var _search_fulltext_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./search-fulltext.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-fulltext.js\");\n/* harmony import */ var _search_vector_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./search-vector.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-vector.js\");\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n\n\n\n\n\n\n\nfunction innerHybridSearch(orama, params, language) {\n    const fullTextIDs = minMaxScoreNormalization((0,_search_fulltext_js__WEBPACK_IMPORTED_MODULE_4__.innerFullTextSearch)(orama, params, language));\n    const vectorIDs = (0,_search_vector_js__WEBPACK_IMPORTED_MODULE_5__.innerVectorSearch)(orama, params, language);\n    const hybridWeights = params.hybridWeights;\n    return mergeAndRankResults(fullTextIDs, vectorIDs, params.term ?? '', hybridWeights);\n}\nfunction hybridSearch(orama, params, language) {\n    const timeStart = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.getNanosecondsTime)();\n    function performSearchLogic() {\n        const uniqueTokenScores = innerHybridSearch(orama, params, language);\n        let facetsResults;\n        const shouldCalculateFacets = params.facets && Object.keys(params.facets).length > 0;\n        if (shouldCalculateFacets) {\n            facetsResults = (0,_components_facets_js__WEBPACK_IMPORTED_MODULE_1__.getFacets)(orama, uniqueTokenScores, params.facets);\n        }\n        let groups;\n        if (params.groupBy) {\n            groups = (0,_components_groups_js__WEBPACK_IMPORTED_MODULE_2__.getGroups)(orama, uniqueTokenScores, params.groupBy);\n        }\n        const offset = params.offset ?? 0;\n        const limit = params.limit ?? 10;\n        const results = (0,_search_js__WEBPACK_IMPORTED_MODULE_3__.fetchDocuments)(orama, uniqueTokenScores, offset, limit).filter(Boolean);\n        const timeEnd = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.getNanosecondsTime)();\n        const returningResults = {\n            count: uniqueTokenScores.length,\n            elapsed: {\n                raw: Number(timeEnd - timeStart),\n                formatted: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.formatNanoseconds)(timeEnd - timeStart)\n            },\n            hits: results,\n            ...(facetsResults ? { facets: facetsResults } : {}),\n            ...(groups ? { groups } : {})\n        };\n        const includeVectors = params.includeVectors ?? false;\n        if (!includeVectors) {\n            const vectorProperties = Object.keys(orama.data.index.vectorIndexes);\n            (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.removeVectorsFromHits)(returningResults, vectorProperties);\n        }\n        return returningResults;\n    }\n    async function executeSearchAsync() {\n        if (orama.beforeSearch) {\n            await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_6__.runBeforeSearch)(orama.beforeSearch, orama, params, language);\n        }\n        const results = performSearchLogic();\n        if (orama.afterSearch) {\n            await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_6__.runAfterSearch)(orama.afterSearch, orama, params, language, results);\n        }\n        return results;\n    }\n    const asyncNeeded = orama.beforeSearch?.length || orama.afterSearch?.length;\n    if (asyncNeeded) {\n        return executeSearchAsync();\n    }\n    return performSearchLogic();\n}\nfunction extractScore(token) {\n    return token[1];\n}\nfunction minMaxScoreNormalization(results) {\n    // In this case I disabled the `prefer-spread` rule because spread seems to be slower\n    // eslint-disable-next-line prefer-spread\n    const maxScore = Math.max.apply(Math, results.map(extractScore));\n    return results.map(([id, score]) => [id, score / maxScore]);\n}\nfunction normalizeScore(score, maxScore) {\n    return score / maxScore;\n}\nfunction hybridScoreBuilder(textWeight, vectorWeight) {\n    return (textScore, vectorScore) => textScore * textWeight + vectorScore * vectorWeight;\n}\nfunction mergeAndRankResults(textResults, vectorResults, query, hybridWeights) {\n    // eslint-disable-next-line prefer-spread\n    const maxTextScore = Math.max.apply(Math, textResults.map(extractScore));\n    // eslint-disable-next-line prefer-spread\n    const maxVectorScore = Math.max.apply(Math, vectorResults.map(extractScore));\n    const hasHybridWeights = hybridWeights && hybridWeights.text && hybridWeights.vector;\n    const { text: textWeight, vector: vectorWeight } = hasHybridWeights ? hybridWeights : getQueryWeights(query);\n    const mergedResults = new Map();\n    const textResultsLength = textResults.length;\n    const hybridScore = hybridScoreBuilder(textWeight, vectorWeight);\n    for (let i = 0; i < textResultsLength; i++) {\n        const [id, score] = textResults[i];\n        const normalizedScore = normalizeScore(score, maxTextScore);\n        const hybridScoreValue = hybridScore(normalizedScore, 0);\n        mergedResults.set(id, hybridScoreValue);\n    }\n    const vectorResultsLength = vectorResults.length;\n    for (let i = 0; i < vectorResultsLength; i++) {\n        const [resultId, score] = vectorResults[i];\n        const normalizedScore = normalizeScore(score, maxVectorScore);\n        const existingRes = mergedResults.get(resultId) ?? 0;\n        mergedResults.set(resultId, existingRes + hybridScore(0, normalizedScore));\n    }\n    return [...mergedResults].sort((a, b) => b[1] - a[1]);\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction getQueryWeights(query) {\n    // In the next versions of Orama, we will ship a plugin containing a ML model to adjust the weights\n    // based on whether the query is keyword-focused, conceptual, etc.\n    // For now, we just return a fixed value.\n    return {\n        text: 0.5,\n        vector: 0.5\n    };\n}\n//# sourceMappingURL=search-hybrid.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvc2VhcmNoLWh5YnJpZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMkY7QUFDdkM7QUFDQTtBQUNQO0FBQ2M7QUFDSjtBQUNrQjtBQUNsRTtBQUNQLGlEQUFpRCx3RUFBbUI7QUFDcEUsc0JBQXNCLG9FQUFpQjtBQUN2QztBQUNBO0FBQ0E7QUFDTztBQUNQLHNCQUFzQiw2REFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnRUFBUztBQUNyQztBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0VBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFjO0FBQ3RDLHdCQUF3Qiw2REFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsNERBQWlCO0FBQzVDLGFBQWE7QUFDYjtBQUNBLGtDQUFrQyx3QkFBd0IsSUFBSTtBQUM5RCwyQkFBMkIsU0FBUyxJQUFJO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnRUFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxRUFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0VBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5Q0FBeUM7QUFDckQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9tZXRob2RzL3NlYXJjaC1oeWJyaWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0TmFub3NlY29uZHNUaW1lLCBmb3JtYXROYW5vc2Vjb25kcywgcmVtb3ZlVmVjdG9yc0Zyb21IaXRzIH0gZnJvbSAnLi4vdXRpbHMuanMnO1xuaW1wb3J0IHsgZ2V0RmFjZXRzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9mYWNldHMuanMnO1xuaW1wb3J0IHsgZ2V0R3JvdXBzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9ncm91cHMuanMnO1xuaW1wb3J0IHsgZmV0Y2hEb2N1bWVudHMgfSBmcm9tICcuL3NlYXJjaC5qcyc7XG5pbXBvcnQgeyBpbm5lckZ1bGxUZXh0U2VhcmNoIH0gZnJvbSAnLi9zZWFyY2gtZnVsbHRleHQuanMnO1xuaW1wb3J0IHsgaW5uZXJWZWN0b3JTZWFyY2ggfSBmcm9tICcuL3NlYXJjaC12ZWN0b3IuanMnO1xuaW1wb3J0IHsgcnVuQWZ0ZXJTZWFyY2gsIHJ1bkJlZm9yZVNlYXJjaCB9IGZyb20gJy4uL2NvbXBvbmVudHMvaG9va3MuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGlubmVySHlicmlkU2VhcmNoKG9yYW1hLCBwYXJhbXMsIGxhbmd1YWdlKSB7XG4gICAgY29uc3QgZnVsbFRleHRJRHMgPSBtaW5NYXhTY29yZU5vcm1hbGl6YXRpb24oaW5uZXJGdWxsVGV4dFNlYXJjaChvcmFtYSwgcGFyYW1zLCBsYW5ndWFnZSkpO1xuICAgIGNvbnN0IHZlY3RvcklEcyA9IGlubmVyVmVjdG9yU2VhcmNoKG9yYW1hLCBwYXJhbXMsIGxhbmd1YWdlKTtcbiAgICBjb25zdCBoeWJyaWRXZWlnaHRzID0gcGFyYW1zLmh5YnJpZFdlaWdodHM7XG4gICAgcmV0dXJuIG1lcmdlQW5kUmFua1Jlc3VsdHMoZnVsbFRleHRJRHMsIHZlY3RvcklEcywgcGFyYW1zLnRlcm0gPz8gJycsIGh5YnJpZFdlaWdodHMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGh5YnJpZFNlYXJjaChvcmFtYSwgcGFyYW1zLCBsYW5ndWFnZSkge1xuICAgIGNvbnN0IHRpbWVTdGFydCA9IGdldE5hbm9zZWNvbmRzVGltZSgpO1xuICAgIGZ1bmN0aW9uIHBlcmZvcm1TZWFyY2hMb2dpYygpIHtcbiAgICAgICAgY29uc3QgdW5pcXVlVG9rZW5TY29yZXMgPSBpbm5lckh5YnJpZFNlYXJjaChvcmFtYSwgcGFyYW1zLCBsYW5ndWFnZSk7XG4gICAgICAgIGxldCBmYWNldHNSZXN1bHRzO1xuICAgICAgICBjb25zdCBzaG91bGRDYWxjdWxhdGVGYWNldHMgPSBwYXJhbXMuZmFjZXRzICYmIE9iamVjdC5rZXlzKHBhcmFtcy5mYWNldHMpLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmIChzaG91bGRDYWxjdWxhdGVGYWNldHMpIHtcbiAgICAgICAgICAgIGZhY2V0c1Jlc3VsdHMgPSBnZXRGYWNldHMob3JhbWEsIHVuaXF1ZVRva2VuU2NvcmVzLCBwYXJhbXMuZmFjZXRzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZ3JvdXBzO1xuICAgICAgICBpZiAocGFyYW1zLmdyb3VwQnkpIHtcbiAgICAgICAgICAgIGdyb3VwcyA9IGdldEdyb3VwcyhvcmFtYSwgdW5pcXVlVG9rZW5TY29yZXMsIHBhcmFtcy5ncm91cEJ5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvZmZzZXQgPSBwYXJhbXMub2Zmc2V0ID8/IDA7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcGFyYW1zLmxpbWl0ID8/IDEwO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gZmV0Y2hEb2N1bWVudHMob3JhbWEsIHVuaXF1ZVRva2VuU2NvcmVzLCBvZmZzZXQsIGxpbWl0KS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IHRpbWVFbmQgPSBnZXROYW5vc2Vjb25kc1RpbWUoKTtcbiAgICAgICAgY29uc3QgcmV0dXJuaW5nUmVzdWx0cyA9IHtcbiAgICAgICAgICAgIGNvdW50OiB1bmlxdWVUb2tlblNjb3Jlcy5sZW5ndGgsXG4gICAgICAgICAgICBlbGFwc2VkOiB7XG4gICAgICAgICAgICAgICAgcmF3OiBOdW1iZXIodGltZUVuZCAtIHRpbWVTdGFydCksXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkOiBmb3JtYXROYW5vc2Vjb25kcyh0aW1lRW5kIC0gdGltZVN0YXJ0KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhpdHM6IHJlc3VsdHMsXG4gICAgICAgICAgICAuLi4oZmFjZXRzUmVzdWx0cyA/IHsgZmFjZXRzOiBmYWNldHNSZXN1bHRzIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oZ3JvdXBzID8geyBncm91cHMgfSA6IHt9KVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBpbmNsdWRlVmVjdG9ycyA9IHBhcmFtcy5pbmNsdWRlVmVjdG9ycyA/PyBmYWxzZTtcbiAgICAgICAgaWYgKCFpbmNsdWRlVmVjdG9ycykge1xuICAgICAgICAgICAgY29uc3QgdmVjdG9yUHJvcGVydGllcyA9IE9iamVjdC5rZXlzKG9yYW1hLmRhdGEuaW5kZXgudmVjdG9ySW5kZXhlcyk7XG4gICAgICAgICAgICByZW1vdmVWZWN0b3JzRnJvbUhpdHMocmV0dXJuaW5nUmVzdWx0cywgdmVjdG9yUHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHVybmluZ1Jlc3VsdHM7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVTZWFyY2hBc3luYygpIHtcbiAgICAgICAgaWYgKG9yYW1hLmJlZm9yZVNlYXJjaCkge1xuICAgICAgICAgICAgYXdhaXQgcnVuQmVmb3JlU2VhcmNoKG9yYW1hLmJlZm9yZVNlYXJjaCwgb3JhbWEsIHBhcmFtcywgbGFuZ3VhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBwZXJmb3JtU2VhcmNoTG9naWMoKTtcbiAgICAgICAgaWYgKG9yYW1hLmFmdGVyU2VhcmNoKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5BZnRlclNlYXJjaChvcmFtYS5hZnRlclNlYXJjaCwgb3JhbWEsIHBhcmFtcywgbGFuZ3VhZ2UsIHJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICBjb25zdCBhc3luY05lZWRlZCA9IG9yYW1hLmJlZm9yZVNlYXJjaD8ubGVuZ3RoIHx8IG9yYW1hLmFmdGVyU2VhcmNoPy5sZW5ndGg7XG4gICAgaWYgKGFzeW5jTmVlZGVkKSB7XG4gICAgICAgIHJldHVybiBleGVjdXRlU2VhcmNoQXN5bmMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHBlcmZvcm1TZWFyY2hMb2dpYygpO1xufVxuZnVuY3Rpb24gZXh0cmFjdFNjb3JlKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuWzFdO1xufVxuZnVuY3Rpb24gbWluTWF4U2NvcmVOb3JtYWxpemF0aW9uKHJlc3VsdHMpIHtcbiAgICAvLyBJbiB0aGlzIGNhc2UgSSBkaXNhYmxlZCB0aGUgYHByZWZlci1zcHJlYWRgIHJ1bGUgYmVjYXVzZSBzcHJlYWQgc2VlbXMgdG8gYmUgc2xvd2VyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1zcHJlYWRcbiAgICBjb25zdCBtYXhTY29yZSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHJlc3VsdHMubWFwKGV4dHJhY3RTY29yZSkpO1xuICAgIHJldHVybiByZXN1bHRzLm1hcCgoW2lkLCBzY29yZV0pID0+IFtpZCwgc2NvcmUgLyBtYXhTY29yZV0pO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU2NvcmUoc2NvcmUsIG1heFNjb3JlKSB7XG4gICAgcmV0dXJuIHNjb3JlIC8gbWF4U2NvcmU7XG59XG5mdW5jdGlvbiBoeWJyaWRTY29yZUJ1aWxkZXIodGV4dFdlaWdodCwgdmVjdG9yV2VpZ2h0KSB7XG4gICAgcmV0dXJuICh0ZXh0U2NvcmUsIHZlY3RvclNjb3JlKSA9PiB0ZXh0U2NvcmUgKiB0ZXh0V2VpZ2h0ICsgdmVjdG9yU2NvcmUgKiB2ZWN0b3JXZWlnaHQ7XG59XG5mdW5jdGlvbiBtZXJnZUFuZFJhbmtSZXN1bHRzKHRleHRSZXN1bHRzLCB2ZWN0b3JSZXN1bHRzLCBxdWVyeSwgaHlicmlkV2VpZ2h0cykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItc3ByZWFkXG4gICAgY29uc3QgbWF4VGV4dFNjb3JlID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgdGV4dFJlc3VsdHMubWFwKGV4dHJhY3RTY29yZSkpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItc3ByZWFkXG4gICAgY29uc3QgbWF4VmVjdG9yU2NvcmUgPSBNYXRoLm1heC5hcHBseShNYXRoLCB2ZWN0b3JSZXN1bHRzLm1hcChleHRyYWN0U2NvcmUpKTtcbiAgICBjb25zdCBoYXNIeWJyaWRXZWlnaHRzID0gaHlicmlkV2VpZ2h0cyAmJiBoeWJyaWRXZWlnaHRzLnRleHQgJiYgaHlicmlkV2VpZ2h0cy52ZWN0b3I7XG4gICAgY29uc3QgeyB0ZXh0OiB0ZXh0V2VpZ2h0LCB2ZWN0b3I6IHZlY3RvcldlaWdodCB9ID0gaGFzSHlicmlkV2VpZ2h0cyA/IGh5YnJpZFdlaWdodHMgOiBnZXRRdWVyeVdlaWdodHMocXVlcnkpO1xuICAgIGNvbnN0IG1lcmdlZFJlc3VsdHMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgdGV4dFJlc3VsdHNMZW5ndGggPSB0ZXh0UmVzdWx0cy5sZW5ndGg7XG4gICAgY29uc3QgaHlicmlkU2NvcmUgPSBoeWJyaWRTY29yZUJ1aWxkZXIodGV4dFdlaWdodCwgdmVjdG9yV2VpZ2h0KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHRSZXN1bHRzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgW2lkLCBzY29yZV0gPSB0ZXh0UmVzdWx0c1tpXTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFNjb3JlID0gbm9ybWFsaXplU2NvcmUoc2NvcmUsIG1heFRleHRTY29yZSk7XG4gICAgICAgIGNvbnN0IGh5YnJpZFNjb3JlVmFsdWUgPSBoeWJyaWRTY29yZShub3JtYWxpemVkU2NvcmUsIDApO1xuICAgICAgICBtZXJnZWRSZXN1bHRzLnNldChpZCwgaHlicmlkU2NvcmVWYWx1ZSk7XG4gICAgfVxuICAgIGNvbnN0IHZlY3RvclJlc3VsdHNMZW5ndGggPSB2ZWN0b3JSZXN1bHRzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlY3RvclJlc3VsdHNMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBbcmVzdWx0SWQsIHNjb3JlXSA9IHZlY3RvclJlc3VsdHNbaV07XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTY29yZSA9IG5vcm1hbGl6ZVNjb3JlKHNjb3JlLCBtYXhWZWN0b3JTY29yZSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUmVzID0gbWVyZ2VkUmVzdWx0cy5nZXQocmVzdWx0SWQpID8/IDA7XG4gICAgICAgIG1lcmdlZFJlc3VsdHMuc2V0KHJlc3VsdElkLCBleGlzdGluZ1JlcyArIGh5YnJpZFNjb3JlKDAsIG5vcm1hbGl6ZWRTY29yZSkpO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLm1lcmdlZFJlc3VsdHNdLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKTtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmZ1bmN0aW9uIGdldFF1ZXJ5V2VpZ2h0cyhxdWVyeSkge1xuICAgIC8vIEluIHRoZSBuZXh0IHZlcnNpb25zIG9mIE9yYW1hLCB3ZSB3aWxsIHNoaXAgYSBwbHVnaW4gY29udGFpbmluZyBhIE1MIG1vZGVsIHRvIGFkanVzdCB0aGUgd2VpZ2h0c1xuICAgIC8vIGJhc2VkIG9uIHdoZXRoZXIgdGhlIHF1ZXJ5IGlzIGtleXdvcmQtZm9jdXNlZCwgY29uY2VwdHVhbCwgZXRjLlxuICAgIC8vIEZvciBub3csIHdlIGp1c3QgcmV0dXJuIGEgZml4ZWQgdmFsdWUuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogMC41LFxuICAgICAgICB2ZWN0b3I6IDAuNVxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWFyY2gtaHlicmlkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-hybrid.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-vector.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/search-vector.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   innerVectorSearch: () => (/* binding */ innerVectorSearch),\n/* harmony export */   searchVector: () => (/* binding */ searchVector)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _components_facets_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/facets.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/facets.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _components_groups_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/groups.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/groups.js\");\n/* harmony import */ var _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n/* harmony import */ var _trees_vector_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../trees/vector.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/vector.js\");\n\n\n\n\n\n\n\nfunction innerVectorSearch(orama, params, language) {\n    const vector = params.vector;\n    if (vector && (!('value' in vector) || !('property' in vector))) {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.createError)('INVALID_VECTOR_INPUT', Object.keys(vector).join(', '));\n    }\n    const vectorIndex = orama.data.index.vectorIndexes[vector.property];\n    const vectorSize = vectorIndex.node.size;\n    if (vector?.value.length !== vectorSize) {\n        if (vector?.property === undefined || vector?.value.length === undefined) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.createError)('INVALID_INPUT_VECTOR', 'undefined', vectorSize, 'undefined');\n        }\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.createError)('INVALID_INPUT_VECTOR', vector.property, vectorSize, vector.value.length);\n    }\n    const index = orama.data.index;\n    let whereFiltersIDs;\n    const hasFilters = Object.keys(params.where ?? {}).length > 0;\n    if (hasFilters) {\n        whereFiltersIDs = orama.index.searchByWhereClause(index, orama.tokenizer, params.where, language);\n    }\n    return vectorIndex.node.find(vector.value, params.similarity ?? _trees_vector_js__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_SIMILARITY, whereFiltersIDs);\n}\nfunction searchVector(orama, params, language = 'english') {\n    const timeStart = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.getNanosecondsTime)();\n    function performSearchLogic() {\n        const results = innerVectorSearch(orama, params, language)\n            .sort(_utils_js__WEBPACK_IMPORTED_MODULE_0__.sortTokenScorePredicate);\n        let facetsResults = [];\n        const shouldCalculateFacets = params.facets && Object.keys(params.facets).length > 0;\n        if (shouldCalculateFacets) {\n            const facets = (0,_components_facets_js__WEBPACK_IMPORTED_MODULE_1__.getFacets)(orama, results, params.facets);\n            facetsResults = facets;\n        }\n        const vectorProperty = params.vector.property;\n        const includeVectors = params.includeVectors ?? false;\n        const limit = params.limit ?? 10;\n        const offset = params.offset ?? 0;\n        const docs = Array.from({ length: limit });\n        for (let i = 0; i < limit; i++) {\n            const result = results[i + offset];\n            if (!result) {\n                break;\n            }\n            const doc = orama.data.docs.docs[result[0]];\n            if (doc) {\n                if (!includeVectors) {\n                    doc[vectorProperty] = null;\n                }\n                const newDoc = {\n                    id: (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_4__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, result[0]),\n                    score: result[1],\n                    document: doc\n                };\n                docs[i] = newDoc;\n            }\n        }\n        let groups = [];\n        if (params.groupBy) {\n            groups = (0,_components_groups_js__WEBPACK_IMPORTED_MODULE_3__.getGroups)(orama, results, params.groupBy);\n        }\n        const timeEnd = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.getNanosecondsTime)();\n        const elapsedTime = timeEnd - timeStart;\n        return {\n            count: results.length,\n            hits: docs.filter(Boolean),\n            elapsed: {\n                raw: Number(elapsedTime),\n                formatted: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.formatNanoseconds)(elapsedTime)\n            },\n            ...(facetsResults ? { facets: facetsResults } : {}),\n            ...(groups ? { groups } : {})\n        };\n    }\n    async function executeSearchAsync() {\n        if (orama.beforeSearch) {\n            await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_5__.runBeforeSearch)(orama.beforeSearch, orama, params, language);\n        }\n        const results = performSearchLogic();\n        if (orama.afterSearch) {\n            await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_5__.runAfterSearch)(orama.afterSearch, orama, params, language, results);\n        }\n        return results;\n    }\n    const asyncNeeded = orama.beforeSearch?.length || orama.afterSearch?.length;\n    if (asyncNeeded) {\n        return executeSearchAsync();\n    }\n    // Sync path\n    return performSearchLogic();\n}\n//# sourceMappingURL=search-vector.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvc2VhcmNoLXZlY3Rvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNkY7QUFDekM7QUFDVDtBQUNTO0FBQ3NDO0FBQ2pCO0FBQ2pCO0FBQ2pEO0FBQ1A7QUFDQTtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxnRUFBa0I7QUFDdEY7QUFDTztBQUNQLHNCQUFzQiw2REFBa0I7QUFDeEM7QUFDQTtBQUNBLGtCQUFrQiw4REFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGdFQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxlQUFlO0FBQ2pELHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNHQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdFQUFTO0FBQzlCO0FBQ0Esd0JBQXdCLDZEQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsNERBQWlCO0FBQzVDLGFBQWE7QUFDYixrQ0FBa0Msd0JBQXdCLElBQUk7QUFDOUQsMkJBQTJCLFNBQVMsSUFBSTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxRUFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0VBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9tZXRob2RzL3NlYXJjaC12ZWN0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0TmFub3NlY29uZHNUaW1lLCBmb3JtYXROYW5vc2Vjb25kcywgc29ydFRva2VuU2NvcmVQcmVkaWNhdGUgfSBmcm9tICcuLi91dGlscy5qcyc7XG5pbXBvcnQgeyBnZXRGYWNldHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2ZhY2V0cy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gJy4uL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBnZXRHcm91cHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2dyb3Vwcy5qcyc7XG5pbXBvcnQgeyBnZXREb2N1bWVudElkRnJvbUludGVybmFsSWQgfSBmcm9tICcuLi9jb21wb25lbnRzL2ludGVybmFsLWRvY3VtZW50LWlkLXN0b3JlLmpzJztcbmltcG9ydCB7IHJ1bkJlZm9yZVNlYXJjaCwgcnVuQWZ0ZXJTZWFyY2ggfSBmcm9tICcuLi9jb21wb25lbnRzL2hvb2tzLmpzJztcbmltcG9ydCB7IERFRkFVTFRfU0lNSUxBUklUWSB9IGZyb20gJy4uL3RyZWVzL3ZlY3Rvci5qcyc7XG5leHBvcnQgZnVuY3Rpb24gaW5uZXJWZWN0b3JTZWFyY2gob3JhbWEsIHBhcmFtcywgbGFuZ3VhZ2UpIHtcbiAgICBjb25zdCB2ZWN0b3IgPSBwYXJhbXMudmVjdG9yO1xuICAgIGlmICh2ZWN0b3IgJiYgKCEoJ3ZhbHVlJyBpbiB2ZWN0b3IpIHx8ICEoJ3Byb3BlcnR5JyBpbiB2ZWN0b3IpKSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignSU5WQUxJRF9WRUNUT1JfSU5QVVQnLCBPYmplY3Qua2V5cyh2ZWN0b3IpLmpvaW4oJywgJykpO1xuICAgIH1cbiAgICBjb25zdCB2ZWN0b3JJbmRleCA9IG9yYW1hLmRhdGEuaW5kZXgudmVjdG9ySW5kZXhlc1t2ZWN0b3IucHJvcGVydHldO1xuICAgIGNvbnN0IHZlY3RvclNpemUgPSB2ZWN0b3JJbmRleC5ub2RlLnNpemU7XG4gICAgaWYgKHZlY3Rvcj8udmFsdWUubGVuZ3RoICE9PSB2ZWN0b3JTaXplKSB7XG4gICAgICAgIGlmICh2ZWN0b3I/LnByb3BlcnR5ID09PSB1bmRlZmluZWQgfHwgdmVjdG9yPy52YWx1ZS5sZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0lOVkFMSURfSU5QVVRfVkVDVE9SJywgJ3VuZGVmaW5lZCcsIHZlY3RvclNpemUsICd1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignSU5WQUxJRF9JTlBVVF9WRUNUT1InLCB2ZWN0b3IucHJvcGVydHksIHZlY3RvclNpemUsIHZlY3Rvci52YWx1ZS5sZW5ndGgpO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IG9yYW1hLmRhdGEuaW5kZXg7XG4gICAgbGV0IHdoZXJlRmlsdGVyc0lEcztcbiAgICBjb25zdCBoYXNGaWx0ZXJzID0gT2JqZWN0LmtleXMocGFyYW1zLndoZXJlID8/IHt9KS5sZW5ndGggPiAwO1xuICAgIGlmIChoYXNGaWx0ZXJzKSB7XG4gICAgICAgIHdoZXJlRmlsdGVyc0lEcyA9IG9yYW1hLmluZGV4LnNlYXJjaEJ5V2hlcmVDbGF1c2UoaW5kZXgsIG9yYW1hLnRva2VuaXplciwgcGFyYW1zLndoZXJlLCBsYW5ndWFnZSk7XG4gICAgfVxuICAgIHJldHVybiB2ZWN0b3JJbmRleC5ub2RlLmZpbmQodmVjdG9yLnZhbHVlLCBwYXJhbXMuc2ltaWxhcml0eSA/PyBERUZBVUxUX1NJTUlMQVJJVFksIHdoZXJlRmlsdGVyc0lEcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoVmVjdG9yKG9yYW1hLCBwYXJhbXMsIGxhbmd1YWdlID0gJ2VuZ2xpc2gnKSB7XG4gICAgY29uc3QgdGltZVN0YXJ0ID0gZ2V0TmFub3NlY29uZHNUaW1lKCk7XG4gICAgZnVuY3Rpb24gcGVyZm9ybVNlYXJjaExvZ2ljKCkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gaW5uZXJWZWN0b3JTZWFyY2gob3JhbWEsIHBhcmFtcywgbGFuZ3VhZ2UpXG4gICAgICAgICAgICAuc29ydChzb3J0VG9rZW5TY29yZVByZWRpY2F0ZSk7XG4gICAgICAgIGxldCBmYWNldHNSZXN1bHRzID0gW107XG4gICAgICAgIGNvbnN0IHNob3VsZENhbGN1bGF0ZUZhY2V0cyA9IHBhcmFtcy5mYWNldHMgJiYgT2JqZWN0LmtleXMocGFyYW1zLmZhY2V0cykubGVuZ3RoID4gMDtcbiAgICAgICAgaWYgKHNob3VsZENhbGN1bGF0ZUZhY2V0cykge1xuICAgICAgICAgICAgY29uc3QgZmFjZXRzID0gZ2V0RmFjZXRzKG9yYW1hLCByZXN1bHRzLCBwYXJhbXMuZmFjZXRzKTtcbiAgICAgICAgICAgIGZhY2V0c1Jlc3VsdHMgPSBmYWNldHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmVjdG9yUHJvcGVydHkgPSBwYXJhbXMudmVjdG9yLnByb3BlcnR5O1xuICAgICAgICBjb25zdCBpbmNsdWRlVmVjdG9ycyA9IHBhcmFtcy5pbmNsdWRlVmVjdG9ycyA/PyBmYWxzZTtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPz8gMTA7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHBhcmFtcy5vZmZzZXQgPz8gMDtcbiAgICAgICAgY29uc3QgZG9jcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IGxpbWl0IH0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbWl0OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3VsdHNbaSArIG9mZnNldF07XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZG9jID0gb3JhbWEuZGF0YS5kb2NzLmRvY3NbcmVzdWx0WzBdXTtcbiAgICAgICAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWluY2x1ZGVWZWN0b3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY1t2ZWN0b3JQcm9wZXJ0eV0gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdEb2MgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBnZXREb2N1bWVudElkRnJvbUludGVybmFsSWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIHJlc3VsdFswXSksXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlOiByZXN1bHRbMV0sXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBkb2NcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRvY3NbaV0gPSBuZXdEb2M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGdyb3VwcyA9IFtdO1xuICAgICAgICBpZiAocGFyYW1zLmdyb3VwQnkpIHtcbiAgICAgICAgICAgIGdyb3VwcyA9IGdldEdyb3VwcyhvcmFtYSwgcmVzdWx0cywgcGFyYW1zLmdyb3VwQnkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRpbWVFbmQgPSBnZXROYW5vc2Vjb25kc1RpbWUoKTtcbiAgICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSB0aW1lRW5kIC0gdGltZVN0YXJ0O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY291bnQ6IHJlc3VsdHMubGVuZ3RoLFxuICAgICAgICAgICAgaGl0czogZG9jcy5maWx0ZXIoQm9vbGVhbiksXG4gICAgICAgICAgICBlbGFwc2VkOiB7XG4gICAgICAgICAgICAgICAgcmF3OiBOdW1iZXIoZWxhcHNlZFRpbWUpLFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogZm9ybWF0TmFub3NlY29uZHMoZWxhcHNlZFRpbWUpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4uKGZhY2V0c1Jlc3VsdHMgPyB7IGZhY2V0czogZmFjZXRzUmVzdWx0cyB9IDoge30pLFxuICAgICAgICAgICAgLi4uKGdyb3VwcyA/IHsgZ3JvdXBzIH0gOiB7fSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVNlYXJjaEFzeW5jKCkge1xuICAgICAgICBpZiAob3JhbWEuYmVmb3JlU2VhcmNoKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5CZWZvcmVTZWFyY2gob3JhbWEuYmVmb3JlU2VhcmNoLCBvcmFtYSwgcGFyYW1zLCBsYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHBlcmZvcm1TZWFyY2hMb2dpYygpO1xuICAgICAgICBpZiAob3JhbWEuYWZ0ZXJTZWFyY2gpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bkFmdGVyU2VhcmNoKG9yYW1hLmFmdGVyU2VhcmNoLCBvcmFtYSwgcGFyYW1zLCBsYW5ndWFnZSwgcmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIGNvbnN0IGFzeW5jTmVlZGVkID0gb3JhbWEuYmVmb3JlU2VhcmNoPy5sZW5ndGggfHwgb3JhbWEuYWZ0ZXJTZWFyY2g/Lmxlbmd0aDtcbiAgICBpZiAoYXN5bmNOZWVkZWQpIHtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGVTZWFyY2hBc3luYygpO1xuICAgIH1cbiAgICAvLyBTeW5jIHBhdGhcbiAgICByZXR1cm4gcGVyZm9ybVNlYXJjaExvZ2ljKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWFyY2gtdmVjdG9yLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-vector.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search.js":
/*!******************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/search.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchDocuments: () => (/* binding */ fetchDocuments),\n/* harmony export */   fetchDocumentsWithDistinct: () => (/* binding */ fetchDocumentsWithDistinct),\n/* harmony export */   search: () => (/* binding */ search)\n/* harmony export */ });\n/* harmony import */ var _components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/internal-document-id-store.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/internal-document-id-store.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../constants.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/constants.js\");\n/* harmony import */ var _search_fulltext_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./search-fulltext.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-fulltext.js\");\n/* harmony import */ var _search_vector_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./search-vector.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-vector.js\");\n/* harmony import */ var _search_hybrid_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./search-hybrid.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search-hybrid.js\");\n\n\n\n\n\n\n\nfunction search(orama, params, language) {\n    const mode = params.mode ?? _constants_js__WEBPACK_IMPORTED_MODULE_3__.MODE_FULLTEXT_SEARCH;\n    if (mode === _constants_js__WEBPACK_IMPORTED_MODULE_3__.MODE_FULLTEXT_SEARCH) {\n        return (0,_search_fulltext_js__WEBPACK_IMPORTED_MODULE_4__.fullTextSearch)(orama, params, language);\n    }\n    if (mode === _constants_js__WEBPACK_IMPORTED_MODULE_3__.MODE_VECTOR_SEARCH) {\n        return (0,_search_vector_js__WEBPACK_IMPORTED_MODULE_5__.searchVector)(orama, params);\n    }\n    if (mode === _constants_js__WEBPACK_IMPORTED_MODULE_3__.MODE_HYBRID_SEARCH) {\n        return (0,_search_hybrid_js__WEBPACK_IMPORTED_MODULE_6__.hybridSearch)(orama, params);\n    }\n    throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('INVALID_SEARCH_MODE', mode);\n}\nfunction fetchDocumentsWithDistinct(orama, uniqueDocsArray, offset, limit, distinctOn) {\n    const docs = orama.data.docs;\n    // Keep track which values we already seen\n    const values = new Map();\n    // We cannot know how many results we will have in the end,\n    // so we need cannot pre-allocate the array.\n    const results = [];\n    const resultIDs = new Set();\n    const uniqueDocsArrayLength = uniqueDocsArray.length;\n    let count = 0;\n    for (let i = 0; i < uniqueDocsArrayLength; i++) {\n        const idAndScore = uniqueDocsArray[i];\n        // If there are no more results, just break the loop\n        if (typeof idAndScore === 'undefined') {\n            continue;\n        }\n        const [id, score] = idAndScore;\n        if (resultIDs.has(id)) {\n            continue;\n        }\n        const doc = orama.documentsStore.get(docs, id);\n        const value = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.getNested)(doc, distinctOn);\n        if (typeof value === 'undefined' || values.has(value)) {\n            continue;\n        }\n        values.set(value, true);\n        count++;\n        // We shouldn't consider the document if it's not in the offset range\n        if (count <= offset) {\n            continue;\n        }\n        results.push({ id: (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_0__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, id), score, document: doc });\n        resultIDs.add(id);\n        // reached the limit, break the loop\n        if (count >= offset + limit) {\n            break;\n        }\n    }\n    return results;\n}\nfunction fetchDocuments(orama, uniqueDocsArray, offset, limit) {\n    const docs = orama.data.docs;\n    const results = Array.from({\n        length: limit\n    });\n    const resultIDs = new Set();\n    // We already have the list of ALL the document IDs containing the search terms.\n    // We loop over them starting from a positional value \"offset\" and ending at \"offset + limit\"\n    // to provide pagination capabilities to the search.\n    for (let i = offset; i < limit + offset; i++) {\n        const idAndScore = uniqueDocsArray[i];\n        // If there are no more results, just break the loop\n        if (typeof idAndScore === 'undefined') {\n            break;\n        }\n        const [id, score] = idAndScore;\n        if (!resultIDs.has(id)) {\n            // We retrieve the full document only AFTER making sure that we really want it.\n            // We never retrieve the full document preventively.\n            const fullDoc = orama.documentsStore.get(docs, id);\n            results[i] = { id: (0,_components_internal_document_id_store_js__WEBPACK_IMPORTED_MODULE_0__.getDocumentIdFromInternalId)(orama.internalDocumentIDStore, id), score, document: fullDoc };\n            resultIDs.add(id);\n        }\n    }\n    return results;\n}\n//# sourceMappingURL=search.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvc2VhcmNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMEY7QUFDL0M7QUFDSDtBQUN1RDtBQUN6QztBQUNKO0FBQ0E7QUFDM0M7QUFDUCxnQ0FBZ0MsK0RBQW9CO0FBQ3BELGlCQUFpQiwrREFBb0I7QUFDckMsZUFBZSxtRUFBYztBQUM3QjtBQUNBLGlCQUFpQiw2REFBa0I7QUFDbkMsZUFBZSwrREFBWTtBQUMzQjtBQUNBLGlCQUFpQiw2REFBa0I7QUFDbkMsZUFBZSwrREFBWTtBQUMzQjtBQUNBLFVBQVUsdURBQVc7QUFDckI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyQkFBMkI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0RBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLElBQUksc0dBQTJCLDJEQUEyRDtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0JBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLElBQUksc0dBQTJCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci9tZXRob2RzL3NlYXJjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREb2N1bWVudElkRnJvbUludGVybmFsSWQgfSBmcm9tICcuLi9jb21wb25lbnRzL2ludGVybmFsLWRvY3VtZW50LWlkLXN0b3JlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi4vZXJyb3JzLmpzJztcbmltcG9ydCB7IGdldE5lc3RlZCB9IGZyb20gJy4uL3V0aWxzLmpzJztcbmltcG9ydCB7IE1PREVfRlVMTFRFWFRfU0VBUkNILCBNT0RFX0hZQlJJRF9TRUFSQ0gsIE1PREVfVkVDVE9SX1NFQVJDSCB9IGZyb20gJy4uL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBmdWxsVGV4dFNlYXJjaCB9IGZyb20gJy4vc2VhcmNoLWZ1bGx0ZXh0LmpzJztcbmltcG9ydCB7IHNlYXJjaFZlY3RvciB9IGZyb20gJy4vc2VhcmNoLXZlY3Rvci5qcyc7XG5pbXBvcnQgeyBoeWJyaWRTZWFyY2ggfSBmcm9tICcuL3NlYXJjaC1oeWJyaWQuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaChvcmFtYSwgcGFyYW1zLCBsYW5ndWFnZSkge1xuICAgIGNvbnN0IG1vZGUgPSBwYXJhbXMubW9kZSA/PyBNT0RFX0ZVTExURVhUX1NFQVJDSDtcbiAgICBpZiAobW9kZSA9PT0gTU9ERV9GVUxMVEVYVF9TRUFSQ0gpIHtcbiAgICAgICAgcmV0dXJuIGZ1bGxUZXh0U2VhcmNoKG9yYW1hLCBwYXJhbXMsIGxhbmd1YWdlKTtcbiAgICB9XG4gICAgaWYgKG1vZGUgPT09IE1PREVfVkVDVE9SX1NFQVJDSCkge1xuICAgICAgICByZXR1cm4gc2VhcmNoVmVjdG9yKG9yYW1hLCBwYXJhbXMpO1xuICAgIH1cbiAgICBpZiAobW9kZSA9PT0gTU9ERV9IWUJSSURfU0VBUkNIKSB7XG4gICAgICAgIHJldHVybiBoeWJyaWRTZWFyY2gob3JhbWEsIHBhcmFtcyk7XG4gICAgfVxuICAgIHRocm93IGNyZWF0ZUVycm9yKCdJTlZBTElEX1NFQVJDSF9NT0RFJywgbW9kZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hEb2N1bWVudHNXaXRoRGlzdGluY3Qob3JhbWEsIHVuaXF1ZURvY3NBcnJheSwgb2Zmc2V0LCBsaW1pdCwgZGlzdGluY3RPbikge1xuICAgIGNvbnN0IGRvY3MgPSBvcmFtYS5kYXRhLmRvY3M7XG4gICAgLy8gS2VlcCB0cmFjayB3aGljaCB2YWx1ZXMgd2UgYWxyZWFkeSBzZWVuXG4gICAgY29uc3QgdmFsdWVzID0gbmV3IE1hcCgpO1xuICAgIC8vIFdlIGNhbm5vdCBrbm93IGhvdyBtYW55IHJlc3VsdHMgd2Ugd2lsbCBoYXZlIGluIHRoZSBlbmQsXG4gICAgLy8gc28gd2UgbmVlZCBjYW5ub3QgcHJlLWFsbG9jYXRlIHRoZSBhcnJheS5cbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgY29uc3QgcmVzdWx0SURzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHVuaXF1ZURvY3NBcnJheUxlbmd0aCA9IHVuaXF1ZURvY3NBcnJheS5sZW5ndGg7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVuaXF1ZURvY3NBcnJheUxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGlkQW5kU2NvcmUgPSB1bmlxdWVEb2NzQXJyYXlbaV07XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBtb3JlIHJlc3VsdHMsIGp1c3QgYnJlYWsgdGhlIGxvb3BcbiAgICAgICAgaWYgKHR5cGVvZiBpZEFuZFNjb3JlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW2lkLCBzY29yZV0gPSBpZEFuZFNjb3JlO1xuICAgICAgICBpZiAocmVzdWx0SURzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRvYyA9IG9yYW1hLmRvY3VtZW50c1N0b3JlLmdldChkb2NzLCBpZCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0TmVzdGVkKGRvYywgZGlzdGluY3RPbik7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlcy5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXMuc2V0KHZhbHVlLCB0cnVlKTtcbiAgICAgICAgY291bnQrKztcbiAgICAgICAgLy8gV2Ugc2hvdWxkbid0IGNvbnNpZGVyIHRoZSBkb2N1bWVudCBpZiBpdCdzIG5vdCBpbiB0aGUgb2Zmc2V0IHJhbmdlXG4gICAgICAgIGlmIChjb3VudCA8PSBvZmZzZXQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaCh7IGlkOiBnZXREb2N1bWVudElkRnJvbUludGVybmFsSWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIGlkKSwgc2NvcmUsIGRvY3VtZW50OiBkb2MgfSk7XG4gICAgICAgIHJlc3VsdElEcy5hZGQoaWQpO1xuICAgICAgICAvLyByZWFjaGVkIHRoZSBsaW1pdCwgYnJlYWsgdGhlIGxvb3BcbiAgICAgICAgaWYgKGNvdW50ID49IG9mZnNldCArIGxpbWl0KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaERvY3VtZW50cyhvcmFtYSwgdW5pcXVlRG9jc0FycmF5LCBvZmZzZXQsIGxpbWl0KSB7XG4gICAgY29uc3QgZG9jcyA9IG9yYW1hLmRhdGEuZG9jcztcbiAgICBjb25zdCByZXN1bHRzID0gQXJyYXkuZnJvbSh7XG4gICAgICAgIGxlbmd0aDogbGltaXRcbiAgICB9KTtcbiAgICBjb25zdCByZXN1bHRJRHMgPSBuZXcgU2V0KCk7XG4gICAgLy8gV2UgYWxyZWFkeSBoYXZlIHRoZSBsaXN0IG9mIEFMTCB0aGUgZG9jdW1lbnQgSURzIGNvbnRhaW5pbmcgdGhlIHNlYXJjaCB0ZXJtcy5cbiAgICAvLyBXZSBsb29wIG92ZXIgdGhlbSBzdGFydGluZyBmcm9tIGEgcG9zaXRpb25hbCB2YWx1ZSBcIm9mZnNldFwiIGFuZCBlbmRpbmcgYXQgXCJvZmZzZXQgKyBsaW1pdFwiXG4gICAgLy8gdG8gcHJvdmlkZSBwYWdpbmF0aW9uIGNhcGFiaWxpdGllcyB0byB0aGUgc2VhcmNoLlxuICAgIGZvciAobGV0IGkgPSBvZmZzZXQ7IGkgPCBsaW1pdCArIG9mZnNldDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGlkQW5kU2NvcmUgPSB1bmlxdWVEb2NzQXJyYXlbaV07XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBtb3JlIHJlc3VsdHMsIGp1c3QgYnJlYWsgdGhlIGxvb3BcbiAgICAgICAgaWYgKHR5cGVvZiBpZEFuZFNjb3JlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW2lkLCBzY29yZV0gPSBpZEFuZFNjb3JlO1xuICAgICAgICBpZiAoIXJlc3VsdElEcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAvLyBXZSByZXRyaWV2ZSB0aGUgZnVsbCBkb2N1bWVudCBvbmx5IEFGVEVSIG1ha2luZyBzdXJlIHRoYXQgd2UgcmVhbGx5IHdhbnQgaXQuXG4gICAgICAgICAgICAvLyBXZSBuZXZlciByZXRyaWV2ZSB0aGUgZnVsbCBkb2N1bWVudCBwcmV2ZW50aXZlbHkuXG4gICAgICAgICAgICBjb25zdCBmdWxsRG9jID0gb3JhbWEuZG9jdW1lbnRzU3RvcmUuZ2V0KGRvY3MsIGlkKTtcbiAgICAgICAgICAgIHJlc3VsdHNbaV0gPSB7IGlkOiBnZXREb2N1bWVudElkRnJvbUludGVybmFsSWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIGlkKSwgc2NvcmUsIGRvY3VtZW50OiBmdWxsRG9jIH07XG4gICAgICAgICAgICByZXN1bHRJRHMuYWRkKGlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlYXJjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/search.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/serialization.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/serialization.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   load: () => (/* binding */ load),\n/* harmony export */   save: () => (/* binding */ save)\n/* harmony export */ });\nfunction load(orama, raw) {\n    orama.internalDocumentIDStore.load(orama, raw.internalDocumentIDStore);\n    orama.data.index = orama.index.load(orama.internalDocumentIDStore, raw.index);\n    orama.data.docs = orama.documentsStore.load(orama.internalDocumentIDStore, raw.docs);\n    orama.data.sorting = orama.sorter.load(orama.internalDocumentIDStore, raw.sorting);\n    orama.tokenizer.language = raw.language;\n}\nfunction save(orama) {\n    return {\n        internalDocumentIDStore: orama.internalDocumentIDStore.save(orama.internalDocumentIDStore),\n        index: orama.index.save(orama.data.index),\n        docs: orama.documentsStore.save(orama.data.docs),\n        sorting: orama.sorter.save(orama.data.sorting),\n        language: orama.tokenizer.language\n    };\n}\n//# sourceMappingURL=serialization.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvc2VyaWFsaXphdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvbWV0aG9kcy9zZXJpYWxpemF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBsb2FkKG9yYW1hLCByYXcpIHtcbiAgICBvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZS5sb2FkKG9yYW1hLCByYXcuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUpO1xuICAgIG9yYW1hLmRhdGEuaW5kZXggPSBvcmFtYS5pbmRleC5sb2FkKG9yYW1hLmludGVybmFsRG9jdW1lbnRJRFN0b3JlLCByYXcuaW5kZXgpO1xuICAgIG9yYW1hLmRhdGEuZG9jcyA9IG9yYW1hLmRvY3VtZW50c1N0b3JlLmxvYWQob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUsIHJhdy5kb2NzKTtcbiAgICBvcmFtYS5kYXRhLnNvcnRpbmcgPSBvcmFtYS5zb3J0ZXIubG9hZChvcmFtYS5pbnRlcm5hbERvY3VtZW50SURTdG9yZSwgcmF3LnNvcnRpbmcpO1xuICAgIG9yYW1hLnRva2VuaXplci5sYW5ndWFnZSA9IHJhdy5sYW5ndWFnZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYXZlKG9yYW1hKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZXJuYWxEb2N1bWVudElEU3RvcmU6IG9yYW1hLmludGVybmFsRG9jdW1lbnRJRFN0b3JlLnNhdmUob3JhbWEuaW50ZXJuYWxEb2N1bWVudElEU3RvcmUpLFxuICAgICAgICBpbmRleDogb3JhbWEuaW5kZXguc2F2ZShvcmFtYS5kYXRhLmluZGV4KSxcbiAgICAgICAgZG9jczogb3JhbWEuZG9jdW1lbnRzU3RvcmUuc2F2ZShvcmFtYS5kYXRhLmRvY3MpLFxuICAgICAgICBzb3J0aW5nOiBvcmFtYS5zb3J0ZXIuc2F2ZShvcmFtYS5kYXRhLnNvcnRpbmcpLFxuICAgICAgICBsYW5ndWFnZTogb3JhbWEudG9rZW5pemVyLmxhbmd1YWdlXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6YXRpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/serialization.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/update.js":
/*!******************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/update.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   update: () => (/* binding */ update),\n/* harmony export */   updateMultiple: () => (/* binding */ updateMultiple)\n/* harmony export */ });\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _insert_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./insert.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/insert.js\");\n/* harmony import */ var _remove_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./remove.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/remove.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\n\n\n\n\nfunction update(orama, id, doc, language, skipHooks) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpdate) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpdate);\n    if (asyncNeeded) {\n        return updateAsync(orama, id, doc, language, skipHooks);\n    }\n    return updateSync(orama, id, doc, language, skipHooks);\n}\nasync function updateAsync(orama, id, doc, language, skipHooks) {\n    if (!skipHooks && orama.beforeUpdate) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.beforeUpdate, orama, id);\n    }\n    await (0,_remove_js__WEBPACK_IMPORTED_MODULE_3__.remove)(orama, id, language, skipHooks);\n    const newId = await (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.insert)(orama, doc, language, skipHooks);\n    if (!skipHooks && orama.afterUpdate) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.afterUpdate, orama, newId);\n    }\n    return newId;\n}\nfunction updateSync(orama, id, doc, language, skipHooks) {\n    if (!skipHooks && orama.beforeUpdate) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.beforeUpdate, orama, id);\n    }\n    (0,_remove_js__WEBPACK_IMPORTED_MODULE_3__.remove)(orama, id, language, skipHooks);\n    const newId = (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.insert)(orama, doc, language, skipHooks);\n    if (!skipHooks && orama.afterUpdate) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.afterUpdate, orama, newId);\n    }\n    return newId;\n}\nfunction updateMultiple(orama, ids, docs, batchSize, language, skipHooks) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpdate) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpdate) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpdateMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpdateMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeRemoveMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterRemoveMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeInsertMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterInsertMultiple);\n    if (asyncNeeded) {\n        return updateMultipleAsync(orama, ids, docs, batchSize, language, skipHooks);\n    }\n    return updateMultipleSync(orama, ids, docs, batchSize, language, skipHooks);\n}\nasync function updateMultipleAsync(orama, ids, docs, batchSize, language, skipHooks) {\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.beforeUpdateMultiple, orama, ids);\n    }\n    const docsLength = docs.length;\n    for (let i = 0; i < docsLength; i++) {\n        const errorProperty = orama.validateSchema(docs[i], orama.schema);\n        if (errorProperty) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('SCHEMA_VALIDATION_FAILURE', errorProperty);\n        }\n    }\n    await (0,_remove_js__WEBPACK_IMPORTED_MODULE_3__.removeMultiple)(orama, ids, batchSize, language, skipHooks);\n    const newIds = await (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.innerInsertMultiple)(orama, docs, batchSize, language, skipHooks);\n    if (!skipHooks) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.afterUpdateMultiple, orama, newIds);\n    }\n    return newIds;\n}\nfunction updateMultipleSync(orama, ids, docs, batchSize, language, skipHooks) {\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.beforeUpdateMultiple, orama, ids);\n    }\n    const docsLength = docs.length;\n    for (let i = 0; i < docsLength; i++) {\n        const errorProperty = orama.validateSchema(docs[i], orama.schema);\n        if (errorProperty) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('SCHEMA_VALIDATION_FAILURE', errorProperty);\n        }\n    }\n    (0,_remove_js__WEBPACK_IMPORTED_MODULE_3__.removeMultiple)(orama, ids, batchSize, language, skipHooks);\n    const newIds = (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.innerInsertMultiple)(orama, docs, batchSize, language, skipHooks);\n    if (!skipHooks) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.afterUpdateMultiple, orama, newIds);\n    }\n    return newIds;\n}\n//# sourceMappingURL=update.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0U7QUFDN0I7QUFDZTtBQUNMO0FBQ1A7QUFDdkM7QUFDUCx3QkFBd0IsMERBQWU7QUFDdkMsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxtRUFBYTtBQUMzQjtBQUNBLFVBQVUsa0RBQU07QUFDaEIsd0JBQXdCLGtEQUFNO0FBQzlCO0FBQ0EsY0FBYyxtRUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBYTtBQUNyQjtBQUNBLElBQUksa0RBQU07QUFDVixrQkFBa0Isa0RBQU07QUFDeEI7QUFDQSxRQUFRLG1FQUFhO0FBQ3JCO0FBQ0E7QUFDQTtBQUNPO0FBQ1Asd0JBQXdCLDBEQUFlO0FBQ3ZDLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMscUVBQWU7QUFDN0I7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0EsVUFBVSwwREFBYztBQUN4Qix5QkFBeUIsK0RBQW1CO0FBQzVDO0FBQ0EsY0FBYyxxRUFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBZTtBQUN2QjtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0Esa0JBQWtCLHVEQUFXO0FBQzdCO0FBQ0E7QUFDQSxJQUFJLDBEQUFjO0FBQ2xCLG1CQUFtQiwrREFBbUI7QUFDdEM7QUFDQSxRQUFRLHFFQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvdXBkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJ1bk11bHRpcGxlSG9vaywgcnVuU2luZ2xlSG9vayB9IGZyb20gJy4uL2NvbXBvbmVudHMvaG9va3MuanMnO1xuaW1wb3J0IHsgY3JlYXRlRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMuanMnO1xuaW1wb3J0IHsgaW5uZXJJbnNlcnRNdWx0aXBsZSwgaW5zZXJ0IH0gZnJvbSAnLi9pbnNlcnQuanMnO1xuaW1wb3J0IHsgcmVtb3ZlLCByZW1vdmVNdWx0aXBsZSB9IGZyb20gJy4vcmVtb3ZlLmpzJztcbmltcG9ydCB7IGlzQXN5bmNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWxzLmpzJztcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGUob3JhbWEsIGlkLCBkb2MsIGxhbmd1YWdlLCBza2lwSG9va3MpIHtcbiAgICBjb25zdCBhc3luY05lZWRlZCA9IGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlckluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZUluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmFmdGVyUmVtb3ZlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlUmVtb3ZlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlVXBkYXRlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJVcGRhdGUpO1xuICAgIGlmIChhc3luY05lZWRlZCkge1xuICAgICAgICByZXR1cm4gdXBkYXRlQXN5bmMob3JhbWEsIGlkLCBkb2MsIGxhbmd1YWdlLCBza2lwSG9va3MpO1xuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlU3luYyhvcmFtYSwgaWQsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG59XG5hc3luYyBmdW5jdGlvbiB1cGRhdGVBc3luYyhvcmFtYSwgaWQsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcykge1xuICAgIGlmICghc2tpcEhvb2tzICYmIG9yYW1hLmJlZm9yZVVwZGF0ZSkge1xuICAgICAgICBhd2FpdCBydW5TaW5nbGVIb29rKG9yYW1hLmJlZm9yZVVwZGF0ZSwgb3JhbWEsIGlkKTtcbiAgICB9XG4gICAgYXdhaXQgcmVtb3ZlKG9yYW1hLCBpZCwgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgY29uc3QgbmV3SWQgPSBhd2FpdCBpbnNlcnQob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgaWYgKCFza2lwSG9va3MgJiYgb3JhbWEuYWZ0ZXJVcGRhdGUpIHtcbiAgICAgICAgYXdhaXQgcnVuU2luZ2xlSG9vayhvcmFtYS5hZnRlclVwZGF0ZSwgb3JhbWEsIG5ld0lkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0lkO1xufVxuZnVuY3Rpb24gdXBkYXRlU3luYyhvcmFtYSwgaWQsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcykge1xuICAgIGlmICghc2tpcEhvb2tzICYmIG9yYW1hLmJlZm9yZVVwZGF0ZSkge1xuICAgICAgICBydW5TaW5nbGVIb29rKG9yYW1hLmJlZm9yZVVwZGF0ZSwgb3JhbWEsIGlkKTtcbiAgICB9XG4gICAgcmVtb3ZlKG9yYW1hLCBpZCwgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgY29uc3QgbmV3SWQgPSBpbnNlcnQob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgaWYgKCFza2lwSG9va3MgJiYgb3JhbWEuYWZ0ZXJVcGRhdGUpIHtcbiAgICAgICAgcnVuU2luZ2xlSG9vayhvcmFtYS5hZnRlclVwZGF0ZSwgb3JhbWEsIG5ld0lkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0lkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU11bHRpcGxlKG9yYW1hLCBpZHMsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcykge1xuICAgIGNvbnN0IGFzeW5jTmVlZGVkID0gaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmFmdGVySW5zZXJ0KSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlSW5zZXJ0KSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJSZW1vdmUpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5iZWZvcmVSZW1vdmUpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5iZWZvcmVVcGRhdGUpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlclVwZGF0ZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZVVwZGF0ZU11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJVcGRhdGVNdWx0aXBsZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZVJlbW92ZU11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJSZW1vdmVNdWx0aXBsZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZUluc2VydE11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJJbnNlcnRNdWx0aXBsZSk7XG4gICAgaWYgKGFzeW5jTmVlZGVkKSB7XG4gICAgICAgIHJldHVybiB1cGRhdGVNdWx0aXBsZUFzeW5jKG9yYW1hLCBpZHMsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVNdWx0aXBsZVN5bmMob3JhbWEsIGlkcywgZG9jcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU11bHRpcGxlQXN5bmMob3JhbWEsIGlkcywgZG9jcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKSB7XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgYXdhaXQgcnVuTXVsdGlwbGVIb29rKG9yYW1hLmJlZm9yZVVwZGF0ZU11bHRpcGxlLCBvcmFtYSwgaWRzKTtcbiAgICB9XG4gICAgY29uc3QgZG9jc0xlbmd0aCA9IGRvY3MubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVycm9yUHJvcGVydHkgPSBvcmFtYS52YWxpZGF0ZVNjaGVtYShkb2NzW2ldLCBvcmFtYS5zY2hlbWEpO1xuICAgICAgICBpZiAoZXJyb3JQcm9wZXJ0eSkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1NDSEVNQV9WQUxJREFUSU9OX0ZBSUxVUkUnLCBlcnJvclByb3BlcnR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCByZW1vdmVNdWx0aXBsZShvcmFtYSwgaWRzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MpO1xuICAgIGNvbnN0IG5ld0lkcyA9IGF3YWl0IGlubmVySW5zZXJ0TXVsdGlwbGUob3JhbWEsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgaWYgKCFza2lwSG9va3MpIHtcbiAgICAgICAgYXdhaXQgcnVuTXVsdGlwbGVIb29rKG9yYW1hLmFmdGVyVXBkYXRlTXVsdGlwbGUsIG9yYW1hLCBuZXdJZHMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3SWRzO1xufVxuZnVuY3Rpb24gdXBkYXRlTXVsdGlwbGVTeW5jKG9yYW1hLCBpZHMsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcykge1xuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIHJ1bk11bHRpcGxlSG9vayhvcmFtYS5iZWZvcmVVcGRhdGVNdWx0aXBsZSwgb3JhbWEsIGlkcyk7XG4gICAgfVxuICAgIGNvbnN0IGRvY3NMZW5ndGggPSBkb2NzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3NMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBlcnJvclByb3BlcnR5ID0gb3JhbWEudmFsaWRhdGVTY2hlbWEoZG9jc1tpXSwgb3JhbWEuc2NoZW1hKTtcbiAgICAgICAgaWYgKGVycm9yUHJvcGVydHkpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdTQ0hFTUFfVkFMSURBVElPTl9GQUlMVVJFJywgZXJyb3JQcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlTXVsdGlwbGUob3JhbWEsIGlkcywgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbiAgICBjb25zdCBuZXdJZHMgPSBpbm5lckluc2VydE11bHRpcGxlKG9yYW1hLCBkb2NzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MpO1xuICAgIGlmICghc2tpcEhvb2tzKSB7XG4gICAgICAgIHJ1bk11bHRpcGxlSG9vayhvcmFtYS5hZnRlclVwZGF0ZU11bHRpcGxlLCBvcmFtYSwgbmV3SWRzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0lkcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/update.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/upsert.js":
/*!******************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/methods/upsert.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   upsert: () => (/* binding */ upsert),\n/* harmony export */   upsertMultiple: () => (/* binding */ upsertMultiple)\n/* harmony export */ });\n/* harmony import */ var _components_hooks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/hooks.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/hooks.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* harmony import */ var _insert_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./insert.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/insert.js\");\n/* harmony import */ var _update_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./update.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/update.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\n\n\n\n\nfunction upsert(orama, doc, language, skipHooks, options) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpdate) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpdate) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.index.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.index.insert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.index.afterInsert);\n    if (asyncNeeded) {\n        return upsertAsync(orama, doc, language, skipHooks, options);\n    }\n    return upsertSync(orama, doc, language, skipHooks, options);\n}\nasync function upsertAsync(orama, doc, language, skipHooks, options) {\n    const id = orama.getDocumentIndexId(doc);\n    if (typeof id !== 'string') {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('DOCUMENT_ID_MUST_BE_STRING', typeof id);\n    }\n    if (!skipHooks && orama.beforeUpsert) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.beforeUpsert, orama, id, doc);\n    }\n    // Check if document exists\n    const existingDoc = orama.documentsStore.get(orama.data.docs, id);\n    let resultId;\n    if (existingDoc) {\n        // Document exists, update it\n        resultId = await (0,_update_js__WEBPACK_IMPORTED_MODULE_3__.update)(orama, id, doc, language, skipHooks);\n    }\n    else {\n        // Document doesn't exist, insert it\n        resultId = await (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.insert)(orama, doc, language, skipHooks, options);\n    }\n    if (!skipHooks && orama.afterUpsert) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.afterUpsert, orama, resultId, doc);\n    }\n    return resultId;\n}\nfunction upsertSync(orama, doc, language, skipHooks, options) {\n    const id = orama.getDocumentIndexId(doc);\n    if (typeof id !== 'string') {\n        throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('DOCUMENT_ID_MUST_BE_STRING', typeof id);\n    }\n    if (!skipHooks && orama.beforeUpsert) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.beforeUpsert, orama, id, doc);\n    }\n    // Check if document exists\n    const existingDoc = orama.documentsStore.get(orama.data.docs, id);\n    let resultId;\n    if (existingDoc) {\n        // Document exists, update it\n        resultId = (0,_update_js__WEBPACK_IMPORTED_MODULE_3__.update)(orama, id, doc, language, skipHooks);\n    }\n    else {\n        // Document doesn't exist, insert it\n        resultId = (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.insert)(orama, doc, language, skipHooks, options);\n    }\n    if (!skipHooks && orama.afterUpsert) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runSingleHook)(orama.afterUpsert, orama, resultId, doc);\n    }\n    return resultId;\n}\nfunction upsertMultiple(orama, docs, batchSize, language, skipHooks) {\n    const asyncNeeded = (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeRemove) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpdate) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpdate) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpsertMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpsertMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeInsertMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterInsertMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeUpdateMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterUpdateMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.beforeRemoveMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.afterRemoveMultiple) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.index.beforeInsert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.index.insert) ||\n        (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.isAsyncFunction)(orama.index.afterInsert);\n    if (asyncNeeded) {\n        return upsertMultipleAsync(orama, docs, batchSize, language, skipHooks);\n    }\n    return upsertMultipleSync(orama, docs, batchSize, language, skipHooks);\n}\nasync function upsertMultipleAsync(orama, docs, batchSize, language, skipHooks) {\n    if (!skipHooks && orama.beforeUpsertMultiple) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.beforeUpsertMultiple, orama, docs);\n    }\n    // Validate all documents first\n    const docsLength = docs.length;\n    for (let i = 0; i < docsLength; i++) {\n        const errorProperty = orama.validateSchema(docs[i], orama.schema);\n        if (errorProperty) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('SCHEMA_VALIDATION_FAILURE', errorProperty);\n        }\n    }\n    // Separate documents into insert and update arrays\n    const docsToInsert = [];\n    const docsToUpdate = [];\n    const idsToUpdate = [];\n    for (const doc of docs) {\n        const id = orama.getDocumentIndexId(doc);\n        if (typeof id !== 'string') {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('DOCUMENT_ID_MUST_BE_STRING', typeof id);\n        }\n        const existingDoc = orama.documentsStore.get(orama.data.docs, id);\n        if (existingDoc) {\n            docsToUpdate.push(doc);\n            idsToUpdate.push(id);\n        }\n        else {\n            docsToInsert.push(doc);\n        }\n    }\n    // Perform bulk operations\n    const results = [];\n    if (docsToUpdate.length > 0) {\n        const updateResults = await (0,_update_js__WEBPACK_IMPORTED_MODULE_3__.updateMultiple)(orama, idsToUpdate, docsToUpdate, batchSize, language, skipHooks);\n        results.push(...updateResults);\n    }\n    if (docsToInsert.length > 0) {\n        const insertResults = await (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.innerInsertMultiple)(orama, docsToInsert, batchSize, language, skipHooks);\n        results.push(...insertResults);\n    }\n    if (!skipHooks && orama.afterUpsertMultiple) {\n        await (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.afterUpsertMultiple, orama, results);\n    }\n    return results;\n}\nfunction upsertMultipleSync(orama, docs, batchSize, language, skipHooks) {\n    if (!skipHooks && orama.beforeUpsertMultiple) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.beforeUpsertMultiple, orama, docs);\n    }\n    // Validate all documents first\n    const docsLength = docs.length;\n    for (let i = 0; i < docsLength; i++) {\n        const errorProperty = orama.validateSchema(docs[i], orama.schema);\n        if (errorProperty) {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('SCHEMA_VALIDATION_FAILURE', errorProperty);\n        }\n    }\n    // Separate documents into insert and update arrays\n    const docsToInsert = [];\n    const docsToUpdate = [];\n    const idsToUpdate = [];\n    for (const doc of docs) {\n        const id = orama.getDocumentIndexId(doc);\n        if (typeof id !== 'string') {\n            throw (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.createError)('DOCUMENT_ID_MUST_BE_STRING', typeof id);\n        }\n        const existingDoc = orama.documentsStore.get(orama.data.docs, id);\n        if (existingDoc) {\n            docsToUpdate.push(doc);\n            idsToUpdate.push(id);\n        }\n        else {\n            docsToInsert.push(doc);\n        }\n    }\n    // Perform bulk operations\n    const results = [];\n    if (docsToUpdate.length > 0) {\n        const updateResults = (0,_update_js__WEBPACK_IMPORTED_MODULE_3__.updateMultiple)(orama, idsToUpdate, docsToUpdate, batchSize, language, skipHooks);\n        results.push(...updateResults);\n    }\n    if (docsToInsert.length > 0) {\n        const insertResults = (0,_insert_js__WEBPACK_IMPORTED_MODULE_2__.innerInsertMultiple)(orama, docsToInsert, batchSize, language, skipHooks);\n        results.push(...insertResults);\n    }\n    if (!skipHooks && orama.afterUpsertMultiple) {\n        (0,_components_hooks_js__WEBPACK_IMPORTED_MODULE_0__.runMultipleHook)(orama.afterUpsertMultiple, orama, results);\n    }\n    return results;\n}\n//# sourceMappingURL=upsert.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL21ldGhvZHMvdXBzZXJ0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0U7QUFDN0I7QUFDZTtBQUNMO0FBQ1A7QUFDdkM7QUFDUCx3QkFBd0IsMERBQWU7QUFDdkMsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1REFBVztBQUN6QjtBQUNBO0FBQ0EsY0FBYyxtRUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0RBQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtEQUFNO0FBQy9CO0FBQ0E7QUFDQSxjQUFjLG1FQUFhO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsdURBQVc7QUFDekI7QUFDQTtBQUNBLFFBQVEsbUVBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtEQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrREFBTTtBQUN6QjtBQUNBO0FBQ0EsUUFBUSxtRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDTztBQUNQLHdCQUF3QiwwREFBZTtBQUN2QyxRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QixRQUFRLDBEQUFlO0FBQ3ZCLFFBQVEsMERBQWU7QUFDdkIsUUFBUSwwREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMscUVBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0Esa0JBQWtCLHVEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywwREFBYztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsK0RBQW1CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLGNBQWMscUVBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0Esa0JBQWtCLHVEQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwwREFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0RBQW1CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvbWV0aG9kcy91cHNlcnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcnVuTXVsdGlwbGVIb29rLCBydW5TaW5nbGVIb29rIH0gZnJvbSAnLi4vY29tcG9uZW50cy9ob29rcy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFcnJvciB9IGZyb20gJy4uL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBpbnNlcnQsIGlubmVySW5zZXJ0TXVsdGlwbGUgfSBmcm9tICcuL2luc2VydC5qcyc7XG5pbXBvcnQgeyB1cGRhdGUsIHVwZGF0ZU11bHRpcGxlIH0gZnJvbSAnLi91cGRhdGUuanMnO1xuaW1wb3J0IHsgaXNBc3luY0Z1bmN0aW9uIH0gZnJvbSAnLi4vdXRpbHMuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHVwc2VydChvcmFtYSwgZG9jLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgYXN5bmNOZWVkZWQgPSBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJJbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5iZWZvcmVJbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlclJlbW92ZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZVJlbW92ZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZVVwZGF0ZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmFmdGVyVXBkYXRlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlVXBzZXJ0KSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJVcHNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5iZWZvcmVJbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5pbnNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5pbmRleC5hZnRlckluc2VydCk7XG4gICAgaWYgKGFzeW5jTmVlZGVkKSB7XG4gICAgICAgIHJldHVybiB1cHNlcnRBc3luYyhvcmFtYSwgZG9jLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIHVwc2VydFN5bmMob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcywgb3B0aW9ucyk7XG59XG5hc3luYyBmdW5jdGlvbiB1cHNlcnRBc3luYyhvcmFtYSwgZG9jLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgaWQgPSBvcmFtYS5nZXREb2N1bWVudEluZGV4SWQoZG9jKTtcbiAgICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRE9DVU1FTlRfSURfTVVTVF9CRV9TVFJJTkcnLCB0eXBlb2YgaWQpO1xuICAgIH1cbiAgICBpZiAoIXNraXBIb29rcyAmJiBvcmFtYS5iZWZvcmVVcHNlcnQpIHtcbiAgICAgICAgYXdhaXQgcnVuU2luZ2xlSG9vayhvcmFtYS5iZWZvcmVVcHNlcnQsIG9yYW1hLCBpZCwgZG9jKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgZG9jdW1lbnQgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdEb2MgPSBvcmFtYS5kb2N1bWVudHNTdG9yZS5nZXQob3JhbWEuZGF0YS5kb2NzLCBpZCk7XG4gICAgbGV0IHJlc3VsdElkO1xuICAgIGlmIChleGlzdGluZ0RvYykge1xuICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIHVwZGF0ZSBpdFxuICAgICAgICByZXN1bHRJZCA9IGF3YWl0IHVwZGF0ZShvcmFtYSwgaWQsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBEb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBpbnNlcnQgaXRcbiAgICAgICAgcmVzdWx0SWQgPSBhd2FpdCBpbnNlcnQob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcywgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmICghc2tpcEhvb2tzICYmIG9yYW1hLmFmdGVyVXBzZXJ0KSB7XG4gICAgICAgIGF3YWl0IHJ1blNpbmdsZUhvb2sob3JhbWEuYWZ0ZXJVcHNlcnQsIG9yYW1hLCByZXN1bHRJZCwgZG9jKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdElkO1xufVxuZnVuY3Rpb24gdXBzZXJ0U3luYyhvcmFtYSwgZG9jLCBsYW5ndWFnZSwgc2tpcEhvb2tzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgaWQgPSBvcmFtYS5nZXREb2N1bWVudEluZGV4SWQoZG9jKTtcbiAgICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRE9DVU1FTlRfSURfTVVTVF9CRV9TVFJJTkcnLCB0eXBlb2YgaWQpO1xuICAgIH1cbiAgICBpZiAoIXNraXBIb29rcyAmJiBvcmFtYS5iZWZvcmVVcHNlcnQpIHtcbiAgICAgICAgcnVuU2luZ2xlSG9vayhvcmFtYS5iZWZvcmVVcHNlcnQsIG9yYW1hLCBpZCwgZG9jKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgZG9jdW1lbnQgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdEb2MgPSBvcmFtYS5kb2N1bWVudHNTdG9yZS5nZXQob3JhbWEuZGF0YS5kb2NzLCBpZCk7XG4gICAgbGV0IHJlc3VsdElkO1xuICAgIGlmIChleGlzdGluZ0RvYykge1xuICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIHVwZGF0ZSBpdFxuICAgICAgICByZXN1bHRJZCA9IHVwZGF0ZShvcmFtYSwgaWQsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBEb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBpbnNlcnQgaXRcbiAgICAgICAgcmVzdWx0SWQgPSBpbnNlcnQob3JhbWEsIGRvYywgbGFuZ3VhZ2UsIHNraXBIb29rcywgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmICghc2tpcEhvb2tzICYmIG9yYW1hLmFmdGVyVXBzZXJ0KSB7XG4gICAgICAgIHJ1blNpbmdsZUhvb2sob3JhbWEuYWZ0ZXJVcHNlcnQsIG9yYW1hLCByZXN1bHRJZCwgZG9jKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdElkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVwc2VydE11bHRpcGxlKG9yYW1hLCBkb2NzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MpIHtcbiAgICBjb25zdCBhc3luY05lZWRlZCA9IGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlckluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZUluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmFmdGVyUmVtb3ZlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlUmVtb3ZlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYmVmb3JlVXBkYXRlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJVcGRhdGUpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5iZWZvcmVVcHNlcnQpIHx8XG4gICAgICAgIGlzQXN5bmNGdW5jdGlvbihvcmFtYS5hZnRlclVwc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZVVwc2VydE11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJVcHNlcnRNdWx0aXBsZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZUluc2VydE11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJJbnNlcnRNdWx0aXBsZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZVVwZGF0ZU11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJVcGRhdGVNdWx0aXBsZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmJlZm9yZVJlbW92ZU11bHRpcGxlKSB8fFxuICAgICAgICBpc0FzeW5jRnVuY3Rpb24ob3JhbWEuYWZ0ZXJSZW1vdmVNdWx0aXBsZSkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4LmJlZm9yZUluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4Lmluc2VydCkgfHxcbiAgICAgICAgaXNBc3luY0Z1bmN0aW9uKG9yYW1hLmluZGV4LmFmdGVySW5zZXJ0KTtcbiAgICBpZiAoYXN5bmNOZWVkZWQpIHtcbiAgICAgICAgcmV0dXJuIHVwc2VydE11bHRpcGxlQXN5bmMob3JhbWEsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG4gICAgfVxuICAgIHJldHVybiB1cHNlcnRNdWx0aXBsZVN5bmMob3JhbWEsIGRvY3MsIGJhdGNoU2l6ZSwgbGFuZ3VhZ2UsIHNraXBIb29rcyk7XG59XG5hc3luYyBmdW5jdGlvbiB1cHNlcnRNdWx0aXBsZUFzeW5jKG9yYW1hLCBkb2NzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MpIHtcbiAgICBpZiAoIXNraXBIb29rcyAmJiBvcmFtYS5iZWZvcmVVcHNlcnRNdWx0aXBsZSkge1xuICAgICAgICBhd2FpdCBydW5NdWx0aXBsZUhvb2sob3JhbWEuYmVmb3JlVXBzZXJ0TXVsdGlwbGUsIG9yYW1hLCBkb2NzKTtcbiAgICB9XG4gICAgLy8gVmFsaWRhdGUgYWxsIGRvY3VtZW50cyBmaXJzdFxuICAgIGNvbnN0IGRvY3NMZW5ndGggPSBkb2NzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3NMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBlcnJvclByb3BlcnR5ID0gb3JhbWEudmFsaWRhdGVTY2hlbWEoZG9jc1tpXSwgb3JhbWEuc2NoZW1hKTtcbiAgICAgICAgaWYgKGVycm9yUHJvcGVydHkpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdTQ0hFTUFfVkFMSURBVElPTl9GQUlMVVJFJywgZXJyb3JQcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VwYXJhdGUgZG9jdW1lbnRzIGludG8gaW5zZXJ0IGFuZCB1cGRhdGUgYXJyYXlzXG4gICAgY29uc3QgZG9jc1RvSW5zZXJ0ID0gW107XG4gICAgY29uc3QgZG9jc1RvVXBkYXRlID0gW107XG4gICAgY29uc3QgaWRzVG9VcGRhdGUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2NzKSB7XG4gICAgICAgIGNvbnN0IGlkID0gb3JhbWEuZ2V0RG9jdW1lbnRJbmRleElkKGRvYyk7XG4gICAgICAgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRE9DVU1FTlRfSURfTVVTVF9CRV9TVFJJTkcnLCB0eXBlb2YgaWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRG9jID0gb3JhbWEuZG9jdW1lbnRzU3RvcmUuZ2V0KG9yYW1hLmRhdGEuZG9jcywgaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdEb2MpIHtcbiAgICAgICAgICAgIGRvY3NUb1VwZGF0ZS5wdXNoKGRvYyk7XG4gICAgICAgICAgICBpZHNUb1VwZGF0ZS5wdXNoKGlkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvY3NUb0luc2VydC5wdXNoKGRvYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUGVyZm9ybSBidWxrIG9wZXJhdGlvbnNcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgaWYgKGRvY3NUb1VwZGF0ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVJlc3VsdHMgPSBhd2FpdCB1cGRhdGVNdWx0aXBsZShvcmFtYSwgaWRzVG9VcGRhdGUsIGRvY3NUb1VwZGF0ZSwgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKC4uLnVwZGF0ZVJlc3VsdHMpO1xuICAgIH1cbiAgICBpZiAoZG9jc1RvSW5zZXJ0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0cyA9IGF3YWl0IGlubmVySW5zZXJ0TXVsdGlwbGUob3JhbWEsIGRvY3NUb0luc2VydCwgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKC4uLmluc2VydFJlc3VsdHMpO1xuICAgIH1cbiAgICBpZiAoIXNraXBIb29rcyAmJiBvcmFtYS5hZnRlclVwc2VydE11bHRpcGxlKSB7XG4gICAgICAgIGF3YWl0IHJ1bk11bHRpcGxlSG9vayhvcmFtYS5hZnRlclVwc2VydE11bHRpcGxlLCBvcmFtYSwgcmVzdWx0cyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuZnVuY3Rpb24gdXBzZXJ0TXVsdGlwbGVTeW5jKG9yYW1hLCBkb2NzLCBiYXRjaFNpemUsIGxhbmd1YWdlLCBza2lwSG9va3MpIHtcbiAgICBpZiAoIXNraXBIb29rcyAmJiBvcmFtYS5iZWZvcmVVcHNlcnRNdWx0aXBsZSkge1xuICAgICAgICBydW5NdWx0aXBsZUhvb2sob3JhbWEuYmVmb3JlVXBzZXJ0TXVsdGlwbGUsIG9yYW1hLCBkb2NzKTtcbiAgICB9XG4gICAgLy8gVmFsaWRhdGUgYWxsIGRvY3VtZW50cyBmaXJzdFxuICAgIGNvbnN0IGRvY3NMZW5ndGggPSBkb2NzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3NMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBlcnJvclByb3BlcnR5ID0gb3JhbWEudmFsaWRhdGVTY2hlbWEoZG9jc1tpXSwgb3JhbWEuc2NoZW1hKTtcbiAgICAgICAgaWYgKGVycm9yUHJvcGVydHkpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdTQ0hFTUFfVkFMSURBVElPTl9GQUlMVVJFJywgZXJyb3JQcm9wZXJ0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VwYXJhdGUgZG9jdW1lbnRzIGludG8gaW5zZXJ0IGFuZCB1cGRhdGUgYXJyYXlzXG4gICAgY29uc3QgZG9jc1RvSW5zZXJ0ID0gW107XG4gICAgY29uc3QgZG9jc1RvVXBkYXRlID0gW107XG4gICAgY29uc3QgaWRzVG9VcGRhdGUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2NzKSB7XG4gICAgICAgIGNvbnN0IGlkID0gb3JhbWEuZ2V0RG9jdW1lbnRJbmRleElkKGRvYyk7XG4gICAgICAgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRE9DVU1FTlRfSURfTVVTVF9CRV9TVFJJTkcnLCB0eXBlb2YgaWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRG9jID0gb3JhbWEuZG9jdW1lbnRzU3RvcmUuZ2V0KG9yYW1hLmRhdGEuZG9jcywgaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdEb2MpIHtcbiAgICAgICAgICAgIGRvY3NUb1VwZGF0ZS5wdXNoKGRvYyk7XG4gICAgICAgICAgICBpZHNUb1VwZGF0ZS5wdXNoKGlkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvY3NUb0luc2VydC5wdXNoKGRvYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUGVyZm9ybSBidWxrIG9wZXJhdGlvbnNcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgaWYgKGRvY3NUb1VwZGF0ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVJlc3VsdHMgPSB1cGRhdGVNdWx0aXBsZShvcmFtYSwgaWRzVG9VcGRhdGUsIGRvY3NUb1VwZGF0ZSwgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKC4uLnVwZGF0ZVJlc3VsdHMpO1xuICAgIH1cbiAgICBpZiAoZG9jc1RvSW5zZXJ0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaW5zZXJ0UmVzdWx0cyA9IGlubmVySW5zZXJ0TXVsdGlwbGUob3JhbWEsIGRvY3NUb0luc2VydCwgYmF0Y2hTaXplLCBsYW5ndWFnZSwgc2tpcEhvb2tzKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKC4uLmluc2VydFJlc3VsdHMpO1xuICAgIH1cbiAgICBpZiAoIXNraXBIb29rcyAmJiBvcmFtYS5hZnRlclVwc2VydE11bHRpcGxlKSB7XG4gICAgICAgIHJ1bk11bHRpcGxlSG9vayhvcmFtYS5hZnRlclVwc2VydE11bHRpcGxlLCBvcmFtYSwgcmVzdWx0cyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBzZXJ0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/methods/upsert.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/avl.js":
/*!*************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/trees/avl.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AVLNode: () => (/* binding */ AVLNode),\n/* harmony export */   AVLTree: () => (/* binding */ AVLTree)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n\nclass AVLNode {\n    k;\n    v;\n    l = null;\n    r = null;\n    h = 1;\n    constructor(key, value) {\n        this.k = key;\n        this.v = new Set(value);\n    }\n    updateHeight() {\n        this.h = Math.max(AVLNode.getHeight(this.l), AVLNode.getHeight(this.r)) + 1;\n    }\n    static getHeight(node) {\n        return node ? node.h : 0;\n    }\n    getBalanceFactor() {\n        return AVLNode.getHeight(this.l) - AVLNode.getHeight(this.r);\n    }\n    rotateLeft() {\n        const newRoot = this.r;\n        this.r = newRoot.l;\n        newRoot.l = this;\n        this.updateHeight();\n        newRoot.updateHeight();\n        return newRoot;\n    }\n    rotateRight() {\n        const newRoot = this.l;\n        this.l = newRoot.r;\n        newRoot.r = this;\n        this.updateHeight();\n        newRoot.updateHeight();\n        return newRoot;\n    }\n    toJSON() {\n        return {\n            k: this.k,\n            v: Array.from(this.v),\n            l: this.l ? this.l.toJSON() : null,\n            r: this.r ? this.r.toJSON() : null,\n            h: this.h\n        };\n    }\n    static fromJSON(json) {\n        const node = new AVLNode(json.k, json.v);\n        node.l = json.l ? AVLNode.fromJSON(json.l) : null;\n        node.r = json.r ? AVLNode.fromJSON(json.r) : null;\n        node.h = json.h;\n        return node;\n    }\n}\nclass AVLTree {\n    root = null;\n    insertCount = 0;\n    constructor(key, value) {\n        if (key !== undefined && value !== undefined) {\n            this.root = new AVLNode(key, value);\n        }\n    }\n    insert(key, value, rebalanceThreshold = 1000) {\n        this.root = this.insertNode(this.root, key, value, rebalanceThreshold);\n    }\n    insertMultiple(key, value, rebalanceThreshold = 1000) {\n        for (const v of value) {\n            this.insert(key, v, rebalanceThreshold);\n        }\n    }\n    // Rebalance the tree if the insert count reaches the threshold.\n    // This will improve insertion performance since we won't be rebalancing the tree on every insert.\n    // When inserting docs using `insertMultiple`, the threshold will be set to the number of docs being inserted.\n    // We can force rebalancing the tree by setting the threshold to 1 (default).\n    rebalance() {\n        if (this.root) {\n            this.root = this.rebalanceNode(this.root);\n        }\n    }\n    toJSON() {\n        return {\n            root: this.root ? this.root.toJSON() : null,\n            insertCount: this.insertCount\n        };\n    }\n    static fromJSON(json) {\n        const tree = new AVLTree();\n        tree.root = json.root ? AVLNode.fromJSON(json.root) : null;\n        tree.insertCount = json.insertCount || 0;\n        return tree;\n    }\n    insertNode(node, key, value, rebalanceThreshold) {\n        if (node === null) {\n            return new AVLNode(key, [value]);\n        }\n        const path = [];\n        let current = node;\n        let parent = null;\n        while (current !== null) {\n            path.push({ parent, node: current });\n            if (key < current.k) {\n                if (current.l === null) {\n                    current.l = new AVLNode(key, [value]);\n                    path.push({ parent: current, node: current.l });\n                    break;\n                }\n                else {\n                    parent = current;\n                    current = current.l;\n                }\n            }\n            else if (key > current.k) {\n                if (current.r === null) {\n                    current.r = new AVLNode(key, [value]);\n                    path.push({ parent: current, node: current.r });\n                    break;\n                }\n                else {\n                    parent = current;\n                    current = current.r;\n                }\n            }\n            else {\n                // Key already exists\n                current.v.add(value);\n                /*\n                if (Array.isArray(current.v)) {\n                  if (Array.isArray(value)) {\n                    ;(current.v as any[]).push(...(value as V[]))\n                  } else {\n                    ;(current.v as any[]).push(value)\n                  }\n                } else {\n                  current.v = new Set([value])\n                }\n                */\n                return node;\n            }\n        }\n        // Update heights and rebalance if necessary\n        let needRebalance = false;\n        if (this.insertCount++ % rebalanceThreshold === 0) {\n            needRebalance = true;\n        }\n        for (let i = path.length - 1; i >= 0; i--) {\n            const { parent, node: currentNode } = path[i];\n            currentNode.updateHeight();\n            if (needRebalance) {\n                const rebalancedNode = this.rebalanceNode(currentNode);\n                if (parent) {\n                    if (parent.l === currentNode) {\n                        parent.l = rebalancedNode;\n                    }\n                    else if (parent.r === currentNode) {\n                        parent.r = rebalancedNode;\n                    }\n                }\n                else {\n                    // This is the root node\n                    node = rebalancedNode;\n                }\n            }\n        }\n        return node;\n    }\n    rebalanceNode(node) {\n        const balanceFactor = node.getBalanceFactor();\n        if (balanceFactor > 1) {\n            // Left heavy\n            if (node.l && node.l.getBalanceFactor() >= 0) {\n                // Left Left Case\n                return node.rotateRight();\n            }\n            else if (node.l) {\n                // Left Right Case\n                node.l = node.l.rotateLeft();\n                return node.rotateRight();\n            }\n        }\n        if (balanceFactor < -1) {\n            // Right heavy\n            if (node.r && node.r.getBalanceFactor() <= 0) {\n                // Right Right Case\n                return node.rotateLeft();\n            }\n            else if (node.r) {\n                // Right Left Case\n                node.r = node.r.rotateRight();\n                return node.rotateLeft();\n            }\n        }\n        return node;\n    }\n    find(key) {\n        const node = this.findNodeByKey(key);\n        return node ? node.v : null;\n    }\n    contains(key) {\n        return this.find(key) !== null;\n    }\n    getSize() {\n        let count = 0;\n        const stack = [];\n        let current = this.root;\n        while (current || stack.length > 0) {\n            while (current) {\n                stack.push(current);\n                current = current.l;\n            }\n            current = stack.pop();\n            count++;\n            current = current.r;\n        }\n        return count;\n    }\n    isBalanced() {\n        if (!this.root)\n            return true;\n        const stack = [this.root];\n        while (stack.length > 0) {\n            const node = stack.pop();\n            const balanceFactor = node.getBalanceFactor();\n            if (Math.abs(balanceFactor) > 1) {\n                return false;\n            }\n            if (node.l)\n                stack.push(node.l);\n            if (node.r)\n                stack.push(node.r);\n        }\n        return true;\n    }\n    remove(key) {\n        this.root = this.removeNode(this.root, key);\n    }\n    removeDocument(key, id) {\n        const node = this.findNodeByKey(key);\n        if (!node) {\n            return;\n        }\n        if (node.v.size === 1) {\n            this.root = this.removeNode(this.root, key);\n        }\n        else {\n            node.v = new Set([...node.v.values()].filter((v) => v !== id));\n        }\n    }\n    findNodeByKey(key) {\n        let node = this.root;\n        while (node) {\n            if (key < node.k) {\n                node = node.l;\n            }\n            else if (key > node.k) {\n                node = node.r;\n            }\n            else {\n                return node;\n            }\n        }\n        return null;\n    }\n    removeNode(node, key) {\n        if (node === null)\n            return null;\n        const path = [];\n        let current = node;\n        while (current !== null && current.k !== key) {\n            path.push(current);\n            if (key < current.k) {\n                current = current.l;\n            }\n            else {\n                current = current.r;\n            }\n        }\n        if (current === null) {\n            // Key not found\n            return node;\n        }\n        // Node with only one child or no child\n        if (current.l === null || current.r === null) {\n            const child = current.l ? current.l : current.r;\n            if (path.length === 0) {\n                // Node to be deleted is root\n                node = child;\n            }\n            else {\n                const parent = path[path.length - 1];\n                if (parent.l === current) {\n                    parent.l = child;\n                }\n                else {\n                    parent.r = child;\n                }\n            }\n        }\n        else {\n            // Node with two children: Get the inorder successor\n            let successorParent = current;\n            let successor = current.r;\n            while (successor.l !== null) {\n                successorParent = successor;\n                successor = successor.l;\n            }\n            // Copy the successor's content to current node\n            current.k = successor.k;\n            current.v = successor.v;\n            // Delete the successor\n            if (successorParent.l === successor) {\n                successorParent.l = successor.r;\n            }\n            else {\n                successorParent.r = successor.r;\n            }\n            current = successorParent;\n        }\n        // Update heights and rebalance\n        path.push(current);\n        for (let i = path.length - 1; i >= 0; i--) {\n            const currentNode = path[i];\n            currentNode.updateHeight();\n            const rebalancedNode = this.rebalanceNode(currentNode);\n            if (i > 0) {\n                const parent = path[i - 1];\n                if (parent.l === currentNode) {\n                    parent.l = rebalancedNode;\n                }\n                else if (parent.r === currentNode) {\n                    parent.r = rebalancedNode;\n                }\n            }\n            else {\n                // Root node\n                node = rebalancedNode;\n            }\n        }\n        return node;\n    }\n    rangeSearch(min, max) {\n        let result = new Set();\n        const stack = [];\n        let current = this.root;\n        while (current || stack.length > 0) {\n            while (current) {\n                stack.push(current);\n                current = current.l;\n            }\n            current = stack.pop();\n            if (current.k >= min && current.k <= max) {\n                result = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.setUnion)(result, current.v);\n            }\n            if (current.k > max) {\n                break;\n            }\n            current = current.r;\n        }\n        return result;\n    }\n    greaterThan(key, inclusive = false) {\n        let result = new Set();\n        const stack = [];\n        let current = this.root;\n        while (current || stack.length > 0) {\n            while (current) {\n                stack.push(current);\n                current = current.r; // Traverse right subtree first\n            }\n            current = stack.pop();\n            if ((inclusive && current.k >= key) || (!inclusive && current.k > key)) {\n                result = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.setUnion)(result, current.v);\n            }\n            else if (current.k <= key) {\n                break; // Since we're traversing in descending order, we can break early\n            }\n            current = current.l;\n        }\n        return result;\n    }\n    lessThan(key, inclusive = false) {\n        let result = new Set();\n        const stack = [];\n        let current = this.root;\n        while (current || stack.length > 0) {\n            while (current) {\n                stack.push(current);\n                current = current.l;\n            }\n            current = stack.pop();\n            if ((inclusive && current.k <= key) || (!inclusive && current.k < key)) {\n                result = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.setUnion)(result, current.v);\n            }\n            else if (current.k > key) {\n                break; // Since we're traversing in ascending order, we can break early\n            }\n            current = current.r;\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=avl.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL2F2bC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDaEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrQ0FBa0M7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msa0NBQWtDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLG9CQUFvQjtBQUNwQixxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDLG9CQUFvQiw0QkFBNEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxRQUFRO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixtREFBUTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1EQUFRO0FBQ2pDO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbURBQVE7QUFDakM7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci90cmVlcy9hdmwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0VW5pb24gfSBmcm9tICcuLi91dGlscy5qcyc7XG5leHBvcnQgY2xhc3MgQVZMTm9kZSB7XG4gICAgaztcbiAgICB2O1xuICAgIGwgPSBudWxsO1xuICAgIHIgPSBudWxsO1xuICAgIGggPSAxO1xuICAgIGNvbnN0cnVjdG9yKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5rID0ga2V5O1xuICAgICAgICB0aGlzLnYgPSBuZXcgU2V0KHZhbHVlKTtcbiAgICB9XG4gICAgdXBkYXRlSGVpZ2h0KCkge1xuICAgICAgICB0aGlzLmggPSBNYXRoLm1heChBVkxOb2RlLmdldEhlaWdodCh0aGlzLmwpLCBBVkxOb2RlLmdldEhlaWdodCh0aGlzLnIpKSArIDE7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRIZWlnaHQobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZSA/IG5vZGUuaCA6IDA7XG4gICAgfVxuICAgIGdldEJhbGFuY2VGYWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBBVkxOb2RlLmdldEhlaWdodCh0aGlzLmwpIC0gQVZMTm9kZS5nZXRIZWlnaHQodGhpcy5yKTtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgbmV3Um9vdCA9IHRoaXMucjtcbiAgICAgICAgdGhpcy5yID0gbmV3Um9vdC5sO1xuICAgICAgICBuZXdSb290LmwgPSB0aGlzO1xuICAgICAgICB0aGlzLnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICBuZXdSb290LnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICByZXR1cm4gbmV3Um9vdDtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IG5ld1Jvb3QgPSB0aGlzLmw7XG4gICAgICAgIHRoaXMubCA9IG5ld1Jvb3QucjtcbiAgICAgICAgbmV3Um9vdC5yID0gdGhpcztcbiAgICAgICAgdGhpcy51cGRhdGVIZWlnaHQoKTtcbiAgICAgICAgbmV3Um9vdC51cGRhdGVIZWlnaHQoKTtcbiAgICAgICAgcmV0dXJuIG5ld1Jvb3Q7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGs6IHRoaXMuayxcbiAgICAgICAgICAgIHY6IEFycmF5LmZyb20odGhpcy52KSxcbiAgICAgICAgICAgIGw6IHRoaXMubCA/IHRoaXMubC50b0pTT04oKSA6IG51bGwsXG4gICAgICAgICAgICByOiB0aGlzLnIgPyB0aGlzLnIudG9KU09OKCkgOiBudWxsLFxuICAgICAgICAgICAgaDogdGhpcy5oXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXcgQVZMTm9kZShqc29uLmssIGpzb24udik7XG4gICAgICAgIG5vZGUubCA9IGpzb24ubCA/IEFWTE5vZGUuZnJvbUpTT04oanNvbi5sKSA6IG51bGw7XG4gICAgICAgIG5vZGUuciA9IGpzb24uciA/IEFWTE5vZGUuZnJvbUpTT04oanNvbi5yKSA6IG51bGw7XG4gICAgICAgIG5vZGUuaCA9IGpzb24uaDtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFWTFRyZWUge1xuICAgIHJvb3QgPSBudWxsO1xuICAgIGluc2VydENvdW50ID0gMDtcbiAgICBjb25zdHJ1Y3RvcihrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSBuZXcgQVZMTm9kZShrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnNlcnQoa2V5LCB2YWx1ZSwgcmViYWxhbmNlVGhyZXNob2xkID0gMTAwMCkge1xuICAgICAgICB0aGlzLnJvb3QgPSB0aGlzLmluc2VydE5vZGUodGhpcy5yb290LCBrZXksIHZhbHVlLCByZWJhbGFuY2VUaHJlc2hvbGQpO1xuICAgIH1cbiAgICBpbnNlcnRNdWx0aXBsZShrZXksIHZhbHVlLCByZWJhbGFuY2VUaHJlc2hvbGQgPSAxMDAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnQoa2V5LCB2LCByZWJhbGFuY2VUaHJlc2hvbGQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFJlYmFsYW5jZSB0aGUgdHJlZSBpZiB0aGUgaW5zZXJ0IGNvdW50IHJlYWNoZXMgdGhlIHRocmVzaG9sZC5cbiAgICAvLyBUaGlzIHdpbGwgaW1wcm92ZSBpbnNlcnRpb24gcGVyZm9ybWFuY2Ugc2luY2Ugd2Ugd29uJ3QgYmUgcmViYWxhbmNpbmcgdGhlIHRyZWUgb24gZXZlcnkgaW5zZXJ0LlxuICAgIC8vIFdoZW4gaW5zZXJ0aW5nIGRvY3MgdXNpbmcgYGluc2VydE11bHRpcGxlYCwgdGhlIHRocmVzaG9sZCB3aWxsIGJlIHNldCB0byB0aGUgbnVtYmVyIG9mIGRvY3MgYmVpbmcgaW5zZXJ0ZWQuXG4gICAgLy8gV2UgY2FuIGZvcmNlIHJlYmFsYW5jaW5nIHRoZSB0cmVlIGJ5IHNldHRpbmcgdGhlIHRocmVzaG9sZCB0byAxIChkZWZhdWx0KS5cbiAgICByZWJhbGFuY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3QpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHRoaXMucmViYWxhbmNlTm9kZSh0aGlzLnJvb3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb3Q6IHRoaXMucm9vdCA/IHRoaXMucm9vdC50b0pTT04oKSA6IG51bGwsXG4gICAgICAgICAgICBpbnNlcnRDb3VudDogdGhpcy5pbnNlcnRDb3VudFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICBjb25zdCB0cmVlID0gbmV3IEFWTFRyZWUoKTtcbiAgICAgICAgdHJlZS5yb290ID0ganNvbi5yb290ID8gQVZMTm9kZS5mcm9tSlNPTihqc29uLnJvb3QpIDogbnVsbDtcbiAgICAgICAgdHJlZS5pbnNlcnRDb3VudCA9IGpzb24uaW5zZXJ0Q291bnQgfHwgMDtcbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfVxuICAgIGluc2VydE5vZGUobm9kZSwga2V5LCB2YWx1ZSwgcmViYWxhbmNlVGhyZXNob2xkKSB7XG4gICAgICAgIGlmIChub2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFWTE5vZGUoa2V5LCBbdmFsdWVdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gW107XG4gICAgICAgIGxldCBjdXJyZW50ID0gbm9kZTtcbiAgICAgICAgbGV0IHBhcmVudCA9IG51bGw7XG4gICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwYXRoLnB1c2goeyBwYXJlbnQsIG5vZGU6IGN1cnJlbnQgfSk7XG4gICAgICAgICAgICBpZiAoa2V5IDwgY3VycmVudC5rKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQubCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmwgPSBuZXcgQVZMTm9kZShrZXksIFt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2goeyBwYXJlbnQ6IGN1cnJlbnQsIG5vZGU6IGN1cnJlbnQubCB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA+IGN1cnJlbnQuaykge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LnIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudC5yID0gbmV3IEFWTE5vZGUoa2V5LCBbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKHsgcGFyZW50OiBjdXJyZW50LCBub2RlOiBjdXJyZW50LnIgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBLZXkgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICAgICAgICBjdXJyZW50LnYuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnQudikpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICA7KGN1cnJlbnQudiBhcyBhbnlbXSkucHVzaCguLi4odmFsdWUgYXMgVltdKSlcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIDsoY3VycmVudC52IGFzIGFueVtdKS5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjdXJyZW50LnYgPSBuZXcgU2V0KFt2YWx1ZV0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIGhlaWdodHMgYW5kIHJlYmFsYW5jZSBpZiBuZWNlc3NhcnlcbiAgICAgICAgbGV0IG5lZWRSZWJhbGFuY2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaW5zZXJ0Q291bnQrKyAlIHJlYmFsYW5jZVRocmVzaG9sZCA9PT0gMCkge1xuICAgICAgICAgICAgbmVlZFJlYmFsYW5jZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGFyZW50LCBub2RlOiBjdXJyZW50Tm9kZSB9ID0gcGF0aFtpXTtcbiAgICAgICAgICAgIGN1cnJlbnROb2RlLnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICAgICAgaWYgKG5lZWRSZWJhbGFuY2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWJhbGFuY2VkTm9kZSA9IHRoaXMucmViYWxhbmNlTm9kZShjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50LmwgPT09IGN1cnJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQubCA9IHJlYmFsYW5jZWROb2RlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcmVudC5yID09PSBjdXJyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnIgPSByZWJhbGFuY2VkTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgcm9vdCBub2RlXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSByZWJhbGFuY2VkTm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIHJlYmFsYW5jZU5vZGUobm9kZSkge1xuICAgICAgICBjb25zdCBiYWxhbmNlRmFjdG9yID0gbm9kZS5nZXRCYWxhbmNlRmFjdG9yKCk7XG4gICAgICAgIGlmIChiYWxhbmNlRmFjdG9yID4gMSkge1xuICAgICAgICAgICAgLy8gTGVmdCBoZWF2eVxuICAgICAgICAgICAgaWYgKG5vZGUubCAmJiBub2RlLmwuZ2V0QmFsYW5jZUZhY3RvcigpID49IDApIHtcbiAgICAgICAgICAgICAgICAvLyBMZWZ0IExlZnQgQ2FzZVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnJvdGF0ZVJpZ2h0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub2RlLmwpIHtcbiAgICAgICAgICAgICAgICAvLyBMZWZ0IFJpZ2h0IENhc2VcbiAgICAgICAgICAgICAgICBub2RlLmwgPSBub2RlLmwucm90YXRlTGVmdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnJvdGF0ZVJpZ2h0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhbGFuY2VGYWN0b3IgPCAtMSkge1xuICAgICAgICAgICAgLy8gUmlnaHQgaGVhdnlcbiAgICAgICAgICAgIGlmIChub2RlLnIgJiYgbm9kZS5yLmdldEJhbGFuY2VGYWN0b3IoKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgUmlnaHQgQ2FzZVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnJvdGF0ZUxlZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUucikge1xuICAgICAgICAgICAgICAgIC8vIFJpZ2h0IExlZnQgQ2FzZVxuICAgICAgICAgICAgICAgIG5vZGUuciA9IG5vZGUuci5yb3RhdGVSaWdodCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnJvdGF0ZUxlZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgZmluZChrZXkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmluZE5vZGVCeUtleShrZXkpO1xuICAgICAgICByZXR1cm4gbm9kZSA/IG5vZGUudiA6IG51bGw7XG4gICAgfVxuICAgIGNvbnRhaW5zKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKGtleSkgIT09IG51bGw7XG4gICAgfVxuICAgIGdldFNpemUoKSB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5yb290O1xuICAgICAgICB3aGlsZSAoY3VycmVudCB8fCBzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG4gICAgaXNCYWxhbmNlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJvb3QpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbdGhpcy5yb290XTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGNvbnN0IGJhbGFuY2VGYWN0b3IgPSBub2RlLmdldEJhbGFuY2VGYWN0b3IoKTtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhiYWxhbmNlRmFjdG9yKSA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5sKVxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobm9kZS5sKTtcbiAgICAgICAgICAgIGlmIChub2RlLnIpXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChub2RlLnIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZW1vdmUoa2V5KSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHRoaXMucmVtb3ZlTm9kZSh0aGlzLnJvb3QsIGtleSk7XG4gICAgfVxuICAgIHJlbW92ZURvY3VtZW50KGtleSwgaWQpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmluZE5vZGVCeUtleShrZXkpO1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS52LnNpemUgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHRoaXMucmVtb3ZlTm9kZSh0aGlzLnJvb3QsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLnYgPSBuZXcgU2V0KFsuLi5ub2RlLnYudmFsdWVzKCldLmZpbHRlcigodikgPT4gdiAhPT0gaWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kTm9kZUJ5S2V5KGtleSkge1xuICAgICAgICBsZXQgbm9kZSA9IHRoaXMucm9vdDtcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPCBub2RlLmspIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID4gbm9kZS5rKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZW1vdmVOb2RlKG5vZGUsIGtleSkge1xuICAgICAgICBpZiAobm9kZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBwYXRoID0gW107XG4gICAgICAgIGxldCBjdXJyZW50ID0gbm9kZTtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IG51bGwgJiYgY3VycmVudC5rICE9PSBrZXkpIHtcbiAgICAgICAgICAgIHBhdGgucHVzaChjdXJyZW50KTtcbiAgICAgICAgICAgIGlmIChrZXkgPCBjdXJyZW50LmspIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gS2V5IG5vdCBmb3VuZFxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSB3aXRoIG9ubHkgb25lIGNoaWxkIG9yIG5vIGNoaWxkXG4gICAgICAgIGlmIChjdXJyZW50LmwgPT09IG51bGwgfHwgY3VycmVudC5yID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGN1cnJlbnQubCA/IGN1cnJlbnQubCA6IGN1cnJlbnQucjtcbiAgICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIE5vZGUgdG8gYmUgZGVsZXRlZCBpcyByb290XG4gICAgICAgICAgICAgICAgbm9kZSA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQubCA9PT0gY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQubCA9IGNoaWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnIgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBOb2RlIHdpdGggdHdvIGNoaWxkcmVuOiBHZXQgdGhlIGlub3JkZXIgc3VjY2Vzc29yXG4gICAgICAgICAgICBsZXQgc3VjY2Vzc29yUGFyZW50ID0gY3VycmVudDtcbiAgICAgICAgICAgIGxldCBzdWNjZXNzb3IgPSBjdXJyZW50LnI7XG4gICAgICAgICAgICB3aGlsZSAoc3VjY2Vzc29yLmwgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzb3JQYXJlbnQgPSBzdWNjZXNzb3I7XG4gICAgICAgICAgICAgICAgc3VjY2Vzc29yID0gc3VjY2Vzc29yLmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDb3B5IHRoZSBzdWNjZXNzb3IncyBjb250ZW50IHRvIGN1cnJlbnQgbm9kZVxuICAgICAgICAgICAgY3VycmVudC5rID0gc3VjY2Vzc29yLms7XG4gICAgICAgICAgICBjdXJyZW50LnYgPSBzdWNjZXNzb3IudjtcbiAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgc3VjY2Vzc29yXG4gICAgICAgICAgICBpZiAoc3VjY2Vzc29yUGFyZW50LmwgPT09IHN1Y2Nlc3Nvcikge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NvclBhcmVudC5sID0gc3VjY2Vzc29yLnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzb3JQYXJlbnQuciA9IHN1Y2Nlc3Nvci5yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCA9IHN1Y2Nlc3NvclBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgaGVpZ2h0cyBhbmQgcmViYWxhbmNlXG4gICAgICAgIHBhdGgucHVzaChjdXJyZW50KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlID0gcGF0aFtpXTtcbiAgICAgICAgICAgIGN1cnJlbnROb2RlLnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICAgICAgY29uc3QgcmViYWxhbmNlZE5vZGUgPSB0aGlzLnJlYmFsYW5jZU5vZGUoY3VycmVudE5vZGUpO1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGF0aFtpIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudC5sID09PSBjdXJyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQubCA9IHJlYmFsYW5jZWROb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJlbnQuciA9PT0gY3VycmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnIgPSByZWJhbGFuY2VkTm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBSb290IG5vZGVcbiAgICAgICAgICAgICAgICBub2RlID0gcmViYWxhbmNlZE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIHJhbmdlU2VhcmNoKG1pbiwgbWF4KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgU2V0KCk7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5yb290O1xuICAgICAgICB3aGlsZSAoY3VycmVudCB8fCBzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50LmsgPj0gbWluICYmIGN1cnJlbnQuayA8PSBtYXgpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBzZXRVbmlvbihyZXN1bHQsIGN1cnJlbnQudik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudC5rID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGdyZWF0ZXJUaGFuKGtleSwgaW5jbHVzaXZlID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBTZXQoKTtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnJvb3Q7XG4gICAgICAgIHdoaWxlIChjdXJyZW50IHx8IHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChjdXJyZW50KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5yOyAvLyBUcmF2ZXJzZSByaWdodCBzdWJ0cmVlIGZpcnN0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBpZiAoKGluY2x1c2l2ZSAmJiBjdXJyZW50LmsgPj0ga2V5KSB8fCAoIWluY2x1c2l2ZSAmJiBjdXJyZW50LmsgPiBrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gc2V0VW5pb24ocmVzdWx0LCBjdXJyZW50LnYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudC5rIDw9IGtleSkge1xuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBTaW5jZSB3ZSdyZSB0cmF2ZXJzaW5nIGluIGRlc2NlbmRpbmcgb3JkZXIsIHdlIGNhbiBicmVhayBlYXJseVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBsZXNzVGhhbihrZXksIGluY2x1c2l2ZSA9IGZhbHNlKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgU2V0KCk7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW107XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5yb290O1xuICAgICAgICB3aGlsZSAoY3VycmVudCB8fCBzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmICgoaW5jbHVzaXZlICYmIGN1cnJlbnQuayA8PSBrZXkpIHx8ICghaW5jbHVzaXZlICYmIGN1cnJlbnQuayA8IGtleSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBzZXRVbmlvbihyZXN1bHQsIGN1cnJlbnQudik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50LmsgPiBrZXkpIHtcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gU2luY2Ugd2UncmUgdHJhdmVyc2luZyBpbiBhc2NlbmRpbmcgb3JkZXIsIHdlIGNhbiBicmVhayBlYXJseVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF2bC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/avl.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/bkd.js":
/*!*************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/trees/bkd.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BKDTree: () => (/* binding */ BKDTree)\n/* harmony export */ });\nconst K = 2; // 2D points\nconst EARTH_RADIUS = 6371e3; // Earth radius in meters\nclass BKDNode {\n    point;\n    docIDs;\n    left;\n    right;\n    parent;\n    constructor(point, docIDs) {\n        this.point = point;\n        this.docIDs = new Set(docIDs);\n        this.left = null;\n        this.right = null;\n        this.parent = null;\n    }\n    toJSON() {\n        return {\n            point: this.point,\n            docIDs: Array.from(this.docIDs),\n            left: this.left ? this.left.toJSON() : null,\n            right: this.right ? this.right.toJSON() : null\n        };\n    }\n    static fromJSON(json, parent = null) {\n        const node = new BKDNode(json.point, json.docIDs);\n        node.parent = parent;\n        if (json.left) {\n            node.left = BKDNode.fromJSON(json.left, node);\n        }\n        if (json.right) {\n            node.right = BKDNode.fromJSON(json.right, node);\n        }\n        return node;\n    }\n}\nclass BKDTree {\n    root;\n    nodeMap;\n    constructor() {\n        this.root = null;\n        this.nodeMap = new Map();\n    }\n    getPointKey(point) {\n        return `${point.lon},${point.lat}`;\n    }\n    insert(point, docIDs) {\n        const pointKey = this.getPointKey(point);\n        const existingNode = this.nodeMap.get(pointKey);\n        if (existingNode) {\n            docIDs.forEach((id) => existingNode.docIDs.add(id));\n            return;\n        }\n        const newNode = new BKDNode(point, docIDs);\n        this.nodeMap.set(pointKey, newNode);\n        if (this.root == null) {\n            this.root = newNode;\n            return;\n        }\n        let node = this.root;\n        let depth = 0;\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const axis = depth % K;\n            if (axis === 0) {\n                if (point.lon < node.point.lon) {\n                    if (node.left == null) {\n                        node.left = newNode;\n                        newNode.parent = node;\n                        return;\n                    }\n                    node = node.left;\n                }\n                else {\n                    if (node.right == null) {\n                        node.right = newNode;\n                        newNode.parent = node;\n                        return;\n                    }\n                    node = node.right;\n                }\n            }\n            else {\n                if (point.lat < node.point.lat) {\n                    if (node.left == null) {\n                        node.left = newNode;\n                        newNode.parent = node;\n                        return;\n                    }\n                    node = node.left;\n                }\n                else {\n                    if (node.right == null) {\n                        node.right = newNode;\n                        newNode.parent = node;\n                        return;\n                    }\n                    node = node.right;\n                }\n            }\n            depth++;\n        }\n    }\n    contains(point) {\n        const pointKey = this.getPointKey(point);\n        return this.nodeMap.has(pointKey);\n    }\n    getDocIDsByCoordinates(point) {\n        const pointKey = this.getPointKey(point);\n        const node = this.nodeMap.get(pointKey);\n        if (node) {\n            return Array.from(node.docIDs);\n        }\n        return null;\n    }\n    removeDocByID(point, docID) {\n        const pointKey = this.getPointKey(point);\n        const node = this.nodeMap.get(pointKey);\n        if (node) {\n            node.docIDs.delete(docID);\n            if (node.docIDs.size === 0) {\n                this.nodeMap.delete(pointKey);\n                this.deleteNode(node);\n            }\n        }\n    }\n    deleteNode(node) {\n        const parent = node.parent;\n        const child = node.left ? node.left : node.right;\n        if (child) {\n            child.parent = parent;\n        }\n        if (parent) {\n            if (parent.left === node) {\n                parent.left = child;\n            }\n            else if (parent.right === node) {\n                parent.right = child;\n            }\n        }\n        else {\n            this.root = child;\n            if (this.root) {\n                this.root.parent = null;\n            }\n        }\n    }\n    searchByRadius(center, radius, inclusive = true, sort = 'asc', highPrecision = false) {\n        const distanceFn = highPrecision ? BKDTree.vincentyDistance : BKDTree.haversineDistance;\n        const stack = [{ node: this.root, depth: 0 }];\n        const result = [];\n        while (stack.length > 0) {\n            const { node, depth } = stack.pop();\n            if (node == null)\n                continue;\n            const dist = distanceFn(center, node.point);\n            if (inclusive ? dist <= radius : dist > radius) {\n                result.push({ point: node.point, docIDs: Array.from(node.docIDs) });\n            }\n            if (node.left != null) {\n                stack.push({ node: node.left, depth: depth + 1 });\n            }\n            if (node.right != null) {\n                stack.push({ node: node.right, depth: depth + 1 });\n            }\n        }\n        if (sort) {\n            result.sort((a, b) => {\n                const distA = distanceFn(center, a.point);\n                const distB = distanceFn(center, b.point);\n                return sort.toLowerCase() === 'asc' ? distA - distB : distB - distA;\n            });\n        }\n        return result;\n    }\n    searchByPolygon(polygon, inclusive = true, sort = null, highPrecision = false) {\n        const stack = [{ node: this.root, depth: 0 }];\n        const result = [];\n        while (stack.length > 0) {\n            const { node, depth } = stack.pop();\n            if (node == null)\n                continue;\n            if (node.left != null) {\n                stack.push({ node: node.left, depth: depth + 1 });\n            }\n            if (node.right != null) {\n                stack.push({ node: node.right, depth: depth + 1 });\n            }\n            const isInsidePolygon = BKDTree.isPointInPolygon(polygon, node.point);\n            if ((isInsidePolygon && inclusive) || (!isInsidePolygon && !inclusive)) {\n                result.push({ point: node.point, docIDs: Array.from(node.docIDs) });\n            }\n        }\n        const centroid = BKDTree.calculatePolygonCentroid(polygon);\n        if (sort) {\n            const distanceFn = highPrecision ? BKDTree.vincentyDistance : BKDTree.haversineDistance;\n            result.sort((a, b) => {\n                const distA = distanceFn(centroid, a.point);\n                const distB = distanceFn(centroid, b.point);\n                return sort.toLowerCase() === 'asc' ? distA - distB : distB - distA;\n            });\n        }\n        return result;\n    }\n    toJSON() {\n        return {\n            root: this.root ? this.root.toJSON() : null\n        };\n    }\n    static fromJSON(json) {\n        const tree = new BKDTree();\n        if (json.root) {\n            tree.root = BKDNode.fromJSON(json.root);\n            tree.buildNodeMap(tree.root);\n        }\n        return tree;\n    }\n    buildNodeMap(node) {\n        if (node == null)\n            return;\n        const pointKey = this.getPointKey(node.point);\n        this.nodeMap.set(pointKey, node);\n        if (node.left) {\n            this.buildNodeMap(node.left);\n        }\n        if (node.right) {\n            this.buildNodeMap(node.right);\n        }\n    }\n    static calculatePolygonCentroid(polygon) {\n        let totalArea = 0;\n        let centroidX = 0;\n        let centroidY = 0;\n        const polygonLength = polygon.length;\n        for (let i = 0, j = polygonLength - 1; i < polygonLength; j = i++) {\n            const xi = polygon[i].lon;\n            const yi = polygon[i].lat;\n            const xj = polygon[j].lon;\n            const yj = polygon[j].lat;\n            const areaSegment = xi * yj - xj * yi;\n            totalArea += areaSegment;\n            centroidX += (xi + xj) * areaSegment;\n            centroidY += (yi + yj) * areaSegment;\n        }\n        totalArea /= 2;\n        const centroidCoordinate = 6 * totalArea;\n        centroidX /= centroidCoordinate;\n        centroidY /= centroidCoordinate;\n        return { lon: centroidX, lat: centroidY };\n    }\n    static isPointInPolygon(polygon, point) {\n        let isInside = false;\n        const x = point.lon;\n        const y = point.lat;\n        const polygonLength = polygon.length;\n        for (let i = 0, j = polygonLength - 1; i < polygonLength; j = i++) {\n            const xi = polygon[i].lon;\n            const yi = polygon[i].lat;\n            const xj = polygon[j].lon;\n            const yj = polygon[j].lat;\n            const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n            if (intersect)\n                isInside = !isInside;\n        }\n        return isInside;\n    }\n    static haversineDistance(coord1, coord2) {\n        const P = Math.PI / 180;\n        const lat1 = coord1.lat * P;\n        const lat2 = coord2.lat * P;\n        const deltaLat = (coord2.lat - coord1.lat) * P;\n        const deltaLon = (coord2.lon - coord1.lon) * P;\n        const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +\n            Math.cos(lat1) * Math.cos(lat2) * Math.sin(deltaLon / 2) * Math.sin(deltaLon / 2);\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        return EARTH_RADIUS * c;\n    }\n    static vincentyDistance(coord1, coord2) {\n        const a = 6378137;\n        const f = 1 / 298.257223563;\n        const b = (1 - f) * a;\n        const P = Math.PI / 180;\n        const lat1 = coord1.lat * P;\n        const lat2 = coord2.lat * P;\n        const deltaLon = (coord2.lon - coord1.lon) * P;\n        const U1 = Math.atan((1 - f) * Math.tan(lat1));\n        const U2 = Math.atan((1 - f) * Math.tan(lat2));\n        const sinU1 = Math.sin(U1);\n        const cosU1 = Math.cos(U1);\n        const sinU2 = Math.sin(U2);\n        const cosU2 = Math.cos(U2);\n        let lambda = deltaLon;\n        let prevLambda;\n        let iterationLimit = 1000;\n        let sinSigma;\n        let cosSigma;\n        let sigma;\n        let sinAlpha;\n        let cos2Alpha;\n        let cos2SigmaM;\n        do {\n            const sinLambda = Math.sin(lambda);\n            const cosLambda = Math.cos(lambda);\n            sinSigma = Math.sqrt(cosU2 * sinLambda * (cosU2 * sinLambda) +\n                (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda) * (cosU1 * sinU2 - sinU1 * cosU2 * cosLambda));\n            if (sinSigma === 0)\n                return 0; // co-incident points\n            cosSigma = sinU1 * sinU2 + cosU1 * cosU2 * cosLambda;\n            sigma = Math.atan2(sinSigma, cosSigma);\n            sinAlpha = (cosU1 * cosU2 * sinLambda) / sinSigma;\n            cos2Alpha = 1 - sinAlpha * sinAlpha;\n            cos2SigmaM = cosSigma - (2 * sinU1 * sinU2) / cos2Alpha;\n            if (isNaN(cos2SigmaM))\n                cos2SigmaM = 0;\n            const C = (f / 16) * cos2Alpha * (4 + f * (4 - 3 * cos2Alpha));\n            prevLambda = lambda;\n            lambda =\n                deltaLon +\n                    (1 - C) *\n                        f *\n                        sinAlpha *\n                        (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));\n        } while (Math.abs(lambda - prevLambda) > 1e-12 && --iterationLimit > 0);\n        if (iterationLimit === 0) {\n            return NaN;\n        }\n        const uSquared = (cos2Alpha * (a * a - b * b)) / (b * b);\n        const A = 1 + (uSquared / 16384) * (4096 + uSquared * (-768 + uSquared * (320 - 175 * uSquared)));\n        const B = (uSquared / 1024) * (256 + uSquared * (-128 + uSquared * (74 - 47 * uSquared)));\n        const deltaSigma = B *\n            sinSigma *\n            (cos2SigmaM +\n                (B / 4) *\n                    (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) -\n                        (B / 6) * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));\n        const s = b * A * (sigma - deltaSigma);\n        return s;\n    }\n}\n//# sourceMappingURL=bkd.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL2JrZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsYUFBYTtBQUNiLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFVBQVUsR0FBRyxVQUFVO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkJBQTJCO0FBQ3BEO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvREFBb0Q7QUFDbEY7QUFDQTtBQUNBLDZCQUE2QixtQ0FBbUM7QUFDaEU7QUFDQTtBQUNBLDZCQUE2QixvQ0FBb0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkJBQTJCO0FBQ3BEO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUNBQW1DO0FBQ2hFO0FBQ0E7QUFDQSw2QkFBNkIsb0NBQW9DO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvREFBb0Q7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxtQkFBbUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG1CQUFtQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL2JrZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBLID0gMjsgLy8gMkQgcG9pbnRzXG5jb25zdCBFQVJUSF9SQURJVVMgPSA2MzcxZTM7IC8vIEVhcnRoIHJhZGl1cyBpbiBtZXRlcnNcbmNsYXNzIEJLRE5vZGUge1xuICAgIHBvaW50O1xuICAgIGRvY0lEcztcbiAgICBsZWZ0O1xuICAgIHJpZ2h0O1xuICAgIHBhcmVudDtcbiAgICBjb25zdHJ1Y3Rvcihwb2ludCwgZG9jSURzKSB7XG4gICAgICAgIHRoaXMucG9pbnQgPSBwb2ludDtcbiAgICAgICAgdGhpcy5kb2NJRHMgPSBuZXcgU2V0KGRvY0lEcyk7XG4gICAgICAgIHRoaXMubGVmdCA9IG51bGw7XG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsO1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvaW50OiB0aGlzLnBvaW50LFxuICAgICAgICAgICAgZG9jSURzOiBBcnJheS5mcm9tKHRoaXMuZG9jSURzKSxcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMubGVmdCA/IHRoaXMubGVmdC50b0pTT04oKSA6IG51bGwsXG4gICAgICAgICAgICByaWdodDogdGhpcy5yaWdodCA/IHRoaXMucmlnaHQudG9KU09OKCkgOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uLCBwYXJlbnQgPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXcgQktETm9kZShqc29uLnBvaW50LCBqc29uLmRvY0lEcyk7XG4gICAgICAgIG5vZGUucGFyZW50ID0gcGFyZW50O1xuICAgICAgICBpZiAoanNvbi5sZWZ0KSB7XG4gICAgICAgICAgICBub2RlLmxlZnQgPSBCS0ROb2RlLmZyb21KU09OKGpzb24ubGVmdCwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpzb24ucmlnaHQpIHtcbiAgICAgICAgICAgIG5vZGUucmlnaHQgPSBCS0ROb2RlLmZyb21KU09OKGpzb24ucmlnaHQsIG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCS0RUcmVlIHtcbiAgICByb290O1xuICAgIG5vZGVNYXA7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgICAgIHRoaXMubm9kZU1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZ2V0UG9pbnRLZXkocG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIGAke3BvaW50Lmxvbn0sJHtwb2ludC5sYXR9YDtcbiAgICB9XG4gICAgaW5zZXJ0KHBvaW50LCBkb2NJRHMpIHtcbiAgICAgICAgY29uc3QgcG9pbnRLZXkgPSB0aGlzLmdldFBvaW50S2V5KHBvaW50KTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdOb2RlID0gdGhpcy5ub2RlTWFwLmdldChwb2ludEtleSk7XG4gICAgICAgIGlmIChleGlzdGluZ05vZGUpIHtcbiAgICAgICAgICAgIGRvY0lEcy5mb3JFYWNoKChpZCkgPT4gZXhpc3RpbmdOb2RlLmRvY0lEcy5hZGQoaWQpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdOb2RlID0gbmV3IEJLRE5vZGUocG9pbnQsIGRvY0lEcyk7XG4gICAgICAgIHRoaXMubm9kZU1hcC5zZXQocG9pbnRLZXksIG5ld05vZGUpO1xuICAgICAgICBpZiAodGhpcy5yb290ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IG5ld05vZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGxldCBkZXB0aCA9IDA7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGF4aXMgPSBkZXB0aCAlIEs7XG4gICAgICAgICAgICBpZiAoYXhpcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC5sb24gPCBub2RlLnBvaW50Lmxvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5sZWZ0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubGVmdCA9IG5ld05vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlLnBhcmVudCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLnJpZ2h0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucmlnaHQgPSBuZXdOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZS5wYXJlbnQgPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC5sYXQgPCBub2RlLnBvaW50LmxhdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5sZWZ0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubGVmdCA9IG5ld05vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlLnBhcmVudCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLnJpZ2h0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucmlnaHQgPSBuZXdOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZS5wYXJlbnQgPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udGFpbnMocG9pbnQpIHtcbiAgICAgICAgY29uc3QgcG9pbnRLZXkgPSB0aGlzLmdldFBvaW50S2V5KHBvaW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZU1hcC5oYXMocG9pbnRLZXkpO1xuICAgIH1cbiAgICBnZXREb2NJRHNCeUNvb3JkaW5hdGVzKHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHBvaW50S2V5ID0gdGhpcy5nZXRQb2ludEtleShwb2ludCk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGVNYXAuZ2V0KHBvaW50S2V5KTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5vZGUuZG9jSURzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmVtb3ZlRG9jQnlJRChwb2ludCwgZG9jSUQpIHtcbiAgICAgICAgY29uc3QgcG9pbnRLZXkgPSB0aGlzLmdldFBvaW50S2V5KHBvaW50KTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZU1hcC5nZXQocG9pbnRLZXkpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5kb2NJRHMuZGVsZXRlKGRvY0lEKTtcbiAgICAgICAgICAgIGlmIChub2RlLmRvY0lEcy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlTWFwLmRlbGV0ZShwb2ludEtleSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGVOb2RlKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRlbGV0ZU5vZGUobm9kZSkge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudDtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBub2RlLmxlZnQgPyBub2RlLmxlZnQgOiBub2RlLnJpZ2h0O1xuICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAocGFyZW50LmxlZnQgPT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQubGVmdCA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyZW50LnJpZ2h0ID09PSBub2RlKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gY2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSBjaGlsZDtcbiAgICAgICAgICAgIGlmICh0aGlzLnJvb3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3QucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWFyY2hCeVJhZGl1cyhjZW50ZXIsIHJhZGl1cywgaW5jbHVzaXZlID0gdHJ1ZSwgc29ydCA9ICdhc2MnLCBoaWdoUHJlY2lzaW9uID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VGbiA9IGhpZ2hQcmVjaXNpb24gPyBCS0RUcmVlLnZpbmNlbnR5RGlzdGFuY2UgOiBCS0RUcmVlLmhhdmVyc2luZURpc3RhbmNlO1xuICAgICAgICBjb25zdCBzdGFjayA9IFt7IG5vZGU6IHRoaXMucm9vdCwgZGVwdGg6IDAgfV07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgeyBub2RlLCBkZXB0aCB9ID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZGlzdCA9IGRpc3RhbmNlRm4oY2VudGVyLCBub2RlLnBvaW50KTtcbiAgICAgICAgICAgIGlmIChpbmNsdXNpdmUgPyBkaXN0IDw9IHJhZGl1cyA6IGRpc3QgPiByYWRpdXMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IHBvaW50OiBub2RlLnBvaW50LCBkb2NJRHM6IEFycmF5LmZyb20obm9kZS5kb2NJRHMpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5vZGUubGVmdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7IG5vZGU6IG5vZGUubGVmdCwgZGVwdGg6IGRlcHRoICsgMSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlLnJpZ2h0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHsgbm9kZTogbm9kZS5yaWdodCwgZGVwdGg6IGRlcHRoICsgMSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc29ydCkge1xuICAgICAgICAgICAgcmVzdWx0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0QSA9IGRpc3RhbmNlRm4oY2VudGVyLCBhLnBvaW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0QiA9IGRpc3RhbmNlRm4oY2VudGVyLCBiLnBvaW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc29ydC50b0xvd2VyQ2FzZSgpID09PSAnYXNjJyA/IGRpc3RBIC0gZGlzdEIgOiBkaXN0QiAtIGRpc3RBO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc2VhcmNoQnlQb2x5Z29uKHBvbHlnb24sIGluY2x1c2l2ZSA9IHRydWUsIHNvcnQgPSBudWxsLCBoaWdoUHJlY2lzaW9uID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbeyBub2RlOiB0aGlzLnJvb3QsIGRlcHRoOiAwIH1dO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbm9kZSwgZGVwdGggfSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgaWYgKG5vZGUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChub2RlLmxlZnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goeyBub2RlOiBub2RlLmxlZnQsIGRlcHRoOiBkZXB0aCArIDEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5yaWdodCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7IG5vZGU6IG5vZGUucmlnaHQsIGRlcHRoOiBkZXB0aCArIDEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc0luc2lkZVBvbHlnb24gPSBCS0RUcmVlLmlzUG9pbnRJblBvbHlnb24ocG9seWdvbiwgbm9kZS5wb2ludCk7XG4gICAgICAgICAgICBpZiAoKGlzSW5zaWRlUG9seWdvbiAmJiBpbmNsdXNpdmUpIHx8ICghaXNJbnNpZGVQb2x5Z29uICYmICFpbmNsdXNpdmUpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBwb2ludDogbm9kZS5wb2ludCwgZG9jSURzOiBBcnJheS5mcm9tKG5vZGUuZG9jSURzKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjZW50cm9pZCA9IEJLRFRyZWUuY2FsY3VsYXRlUG9seWdvbkNlbnRyb2lkKHBvbHlnb24pO1xuICAgICAgICBpZiAoc29ydCkge1xuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VGbiA9IGhpZ2hQcmVjaXNpb24gPyBCS0RUcmVlLnZpbmNlbnR5RGlzdGFuY2UgOiBCS0RUcmVlLmhhdmVyc2luZURpc3RhbmNlO1xuICAgICAgICAgICAgcmVzdWx0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0QSA9IGRpc3RhbmNlRm4oY2VudHJvaWQsIGEucG9pbnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RCID0gZGlzdGFuY2VGbihjZW50cm9pZCwgYi5wb2ludCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvcnQudG9Mb3dlckNhc2UoKSA9PT0gJ2FzYycgPyBkaXN0QSAtIGRpc3RCIDogZGlzdEIgLSBkaXN0QTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb3Q6IHRoaXMucm9vdCA/IHRoaXMucm9vdC50b0pTT04oKSA6IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgY29uc3QgdHJlZSA9IG5ldyBCS0RUcmVlKCk7XG4gICAgICAgIGlmIChqc29uLnJvb3QpIHtcbiAgICAgICAgICAgIHRyZWUucm9vdCA9IEJLRE5vZGUuZnJvbUpTT04oanNvbi5yb290KTtcbiAgICAgICAgICAgIHRyZWUuYnVpbGROb2RlTWFwKHRyZWUucm9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfVxuICAgIGJ1aWxkTm9kZU1hcChub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHBvaW50S2V5ID0gdGhpcy5nZXRQb2ludEtleShub2RlLnBvaW50KTtcbiAgICAgICAgdGhpcy5ub2RlTWFwLnNldChwb2ludEtleSwgbm9kZSk7XG4gICAgICAgIGlmIChub2RlLmxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGROb2RlTWFwKG5vZGUubGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUucmlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGROb2RlTWFwKG5vZGUucmlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGVQb2x5Z29uQ2VudHJvaWQocG9seWdvbikge1xuICAgICAgICBsZXQgdG90YWxBcmVhID0gMDtcbiAgICAgICAgbGV0IGNlbnRyb2lkWCA9IDA7XG4gICAgICAgIGxldCBjZW50cm9pZFkgPSAwO1xuICAgICAgICBjb25zdCBwb2x5Z29uTGVuZ3RoID0gcG9seWdvbi5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gcG9seWdvbkxlbmd0aCAtIDE7IGkgPCBwb2x5Z29uTGVuZ3RoOyBqID0gaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB4aSA9IHBvbHlnb25baV0ubG9uO1xuICAgICAgICAgICAgY29uc3QgeWkgPSBwb2x5Z29uW2ldLmxhdDtcbiAgICAgICAgICAgIGNvbnN0IHhqID0gcG9seWdvbltqXS5sb247XG4gICAgICAgICAgICBjb25zdCB5aiA9IHBvbHlnb25bal0ubGF0O1xuICAgICAgICAgICAgY29uc3QgYXJlYVNlZ21lbnQgPSB4aSAqIHlqIC0geGogKiB5aTtcbiAgICAgICAgICAgIHRvdGFsQXJlYSArPSBhcmVhU2VnbWVudDtcbiAgICAgICAgICAgIGNlbnRyb2lkWCArPSAoeGkgKyB4aikgKiBhcmVhU2VnbWVudDtcbiAgICAgICAgICAgIGNlbnRyb2lkWSArPSAoeWkgKyB5aikgKiBhcmVhU2VnbWVudDtcbiAgICAgICAgfVxuICAgICAgICB0b3RhbEFyZWEgLz0gMjtcbiAgICAgICAgY29uc3QgY2VudHJvaWRDb29yZGluYXRlID0gNiAqIHRvdGFsQXJlYTtcbiAgICAgICAgY2VudHJvaWRYIC89IGNlbnRyb2lkQ29vcmRpbmF0ZTtcbiAgICAgICAgY2VudHJvaWRZIC89IGNlbnRyb2lkQ29vcmRpbmF0ZTtcbiAgICAgICAgcmV0dXJuIHsgbG9uOiBjZW50cm9pZFgsIGxhdDogY2VudHJvaWRZIH07XG4gICAgfVxuICAgIHN0YXRpYyBpc1BvaW50SW5Qb2x5Z29uKHBvbHlnb24sIHBvaW50KSB7XG4gICAgICAgIGxldCBpc0luc2lkZSA9IGZhbHNlO1xuICAgICAgICBjb25zdCB4ID0gcG9pbnQubG9uO1xuICAgICAgICBjb25zdCB5ID0gcG9pbnQubGF0O1xuICAgICAgICBjb25zdCBwb2x5Z29uTGVuZ3RoID0gcG9seWdvbi5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gcG9seWdvbkxlbmd0aCAtIDE7IGkgPCBwb2x5Z29uTGVuZ3RoOyBqID0gaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB4aSA9IHBvbHlnb25baV0ubG9uO1xuICAgICAgICAgICAgY29uc3QgeWkgPSBwb2x5Z29uW2ldLmxhdDtcbiAgICAgICAgICAgIGNvbnN0IHhqID0gcG9seWdvbltqXS5sb247XG4gICAgICAgICAgICBjb25zdCB5aiA9IHBvbHlnb25bal0ubGF0O1xuICAgICAgICAgICAgY29uc3QgaW50ZXJzZWN0ID0geWkgPiB5ICE9PSB5aiA+IHkgJiYgeCA8ICgoeGogLSB4aSkgKiAoeSAtIHlpKSkgLyAoeWogLSB5aSkgKyB4aTtcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3QpXG4gICAgICAgICAgICAgICAgaXNJbnNpZGUgPSAhaXNJbnNpZGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzSW5zaWRlO1xuICAgIH1cbiAgICBzdGF0aWMgaGF2ZXJzaW5lRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgICAgICAgY29uc3QgUCA9IE1hdGguUEkgLyAxODA7XG4gICAgICAgIGNvbnN0IGxhdDEgPSBjb29yZDEubGF0ICogUDtcbiAgICAgICAgY29uc3QgbGF0MiA9IGNvb3JkMi5sYXQgKiBQO1xuICAgICAgICBjb25zdCBkZWx0YUxhdCA9IChjb29yZDIubGF0IC0gY29vcmQxLmxhdCkgKiBQO1xuICAgICAgICBjb25zdCBkZWx0YUxvbiA9IChjb29yZDIubG9uIC0gY29vcmQxLmxvbikgKiBQO1xuICAgICAgICBjb25zdCBhID0gTWF0aC5zaW4oZGVsdGFMYXQgLyAyKSAqIE1hdGguc2luKGRlbHRhTGF0IC8gMikgK1xuICAgICAgICAgICAgTWF0aC5jb3MobGF0MSkgKiBNYXRoLmNvcyhsYXQyKSAqIE1hdGguc2luKGRlbHRhTG9uIC8gMikgKiBNYXRoLnNpbihkZWx0YUxvbiAvIDIpO1xuICAgICAgICBjb25zdCBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcbiAgICAgICAgcmV0dXJuIEVBUlRIX1JBRElVUyAqIGM7XG4gICAgfVxuICAgIHN0YXRpYyB2aW5jZW50eURpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gICAgICAgIGNvbnN0IGEgPSA2Mzc4MTM3O1xuICAgICAgICBjb25zdCBmID0gMSAvIDI5OC4yNTcyMjM1NjM7XG4gICAgICAgIGNvbnN0IGIgPSAoMSAtIGYpICogYTtcbiAgICAgICAgY29uc3QgUCA9IE1hdGguUEkgLyAxODA7XG4gICAgICAgIGNvbnN0IGxhdDEgPSBjb29yZDEubGF0ICogUDtcbiAgICAgICAgY29uc3QgbGF0MiA9IGNvb3JkMi5sYXQgKiBQO1xuICAgICAgICBjb25zdCBkZWx0YUxvbiA9IChjb29yZDIubG9uIC0gY29vcmQxLmxvbikgKiBQO1xuICAgICAgICBjb25zdCBVMSA9IE1hdGguYXRhbigoMSAtIGYpICogTWF0aC50YW4obGF0MSkpO1xuICAgICAgICBjb25zdCBVMiA9IE1hdGguYXRhbigoMSAtIGYpICogTWF0aC50YW4obGF0MikpO1xuICAgICAgICBjb25zdCBzaW5VMSA9IE1hdGguc2luKFUxKTtcbiAgICAgICAgY29uc3QgY29zVTEgPSBNYXRoLmNvcyhVMSk7XG4gICAgICAgIGNvbnN0IHNpblUyID0gTWF0aC5zaW4oVTIpO1xuICAgICAgICBjb25zdCBjb3NVMiA9IE1hdGguY29zKFUyKTtcbiAgICAgICAgbGV0IGxhbWJkYSA9IGRlbHRhTG9uO1xuICAgICAgICBsZXQgcHJldkxhbWJkYTtcbiAgICAgICAgbGV0IGl0ZXJhdGlvbkxpbWl0ID0gMTAwMDtcbiAgICAgICAgbGV0IHNpblNpZ21hO1xuICAgICAgICBsZXQgY29zU2lnbWE7XG4gICAgICAgIGxldCBzaWdtYTtcbiAgICAgICAgbGV0IHNpbkFscGhhO1xuICAgICAgICBsZXQgY29zMkFscGhhO1xuICAgICAgICBsZXQgY29zMlNpZ21hTTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY29uc3Qgc2luTGFtYmRhID0gTWF0aC5zaW4obGFtYmRhKTtcbiAgICAgICAgICAgIGNvbnN0IGNvc0xhbWJkYSA9IE1hdGguY29zKGxhbWJkYSk7XG4gICAgICAgICAgICBzaW5TaWdtYSA9IE1hdGguc3FydChjb3NVMiAqIHNpbkxhbWJkYSAqIChjb3NVMiAqIHNpbkxhbWJkYSkgK1xuICAgICAgICAgICAgICAgIChjb3NVMSAqIHNpblUyIC0gc2luVTEgKiBjb3NVMiAqIGNvc0xhbWJkYSkgKiAoY29zVTEgKiBzaW5VMiAtIHNpblUxICogY29zVTIgKiBjb3NMYW1iZGEpKTtcbiAgICAgICAgICAgIGlmIChzaW5TaWdtYSA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gMDsgLy8gY28taW5jaWRlbnQgcG9pbnRzXG4gICAgICAgICAgICBjb3NTaWdtYSA9IHNpblUxICogc2luVTIgKyBjb3NVMSAqIGNvc1UyICogY29zTGFtYmRhO1xuICAgICAgICAgICAgc2lnbWEgPSBNYXRoLmF0YW4yKHNpblNpZ21hLCBjb3NTaWdtYSk7XG4gICAgICAgICAgICBzaW5BbHBoYSA9IChjb3NVMSAqIGNvc1UyICogc2luTGFtYmRhKSAvIHNpblNpZ21hO1xuICAgICAgICAgICAgY29zMkFscGhhID0gMSAtIHNpbkFscGhhICogc2luQWxwaGE7XG4gICAgICAgICAgICBjb3MyU2lnbWFNID0gY29zU2lnbWEgLSAoMiAqIHNpblUxICogc2luVTIpIC8gY29zMkFscGhhO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGNvczJTaWdtYU0pKVxuICAgICAgICAgICAgICAgIGNvczJTaWdtYU0gPSAwO1xuICAgICAgICAgICAgY29uc3QgQyA9IChmIC8gMTYpICogY29zMkFscGhhICogKDQgKyBmICogKDQgLSAzICogY29zMkFscGhhKSk7XG4gICAgICAgICAgICBwcmV2TGFtYmRhID0gbGFtYmRhO1xuICAgICAgICAgICAgbGFtYmRhID1cbiAgICAgICAgICAgICAgICBkZWx0YUxvbiArXG4gICAgICAgICAgICAgICAgICAgICgxIC0gQykgKlxuICAgICAgICAgICAgICAgICAgICAgICAgZiAqXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5BbHBoYSAqXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2lnbWEgKyBDICogc2luU2lnbWEgKiAoY29zMlNpZ21hTSArIEMgKiBjb3NTaWdtYSAqICgtMSArIDIgKiBjb3MyU2lnbWFNICogY29zMlNpZ21hTSkpKTtcbiAgICAgICAgfSB3aGlsZSAoTWF0aC5hYnMobGFtYmRhIC0gcHJldkxhbWJkYSkgPiAxZS0xMiAmJiAtLWl0ZXJhdGlvbkxpbWl0ID4gMCk7XG4gICAgICAgIGlmIChpdGVyYXRpb25MaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1U3F1YXJlZCA9IChjb3MyQWxwaGEgKiAoYSAqIGEgLSBiICogYikpIC8gKGIgKiBiKTtcbiAgICAgICAgY29uc3QgQSA9IDEgKyAodVNxdWFyZWQgLyAxNjM4NCkgKiAoNDA5NiArIHVTcXVhcmVkICogKC03NjggKyB1U3F1YXJlZCAqICgzMjAgLSAxNzUgKiB1U3F1YXJlZCkpKTtcbiAgICAgICAgY29uc3QgQiA9ICh1U3F1YXJlZCAvIDEwMjQpICogKDI1NiArIHVTcXVhcmVkICogKC0xMjggKyB1U3F1YXJlZCAqICg3NCAtIDQ3ICogdVNxdWFyZWQpKSk7XG4gICAgICAgIGNvbnN0IGRlbHRhU2lnbWEgPSBCICpcbiAgICAgICAgICAgIHNpblNpZ21hICpcbiAgICAgICAgICAgIChjb3MyU2lnbWFNICtcbiAgICAgICAgICAgICAgICAoQiAvIDQpICpcbiAgICAgICAgICAgICAgICAgICAgKGNvc1NpZ21hICogKC0xICsgMiAqIGNvczJTaWdtYU0gKiBjb3MyU2lnbWFNKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAoQiAvIDYpICogY29zMlNpZ21hTSAqICgtMyArIDQgKiBzaW5TaWdtYSAqIHNpblNpZ21hKSAqICgtMyArIDQgKiBjb3MyU2lnbWFNICogY29zMlNpZ21hTSkpKTtcbiAgICAgICAgY29uc3QgcyA9IGIgKiBBICogKHNpZ21hIC0gZGVsdGFTaWdtYSk7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJrZC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/bkd.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/bool.js":
/*!**************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/trees/bool.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BoolNode: () => (/* binding */ BoolNode)\n/* harmony export */ });\nclass BoolNode {\n    true;\n    false;\n    constructor() {\n        this.true = new Set();\n        this.false = new Set();\n    }\n    insert(value, bool) {\n        if (bool) {\n            this.true.add(value);\n        }\n        else {\n            this.false.add(value);\n        }\n    }\n    delete(value, bool) {\n        if (bool) {\n            this.true.delete(value);\n        }\n        else {\n            this.false.delete(value);\n        }\n    }\n    getSize() {\n        return this.true.size + this.false.size;\n    }\n    toJSON() {\n        return {\n            true: Array.from(this.true),\n            false: Array.from(this.false)\n        };\n    }\n    static fromJSON(json) {\n        const node = new BoolNode();\n        node.true = new Set(json.true);\n        node.false = new Set(json.false);\n        return node;\n    }\n}\n//# sourceMappingURL=bool.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL2Jvb2wuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL2Jvb2wuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEJvb2xOb2RlIHtcbiAgICB0cnVlO1xuICAgIGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRydWUgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuZmFsc2UgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIGluc2VydCh2YWx1ZSwgYm9vbCkge1xuICAgICAgICBpZiAoYm9vbCkge1xuICAgICAgICAgICAgdGhpcy50cnVlLmFkZCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZhbHNlLmFkZCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlKHZhbHVlLCBib29sKSB7XG4gICAgICAgIGlmIChib29sKSB7XG4gICAgICAgICAgICB0aGlzLnRydWUuZGVsZXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmFsc2UuZGVsZXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cnVlLnNpemUgKyB0aGlzLmZhbHNlLnNpemU7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRydWU6IEFycmF5LmZyb20odGhpcy50cnVlKSxcbiAgICAgICAgICAgIGZhbHNlOiBBcnJheS5mcm9tKHRoaXMuZmFsc2UpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXcgQm9vbE5vZGUoKTtcbiAgICAgICAgbm9kZS50cnVlID0gbmV3IFNldChqc29uLnRydWUpO1xuICAgICAgICBub2RlLmZhbHNlID0gbmV3IFNldChqc29uLmZhbHNlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ym9vbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/bool.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/flat.js":
/*!**************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/trees/flat.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FlatTree: () => (/* binding */ FlatTree)\n/* harmony export */ });\nclass FlatTree {\n    numberToDocumentId;\n    constructor() {\n        this.numberToDocumentId = new Map();\n    }\n    insert(key, value) {\n        if (this.numberToDocumentId.has(key)) {\n            this.numberToDocumentId.get(key).add(value);\n        }\n        else {\n            this.numberToDocumentId.set(key, new Set([value]));\n        }\n    }\n    find(key) {\n        const idSet = this.numberToDocumentId.get(key);\n        return idSet ? Array.from(idSet) : null;\n    }\n    remove(key) {\n        this.numberToDocumentId.delete(key);\n    }\n    removeDocument(id, key) {\n        const idSet = this.numberToDocumentId.get(key);\n        if (idSet) {\n            idSet.delete(id);\n            if (idSet.size === 0) {\n                this.numberToDocumentId.delete(key);\n            }\n        }\n    }\n    contains(key) {\n        return this.numberToDocumentId.has(key);\n    }\n    getSize() {\n        let size = 0;\n        for (const idSet of this.numberToDocumentId.values()) {\n            size += idSet.size;\n        }\n        return size;\n    }\n    filter(operation) {\n        const operationKeys = Object.keys(operation);\n        if (operationKeys.length !== 1) {\n            throw new Error('Invalid operation');\n        }\n        const operationType = operationKeys[0];\n        switch (operationType) {\n            case 'eq': {\n                const value = operation[operationType];\n                const idSet = this.numberToDocumentId.get(value);\n                return idSet ? Array.from(idSet) : [];\n            }\n            case 'in': {\n                const values = operation[operationType];\n                const resultSet = new Set();\n                for (const value of values) {\n                    const idSet = this.numberToDocumentId.get(value);\n                    if (idSet) {\n                        for (const id of idSet) {\n                            resultSet.add(id);\n                        }\n                    }\n                }\n                return Array.from(resultSet);\n            }\n            case 'nin': {\n                const excludeValues = new Set(operation[operationType]);\n                const resultSet = new Set();\n                for (const [key, idSet] of this.numberToDocumentId.entries()) {\n                    if (!excludeValues.has(key)) {\n                        for (const id of idSet) {\n                            resultSet.add(id);\n                        }\n                    }\n                }\n                return Array.from(resultSet);\n            }\n            default:\n                throw new Error('Invalid operation');\n        }\n    }\n    filterArr(operation) {\n        const operationKeys = Object.keys(operation);\n        if (operationKeys.length !== 1) {\n            throw new Error('Invalid operation');\n        }\n        const operationType = operationKeys[0];\n        switch (operationType) {\n            case 'containsAll': {\n                const values = operation[operationType];\n                const idSets = values.map((value) => this.numberToDocumentId.get(value) ?? new Set());\n                if (idSets.length === 0)\n                    return [];\n                const intersection = idSets.reduce((prev, curr) => {\n                    return new Set([...prev].filter((id) => curr.has(id)));\n                });\n                return Array.from(intersection);\n            }\n            case 'containsAny': {\n                const values = operation[operationType];\n                const idSets = values.map((value) => this.numberToDocumentId.get(value) ?? new Set());\n                if (idSets.length === 0)\n                    return [];\n                const union = idSets.reduce((prev, curr) => {\n                    return new Set([...prev, ...curr]);\n                });\n                return Array.from(union);\n            }\n            default:\n                throw new Error('Invalid operation');\n        }\n    }\n    static fromJSON(json) {\n        if (!json.numberToDocumentId) {\n            throw new Error('Invalid Flat Tree JSON');\n        }\n        const tree = new FlatTree();\n        for (const [key, ids] of json.numberToDocumentId) {\n            tree.numberToDocumentId.set(key, new Set(ids));\n        }\n        return tree;\n    }\n    toJSON() {\n        return {\n            numberToDocumentId: Array.from(this.numberToDocumentId.entries()).map(([key, idSet]) => [key, Array.from(idSet)])\n        };\n    }\n}\n//# sourceMappingURL=flat.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL2ZsYXQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL2ZsYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEZsYXRUcmVlIHtcbiAgICBudW1iZXJUb0RvY3VtZW50SWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubnVtYmVyVG9Eb2N1bWVudElkID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBpbnNlcnQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5udW1iZXJUb0RvY3VtZW50SWQuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyVG9Eb2N1bWVudElkLmdldChrZXkpLmFkZCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm51bWJlclRvRG9jdW1lbnRJZC5zZXQoa2V5LCBuZXcgU2V0KFt2YWx1ZV0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kKGtleSkge1xuICAgICAgICBjb25zdCBpZFNldCA9IHRoaXMubnVtYmVyVG9Eb2N1bWVudElkLmdldChrZXkpO1xuICAgICAgICByZXR1cm4gaWRTZXQgPyBBcnJheS5mcm9tKGlkU2V0KSA6IG51bGw7XG4gICAgfVxuICAgIHJlbW92ZShrZXkpIHtcbiAgICAgICAgdGhpcy5udW1iZXJUb0RvY3VtZW50SWQuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHJlbW92ZURvY3VtZW50KGlkLCBrZXkpIHtcbiAgICAgICAgY29uc3QgaWRTZXQgPSB0aGlzLm51bWJlclRvRG9jdW1lbnRJZC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGlkU2V0KSB7XG4gICAgICAgICAgICBpZFNldC5kZWxldGUoaWQpO1xuICAgICAgICAgICAgaWYgKGlkU2V0LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm51bWJlclRvRG9jdW1lbnRJZC5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb250YWlucyhrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtYmVyVG9Eb2N1bWVudElkLmhhcyhrZXkpO1xuICAgIH1cbiAgICBnZXRTaXplKCkge1xuICAgICAgICBsZXQgc2l6ZSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgaWRTZXQgb2YgdGhpcy5udW1iZXJUb0RvY3VtZW50SWQudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIHNpemUgKz0gaWRTZXQuc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgZmlsdGVyKG9wZXJhdGlvbikge1xuICAgICAgICBjb25zdCBvcGVyYXRpb25LZXlzID0gT2JqZWN0LmtleXMob3BlcmF0aW9uKTtcbiAgICAgICAgaWYgKG9wZXJhdGlvbktleXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb3BlcmF0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IG9wZXJhdGlvbktleXNbMF07XG4gICAgICAgIHN3aXRjaCAob3BlcmF0aW9uVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZXEnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvcGVyYXRpb25bb3BlcmF0aW9uVHlwZV07XG4gICAgICAgICAgICAgICAgY29uc3QgaWRTZXQgPSB0aGlzLm51bWJlclRvRG9jdW1lbnRJZC5nZXQodmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpZFNldCA/IEFycmF5LmZyb20oaWRTZXQpIDogW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdpbic6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBvcGVyYXRpb25bb3BlcmF0aW9uVHlwZV07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0U2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkU2V0ID0gdGhpcy5udW1iZXJUb0RvY3VtZW50SWQuZ2V0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U2V0LmFkZChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ocmVzdWx0U2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ25pbic6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGNsdWRlVmFsdWVzID0gbmV3IFNldChvcGVyYXRpb25bb3BlcmF0aW9uVHlwZV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGlkU2V0XSBvZiB0aGlzLm51bWJlclRvRG9jdW1lbnRJZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleGNsdWRlVmFsdWVzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U2V0LmFkZChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ocmVzdWx0U2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG9wZXJhdGlvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbHRlckFycihvcGVyYXRpb24pIHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uS2V5cyA9IE9iamVjdC5rZXlzKG9wZXJhdGlvbik7XG4gICAgICAgIGlmIChvcGVyYXRpb25LZXlzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG9wZXJhdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBvcGVyYXRpb25LZXlzWzBdO1xuICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvblR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW5zQWxsJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IG9wZXJhdGlvbltvcGVyYXRpb25UeXBlXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZFNldHMgPSB2YWx1ZXMubWFwKCh2YWx1ZSkgPT4gdGhpcy5udW1iZXJUb0RvY3VtZW50SWQuZ2V0KHZhbHVlKSA/PyBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgICAgIGlmIChpZFNldHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gaWRTZXRzLnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNldChbLi4ucHJldl0uZmlsdGVyKChpZCkgPT4gY3Vyci5oYXMoaWQpKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oaW50ZXJzZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW5zQW55Jzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IG9wZXJhdGlvbltvcGVyYXRpb25UeXBlXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZFNldHMgPSB2YWx1ZXMubWFwKCh2YWx1ZSkgPT4gdGhpcy5udW1iZXJUb0RvY3VtZW50SWQuZ2V0KHZhbHVlKSA/PyBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgICAgIGlmIChpZFNldHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgY29uc3QgdW5pb24gPSBpZFNldHMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2V0KFsuLi5wcmV2LCAuLi5jdXJyXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odW5pb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb3BlcmF0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgaWYgKCFqc29uLm51bWJlclRvRG9jdW1lbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEZsYXQgVHJlZSBKU09OJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJlZSA9IG5ldyBGbGF0VHJlZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGlkc10gb2YganNvbi5udW1iZXJUb0RvY3VtZW50SWQpIHtcbiAgICAgICAgICAgIHRyZWUubnVtYmVyVG9Eb2N1bWVudElkLnNldChrZXksIG5ldyBTZXQoaWRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG51bWJlclRvRG9jdW1lbnRJZDogQXJyYXkuZnJvbSh0aGlzLm51bWJlclRvRG9jdW1lbnRJZC5lbnRyaWVzKCkpLm1hcCgoW2tleSwgaWRTZXRdKSA9PiBba2V5LCBBcnJheS5mcm9tKGlkU2V0KV0pXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmxhdC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/flat.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/radix.js":
/*!***************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/trees/radix.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RadixNode: () => (/* binding */ RadixNode),\n/* harmony export */   RadixTree: () => (/* binding */ RadixTree)\n/* harmony export */ });\n/* harmony import */ var _components_levenshtein_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/levenshtein.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/components/levenshtein.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\");\n/* eslint-disable @typescript-eslint/no-this-alias */\n\n\nclass RadixNode {\n    // Node key\n    k;\n    // Node subword\n    s;\n    // Node children\n    c = new Map();\n    // Node documents\n    d = new Set();\n    // Node end\n    e;\n    // Node word\n    w = '';\n    constructor(key, subWord, end) {\n        this.k = key;\n        this.s = subWord;\n        this.e = end;\n    }\n    updateParent(parent) {\n        this.w = parent.w + this.s;\n    }\n    addDocument(docID) {\n        this.d.add(docID);\n    }\n    removeDocument(docID) {\n        return this.d.delete(docID);\n    }\n    findAllWords(output, term, exact, tolerance) {\n        const stack = [this];\n        while (stack.length > 0) {\n            const node = stack.pop();\n            if (node.e) {\n                const { w, d: docIDs } = node;\n                if (exact && w !== term) {\n                    continue;\n                }\n                // check if _output[w] exists and then add the doc to it\n                // always check in own property to prevent access to inherited properties\n                // fix https://github.com/oramasearch/orama/issues/137\n                if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getOwnProperty)(output, w) !== null) {\n                    if (tolerance) {\n                        const difference = Math.abs(term.length - w.length);\n                        if (difference <= tolerance && (0,_components_levenshtein_js__WEBPACK_IMPORTED_MODULE_0__.syncBoundedLevenshtein)(term, w, tolerance).isBounded) {\n                            output[w] = [];\n                        }\n                        else {\n                            continue;\n                        }\n                    }\n                    else {\n                        output[w] = [];\n                    }\n                }\n                // check if _output[w] exists and then add the doc to it\n                // always check in own property to prevent access to inherited properties\n                // fix https://github.com/oramasearch/orama/issues/137\n                if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getOwnProperty)(output, w) != null && docIDs.size > 0) {\n                    const docs = output[w];\n                    for (const docID of docIDs) {\n                        if (!docs.includes(docID)) {\n                            docs.push(docID);\n                        }\n                    }\n                }\n            }\n            if (node.c.size > 0) {\n                stack.push(...node.c.values());\n            }\n        }\n        return output;\n    }\n    insert(word, docId) {\n        let node = this;\n        let i = 0;\n        const wordLength = word.length;\n        while (i < wordLength) {\n            const currentCharacter = word[i];\n            const childNode = node.c.get(currentCharacter);\n            if (childNode) {\n                const edgeLabel = childNode.s;\n                const edgeLabelLength = edgeLabel.length;\n                let j = 0;\n                // Find the common prefix length between edgeLabel and the remaining word\n                while (j < edgeLabelLength && i + j < wordLength && edgeLabel[j] === word[i + j]) {\n                    j++;\n                }\n                if (j === edgeLabelLength) {\n                    // Edge label fully matches; proceed to the child node\n                    node = childNode;\n                    i += j;\n                    if (i === wordLength) {\n                        // The word is a prefix of an existing word\n                        if (!childNode.e) {\n                            childNode.e = true;\n                        }\n                        childNode.addDocument(docId);\n                        return;\n                    }\n                    continue;\n                }\n                // Split the edgeLabel at the common prefix\n                const commonPrefix = edgeLabel.slice(0, j);\n                const newEdgeLabel = edgeLabel.slice(j);\n                const newWordLabel = word.slice(i + j);\n                // Create an intermediate node for the common prefix\n                const inbetweenNode = new RadixNode(commonPrefix[0], commonPrefix, false);\n                node.c.set(commonPrefix[0], inbetweenNode);\n                inbetweenNode.updateParent(node);\n                // Update the existing childNode\n                childNode.s = newEdgeLabel;\n                childNode.k = newEdgeLabel[0];\n                inbetweenNode.c.set(newEdgeLabel[0], childNode);\n                childNode.updateParent(inbetweenNode);\n                if (newWordLabel) {\n                    // Create a new node for the remaining part of the word\n                    const newNode = new RadixNode(newWordLabel[0], newWordLabel, true);\n                    newNode.addDocument(docId);\n                    inbetweenNode.c.set(newWordLabel[0], newNode);\n                    newNode.updateParent(inbetweenNode);\n                }\n                else {\n                    // The word ends at the inbetweenNode\n                    inbetweenNode.e = true;\n                    inbetweenNode.addDocument(docId);\n                }\n                return;\n            }\n            else {\n                // No matching child; create a new node\n                const newNode = new RadixNode(currentCharacter, word.slice(i), true);\n                newNode.addDocument(docId);\n                node.c.set(currentCharacter, newNode);\n                newNode.updateParent(node);\n                return;\n            }\n        }\n        // If we reach here, the word already exists in the tree\n        if (!node.e) {\n            node.e = true;\n        }\n        node.addDocument(docId);\n    }\n    _findLevenshtein(term, index, tolerance, originalTolerance, output) {\n        const stack = [{ node: this, index, tolerance }];\n        while (stack.length > 0) {\n            const { node, index, tolerance } = stack.pop();\n            if (node.w.startsWith(term)) {\n                node.findAllWords(output, term, false, 0);\n                continue;\n            }\n            if (tolerance < 0) {\n                continue;\n            }\n            if (node.e) {\n                const { w, d: docIDs } = node;\n                if (w) {\n                    if ((0,_components_levenshtein_js__WEBPACK_IMPORTED_MODULE_0__.syncBoundedLevenshtein)(term, w, originalTolerance).isBounded) {\n                        output[w] = [];\n                    }\n                    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getOwnProperty)(output, w) !== undefined && docIDs.size > 0) {\n                        const docs = new Set(output[w]);\n                        for (const docID of docIDs) {\n                            docs.add(docID);\n                        }\n                        output[w] = Array.from(docs);\n                    }\n                }\n            }\n            if (index >= term.length) {\n                continue;\n            }\n            const currentChar = term[index];\n            // 1. If node has child matching term[index], push { node: childNode, index +1, tolerance }\n            if (node.c.has(currentChar)) {\n                const childNode = node.c.get(currentChar);\n                stack.push({ node: childNode, index: index + 1, tolerance });\n            }\n            // 2. Push { node, index +1, tolerance -1 } (Delete operation)\n            stack.push({ node: node, index: index + 1, tolerance: tolerance - 1 });\n            // 3. For each child:\n            for (const [character, childNode] of node.c) {\n                // a) Insert operation\n                stack.push({ node: childNode, index: index, tolerance: tolerance - 1 });\n                // b) Substitute operation\n                if (character !== currentChar) {\n                    stack.push({ node: childNode, index: index + 1, tolerance: tolerance - 1 });\n                }\n            }\n        }\n    }\n    find(params) {\n        const { term, exact, tolerance } = params;\n        if (tolerance && !exact) {\n            const output = {};\n            this._findLevenshtein(term, 0, tolerance, tolerance, output);\n            return output;\n        }\n        else {\n            let node = this;\n            let i = 0;\n            const termLength = term.length;\n            while (i < termLength) {\n                const character = term[i];\n                const childNode = node.c.get(character);\n                if (childNode) {\n                    const edgeLabel = childNode.s;\n                    const edgeLabelLength = edgeLabel.length;\n                    let j = 0;\n                    // Compare edge label with the term starting from position i\n                    while (j < edgeLabelLength && i + j < termLength && edgeLabel[j] === term[i + j]) {\n                        j++;\n                    }\n                    if (j === edgeLabelLength) {\n                        // Full match of edge label; proceed to the child node\n                        node = childNode;\n                        i += j;\n                    }\n                    else if (i + j === termLength) {\n                        // The term ends in the middle of the edge label - FIX: this handles prefix matches like 'p' matching 'phone'\n                        // Check if the term matches from the beginning of the edge label\n                        if (j === termLength - i) {\n                            // Term is a prefix of the edge label\n                            if (exact) {\n                                // Exact match required but term doesn't end at a node\n                                return {};\n                            }\n                            else {\n                                // Partial match; collect words starting from this node\n                                const output = {};\n                                // Just call findAllWords on the child node to collect all words in this subtree\n                                childNode.findAllWords(output, term, exact, tolerance);\n                                return output;\n                            }\n                        }\n                        else {\n                            // Mismatch found\n                            return {};\n                        }\n                    }\n                    else {\n                        // Mismatch found\n                        return {};\n                    }\n                }\n                else {\n                    // No matching child node\n                    return {};\n                }\n            }\n            // Term fully matched; collect words starting from this node\n            const output = {};\n            node.findAllWords(output, term, exact, tolerance);\n            return output;\n        }\n    }\n    contains(term) {\n        let node = this;\n        let i = 0;\n        const termLength = term.length;\n        while (i < termLength) {\n            const character = term[i];\n            const childNode = node.c.get(character);\n            if (childNode) {\n                const edgeLabel = childNode.s;\n                const edgeLabelLength = edgeLabel.length;\n                let j = 0;\n                while (j < edgeLabelLength && i + j < termLength && edgeLabel[j] === term[i + j]) {\n                    j++;\n                }\n                if (j < edgeLabelLength) {\n                    return false;\n                }\n                i += edgeLabelLength;\n                node = childNode;\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    }\n    removeWord(term) {\n        if (!term) {\n            return false;\n        }\n        let node = this;\n        const termLength = term.length;\n        const stack = [];\n        for (let i = 0; i < termLength; i++) {\n            const character = term[i];\n            if (node.c.has(character)) {\n                const childNode = node.c.get(character);\n                stack.push({ parent: node, character });\n                i += childNode.s.length - 1;\n                node = childNode;\n            }\n            else {\n                return false;\n            }\n        }\n        // Remove documents from the node\n        node.d.clear();\n        node.e = false;\n        // Clean up any nodes that no longer lead to a word\n        while (stack.length > 0 && node.c.size === 0 && !node.e && node.d.size === 0) {\n            const { parent, character } = stack.pop();\n            parent.c.delete(character);\n            node = parent;\n        }\n        return true;\n    }\n    removeDocumentByWord(term, docID, exact = true) {\n        if (!term) {\n            return true;\n        }\n        let node = this;\n        const termLength = term.length;\n        for (let i = 0; i < termLength; i++) {\n            const character = term[i];\n            if (node.c.has(character)) {\n                const childNode = node.c.get(character);\n                i += childNode.s.length - 1;\n                node = childNode;\n                if (exact && node.w !== term) {\n                    // Do nothing if the exact condition is not met.\n                }\n                else {\n                    node.removeDocument(docID);\n                }\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    }\n    static getCommonPrefix(a, b) {\n        const len = Math.min(a.length, b.length);\n        let i = 0;\n        while (i < len && a.charCodeAt(i) === b.charCodeAt(i)) {\n            i++;\n        }\n        return a.slice(0, i);\n    }\n    toJSON() {\n        return {\n            w: this.w,\n            s: this.s,\n            e: this.e,\n            k: this.k,\n            d: Array.from(this.d),\n            c: Array.from(this.c?.entries())?.map(([key, node]) => [key, node.toJSON()])\n        };\n    }\n    static fromJSON(json) {\n        const node = new RadixNode(json.k, json.s, json.e);\n        node.w = json.w;\n        node.d = new Set(json.d);\n        node.c = new Map(json?.c?.map(([key, nodeJson]) => [key, RadixNode.fromJSON(nodeJson)]));\n        return node;\n    }\n}\nclass RadixTree extends RadixNode {\n    constructor() {\n        super('', '', false);\n    }\n    static fromJSON(json) {\n        const tree = new RadixTree();\n        tree.w = json.w;\n        tree.s = json.s;\n        tree.e = json.e;\n        tree.k = json.k;\n        tree.d = new Set(json.d);\n        tree.c = new Map(json.c?.map(([key, nodeJson]) => [key, RadixNode.fromJSON(nodeJson)]));\n        return tree;\n    }\n    toJSON() {\n        return super.toJSON();\n    }\n}\n//# sourceMappingURL=radix.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL3JhZGl4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNzRTtBQUN6QjtBQUN0QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlEQUFjO0FBQ2xDO0FBQ0E7QUFDQSx1REFBdUQsa0ZBQXNCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlEQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhCQUE4QjtBQUN2RDtBQUNBLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0Esd0JBQXdCLGtGQUFzQjtBQUM5QztBQUNBO0FBQ0Esd0JBQXdCLHlEQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0EsNkJBQTZCLDhDQUE4QztBQUMzRTtBQUNBLHlCQUF5QiwrQkFBK0I7QUFDeEQseUJBQXlCLHdEQUF3RDtBQUNqRjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseURBQXlEO0FBQ3RGO0FBQ0E7QUFDQSxpQ0FBaUMsNkRBQTZEO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUJBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlCQUF5QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvQG9yYW1hL29yYW1hL2Rpc3QvYnJvd3Nlci90cmVlcy9yYWRpeC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcyAqL1xuaW1wb3J0IHsgc3luY0JvdW5kZWRMZXZlbnNodGVpbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvbGV2ZW5zaHRlaW4uanMnO1xuaW1wb3J0IHsgZ2V0T3duUHJvcGVydHkgfSBmcm9tICcuLi91dGlscy5qcyc7XG5leHBvcnQgY2xhc3MgUmFkaXhOb2RlIHtcbiAgICAvLyBOb2RlIGtleVxuICAgIGs7XG4gICAgLy8gTm9kZSBzdWJ3b3JkXG4gICAgcztcbiAgICAvLyBOb2RlIGNoaWxkcmVuXG4gICAgYyA9IG5ldyBNYXAoKTtcbiAgICAvLyBOb2RlIGRvY3VtZW50c1xuICAgIGQgPSBuZXcgU2V0KCk7XG4gICAgLy8gTm9kZSBlbmRcbiAgICBlO1xuICAgIC8vIE5vZGUgd29yZFxuICAgIHcgPSAnJztcbiAgICBjb25zdHJ1Y3RvcihrZXksIHN1YldvcmQsIGVuZCkge1xuICAgICAgICB0aGlzLmsgPSBrZXk7XG4gICAgICAgIHRoaXMucyA9IHN1YldvcmQ7XG4gICAgICAgIHRoaXMuZSA9IGVuZDtcbiAgICB9XG4gICAgdXBkYXRlUGFyZW50KHBhcmVudCkge1xuICAgICAgICB0aGlzLncgPSBwYXJlbnQudyArIHRoaXMucztcbiAgICB9XG4gICAgYWRkRG9jdW1lbnQoZG9jSUQpIHtcbiAgICAgICAgdGhpcy5kLmFkZChkb2NJRCk7XG4gICAgfVxuICAgIHJlbW92ZURvY3VtZW50KGRvY0lEKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmQuZGVsZXRlKGRvY0lEKTtcbiAgICB9XG4gICAgZmluZEFsbFdvcmRzKG91dHB1dCwgdGVybSwgZXhhY3QsIHRvbGVyYW5jZSkge1xuICAgICAgICBjb25zdCBzdGFjayA9IFt0aGlzXTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmIChub2RlLmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHcsIGQ6IGRvY0lEcyB9ID0gbm9kZTtcbiAgICAgICAgICAgICAgICBpZiAoZXhhY3QgJiYgdyAhPT0gdGVybSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgX291dHB1dFt3XSBleGlzdHMgYW5kIHRoZW4gYWRkIHRoZSBkb2MgdG8gaXRcbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgY2hlY2sgaW4gb3duIHByb3BlcnR5IHRvIHByZXZlbnQgYWNjZXNzIHRvIGluaGVyaXRlZCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgLy8gZml4IGh0dHBzOi8vZ2l0aHViLmNvbS9vcmFtYXNlYXJjaC9vcmFtYS9pc3N1ZXMvMTM3XG4gICAgICAgICAgICAgICAgaWYgKGdldE93blByb3BlcnR5KG91dHB1dCwgdykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IE1hdGguYWJzKHRlcm0ubGVuZ3RoIC0gdy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmZlcmVuY2UgPD0gdG9sZXJhbmNlICYmIHN5bmNCb3VuZGVkTGV2ZW5zaHRlaW4odGVybSwgdywgdG9sZXJhbmNlKS5pc0JvdW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbd10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W3ddID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgX291dHB1dFt3XSBleGlzdHMgYW5kIHRoZW4gYWRkIHRoZSBkb2MgdG8gaXRcbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgY2hlY2sgaW4gb3duIHByb3BlcnR5IHRvIHByZXZlbnQgYWNjZXNzIHRvIGluaGVyaXRlZCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgLy8gZml4IGh0dHBzOi8vZ2l0aHViLmNvbS9vcmFtYXNlYXJjaC9vcmFtYS9pc3N1ZXMvMTM3XG4gICAgICAgICAgICAgICAgaWYgKGdldE93blByb3BlcnR5KG91dHB1dCwgdykgIT0gbnVsbCAmJiBkb2NJRHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9jcyA9IG91dHB1dFt3XTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkb2NJRCBvZiBkb2NJRHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZG9jcy5pbmNsdWRlcyhkb2NJRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NzLnB1c2goZG9jSUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5vZGUuYy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goLi4ubm9kZS5jLnZhbHVlcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBpbnNlcnQod29yZCwgZG9jSWQpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGNvbnN0IHdvcmRMZW5ndGggPSB3b3JkLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGkgPCB3b3JkTGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q2hhcmFjdGVyID0gd29yZFtpXTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IG5vZGUuYy5nZXQoY3VycmVudENoYXJhY3Rlcik7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWRnZUxhYmVsID0gY2hpbGROb2RlLnM7XG4gICAgICAgICAgICAgICAgY29uc3QgZWRnZUxhYmVsTGVuZ3RoID0gZWRnZUxhYmVsLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsZXQgaiA9IDA7XG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgY29tbW9uIHByZWZpeCBsZW5ndGggYmV0d2VlbiBlZGdlTGFiZWwgYW5kIHRoZSByZW1haW5pbmcgd29yZFxuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgZWRnZUxhYmVsTGVuZ3RoICYmIGkgKyBqIDwgd29yZExlbmd0aCAmJiBlZGdlTGFiZWxbal0gPT09IHdvcmRbaSArIGpdKSB7XG4gICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGogPT09IGVkZ2VMYWJlbExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFZGdlIGxhYmVsIGZ1bGx5IG1hdGNoZXM7IHByb2NlZWQgdG8gdGhlIGNoaWxkIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGNoaWxkTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaSArPSBqO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gd29yZExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHdvcmQgaXMgYSBwcmVmaXggb2YgYW4gZXhpc3Rpbmcgd29yZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZE5vZGUuZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZS5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZS5hZGREb2N1bWVudChkb2NJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IHRoZSBlZGdlTGFiZWwgYXQgdGhlIGNvbW1vbiBwcmVmaXhcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tb25QcmVmaXggPSBlZGdlTGFiZWwuc2xpY2UoMCwgaik7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RWRnZUxhYmVsID0gZWRnZUxhYmVsLnNsaWNlKGopO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1dvcmRMYWJlbCA9IHdvcmQuc2xpY2UoaSArIGopO1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbiBpbnRlcm1lZGlhdGUgbm9kZSBmb3IgdGhlIGNvbW1vbiBwcmVmaXhcbiAgICAgICAgICAgICAgICBjb25zdCBpbmJldHdlZW5Ob2RlID0gbmV3IFJhZGl4Tm9kZShjb21tb25QcmVmaXhbMF0sIGNvbW1vblByZWZpeCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIG5vZGUuYy5zZXQoY29tbW9uUHJlZml4WzBdLCBpbmJldHdlZW5Ob2RlKTtcbiAgICAgICAgICAgICAgICBpbmJldHdlZW5Ob2RlLnVwZGF0ZVBhcmVudChub2RlKTtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGV4aXN0aW5nIGNoaWxkTm9kZVxuICAgICAgICAgICAgICAgIGNoaWxkTm9kZS5zID0gbmV3RWRnZUxhYmVsO1xuICAgICAgICAgICAgICAgIGNoaWxkTm9kZS5rID0gbmV3RWRnZUxhYmVsWzBdO1xuICAgICAgICAgICAgICAgIGluYmV0d2Vlbk5vZGUuYy5zZXQobmV3RWRnZUxhYmVsWzBdLCBjaGlsZE5vZGUpO1xuICAgICAgICAgICAgICAgIGNoaWxkTm9kZS51cGRhdGVQYXJlbnQoaW5iZXR3ZWVuTm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1dvcmRMYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbm9kZSBmb3IgdGhlIHJlbWFpbmluZyBwYXJ0IG9mIHRoZSB3b3JkXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld05vZGUgPSBuZXcgUmFkaXhOb2RlKG5ld1dvcmRMYWJlbFswXSwgbmV3V29yZExhYmVsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZS5hZGREb2N1bWVudChkb2NJZCk7XG4gICAgICAgICAgICAgICAgICAgIGluYmV0d2Vlbk5vZGUuYy5zZXQobmV3V29yZExhYmVsWzBdLCBuZXdOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZS51cGRhdGVQYXJlbnQoaW5iZXR3ZWVuTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgd29yZCBlbmRzIGF0IHRoZSBpbmJldHdlZW5Ob2RlXG4gICAgICAgICAgICAgICAgICAgIGluYmV0d2Vlbk5vZGUuZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGluYmV0d2Vlbk5vZGUuYWRkRG9jdW1lbnQoZG9jSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBObyBtYXRjaGluZyBjaGlsZDsgY3JlYXRlIGEgbmV3IG5vZGVcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdOb2RlID0gbmV3IFJhZGl4Tm9kZShjdXJyZW50Q2hhcmFjdGVyLCB3b3JkLnNsaWNlKGkpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBuZXdOb2RlLmFkZERvY3VtZW50KGRvY0lkKTtcbiAgICAgICAgICAgICAgICBub2RlLmMuc2V0KGN1cnJlbnRDaGFyYWN0ZXIsIG5ld05vZGUpO1xuICAgICAgICAgICAgICAgIG5ld05vZGUudXBkYXRlUGFyZW50KG5vZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSByZWFjaCBoZXJlLCB0aGUgd29yZCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgdHJlZVxuICAgICAgICBpZiAoIW5vZGUuZSkge1xuICAgICAgICAgICAgbm9kZS5lID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBub2RlLmFkZERvY3VtZW50KGRvY0lkKTtcbiAgICB9XG4gICAgX2ZpbmRMZXZlbnNodGVpbih0ZXJtLCBpbmRleCwgdG9sZXJhbmNlLCBvcmlnaW5hbFRvbGVyYW5jZSwgb3V0cHV0KSB7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gW3sgbm9kZTogdGhpcywgaW5kZXgsIHRvbGVyYW5jZSB9XTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbm9kZSwgaW5kZXgsIHRvbGVyYW5jZSB9ID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBpZiAobm9kZS53LnN0YXJ0c1dpdGgodGVybSkpIHtcbiAgICAgICAgICAgICAgICBub2RlLmZpbmRBbGxXb3JkcyhvdXRwdXQsIHRlcm0sIGZhbHNlLCAwKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b2xlcmFuY2UgPCAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB3LCBkOiBkb2NJRHMgfSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKHcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN5bmNCb3VuZGVkTGV2ZW5zaHRlaW4odGVybSwgdywgb3JpZ2luYWxUb2xlcmFuY2UpLmlzQm91bmRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W3ddID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldE93blByb3BlcnR5KG91dHB1dCwgdykgIT09IHVuZGVmaW5lZCAmJiBkb2NJRHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvY3MgPSBuZXcgU2V0KG91dHB1dFt3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRvY0lEIG9mIGRvY0lEcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3MuYWRkKGRvY0lEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFt3XSA9IEFycmF5LmZyb20oZG9jcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gdGVybS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDaGFyID0gdGVybVtpbmRleF07XG4gICAgICAgICAgICAvLyAxLiBJZiBub2RlIGhhcyBjaGlsZCBtYXRjaGluZyB0ZXJtW2luZGV4XSwgcHVzaCB7IG5vZGU6IGNoaWxkTm9kZSwgaW5kZXggKzEsIHRvbGVyYW5jZSB9XG4gICAgICAgICAgICBpZiAobm9kZS5jLmhhcyhjdXJyZW50Q2hhcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBub2RlLmMuZ2V0KGN1cnJlbnRDaGFyKTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHsgbm9kZTogY2hpbGROb2RlLCBpbmRleDogaW5kZXggKyAxLCB0b2xlcmFuY2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAyLiBQdXNoIHsgbm9kZSwgaW5kZXggKzEsIHRvbGVyYW5jZSAtMSB9IChEZWxldGUgb3BlcmF0aW9uKVxuICAgICAgICAgICAgc3RhY2sucHVzaCh7IG5vZGU6IG5vZGUsIGluZGV4OiBpbmRleCArIDEsIHRvbGVyYW5jZTogdG9sZXJhbmNlIC0gMSB9KTtcbiAgICAgICAgICAgIC8vIDMuIEZvciBlYWNoIGNoaWxkOlxuICAgICAgICAgICAgZm9yIChjb25zdCBbY2hhcmFjdGVyLCBjaGlsZE5vZGVdIG9mIG5vZGUuYykge1xuICAgICAgICAgICAgICAgIC8vIGEpIEluc2VydCBvcGVyYXRpb25cbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHsgbm9kZTogY2hpbGROb2RlLCBpbmRleDogaW5kZXgsIHRvbGVyYW5jZTogdG9sZXJhbmNlIC0gMSB9KTtcbiAgICAgICAgICAgICAgICAvLyBiKSBTdWJzdGl0dXRlIG9wZXJhdGlvblxuICAgICAgICAgICAgICAgIGlmIChjaGFyYWN0ZXIgIT09IGN1cnJlbnRDaGFyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goeyBub2RlOiBjaGlsZE5vZGUsIGluZGV4OiBpbmRleCArIDEsIHRvbGVyYW5jZTogdG9sZXJhbmNlIC0gMSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0ZXJtLCBleGFjdCwgdG9sZXJhbmNlIH0gPSBwYXJhbXM7XG4gICAgICAgIGlmICh0b2xlcmFuY2UgJiYgIWV4YWN0KSB7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuX2ZpbmRMZXZlbnNodGVpbih0ZXJtLCAwLCB0b2xlcmFuY2UsIHRvbGVyYW5jZSwgb3V0cHV0KTtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXM7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICBjb25zdCB0ZXJtTGVuZ3RoID0gdGVybS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHRlcm1MZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPSB0ZXJtW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IG5vZGUuYy5nZXQoY2hhcmFjdGVyKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VMYWJlbCA9IGNoaWxkTm9kZS5zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGdlTGFiZWxMZW5ndGggPSBlZGdlTGFiZWwubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgZWRnZSBsYWJlbCB3aXRoIHRoZSB0ZXJtIHN0YXJ0aW5nIGZyb20gcG9zaXRpb24gaVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IGVkZ2VMYWJlbExlbmd0aCAmJiBpICsgaiA8IHRlcm1MZW5ndGggJiYgZWRnZUxhYmVsW2pdID09PSB0ZXJtW2kgKyBqXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBlZGdlTGFiZWxMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZ1bGwgbWF0Y2ggb2YgZWRnZSBsYWJlbDsgcHJvY2VlZCB0byB0aGUgY2hpbGQgbm9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGNoaWxkTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gajtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpICsgaiA9PT0gdGVybUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRlcm0gZW5kcyBpbiB0aGUgbWlkZGxlIG9mIHRoZSBlZGdlIGxhYmVsIC0gRklYOiB0aGlzIGhhbmRsZXMgcHJlZml4IG1hdGNoZXMgbGlrZSAncCcgbWF0Y2hpbmcgJ3Bob25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHRlcm0gbWF0Y2hlcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGVkZ2UgbGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqID09PSB0ZXJtTGVuZ3RoIC0gaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlcm0gaXMgYSBwcmVmaXggb2YgdGhlIGVkZ2UgbGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhhY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhhY3QgbWF0Y2ggcmVxdWlyZWQgYnV0IHRlcm0gZG9lc24ndCBlbmQgYXQgYSBub2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBhcnRpYWwgbWF0Y2g7IGNvbGxlY3Qgd29yZHMgc3RhcnRpbmcgZnJvbSB0aGlzIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1c3QgY2FsbCBmaW5kQWxsV29yZHMgb24gdGhlIGNoaWxkIG5vZGUgdG8gY29sbGVjdCBhbGwgd29yZHMgaW4gdGhpcyBzdWJ0cmVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZS5maW5kQWxsV29yZHMob3V0cHV0LCB0ZXJtLCBleGFjdCwgdG9sZXJhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaXNtYXRjaCBmb3VuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pc21hdGNoIGZvdW5kXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIG1hdGNoaW5nIGNoaWxkIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRlcm0gZnVsbHkgbWF0Y2hlZDsgY29sbGVjdCB3b3JkcyBzdGFydGluZyBmcm9tIHRoaXMgbm9kZVxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgICAgICBub2RlLmZpbmRBbGxXb3JkcyhvdXRwdXQsIHRlcm0sIGV4YWN0LCB0b2xlcmFuY2UpO1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb250YWlucyh0ZXJtKSB7XG4gICAgICAgIGxldCBub2RlID0gdGhpcztcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBjb25zdCB0ZXJtTGVuZ3RoID0gdGVybS5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpIDwgdGVybUxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGVybVtpXTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IG5vZGUuYy5nZXQoY2hhcmFjdGVyKTtcbiAgICAgICAgICAgIGlmIChjaGlsZE5vZGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlZGdlTGFiZWwgPSBjaGlsZE5vZGUucztcbiAgICAgICAgICAgICAgICBjb25zdCBlZGdlTGFiZWxMZW5ndGggPSBlZGdlTGFiZWwubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBqID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IGVkZ2VMYWJlbExlbmd0aCAmJiBpICsgaiA8IHRlcm1MZW5ndGggJiYgZWRnZUxhYmVsW2pdID09PSB0ZXJtW2kgKyBqXSkge1xuICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChqIDwgZWRnZUxhYmVsTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSArPSBlZGdlTGFiZWxMZW5ndGg7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGNoaWxkTm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVtb3ZlV29yZCh0ZXJtKSB7XG4gICAgICAgIGlmICghdGVybSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlID0gdGhpcztcbiAgICAgICAgY29uc3QgdGVybUxlbmd0aCA9IHRlcm0ubGVuZ3RoO1xuICAgICAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlcm1MZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGVybVtpXTtcbiAgICAgICAgICAgIGlmIChub2RlLmMuaGFzKGNoYXJhY3RlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBub2RlLmMuZ2V0KGNoYXJhY3Rlcik7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7IHBhcmVudDogbm9kZSwgY2hhcmFjdGVyIH0pO1xuICAgICAgICAgICAgICAgIGkgKz0gY2hpbGROb2RlLnMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBub2RlID0gY2hpbGROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFJlbW92ZSBkb2N1bWVudHMgZnJvbSB0aGUgbm9kZVxuICAgICAgICBub2RlLmQuY2xlYXIoKTtcbiAgICAgICAgbm9kZS5lID0gZmFsc2U7XG4gICAgICAgIC8vIENsZWFuIHVwIGFueSBub2RlcyB0aGF0IG5vIGxvbmdlciBsZWFkIHRvIGEgd29yZFxuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCAmJiBub2RlLmMuc2l6ZSA9PT0gMCAmJiAhbm9kZS5lICYmIG5vZGUuZC5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhcmVudCwgY2hhcmFjdGVyIH0gPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIHBhcmVudC5jLmRlbGV0ZShjaGFyYWN0ZXIpO1xuICAgICAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVtb3ZlRG9jdW1lbnRCeVdvcmQodGVybSwgZG9jSUQsIGV4YWN0ID0gdHJ1ZSkge1xuICAgICAgICBpZiAoIXRlcm0pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlID0gdGhpcztcbiAgICAgICAgY29uc3QgdGVybUxlbmd0aCA9IHRlcm0ubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlcm1MZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGVybVtpXTtcbiAgICAgICAgICAgIGlmIChub2RlLmMuaGFzKGNoYXJhY3RlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBub2RlLmMuZ2V0KGNoYXJhY3Rlcik7XG4gICAgICAgICAgICAgICAgaSArPSBjaGlsZE5vZGUucy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBjaGlsZE5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKGV4YWN0ICYmIG5vZGUudyAhPT0gdGVybSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZSBleGFjdCBjb25kaXRpb24gaXMgbm90IG1ldC5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRG9jdW1lbnQoZG9jSUQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc3RhdGljIGdldENvbW1vblByZWZpeChhLCBiKSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBsZW4gJiYgYS5jaGFyQ29kZUF0KGkpID09PSBiLmNoYXJDb2RlQXQoaSkpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYS5zbGljZSgwLCBpKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdzogdGhpcy53LFxuICAgICAgICAgICAgczogdGhpcy5zLFxuICAgICAgICAgICAgZTogdGhpcy5lLFxuICAgICAgICAgICAgazogdGhpcy5rLFxuICAgICAgICAgICAgZDogQXJyYXkuZnJvbSh0aGlzLmQpLFxuICAgICAgICAgICAgYzogQXJyYXkuZnJvbSh0aGlzLmM/LmVudHJpZXMoKSk/Lm1hcCgoW2tleSwgbm9kZV0pID0+IFtrZXksIG5vZGUudG9KU09OKCldKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICBjb25zdCBub2RlID0gbmV3IFJhZGl4Tm9kZShqc29uLmssIGpzb24ucywganNvbi5lKTtcbiAgICAgICAgbm9kZS53ID0ganNvbi53O1xuICAgICAgICBub2RlLmQgPSBuZXcgU2V0KGpzb24uZCk7XG4gICAgICAgIG5vZGUuYyA9IG5ldyBNYXAoanNvbj8uYz8ubWFwKChba2V5LCBub2RlSnNvbl0pID0+IFtrZXksIFJhZGl4Tm9kZS5mcm9tSlNPTihub2RlSnNvbildKSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSYWRpeFRyZWUgZXh0ZW5kcyBSYWRpeE5vZGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignJywgJycsIGZhbHNlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgY29uc3QgdHJlZSA9IG5ldyBSYWRpeFRyZWUoKTtcbiAgICAgICAgdHJlZS53ID0ganNvbi53O1xuICAgICAgICB0cmVlLnMgPSBqc29uLnM7XG4gICAgICAgIHRyZWUuZSA9IGpzb24uZTtcbiAgICAgICAgdHJlZS5rID0ganNvbi5rO1xuICAgICAgICB0cmVlLmQgPSBuZXcgU2V0KGpzb24uZCk7XG4gICAgICAgIHRyZWUuYyA9IG5ldyBNYXAoanNvbi5jPy5tYXAoKFtrZXksIG5vZGVKc29uXSkgPT4gW2tleSwgUmFkaXhOb2RlLmZyb21KU09OKG5vZGVKc29uKV0pKTtcbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnRvSlNPTigpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhZGl4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/radix.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/vector.js":
/*!****************************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/trees/vector.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SIMILARITY: () => (/* binding */ DEFAULT_SIMILARITY),\n/* harmony export */   VectorIndex: () => (/* binding */ VectorIndex),\n/* harmony export */   findSimilarVectors: () => (/* binding */ findSimilarVectors),\n/* harmony export */   getMagnitude: () => (/* binding */ getMagnitude)\n/* harmony export */ });\nconst DEFAULT_SIMILARITY = 0.8;\nclass VectorIndex {\n    size;\n    vectors = new Map();\n    constructor(size) {\n        this.size = size;\n    }\n    add(internalDocumentId, value) {\n        if (!(value instanceof Float32Array)) {\n            value = new Float32Array(value);\n        }\n        const magnitude = getMagnitude(value, this.size);\n        this.vectors.set(internalDocumentId, [magnitude, value]);\n    }\n    remove(internalDocumentId) {\n        this.vectors.delete(internalDocumentId);\n    }\n    find(vector, similarity, whereFiltersIDs) {\n        if (!(vector instanceof Float32Array)) {\n            vector = new Float32Array(vector);\n        }\n        const results = findSimilarVectors(vector, whereFiltersIDs, this.vectors, this.size, similarity);\n        return results;\n    }\n    toJSON() {\n        const vectors = [];\n        for (const [id, [magnitude, vector]] of this.vectors) {\n            vectors.push([id, [magnitude, Array.from(vector)]]);\n        }\n        return {\n            size: this.size,\n            vectors,\n        };\n    }\n    static fromJSON(json) {\n        const raw = json;\n        const index = new VectorIndex(raw.size);\n        for (const [id, [magnitude, vector]] of raw.vectors) {\n            index.vectors.set(id, [magnitude, new Float32Array(vector)]);\n        }\n        return index;\n    }\n}\nfunction getMagnitude(vector, vectorLength) {\n    let magnitude = 0;\n    for (let i = 0; i < vectorLength; i++) {\n        magnitude += vector[i] * vector[i];\n    }\n    return Math.sqrt(magnitude);\n}\n// @todo: Write plugins for Node and Browsers to use parallel computation for this function\nfunction findSimilarVectors(targetVector, keys, vectors, length, threshold) {\n    const targetMagnitude = getMagnitude(targetVector, length);\n    const similarVectors = [];\n    const base = keys ? keys : vectors.keys();\n    for (const vectorId of base) {\n        const entry = vectors.get(vectorId);\n        if (!entry) {\n            continue;\n        }\n        const magnitude = entry[0];\n        const vector = entry[1];\n        let dotProduct = 0;\n        for (let i = 0; i < length; i++) {\n            dotProduct += targetVector[i] * vector[i];\n        }\n        const similarity = dotProduct / (targetMagnitude * magnitude);\n        if (similarity >= threshold) {\n            similarVectors.push([vectorId, similarity]);\n        }\n    }\n    return similarVectors;\n}\n//# sourceMappingURL=vector.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3RyZWVzL3ZlY3Rvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU87QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFlBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvdHJlZXMvdmVjdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBERUZBVUxUX1NJTUlMQVJJVFkgPSAwLjg7XG5leHBvcnQgY2xhc3MgVmVjdG9ySW5kZXgge1xuICAgIHNpemU7XG4gICAgdmVjdG9ycyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdHJ1Y3RvcihzaXplKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgfVxuICAgIGFkZChpbnRlcm5hbERvY3VtZW50SWQsIHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSkge1xuICAgICAgICAgICAgdmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYWduaXR1ZGUgPSBnZXRNYWduaXR1ZGUodmFsdWUsIHRoaXMuc2l6ZSk7XG4gICAgICAgIHRoaXMudmVjdG9ycy5zZXQoaW50ZXJuYWxEb2N1bWVudElkLCBbbWFnbml0dWRlLCB2YWx1ZV0pO1xuICAgIH1cbiAgICByZW1vdmUoaW50ZXJuYWxEb2N1bWVudElkKSB7XG4gICAgICAgIHRoaXMudmVjdG9ycy5kZWxldGUoaW50ZXJuYWxEb2N1bWVudElkKTtcbiAgICB9XG4gICAgZmluZCh2ZWN0b3IsIHNpbWlsYXJpdHksIHdoZXJlRmlsdGVyc0lEcykge1xuICAgICAgICBpZiAoISh2ZWN0b3IgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpKSB7XG4gICAgICAgICAgICB2ZWN0b3IgPSBuZXcgRmxvYXQzMkFycmF5KHZlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGZpbmRTaW1pbGFyVmVjdG9ycyh2ZWN0b3IsIHdoZXJlRmlsdGVyc0lEcywgdGhpcy52ZWN0b3JzLCB0aGlzLnNpemUsIHNpbWlsYXJpdHkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCB2ZWN0b3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgW2lkLCBbbWFnbml0dWRlLCB2ZWN0b3JdXSBvZiB0aGlzLnZlY3RvcnMpIHtcbiAgICAgICAgICAgIHZlY3RvcnMucHVzaChbaWQsIFttYWduaXR1ZGUsIEFycmF5LmZyb20odmVjdG9yKV1dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2l6ZTogdGhpcy5zaXplLFxuICAgICAgICAgICAgdmVjdG9ycyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgY29uc3QgcmF3ID0ganNvbjtcbiAgICAgICAgY29uc3QgaW5kZXggPSBuZXcgVmVjdG9ySW5kZXgocmF3LnNpemUpO1xuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgW21hZ25pdHVkZSwgdmVjdG9yXV0gb2YgcmF3LnZlY3RvcnMpIHtcbiAgICAgICAgICAgIGluZGV4LnZlY3RvcnMuc2V0KGlkLCBbbWFnbml0dWRlLCBuZXcgRmxvYXQzMkFycmF5KHZlY3RvcildKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1hZ25pdHVkZSh2ZWN0b3IsIHZlY3Rvckxlbmd0aCkge1xuICAgIGxldCBtYWduaXR1ZGUgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVjdG9yTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWFnbml0dWRlICs9IHZlY3RvcltpXSAqIHZlY3RvcltpXTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGguc3FydChtYWduaXR1ZGUpO1xufVxuLy8gQHRvZG86IFdyaXRlIHBsdWdpbnMgZm9yIE5vZGUgYW5kIEJyb3dzZXJzIHRvIHVzZSBwYXJhbGxlbCBjb21wdXRhdGlvbiBmb3IgdGhpcyBmdW5jdGlvblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTaW1pbGFyVmVjdG9ycyh0YXJnZXRWZWN0b3IsIGtleXMsIHZlY3RvcnMsIGxlbmd0aCwgdGhyZXNob2xkKSB7XG4gICAgY29uc3QgdGFyZ2V0TWFnbml0dWRlID0gZ2V0TWFnbml0dWRlKHRhcmdldFZlY3RvciwgbGVuZ3RoKTtcbiAgICBjb25zdCBzaW1pbGFyVmVjdG9ycyA9IFtdO1xuICAgIGNvbnN0IGJhc2UgPSBrZXlzID8ga2V5cyA6IHZlY3RvcnMua2V5cygpO1xuICAgIGZvciAoY29uc3QgdmVjdG9ySWQgb2YgYmFzZSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IHZlY3RvcnMuZ2V0KHZlY3RvcklkKTtcbiAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWFnbml0dWRlID0gZW50cnlbMF07XG4gICAgICAgIGNvbnN0IHZlY3RvciA9IGVudHJ5WzFdO1xuICAgICAgICBsZXQgZG90UHJvZHVjdCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRvdFByb2R1Y3QgKz0gdGFyZ2V0VmVjdG9yW2ldICogdmVjdG9yW2ldO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSBkb3RQcm9kdWN0IC8gKHRhcmdldE1hZ25pdHVkZSAqIG1hZ25pdHVkZSk7XG4gICAgICAgIGlmIChzaW1pbGFyaXR5ID49IHRocmVzaG9sZCkge1xuICAgICAgICAgICAgc2ltaWxhclZlY3RvcnMucHVzaChbdmVjdG9ySWQsIHNpbWlsYXJpdHldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2ltaWxhclZlY3RvcnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZWN0b3IuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/trees/vector.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/types.js":
/*!*********************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/types.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MODE_FULLTEXT_SEARCH: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_0__.MODE_FULLTEXT_SEARCH),\n/* harmony export */   MODE_HYBRID_SEARCH: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_0__.MODE_HYBRID_SEARCH),\n/* harmony export */   MODE_VECTOR_SEARCH: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_0__.MODE_VECTOR_SEARCH),\n/* harmony export */   kInsertions: () => (/* binding */ kInsertions),\n/* harmony export */   kRemovals: () => (/* binding */ kRemovals)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/constants.js\");\n\nconst kInsertions = Symbol('orama.insertions');\nconst kRemovals = Symbol('orama.removals');\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3R5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4RjtBQUN2RjtBQUNBO0FBQ1AiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL0BvcmFtYS9vcmFtYS9kaXN0L2Jyb3dzZXIvdHlwZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgTU9ERV9GVUxMVEVYVF9TRUFSQ0gsIE1PREVfSFlCUklEX1NFQVJDSCwgTU9ERV9WRUNUT1JfU0VBUkNIIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuZXhwb3J0IGNvbnN0IGtJbnNlcnRpb25zID0gU3ltYm9sKCdvcmFtYS5pbnNlcnRpb25zJyk7XG5leHBvcnQgY29uc3Qga1JlbW92YWxzID0gU3ltYm9sKCdvcmFtYS5yZW1vdmFscycpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/types.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js":
/*!*********************************************************!*\
  !*** ./node_modules/@orama/orama/dist/browser/utils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAX_ARGUMENT_FOR_STACK: () => (/* binding */ MAX_ARGUMENT_FOR_STACK),\n/* harmony export */   convertDistanceToMeters: () => (/* binding */ convertDistanceToMeters),\n/* harmony export */   flattenObject: () => (/* binding */ flattenObject),\n/* harmony export */   formatBytes: () => (/* binding */ formatBytes),\n/* harmony export */   formatNanoseconds: () => (/* binding */ formatNanoseconds),\n/* harmony export */   getDocumentProperties: () => (/* binding */ getDocumentProperties),\n/* harmony export */   getNanosecondTimeViaPerformance: () => (/* binding */ getNanosecondTimeViaPerformance),\n/* harmony export */   getNanosecondsTime: () => (/* binding */ getNanosecondsTime),\n/* harmony export */   getNested: () => (/* binding */ getNested),\n/* harmony export */   getOwnProperty: () => (/* binding */ getOwnProperty),\n/* harmony export */   getTokenFrequency: () => (/* binding */ getTokenFrequency),\n/* harmony export */   insertSortedValue: () => (/* binding */ insertSortedValue),\n/* harmony export */   intersect: () => (/* binding */ intersect),\n/* harmony export */   isAsyncFunction: () => (/* binding */ isAsyncFunction),\n/* harmony export */   isInsideNode: () => (/* binding */ isInsideNode),\n/* harmony export */   isInsideWebWorker: () => (/* binding */ isInsideWebWorker),\n/* harmony export */   isPromise: () => (/* binding */ isPromise),\n/* harmony export */   isServer: () => (/* binding */ isServer),\n/* harmony export */   removeVectorsFromHits: () => (/* binding */ removeVectorsFromHits),\n/* harmony export */   safeArrayPush: () => (/* binding */ safeArrayPush),\n/* harmony export */   setDifference: () => (/* binding */ setDifference),\n/* harmony export */   setIntersection: () => (/* binding */ setIntersection),\n/* harmony export */   setUnion: () => (/* binding */ setUnion),\n/* harmony export */   sleep: () => (/* binding */ sleep),\n/* harmony export */   sortTokenScorePredicate: () => (/* binding */ sortTokenScorePredicate),\n/* harmony export */   sprintf: () => (/* binding */ sprintf),\n/* harmony export */   uniqueId: () => (/* binding */ uniqueId)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/errors.js\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n\nconst baseId = Date.now().toString().slice(5);\nlet lastId = 0;\nconst k = 1024;\nconst nano = BigInt(1e3);\nconst milli = BigInt(1e6);\nconst second = BigInt(1e9);\nconst isServer = typeof window === 'undefined';\n/**\n * This value can be increased up to 100_000\n * But i don't know if this value change from nodejs to nodejs\n * So I will keep a safer value here.\n */\nconst MAX_ARGUMENT_FOR_STACK = 65535;\n/**\n * This method is needed to used because of issues like: https://github.com/oramasearch/orama/issues/301\n * that issue is caused because the array that is pushed is huge (>100k)\n *\n * @example\n * ```ts\n * safeArrayPush(myArray, [1, 2])\n * ```\n */\nfunction safeArrayPush(arr, newArr) {\n    if (newArr.length < MAX_ARGUMENT_FOR_STACK) {\n        Array.prototype.push.apply(arr, newArr);\n    }\n    else {\n        const newArrLength = newArr.length;\n        for (let i = 0; i < newArrLength; i += MAX_ARGUMENT_FOR_STACK) {\n            Array.prototype.push.apply(arr, newArr.slice(i, i + MAX_ARGUMENT_FOR_STACK));\n        }\n    }\n}\nfunction sprintf(template, ...args) {\n    return template.replace(/%(?:(?<position>\\d+)\\$)?(?<width>-?\\d*\\.?\\d*)(?<type>[dfs])/g, function (...replaceArgs) {\n        const groups = replaceArgs[replaceArgs.length - 1];\n        const { width: rawWidth, type, position } = groups;\n        const replacement = position ? args[Number.parseInt(position) - 1] : args.shift();\n        const width = rawWidth === '' ? 0 : Number.parseInt(rawWidth);\n        switch (type) {\n            case 'd':\n                return replacement.toString().padStart(width, '0');\n            case 'f': {\n                let value = replacement;\n                const [padding, precision] = rawWidth.split('.').map((w) => Number.parseFloat(w));\n                if (typeof precision === 'number' && precision >= 0) {\n                    value = value.toFixed(precision);\n                }\n                return typeof padding === 'number' && padding >= 0 ? value.toString().padStart(width, '0') : value.toString();\n            }\n            case 's':\n                return width < 0\n                    ? replacement.toString().padEnd(-width, ' ')\n                    : replacement.toString().padStart(width, ' ');\n            default:\n                return replacement;\n        }\n    });\n}\nfunction formatBytes(bytes, decimals = 2) {\n    if (bytes === 0) {\n        return '0 Bytes';\n    }\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\nfunction isInsideWebWorker() {\n    // @ts-expect-error - WebWorker global scope\n    return typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope;\n}\nfunction isInsideNode() {\n    return typeof process !== 'undefined' && process.release && process.release.name === 'node';\n}\nfunction getNanosecondTimeViaPerformance() {\n    return BigInt(Math.floor(performance.now() * 1e6));\n}\nfunction formatNanoseconds(value) {\n    if (typeof value === 'number') {\n        value = BigInt(value);\n    }\n    if (value < nano) {\n        return `${value}ns`;\n    }\n    else if (value < milli) {\n        return `${value / nano}s`;\n    }\n    else if (value < second) {\n        return `${value / milli}ms`;\n    }\n    return `${value / second}s`;\n}\nfunction getNanosecondsTime() {\n    if (isInsideWebWorker()) {\n        return getNanosecondTimeViaPerformance();\n    }\n    if (isInsideNode()) {\n        return process.hrtime.bigint();\n    }\n    if (typeof process !== 'undefined' && typeof process?.hrtime?.bigint === 'function') {\n        return process.hrtime.bigint();\n    }\n    if (typeof performance !== 'undefined') {\n        return getNanosecondTimeViaPerformance();\n    }\n    // @todo: fallback to V8 native method to get microtime\n    return BigInt(0);\n}\nfunction uniqueId() {\n    return `${baseId}-${lastId++}`;\n}\nfunction getOwnProperty(object, property) {\n    // Checks if `hasOwn` method is defined avoiding errors with older Node.js versions\n    if (Object.hasOwn === undefined) {\n        return Object.prototype.hasOwnProperty.call(object, property) ? object[property] : undefined;\n    }\n    return Object.hasOwn(object, property) ? object[property] : undefined;\n}\nfunction getTokenFrequency(token, tokens) {\n    let count = 0;\n    for (const t of tokens) {\n        if (t === token) {\n            count++;\n        }\n    }\n    return count;\n}\nfunction insertSortedValue(arr, el, compareFn = sortTokenScorePredicate) {\n    let low = 0;\n    let high = arr.length;\n    let mid;\n    while (low < high) {\n        mid = (low + high) >>> 1;\n        if (compareFn(el, arr[mid]) < 0) {\n            high = mid;\n        }\n        else {\n            low = mid + 1;\n        }\n    }\n    arr.splice(low, 0, el);\n    return arr;\n}\nfunction sortTokenScorePredicate(a, b) {\n    if (b[1] === a[1]) {\n        return a[0] - b[0];\n    }\n    return b[1] - a[1];\n}\n// Intersection function taken from https://github.com/lovasoa/fast_array_intersect.\n// MIT Licensed at the time of writing.\nfunction intersect(arrays) {\n    if (arrays.length === 0) {\n        return [];\n    }\n    else if (arrays.length === 1) {\n        return arrays[0];\n    }\n    for (let i = 1; i < arrays.length; i++) {\n        if (arrays[i].length < arrays[0].length) {\n            const tmp = arrays[0];\n            arrays[0] = arrays[i];\n            arrays[i] = tmp;\n        }\n    }\n    const set = new Map();\n    for (const elem of arrays[0]) {\n        set.set(elem, 1);\n    }\n    for (let i = 1; i < arrays.length; i++) {\n        let found = 0;\n        for (const elem of arrays[i]) {\n            const count = set.get(elem);\n            if (count === i) {\n                set.set(elem, count + 1);\n                found++;\n            }\n        }\n        if (found === 0)\n            return [];\n    }\n    return arrays[0].filter((e) => {\n        const count = set.get(e);\n        if (count !== undefined)\n            set.set(e, 0);\n        return count === arrays.length;\n    });\n}\nfunction getDocumentProperties(doc, paths) {\n    const properties = {};\n    const pathsLength = paths.length;\n    for (let i = 0; i < pathsLength; i++) {\n        const path = paths[i];\n        const pathTokens = path.split('.');\n        let current = doc;\n        const pathTokensLength = pathTokens.length;\n        for (let j = 0; j < pathTokensLength; j++) {\n            current = current[pathTokens[j]];\n            // We found an object but we were supposed to be done\n            if (typeof current === 'object') {\n                if (current !== null &&\n                    'lat' in current &&\n                    'lon' in current &&\n                    typeof current.lat === 'number' &&\n                    typeof current.lon === 'number') {\n                    current = properties[path] = current;\n                    break;\n                }\n                else if (!Array.isArray(current) && current !== null && j === pathTokensLength - 1) {\n                    current = undefined;\n                    break;\n                }\n            }\n            else if ((current === null || typeof current !== 'object') && j < pathTokensLength - 1) {\n                // We can't recurse anymore but we were supposed to\n                current = undefined;\n                break;\n            }\n        }\n        if (typeof current !== 'undefined') {\n            properties[path] = current;\n        }\n    }\n    return properties;\n}\nfunction getNested(obj, path) {\n    const props = getDocumentProperties(obj, [path]);\n    return props[path];\n}\nfunction flattenObject(obj, prefix = '') {\n    const result = {};\n    for (const key in obj) {\n        const prop = `${prefix}${key}`;\n        const objKey = obj[key];\n        if (typeof objKey === 'object' && objKey !== null) {\n            Object.assign(result, flattenObject(objKey, `${prop}.`));\n        }\n        else {\n            result[prop] = objKey;\n        }\n    }\n    return result;\n}\nconst mapDistanceToMeters = {\n    cm: 0.01,\n    m: 1,\n    km: 1000,\n    ft: 0.3048,\n    yd: 0.9144,\n    mi: 1609.344\n};\nfunction convertDistanceToMeters(distance, unit) {\n    const ratio = mapDistanceToMeters[unit];\n    if (ratio === undefined) {\n        throw new Error((0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.createError)('INVALID_DISTANCE_SUFFIX', distance).message);\n    }\n    return distance * ratio;\n}\nfunction removeVectorsFromHits(searchResult, vectorProperties) {\n    searchResult.hits = searchResult.hits.map((result) => ({\n        ...result,\n        document: {\n            ...result.document,\n            // Remove embeddings from the result\n            ...vectorProperties.reduce((acc, prop) => {\n                const path = prop.split('.');\n                const lastKey = path.pop();\n                let obj = acc;\n                for (const key of path) {\n                    obj[key] = obj[key] ?? {};\n                    obj = obj[key];\n                }\n                obj[lastKey] = null;\n                return acc;\n            }, result.document)\n        }\n    }));\n}\nfunction isPromise(obj) {\n    return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n/**\n * Checks if the provided input is an async function or if the input is an array\n * containing at least one async function.\n *\n * @param func - A single function or an array of functions to check.\n *               Non-function values are ignored.\n * @returns `true` if the input is an async function or an array containing at least\n *          one async function, otherwise `false`.\n */\nfunction isAsyncFunction(func) {\n    if (Array.isArray(func)) {\n        return func.some((item) => isAsyncFunction(item));\n    }\n    return func?.constructor?.name === 'AsyncFunction';\n}\nconst withIntersection = 'intersection' in new Set();\nfunction setIntersection(...sets) {\n    // Fast path 1\n    if (sets.length === 0) {\n        return new Set();\n    }\n    // Fast path 2\n    if (sets.length === 1) {\n        return sets[0];\n    }\n    // Fast path 3\n    if (sets.length === 2) {\n        const set1 = sets[0];\n        const set2 = sets[1];\n        if (withIntersection) {\n            return set1.intersection(set2);\n        }\n        const result = new Set();\n        const base = set1.size < set2.size ? set1 : set2;\n        const other = base === set1 ? set2 : set1;\n        for (const value of base) {\n            if (other.has(value)) {\n                result.add(value);\n            }\n        }\n        return result;\n    }\n    // Slow path\n    // Find the smallest set\n    const min = {\n        index: 0,\n        size: sets[0].size\n    };\n    for (let i = 1; i < sets.length; i++) {\n        if (sets[i].size < min.size) {\n            min.index = i;\n            min.size = sets[i].size;\n        }\n    }\n    if (withIntersection) {\n        let base = sets[min.index];\n        for (let i = 0; i < sets.length; i++) {\n            if (i === min.index) {\n                continue;\n            }\n            base = base.intersection(sets[i]);\n        }\n        return base;\n    }\n    // manual implementation:\n    // intersect all sets with the smallest set\n    const base = sets[min.index];\n    for (let i = 0; i < sets.length; i++) {\n        if (i === min.index) {\n            continue;\n        }\n        const other = sets[i];\n        for (const value of base) {\n            if (!other.has(value)) {\n                base.delete(value);\n            }\n        }\n    }\n    return base;\n}\nconst withUnion = 'union' in new Set();\nfunction setUnion(set1, set2) {\n    if (withUnion) {\n        if (set1) {\n            return set1.union(set2);\n        }\n        return set2;\n    }\n    if (!set1) {\n        return new Set(set2);\n    }\n    return new Set([...set1, ...set2]);\n}\nfunction setDifference(set1, set2) {\n    const result = new Set();\n    for (const value of set1) {\n        if (!set2.has(value)) {\n            result.add(value);\n        }\n    }\n    return result;\n}\n// This code is taken from https://github.com/davidmarkclements/atomic-sleep, MIT licensed at the time of commit b8149d3ca276c84a54fa8fa1478f9cc79aabc15a.\n// All credits go to the original author (David Mark Clements, https://github.com/davidmarkclements).\nfunction sleep(ms) {\n    if (typeof SharedArrayBuffer !== 'undefined' && typeof Atomics !== 'undefined') {\n        const nil = new Int32Array(new SharedArrayBuffer(4));\n        const valid = ms > 0 && ms < Infinity;\n        if (valid === false) {\n            if (typeof ms !== 'number' && typeof ms !== 'bigint') {\n                throw TypeError('sleep: ms must be a number');\n            }\n            throw RangeError('sleep: ms must be a number that is greater than 0 but less than Infinity');\n        }\n        Atomics.wait(nil, 0, 0, Number(ms));\n    }\n    else {\n        const valid = ms > 0 && ms < Infinity;\n        if (valid === false) {\n            if (typeof ms !== 'number' && typeof ms !== 'bigint') {\n                throw TypeError('sleep: ms must be a number');\n            }\n            throw RangeError('sleep: ms must be a number that is greater than 0 but less than Infinity');\n        }\n        const target = Date.now() + Number(ms);\n        while (target > Date.now()) {\n            /* empty */\n        }\n    }\n}\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGdCQUFnQixrQ0FBa0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrREFBa0QsRUFBRSxTQUFTO0FBQzNFO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQLGtCQUFrQixPQUFPLG9CQUFvQixPQUFPLFlBQVksT0FBTztBQUN2RTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0Esa0JBQWtCLGFBQWE7QUFDL0I7QUFDQTtBQUNBLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBLGVBQWUsT0FBTywyQkFBMkIsT0FBTztBQUN4RCxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGNBQWMsT0FBTyxHQUFHLFNBQVM7QUFDakM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0Esd0JBQXdCLE9BQU8sRUFBRSxJQUFJO0FBQ3JDO0FBQ0E7QUFDQSwyREFBMkQsS0FBSztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSx3QkFBd0IsdURBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9Ab3JhbWEvb3JhbWEvZGlzdC9icm93c2VyL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUVycm9yIH0gZnJvbSAnLi9lcnJvcnMuanMnO1xuY29uc3QgYmFzZUlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpLnNsaWNlKDUpO1xubGV0IGxhc3RJZCA9IDA7XG5jb25zdCBrID0gMTAyNDtcbmNvbnN0IG5hbm8gPSBCaWdJbnQoMWUzKTtcbmNvbnN0IG1pbGxpID0gQmlnSW50KDFlNik7XG5jb25zdCBzZWNvbmQgPSBCaWdJbnQoMWU5KTtcbmV4cG9ydCBjb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xuLyoqXG4gKiBUaGlzIHZhbHVlIGNhbiBiZSBpbmNyZWFzZWQgdXAgdG8gMTAwXzAwMFxuICogQnV0IGkgZG9uJ3Qga25vdyBpZiB0aGlzIHZhbHVlIGNoYW5nZSBmcm9tIG5vZGVqcyB0byBub2RlanNcbiAqIFNvIEkgd2lsbCBrZWVwIGEgc2FmZXIgdmFsdWUgaGVyZS5cbiAqL1xuZXhwb3J0IGNvbnN0IE1BWF9BUkdVTUVOVF9GT1JfU1RBQ0sgPSA2NTUzNTtcbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbmVlZGVkIHRvIHVzZWQgYmVjYXVzZSBvZiBpc3N1ZXMgbGlrZTogaHR0cHM6Ly9naXRodWIuY29tL29yYW1hc2VhcmNoL29yYW1hL2lzc3Vlcy8zMDFcbiAqIHRoYXQgaXNzdWUgaXMgY2F1c2VkIGJlY2F1c2UgdGhlIGFycmF5IHRoYXQgaXMgcHVzaGVkIGlzIGh1Z2UgKD4xMDBrKVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogc2FmZUFycmF5UHVzaChteUFycmF5LCBbMSwgMl0pXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhZmVBcnJheVB1c2goYXJyLCBuZXdBcnIpIHtcbiAgICBpZiAobmV3QXJyLmxlbmd0aCA8IE1BWF9BUkdVTUVOVF9GT1JfU1RBQ0spIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYXJyLCBuZXdBcnIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3QXJyTGVuZ3RoID0gbmV3QXJyLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdBcnJMZW5ndGg7IGkgKz0gTUFYX0FSR1VNRU5UX0ZPUl9TVEFDSykge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYXJyLCBuZXdBcnIuc2xpY2UoaSwgaSArIE1BWF9BUkdVTUVOVF9GT1JfU1RBQ0spKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzcHJpbnRmKHRlbXBsYXRlLCAuLi5hcmdzKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoLyUoPzooPzxwb3NpdGlvbj5cXGQrKVxcJCk/KD88d2lkdGg+LT9cXGQqXFwuP1xcZCopKD88dHlwZT5bZGZzXSkvZywgZnVuY3Rpb24gKC4uLnJlcGxhY2VBcmdzKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IHJlcGxhY2VBcmdzW3JlcGxhY2VBcmdzLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCB7IHdpZHRoOiByYXdXaWR0aCwgdHlwZSwgcG9zaXRpb24gfSA9IGdyb3VwcztcbiAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwb3NpdGlvbiA/IGFyZ3NbTnVtYmVyLnBhcnNlSW50KHBvc2l0aW9uKSAtIDFdIDogYXJncy5zaGlmdCgpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IHJhd1dpZHRoID09PSAnJyA/IDAgOiBOdW1iZXIucGFyc2VJbnQocmF3V2lkdGgpO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgICAgICAgIHJldHVybiByZXBsYWNlbWVudC50b1N0cmluZygpLnBhZFN0YXJ0KHdpZHRoLCAnMCcpO1xuICAgICAgICAgICAgY2FzZSAnZic6IHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICBjb25zdCBbcGFkZGluZywgcHJlY2lzaW9uXSA9IHJhd1dpZHRoLnNwbGl0KCcuJykubWFwKCh3KSA9PiBOdW1iZXIucGFyc2VGbG9hdCh3KSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcmVjaXNpb24gPT09ICdudW1iZXInICYmIHByZWNpc2lvbiA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9GaXhlZChwcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHBhZGRpbmcgPT09ICdudW1iZXInICYmIHBhZGRpbmcgPj0gMCA/IHZhbHVlLnRvU3RyaW5nKCkucGFkU3RhcnQod2lkdGgsICcwJykgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpZHRoIDwgMFxuICAgICAgICAgICAgICAgICAgICA/IHJlcGxhY2VtZW50LnRvU3RyaW5nKCkucGFkRW5kKC13aWR0aCwgJyAnKVxuICAgICAgICAgICAgICAgICAgICA6IHJlcGxhY2VtZW50LnRvU3RyaW5nKCkucGFkU3RhcnQod2lkdGgsICcgJyk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiByZXBsYWNlbWVudDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEJ5dGVzKGJ5dGVzLCBkZWNpbWFscyA9IDIpIHtcbiAgICBpZiAoYnl0ZXMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcwIEJ5dGVzJztcbiAgICB9XG4gICAgY29uc3QgZG0gPSBkZWNpbWFscyA8IDAgPyAwIDogZGVjaW1hbHM7XG4gICAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJywgJ1BCJywgJ0VCJywgJ1pCJywgJ1lCJ107XG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpO1xuICAgIHJldHVybiBgJHtwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKGRtKSl9ICR7c2l6ZXNbaV19YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0luc2lkZVdlYldvcmtlcigpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gV2ViV29ya2VyIGdsb2JhbCBzY29wZVxuICAgIHJldHVybiB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0luc2lkZU5vZGUoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLnJlbGVhc2UgJiYgcHJvY2Vzcy5yZWxlYXNlLm5hbWUgPT09ICdub2RlJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXROYW5vc2Vjb25kVGltZVZpYVBlcmZvcm1hbmNlKCkge1xuICAgIHJldHVybiBCaWdJbnQoTWF0aC5mbG9vcihwZXJmb3JtYW5jZS5ub3coKSAqIDFlNikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE5hbm9zZWNvbmRzKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFsdWUgPSBCaWdJbnQodmFsdWUpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPCBuYW5vKSB7XG4gICAgICAgIHJldHVybiBgJHt2YWx1ZX1uc2A7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIDwgbWlsbGkpIHtcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlIC8gbmFub33OvHNgO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSA8IHNlY29uZCkge1xuICAgICAgICByZXR1cm4gYCR7dmFsdWUgLyBtaWxsaX1tc2A7XG4gICAgfVxuICAgIHJldHVybiBgJHt2YWx1ZSAvIHNlY29uZH1zYDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXROYW5vc2Vjb25kc1RpbWUoKSB7XG4gICAgaWYgKGlzSW5zaWRlV2ViV29ya2VyKCkpIHtcbiAgICAgICAgcmV0dXJuIGdldE5hbm9zZWNvbmRUaW1lVmlhUGVyZm9ybWFuY2UoKTtcbiAgICB9XG4gICAgaWYgKGlzSW5zaWRlTm9kZSgpKSB7XG4gICAgICAgIHJldHVybiBwcm9jZXNzLmhydGltZS5iaWdpbnQoKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2Vzcz8uaHJ0aW1lPy5iaWdpbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBlcmZvcm1hbmNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZ2V0TmFub3NlY29uZFRpbWVWaWFQZXJmb3JtYW5jZSgpO1xuICAgIH1cbiAgICAvLyBAdG9kbzogZmFsbGJhY2sgdG8gVjggbmF0aXZlIG1ldGhvZCB0byBnZXQgbWljcm90aW1lXG4gICAgcmV0dXJuIEJpZ0ludCgwKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWVJZCgpIHtcbiAgICByZXR1cm4gYCR7YmFzZUlkfS0ke2xhc3RJZCsrfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T3duUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIC8vIENoZWNrcyBpZiBgaGFzT3duYCBtZXRob2QgaXMgZGVmaW5lZCBhdm9pZGluZyBlcnJvcnMgd2l0aCBvbGRlciBOb2RlLmpzIHZlcnNpb25zXG4gICAgaWYgKE9iamVjdC5oYXNPd24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpID8gb2JqZWN0W3Byb3BlcnR5XSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5oYXNPd24ob2JqZWN0LCBwcm9wZXJ0eSkgPyBvYmplY3RbcHJvcGVydHldIDogdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFRva2VuRnJlcXVlbmN5KHRva2VuLCB0b2tlbnMpIHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIGZvciAoY29uc3QgdCBvZiB0b2tlbnMpIHtcbiAgICAgICAgaWYgKHQgPT09IHRva2VuKSB7XG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3VudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRTb3J0ZWRWYWx1ZShhcnIsIGVsLCBjb21wYXJlRm4gPSBzb3J0VG9rZW5TY29yZVByZWRpY2F0ZSkge1xuICAgIGxldCBsb3cgPSAwO1xuICAgIGxldCBoaWdoID0gYXJyLmxlbmd0aDtcbiAgICBsZXQgbWlkO1xuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIG1pZCA9IChsb3cgKyBoaWdoKSA+Pj4gMTtcbiAgICAgICAgaWYgKGNvbXBhcmVGbihlbCwgYXJyW21pZF0pIDwgMCkge1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXJyLnNwbGljZShsb3csIDAsIGVsKTtcbiAgICByZXR1cm4gYXJyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRUb2tlblNjb3JlUHJlZGljYXRlKGEsIGIpIHtcbiAgICBpZiAoYlsxXSA9PT0gYVsxXSkge1xuICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07XG4gICAgfVxuICAgIHJldHVybiBiWzFdIC0gYVsxXTtcbn1cbi8vIEludGVyc2VjdGlvbiBmdW5jdGlvbiB0YWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9sb3Zhc29hL2Zhc3RfYXJyYXlfaW50ZXJzZWN0LlxuLy8gTUlUIExpY2Vuc2VkIGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcuXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0KGFycmF5cykge1xuICAgIGlmIChhcnJheXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJyYXlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gYXJyYXlzWzBdO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGFycmF5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJyYXlzW2ldLmxlbmd0aCA8IGFycmF5c1swXS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IGFycmF5c1swXTtcbiAgICAgICAgICAgIGFycmF5c1swXSA9IGFycmF5c1tpXTtcbiAgICAgICAgICAgIGFycmF5c1tpXSA9IHRtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzZXQgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBlbGVtIG9mIGFycmF5c1swXSkge1xuICAgICAgICBzZXQuc2V0KGVsZW0sIDEpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGFycmF5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgZm91bmQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGVsZW0gb2YgYXJyYXlzW2ldKSB7XG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IHNldC5nZXQoZWxlbSk7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IGkpIHtcbiAgICAgICAgICAgICAgICBzZXQuc2V0KGVsZW0sIGNvdW50ICsgMSk7XG4gICAgICAgICAgICAgICAgZm91bmQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZm91bmQgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBhcnJheXNbMF0uZmlsdGVyKChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gc2V0LmdldChlKTtcbiAgICAgICAgaWYgKGNvdW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZXQuc2V0KGUsIDApO1xuICAgICAgICByZXR1cm4gY291bnQgPT09IGFycmF5cy5sZW5ndGg7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRQcm9wZXJ0aWVzKGRvYywgcGF0aHMpIHtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ge307XG4gICAgY29uc3QgcGF0aHNMZW5ndGggPSBwYXRocy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoc1tpXTtcbiAgICAgICAgY29uc3QgcGF0aFRva2VucyA9IHBhdGguc3BsaXQoJy4nKTtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBkb2M7XG4gICAgICAgIGNvbnN0IHBhdGhUb2tlbnNMZW5ndGggPSBwYXRoVG9rZW5zLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXRoVG9rZW5zTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhdGhUb2tlbnNbal1dO1xuICAgICAgICAgICAgLy8gV2UgZm91bmQgYW4gb2JqZWN0IGJ1dCB3ZSB3ZXJlIHN1cHBvc2VkIHRvIGJlIGRvbmVcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAnbGF0JyBpbiBjdXJyZW50ICYmXG4gICAgICAgICAgICAgICAgICAgICdsb24nIGluIGN1cnJlbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGN1cnJlbnQubGF0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgY3VycmVudC5sb24gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBwcm9wZXJ0aWVzW3BhdGhdID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGN1cnJlbnQpICYmIGN1cnJlbnQgIT09IG51bGwgJiYgaiA9PT0gcGF0aFRva2Vuc0xlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGN1cnJlbnQgPT09IG51bGwgfHwgdHlwZW9mIGN1cnJlbnQgIT09ICdvYmplY3QnKSAmJiBqIDwgcGF0aFRva2Vuc0xlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBjYW4ndCByZWN1cnNlIGFueW1vcmUgYnV0IHdlIHdlcmUgc3VwcG9zZWQgdG9cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3VycmVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXNbcGF0aF0gPSBjdXJyZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE5lc3RlZChvYmosIHBhdGgpIHtcbiAgICBjb25zdCBwcm9wcyA9IGdldERvY3VtZW50UHJvcGVydGllcyhvYmosIFtwYXRoXSk7XG4gICAgcmV0dXJuIHByb3BzW3BhdGhdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW5PYmplY3Qob2JqLCBwcmVmaXggPSAnJykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBjb25zdCBwcm9wID0gYCR7cHJlZml4fSR7a2V5fWA7XG4gICAgICAgIGNvbnN0IG9iaktleSA9IG9ialtrZXldO1xuICAgICAgICBpZiAodHlwZW9mIG9iaktleSA9PT0gJ29iamVjdCcgJiYgb2JqS2V5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdCwgZmxhdHRlbk9iamVjdChvYmpLZXksIGAke3Byb3B9LmApKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFtwcm9wXSA9IG9iaktleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3QgbWFwRGlzdGFuY2VUb01ldGVycyA9IHtcbiAgICBjbTogMC4wMSxcbiAgICBtOiAxLFxuICAgIGttOiAxMDAwLFxuICAgIGZ0OiAwLjMwNDgsXG4gICAgeWQ6IDAuOTE0NCxcbiAgICBtaTogMTYwOS4zNDRcbn07XG5leHBvcnQgZnVuY3Rpb24gY29udmVydERpc3RhbmNlVG9NZXRlcnMoZGlzdGFuY2UsIHVuaXQpIHtcbiAgICBjb25zdCByYXRpbyA9IG1hcERpc3RhbmNlVG9NZXRlcnNbdW5pdF07XG4gICAgaWYgKHJhdGlvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNyZWF0ZUVycm9yKCdJTlZBTElEX0RJU1RBTkNFX1NVRkZJWCcsIGRpc3RhbmNlKS5tZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpc3RhbmNlICogcmF0aW87XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVmVjdG9yc0Zyb21IaXRzKHNlYXJjaFJlc3VsdCwgdmVjdG9yUHJvcGVydGllcykge1xuICAgIHNlYXJjaFJlc3VsdC5oaXRzID0gc2VhcmNoUmVzdWx0LmhpdHMubWFwKChyZXN1bHQpID0+ICh7XG4gICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgICAgIC4uLnJlc3VsdC5kb2N1bWVudCxcbiAgICAgICAgICAgIC8vIFJlbW92ZSBlbWJlZGRpbmdzIGZyb20gdGhlIHJlc3VsdFxuICAgICAgICAgICAgLi4udmVjdG9yUHJvcGVydGllcy5yZWR1Y2UoKGFjYywgcHJvcCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBwcm9wLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdEtleSA9IHBhdGgucG9wKCk7XG4gICAgICAgICAgICAgICAgbGV0IG9iaiA9IGFjYztcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9ialtrZXldID0gb2JqW2tleV0gPz8ge307XG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IG9ialtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvYmpbbGFzdEtleV0gPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9LCByZXN1bHQuZG9jdW1lbnQpXG4gICAgICAgIH1cbiAgICB9KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQcm9taXNlKG9iaikge1xuICAgIHJldHVybiAhIW9iaiAmJiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykgJiYgdHlwZW9mIG9iai50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHByb3ZpZGVkIGlucHV0IGlzIGFuIGFzeW5jIGZ1bmN0aW9uIG9yIGlmIHRoZSBpbnB1dCBpcyBhbiBhcnJheVxuICogY29udGFpbmluZyBhdCBsZWFzdCBvbmUgYXN5bmMgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIGZ1bmMgLSBBIHNpbmdsZSBmdW5jdGlvbiBvciBhbiBhcnJheSBvZiBmdW5jdGlvbnMgdG8gY2hlY2suXG4gKiAgICAgICAgICAgICAgIE5vbi1mdW5jdGlvbiB2YWx1ZXMgYXJlIGlnbm9yZWQuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGlucHV0IGlzIGFuIGFzeW5jIGZ1bmN0aW9uIG9yIGFuIGFycmF5IGNvbnRhaW5pbmcgYXQgbGVhc3RcbiAqICAgICAgICAgIG9uZSBhc3luYyBmdW5jdGlvbiwgb3RoZXJ3aXNlIGBmYWxzZWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jRnVuY3Rpb24oZnVuYykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jLnNvbWUoKGl0ZW0pID0+IGlzQXN5bmNGdW5jdGlvbihpdGVtKSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ0FzeW5jRnVuY3Rpb24nO1xufVxuY29uc3Qgd2l0aEludGVyc2VjdGlvbiA9ICdpbnRlcnNlY3Rpb24nIGluIG5ldyBTZXQoKTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRJbnRlcnNlY3Rpb24oLi4uc2V0cykge1xuICAgIC8vIEZhc3QgcGF0aCAxXG4gICAgaWYgKHNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KCk7XG4gICAgfVxuICAgIC8vIEZhc3QgcGF0aCAyXG4gICAgaWYgKHNldHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBzZXRzWzBdO1xuICAgIH1cbiAgICAvLyBGYXN0IHBhdGggM1xuICAgIGlmIChzZXRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBjb25zdCBzZXQxID0gc2V0c1swXTtcbiAgICAgICAgY29uc3Qgc2V0MiA9IHNldHNbMV07XG4gICAgICAgIGlmICh3aXRoSW50ZXJzZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0MS5pbnRlcnNlY3Rpb24oc2V0Mik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFNldCgpO1xuICAgICAgICBjb25zdCBiYXNlID0gc2V0MS5zaXplIDwgc2V0Mi5zaXplID8gc2V0MSA6IHNldDI7XG4gICAgICAgIGNvbnN0IG90aGVyID0gYmFzZSA9PT0gc2V0MSA/IHNldDIgOiBzZXQxO1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGJhc2UpIHtcbiAgICAgICAgICAgIGlmIChvdGhlci5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLy8gU2xvdyBwYXRoXG4gICAgLy8gRmluZCB0aGUgc21hbGxlc3Qgc2V0XG4gICAgY29uc3QgbWluID0ge1xuICAgICAgICBpbmRleDogMCxcbiAgICAgICAgc2l6ZTogc2V0c1swXS5zaXplXG4gICAgfTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNldHNbaV0uc2l6ZSA8IG1pbi5zaXplKSB7XG4gICAgICAgICAgICBtaW4uaW5kZXggPSBpO1xuICAgICAgICAgICAgbWluLnNpemUgPSBzZXRzW2ldLnNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdpdGhJbnRlcnNlY3Rpb24pIHtcbiAgICAgICAgbGV0IGJhc2UgPSBzZXRzW21pbi5pbmRleF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPT09IG1pbi5pbmRleCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmFzZSA9IGJhc2UuaW50ZXJzZWN0aW9uKHNldHNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlO1xuICAgIH1cbiAgICAvLyBtYW51YWwgaW1wbGVtZW50YXRpb246XG4gICAgLy8gaW50ZXJzZWN0IGFsbCBzZXRzIHdpdGggdGhlIHNtYWxsZXN0IHNldFxuICAgIGNvbnN0IGJhc2UgPSBzZXRzW21pbi5pbmRleF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpID09PSBtaW4uaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG90aGVyID0gc2V0c1tpXTtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBiYXNlKSB7XG4gICAgICAgICAgICBpZiAoIW90aGVyLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBiYXNlLmRlbGV0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJhc2U7XG59XG5jb25zdCB3aXRoVW5pb24gPSAndW5pb24nIGluIG5ldyBTZXQoKTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRVbmlvbihzZXQxLCBzZXQyKSB7XG4gICAgaWYgKHdpdGhVbmlvbikge1xuICAgICAgICBpZiAoc2V0MSkge1xuICAgICAgICAgICAgcmV0dXJuIHNldDEudW5pb24oc2V0Mik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNldDI7XG4gICAgfVxuICAgIGlmICghc2V0MSkge1xuICAgICAgICByZXR1cm4gbmV3IFNldChzZXQyKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZXQoWy4uLnNldDEsIC4uLnNldDJdKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXREaWZmZXJlbmNlKHNldDEsIHNldDIpIHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiBzZXQxKSB7XG4gICAgICAgIGlmICghc2V0Mi5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICByZXN1bHQuYWRkKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8gVGhpcyBjb2RlIGlzIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkbWFya2NsZW1lbnRzL2F0b21pYy1zbGVlcCwgTUlUIGxpY2Vuc2VkIGF0IHRoZSB0aW1lIG9mIGNvbW1pdCBiODE0OWQzY2EyNzZjODRhNTRmYThmYTE0NzhmOWNjNzlhYWJjMTVhLlxuLy8gQWxsIGNyZWRpdHMgZ28gdG8gdGhlIG9yaWdpbmFsIGF1dGhvciAoRGF2aWQgTWFyayBDbGVtZW50cywgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkbWFya2NsZW1lbnRzKS5cbmV4cG9ydCBmdW5jdGlvbiBzbGVlcChtcykge1xuICAgIGlmICh0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBdG9taWNzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBuaWwgPSBuZXcgSW50MzJBcnJheShuZXcgU2hhcmVkQXJyYXlCdWZmZXIoNCkpO1xuICAgICAgICBjb25zdCB2YWxpZCA9IG1zID4gMCAmJiBtcyA8IEluZmluaXR5O1xuICAgICAgICBpZiAodmFsaWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1zICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgbXMgIT09ICdiaWdpbnQnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdzbGVlcDogbXMgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcignc2xlZXA6IG1zIG11c3QgYmUgYSBudW1iZXIgdGhhdCBpcyBncmVhdGVyIHRoYW4gMCBidXQgbGVzcyB0aGFuIEluZmluaXR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgQXRvbWljcy53YWl0KG5pbCwgMCwgMCwgTnVtYmVyKG1zKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB2YWxpZCA9IG1zID4gMCAmJiBtcyA8IEluZmluaXR5O1xuICAgICAgICBpZiAodmFsaWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1zICE9PSAnbnVtYmVyJyAmJiB0eXBlb2YgbXMgIT09ICdiaWdpbnQnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdzbGVlcDogbXMgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcignc2xlZXA6IG1zIG11c3QgYmUgYSBudW1iZXIgdGhhdCBpcyBncmVhdGVyIHRoYW4gMCBidXQgbGVzcyB0aGFuIEluZmluaXR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gRGF0ZS5ub3coKSArIE51bWJlcihtcyk7XG4gICAgICAgIHdoaWxlICh0YXJnZXQgPiBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICAvKiBlbXB0eSAqL1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@orama/orama/dist/browser/utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js":
/*!***********************************************************!*\
  !*** ./node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createContentHighlighter: () => (/* binding */ createContentHighlighter)\n/* harmony export */ });\n// src/search/shared.ts\nfunction escapeRegExp(input) {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction buildRegexFromQuery(q) {\n  const trimmed = q.trim();\n  if (trimmed.length === 0) return null;\n  const terms = Array.from(\n    new Set(\n      trimmed.split(/\\s+/).map((t) => t.trim()).filter(Boolean)\n    )\n  );\n  if (terms.length === 0) return null;\n  const escaped = terms.map(escapeRegExp).join(\"|\");\n  return new RegExp(`(${escaped})`, \"gi\");\n}\nfunction createContentHighlighter(query) {\n  const regex = typeof query === \"string\" ? buildRegexFromQuery(query) : query;\n  return {\n    highlight(content) {\n      if (!regex) return [{ type: \"text\", content }];\n      const out = [];\n      let i = 0;\n      for (const match of content.matchAll(regex)) {\n        if (i < match.index) {\n          out.push({\n            type: \"text\",\n            content: content.substring(i, match.index)\n          });\n        }\n        out.push({\n          type: \"text\",\n          content: match[0],\n          styles: {\n            highlight: true\n          }\n        });\n        i = match.index + match[0].length;\n      }\n      if (i < content.length) {\n        out.push({\n          type: \"text\",\n          content: content.substring(i)\n        });\n      }\n      return out;\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9mdW1hZG9jcy1jb3JlL2Rpc3QvY2h1bmstQ05XRUdPVUYuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsdUJBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFIiwic291cmNlcyI6WyIvVXNlcnMvZG91Z2xhbmNlL0RldmVsb3Blci9vYy9hcmJpdHJ1bS1kb2NzL25vZGVfbW9kdWxlcy9mdW1hZG9jcy1jb3JlL2Rpc3QvY2h1bmstQ05XRUdPVUYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3NlYXJjaC9zaGFyZWQudHNcbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChpbnB1dCkge1xuICByZXR1cm4gaW5wdXQucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xufVxuZnVuY3Rpb24gYnVpbGRSZWdleEZyb21RdWVyeShxKSB7XG4gIGNvbnN0IHRyaW1tZWQgPSBxLnRyaW0oKTtcbiAgaWYgKHRyaW1tZWQubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgdGVybXMgPSBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQoXG4gICAgICB0cmltbWVkLnNwbGl0KC9cXHMrLykubWFwKCh0KSA9PiB0LnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pXG4gICAgKVxuICApO1xuICBpZiAodGVybXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgZXNjYXBlZCA9IHRlcm1zLm1hcChlc2NhcGVSZWdFeHApLmpvaW4oXCJ8XCIpO1xuICByZXR1cm4gbmV3IFJlZ0V4cChgKCR7ZXNjYXBlZH0pYCwgXCJnaVwiKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRlbnRIaWdobGlnaHRlcihxdWVyeSkge1xuICBjb25zdCByZWdleCA9IHR5cGVvZiBxdWVyeSA9PT0gXCJzdHJpbmdcIiA/IGJ1aWxkUmVnZXhGcm9tUXVlcnkocXVlcnkpIDogcXVlcnk7XG4gIHJldHVybiB7XG4gICAgaGlnaGxpZ2h0KGNvbnRlbnQpIHtcbiAgICAgIGlmICghcmVnZXgpIHJldHVybiBbeyB0eXBlOiBcInRleHRcIiwgY29udGVudCB9XTtcbiAgICAgIGNvbnN0IG91dCA9IFtdO1xuICAgICAgbGV0IGkgPSAwO1xuICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBjb250ZW50Lm1hdGNoQWxsKHJlZ2V4KSkge1xuICAgICAgICBpZiAoaSA8IG1hdGNoLmluZGV4KSB7XG4gICAgICAgICAgb3V0LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBjb250ZW50OiBjb250ZW50LnN1YnN0cmluZyhpLCBtYXRjaC5pbmRleClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBvdXQucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgY29udGVudDogbWF0Y2hbMF0sXG4gICAgICAgICAgc3R5bGVzOiB7XG4gICAgICAgICAgICBoaWdobGlnaHQ6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAoaSA8IGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICBjb250ZW50OiBjb250ZW50LnN1YnN0cmluZyhpKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQge1xuICBjcmVhdGVDb250ZW50SGlnaGxpZ2h0ZXJcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-KAOEMCTI.js":
/*!***********************************************************!*\
  !*** ./node_modules/fumadocs-core/dist/chunk-KAOEMCTI.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   removeUndefined: () => (/* binding */ removeUndefined)\n/* harmony export */ });\n// src/utils/remove-undefined.ts\nfunction removeUndefined(value, deep = false) {\n  const obj = value;\n  for (const key of Object.keys(obj)) {\n    if (obj[key] === void 0) delete obj[key];\n    if (deep && typeof obj[key] === \"object\" && obj[key] !== null) {\n      removeUndefined(obj[key], deep);\n    } else if (deep && Array.isArray(obj[key])) {\n      obj[key].forEach((v) => removeUndefined(v, deep));\n    }\n  }\n  return value;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9mdW1hZG9jcy1jb3JlL2Rpc3QvY2h1bmstS0FPRU1DVEkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL2Z1bWFkb2NzLWNvcmUvZGlzdC9jaHVuay1LQU9FTUNUSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvcmVtb3ZlLXVuZGVmaW5lZC50c1xuZnVuY3Rpb24gcmVtb3ZlVW5kZWZpbmVkKHZhbHVlLCBkZWVwID0gZmFsc2UpIHtcbiAgY29uc3Qgb2JqID0gdmFsdWU7XG4gIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9iaikpIHtcbiAgICBpZiAob2JqW2tleV0gPT09IHZvaWQgMCkgZGVsZXRlIG9ialtrZXldO1xuICAgIGlmIChkZWVwICYmIHR5cGVvZiBvYmpba2V5XSA9PT0gXCJvYmplY3RcIiAmJiBvYmpba2V5XSAhPT0gbnVsbCkge1xuICAgICAgcmVtb3ZlVW5kZWZpbmVkKG9ialtrZXldLCBkZWVwKTtcbiAgICB9IGVsc2UgaWYgKGRlZXAgJiYgQXJyYXkuaXNBcnJheShvYmpba2V5XSkpIHtcbiAgICAgIG9ialtrZXldLmZvckVhY2goKHYpID0+IHJlbW92ZVVuZGVmaW5lZCh2LCBkZWVwKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IHtcbiAgcmVtb3ZlVW5kZWZpbmVkXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-KAOEMCTI.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-KIJ7AMBP.js":
/*!***********************************************************!*\
  !*** ./node_modules/fumadocs-core/dist/chunk-KIJ7AMBP.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchAdvanced: () => (/* binding */ searchAdvanced),\n/* harmony export */   searchSimple: () => (/* binding */ searchSimple)\n/* harmony export */ });\n/* harmony import */ var _chunk_KAOEMCTI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-KAOEMCTI.js */ \"(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-KAOEMCTI.js\");\n/* harmony import */ var _chunk_CNWEGOUF_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-CNWEGOUF.js */ \"(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js\");\n/* harmony import */ var _orama_orama__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @orama/orama */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/index.js\");\n\n\n\n// src/search/orama/search/simple.ts\n\nasync function searchSimple(db, query, params = {}) {\n  const highlighter = (0,_chunk_CNWEGOUF_js__WEBPACK_IMPORTED_MODULE_1__.createContentHighlighter)(query);\n  const result = await (0,_orama_orama__WEBPACK_IMPORTED_MODULE_2__.search)(db, {\n    term: query,\n    tolerance: 1,\n    ...params,\n    boost: {\n      title: 2,\n      ...\"boost\" in params ? params.boost : void 0\n    }\n  });\n  return result.hits.map((hit) => ({\n    type: \"page\",\n    content: hit.document.title,\n    contentWithHighlights: highlighter.highlight(hit.document.title),\n    id: hit.document.url,\n    url: hit.document.url\n  }));\n}\n\n// src/search/orama/search/advanced.ts\n\nasync function searchAdvanced(db, query, tag = [], extraParams = {}) {\n  if (typeof tag === \"string\") tag = [tag];\n  let params = {\n    ...extraParams,\n    where: (0,_chunk_KAOEMCTI_js__WEBPACK_IMPORTED_MODULE_0__.removeUndefined)({\n      tags: tag.length > 0 ? {\n        containsAll: tag\n      } : void 0,\n      ...extraParams.where\n    }),\n    groupBy: {\n      properties: [\"page_id\"],\n      maxResult: 8,\n      ...extraParams.groupBy\n    }\n  };\n  if (query.length > 0) {\n    params = {\n      ...params,\n      term: query,\n      properties: [\"content\"]\n    };\n  }\n  const highlighter = (0,_chunk_CNWEGOUF_js__WEBPACK_IMPORTED_MODULE_1__.createContentHighlighter)(query);\n  const result = await (0,_orama_orama__WEBPACK_IMPORTED_MODULE_2__.search)(db, params);\n  const list = [];\n  for (const item of result.groups ?? []) {\n    const pageId = item.values[0];\n    const page = (0,_orama_orama__WEBPACK_IMPORTED_MODULE_2__.getByID)(db, pageId);\n    if (!page) continue;\n    list.push({\n      id: pageId,\n      type: \"page\",\n      content: page.content,\n      contentWithHighlights: highlighter.highlight(page.content),\n      url: page.url\n    });\n    for (const hit of item.result) {\n      if (hit.document.type === \"page\") continue;\n      list.push({\n        id: hit.document.id.toString(),\n        content: hit.document.content,\n        contentWithHighlights: highlighter.highlight(hit.document.content),\n        type: hit.document.type,\n        url: hit.document.url\n      });\n    }\n  }\n  return list;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9mdW1hZG9jcy1jb3JlL2Rpc3QvY2h1bmstS0lKN0FNQlAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFNkI7QUFHQTs7QUFFN0I7QUFDc0M7QUFDdEMsa0RBQWtEO0FBQ2xELHNCQUFzQiw0RUFBd0I7QUFDOUMsdUJBQXVCLG9EQUFNO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUMwRDtBQUMxRCxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtRUFBZTtBQUMxQjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDRFQUF3QjtBQUM5Qyx1QkFBdUIsb0RBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBS0UiLCJzb3VyY2VzIjpbIi9Vc2Vycy9kb3VnbGFuY2UvRGV2ZWxvcGVyL29jL2FyYml0cnVtLWRvY3Mvbm9kZV9tb2R1bGVzL2Z1bWFkb2NzLWNvcmUvZGlzdC9jaHVuay1LSUo3QU1CUC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICByZW1vdmVVbmRlZmluZWRcbn0gZnJvbSBcIi4vY2h1bmstS0FPRU1DVEkuanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUNvbnRlbnRIaWdobGlnaHRlclxufSBmcm9tIFwiLi9jaHVuay1DTldFR09VRi5qc1wiO1xuXG4vLyBzcmMvc2VhcmNoL29yYW1hL3NlYXJjaC9zaW1wbGUudHNcbmltcG9ydCB7IHNlYXJjaCB9IGZyb20gXCJAb3JhbWEvb3JhbWFcIjtcbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFNpbXBsZShkYiwgcXVlcnksIHBhcmFtcyA9IHt9KSB7XG4gIGNvbnN0IGhpZ2hsaWdodGVyID0gY3JlYXRlQ29udGVudEhpZ2hsaWdodGVyKHF1ZXJ5KTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VhcmNoKGRiLCB7XG4gICAgdGVybTogcXVlcnksXG4gICAgdG9sZXJhbmNlOiAxLFxuICAgIC4uLnBhcmFtcyxcbiAgICBib29zdDoge1xuICAgICAgdGl0bGU6IDIsXG4gICAgICAuLi5cImJvb3N0XCIgaW4gcGFyYW1zID8gcGFyYW1zLmJvb3N0IDogdm9pZCAwXG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdC5oaXRzLm1hcCgoaGl0KSA9PiAoe1xuICAgIHR5cGU6IFwicGFnZVwiLFxuICAgIGNvbnRlbnQ6IGhpdC5kb2N1bWVudC50aXRsZSxcbiAgICBjb250ZW50V2l0aEhpZ2hsaWdodHM6IGhpZ2hsaWdodGVyLmhpZ2hsaWdodChoaXQuZG9jdW1lbnQudGl0bGUpLFxuICAgIGlkOiBoaXQuZG9jdW1lbnQudXJsLFxuICAgIHVybDogaGl0LmRvY3VtZW50LnVybFxuICB9KSk7XG59XG5cbi8vIHNyYy9zZWFyY2gvb3JhbWEvc2VhcmNoL2FkdmFuY2VkLnRzXG5pbXBvcnQgeyBnZXRCeUlELCBzZWFyY2ggYXMgc2VhcmNoMiB9IGZyb20gXCJAb3JhbWEvb3JhbWFcIjtcbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaEFkdmFuY2VkKGRiLCBxdWVyeSwgdGFnID0gW10sIGV4dHJhUGFyYW1zID0ge30pIHtcbiAgaWYgKHR5cGVvZiB0YWcgPT09IFwic3RyaW5nXCIpIHRhZyA9IFt0YWddO1xuICBsZXQgcGFyYW1zID0ge1xuICAgIC4uLmV4dHJhUGFyYW1zLFxuICAgIHdoZXJlOiByZW1vdmVVbmRlZmluZWQoe1xuICAgICAgdGFnczogdGFnLmxlbmd0aCA+IDAgPyB7XG4gICAgICAgIGNvbnRhaW5zQWxsOiB0YWdcbiAgICAgIH0gOiB2b2lkIDAsXG4gICAgICAuLi5leHRyYVBhcmFtcy53aGVyZVxuICAgIH0pLFxuICAgIGdyb3VwQnk6IHtcbiAgICAgIHByb3BlcnRpZXM6IFtcInBhZ2VfaWRcIl0sXG4gICAgICBtYXhSZXN1bHQ6IDgsXG4gICAgICAuLi5leHRyYVBhcmFtcy5ncm91cEJ5XG4gICAgfVxuICB9O1xuICBpZiAocXVlcnkubGVuZ3RoID4gMCkge1xuICAgIHBhcmFtcyA9IHtcbiAgICAgIC4uLnBhcmFtcyxcbiAgICAgIHRlcm06IHF1ZXJ5LFxuICAgICAgcHJvcGVydGllczogW1wiY29udGVudFwiXVxuICAgIH07XG4gIH1cbiAgY29uc3QgaGlnaGxpZ2h0ZXIgPSBjcmVhdGVDb250ZW50SGlnaGxpZ2h0ZXIocXVlcnkpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZWFyY2gyKGRiLCBwYXJhbXMpO1xuICBjb25zdCBsaXN0ID0gW107XG4gIGZvciAoY29uc3QgaXRlbSBvZiByZXN1bHQuZ3JvdXBzID8/IFtdKSB7XG4gICAgY29uc3QgcGFnZUlkID0gaXRlbS52YWx1ZXNbMF07XG4gICAgY29uc3QgcGFnZSA9IGdldEJ5SUQoZGIsIHBhZ2VJZCk7XG4gICAgaWYgKCFwYWdlKSBjb250aW51ZTtcbiAgICBsaXN0LnB1c2goe1xuICAgICAgaWQ6IHBhZ2VJZCxcbiAgICAgIHR5cGU6IFwicGFnZVwiLFxuICAgICAgY29udGVudDogcGFnZS5jb250ZW50LFxuICAgICAgY29udGVudFdpdGhIaWdobGlnaHRzOiBoaWdobGlnaHRlci5oaWdobGlnaHQocGFnZS5jb250ZW50KSxcbiAgICAgIHVybDogcGFnZS51cmxcbiAgICB9KTtcbiAgICBmb3IgKGNvbnN0IGhpdCBvZiBpdGVtLnJlc3VsdCkge1xuICAgICAgaWYgKGhpdC5kb2N1bWVudC50eXBlID09PSBcInBhZ2VcIikgY29udGludWU7XG4gICAgICBsaXN0LnB1c2goe1xuICAgICAgICBpZDogaGl0LmRvY3VtZW50LmlkLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IGhpdC5kb2N1bWVudC5jb250ZW50LFxuICAgICAgICBjb250ZW50V2l0aEhpZ2hsaWdodHM6IGhpZ2hsaWdodGVyLmhpZ2hsaWdodChoaXQuZG9jdW1lbnQuY29udGVudCksXG4gICAgICAgIHR5cGU6IGhpdC5kb2N1bWVudC50eXBlLFxuICAgICAgICB1cmw6IGhpdC5kb2N1bWVudC51cmxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbGlzdDtcbn1cblxuZXhwb3J0IHtcbiAgc2VhcmNoU2ltcGxlLFxuICBzZWFyY2hBZHZhbmNlZFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-KIJ7AMBP.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/fumadocs-core/dist/static-IWYDJ3C5.js":
/*!************************************************************!*\
  !*** ./node_modules/fumadocs-core/dist/static-IWYDJ3C5.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   search: () => (/* binding */ search)\n/* harmony export */ });\n/* harmony import */ var _chunk_KIJ7AMBP_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-KIJ7AMBP.js */ \"(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-KIJ7AMBP.js\");\n/* harmony import */ var _chunk_KAOEMCTI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-KAOEMCTI.js */ \"(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-KAOEMCTI.js\");\n/* harmony import */ var _chunk_CNWEGOUF_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-CNWEGOUF.js */ \"(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-CNWEGOUF.js\");\n/* harmony import */ var _chunk_JSBRDJBE_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-JSBRDJBE.js */ \"(app-pages-browser)/./node_modules/fumadocs-core/dist/chunk-JSBRDJBE.js\");\n/* harmony import */ var _orama_orama__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @orama/orama */ \"(app-pages-browser)/./node_modules/@orama/orama/dist/browser/index.js\");\n\n\n\n\n\n// src/search/client/static.ts\n\nvar cache = /* @__PURE__ */ new Map();\nasync function loadDB({\n  from = \"/api/search\",\n  initOrama = (locale) => (0,_orama_orama__WEBPACK_IMPORTED_MODULE_4__.create)({ schema: { _: \"string\" }, language: locale })\n}) {\n  const cacheKey = from;\n  const cached = cache.get(cacheKey);\n  if (cached) return cached;\n  async function init() {\n    const res = await fetch(from);\n    if (!res.ok)\n      throw new Error(\n        `failed to fetch exported search indexes from ${from}, make sure the search database is exported and available for client.`\n      );\n    const data = await res.json();\n    const dbs = /* @__PURE__ */ new Map();\n    if (data.type === \"i18n\") {\n      await Promise.all(\n        Object.entries(data.data).map(async ([k, v]) => {\n          const db2 = await initOrama(k);\n          (0,_orama_orama__WEBPACK_IMPORTED_MODULE_4__.load)(db2, v);\n          dbs.set(k, {\n            type: v.type,\n            db: db2\n          });\n        })\n      );\n      return dbs;\n    }\n    const db = await initOrama();\n    (0,_orama_orama__WEBPACK_IMPORTED_MODULE_4__.load)(db, data);\n    dbs.set(\"\", {\n      type: data.type,\n      db\n    });\n    return dbs;\n  }\n  const result = init();\n  cache.set(cacheKey, result);\n  return result;\n}\nasync function search(query, options) {\n  const { tag, locale } = options;\n  const db = (await loadDB(options)).get(locale ?? \"\");\n  if (!db) return [];\n  if (db.type === \"simple\")\n    return (0,_chunk_KIJ7AMBP_js__WEBPACK_IMPORTED_MODULE_0__.searchSimple)(db, query);\n  return (0,_chunk_KIJ7AMBP_js__WEBPACK_IMPORTED_MODULE_0__.searchAdvanced)(db.db, query, tag);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9mdW1hZG9jcy1jb3JlL2Rpc3Qvc3RhdGljLUlXWURKM0M1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUc2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFN0I7QUFDNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9EQUFNLEdBQUcsVUFBVSxhQUFhLG9CQUFvQjtBQUM5RSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsS0FBSztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0RBQUk7QUFDZDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrREFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsY0FBYztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdFQUFZO0FBQ3ZCLFNBQVMsa0VBQWM7QUFDdkI7QUFHRSIsInNvdXJjZXMiOlsiL1VzZXJzL2RvdWdsYW5jZS9EZXZlbG9wZXIvb2MvYXJiaXRydW0tZG9jcy9ub2RlX21vZHVsZXMvZnVtYWRvY3MtY29yZS9kaXN0L3N0YXRpYy1JV1lESjNDNS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBzZWFyY2hBZHZhbmNlZCxcbiAgc2VhcmNoU2ltcGxlXG59IGZyb20gXCIuL2NodW5rLUtJSjdBTUJQLmpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLUtBT0VNQ1RJLmpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLUNOV0VHT1VGLmpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLUpTQlJESkJFLmpzXCI7XG5cbi8vIHNyYy9zZWFyY2gvY2xpZW50L3N0YXRpYy50c1xuaW1wb3J0IHsgY3JlYXRlLCBsb2FkIH0gZnJvbSBcIkBvcmFtYS9vcmFtYVwiO1xudmFyIGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmFzeW5jIGZ1bmN0aW9uIGxvYWREQih7XG4gIGZyb20gPSBcIi9hcGkvc2VhcmNoXCIsXG4gIGluaXRPcmFtYSA9IChsb2NhbGUpID0+IGNyZWF0ZSh7IHNjaGVtYTogeyBfOiBcInN0cmluZ1wiIH0sIGxhbmd1YWdlOiBsb2NhbGUgfSlcbn0pIHtcbiAgY29uc3QgY2FjaGVLZXkgPSBmcm9tO1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY2FjaGVLZXkpO1xuICBpZiAoY2FjaGVkKSByZXR1cm4gY2FjaGVkO1xuICBhc3luYyBmdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGZyb20pO1xuICAgIGlmICghcmVzLm9rKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgZmFpbGVkIHRvIGZldGNoIGV4cG9ydGVkIHNlYXJjaCBpbmRleGVzIGZyb20gJHtmcm9tfSwgbWFrZSBzdXJlIHRoZSBzZWFyY2ggZGF0YWJhc2UgaXMgZXhwb3J0ZWQgYW5kIGF2YWlsYWJsZSBmb3IgY2xpZW50LmBcbiAgICAgICk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgY29uc3QgZGJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBpZiAoZGF0YS50eXBlID09PSBcImkxOG5cIikge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YSkubWFwKGFzeW5jIChbaywgdl0pID0+IHtcbiAgICAgICAgICBjb25zdCBkYjIgPSBhd2FpdCBpbml0T3JhbWEoayk7XG4gICAgICAgICAgbG9hZChkYjIsIHYpO1xuICAgICAgICAgIGRicy5zZXQoaywge1xuICAgICAgICAgICAgdHlwZTogdi50eXBlLFxuICAgICAgICAgICAgZGI6IGRiMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBkYnM7XG4gICAgfVxuICAgIGNvbnN0IGRiID0gYXdhaXQgaW5pdE9yYW1hKCk7XG4gICAgbG9hZChkYiwgZGF0YSk7XG4gICAgZGJzLnNldChcIlwiLCB7XG4gICAgICB0eXBlOiBkYXRhLnR5cGUsXG4gICAgICBkYlxuICAgIH0pO1xuICAgIHJldHVybiBkYnM7XG4gIH1cbiAgY29uc3QgcmVzdWx0ID0gaW5pdCgpO1xuICBjYWNoZS5zZXQoY2FjaGVLZXksIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5hc3luYyBmdW5jdGlvbiBzZWFyY2gocXVlcnksIG9wdGlvbnMpIHtcbiAgY29uc3QgeyB0YWcsIGxvY2FsZSB9ID0gb3B0aW9ucztcbiAgY29uc3QgZGIgPSAoYXdhaXQgbG9hZERCKG9wdGlvbnMpKS5nZXQobG9jYWxlID8/IFwiXCIpO1xuICBpZiAoIWRiKSByZXR1cm4gW107XG4gIGlmIChkYi50eXBlID09PSBcInNpbXBsZVwiKVxuICAgIHJldHVybiBzZWFyY2hTaW1wbGUoZGIsIHF1ZXJ5KTtcbiAgcmV0dXJuIHNlYXJjaEFkdmFuY2VkKGRiLmRiLCBxdWVyeSwgdGFnKTtcbn1cbmV4cG9ydCB7XG4gIHNlYXJjaFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/fumadocs-core/dist/static-IWYDJ3C5.js\n"));

/***/ })

}]);